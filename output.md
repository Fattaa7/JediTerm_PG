

---

# Page 8

P2_Valeo_Generic Documentation
Latest Version Info: Latest Version Info:
ComponentLast
VersionCommit Text
P2_Valeo_Generic 0.0.3 Firmware Initial Revision
MCONTROL 0.51.1 Add: UnderrunByHw message to RangeChangeCause for Clamp module
TOE_DRIVER_V1 0.0.6 Add: ApiInit function to perform init as soon as external equipment is ready
Ethernet_V1 0.11.0 Add: APIs PhyReadRegister and PhyDump for debugging.
XCP 0.1.1 Fix signed types of message TestValueRangeSigned
BAP_V1 0.0.6 Add: API configureBapTimeout
BIP_46 0.0.4 Add: more doc
Can Slave 0.0.1 Initial Version
CAN_V3 0.4.0 Add: StopRxAckSpecificFrame Function
DIAG_V2 0.4.5 Add: EnablePadding API
DIAGSLAVE_V1 0.0.1 Initial Version
Flexray_V2 0.0.18 Add: FlexrayBap Interface
Ethernet_diag_v1 0.4.0 Add: Add SelectControlMsgForCyclicSend API in Hsfz interface
LIN_V2 0.7.0 Add : DisableFrameCrcCheck
upa_pip3x_v1 0.1.0 initial version
sensor_v2 0.13.1 Add init RAM only API
io_v2 0.0.8 Add: Parameter Heavy_noise, descriptions
WheelTicks 0.2.0 Add: boolean to check whether the steering wheel angle signal is signed or not
mipc 0.6.0 Add interrupt-based reset
fc_pip_v1 0.0.1 Initial FcPipIo interface
meu 0.6.0 Implementation of MEU (MobileEye interprocess com over UART) protocl
vls_pip_v1 0.0.1 Initial VlsPipIo interface
PwmGenerator 0.0.2 Enhance the module to support multiple instances and Fix StopPWM bug
zc_pip_v1 0.0.1 Initial VlsPipIo interface
PWM_V1 0.0.5 Fix race condition in reader task.
Pip_Io 0.0.1 Initial VlsPipIo interface
upa_pip_usv10 2.8.1 Add new signalValue object "SensorsVoltage_mv" to check the usv sensors voltage on power on/off"
tcu_artemis_pip 1.0.0 Initial Version
RAD_PIP_13_V1 0.0.15 Chg: Add SetBusTimingRegisterLlst Api And SetErrorLimit Api
ADCREADER 0.0.6 Removing AdcCore completly because ADCCore will be handled internally.
AngleDataSync 0.0.4 Add Api Record DetectionList Frame
radar_pip 1.0.0 Initial Version
tcm_epip_v1 0.0.3 Organizing the Objects and Interfaces for the GenericFW
EdgeTrace_v2 0.4.0 import Sequence_LogAnalysis from vw_hud_pipp edgetrace_v2.c5c
RLT_PIP_6_V2 0.0.1 initial
ITC_STEPPER_MOTOR 0.0.6 Add APIs ConfigRegister_Event() and AutoClearFault
VideoProcessor_HUD 0.0.2 Add SuspendOverWriteSpecific API.
LCD_TFT_HUD 0.0.1 Initial version.
ITC_BACKLIGHT_FEATURE2.0.0Version 2 with some enhancements and adding other modes (OVERHEAD_MODE, SYNCHED_T_ON,
DELAYED_T_ON and SYNCHED_DELAY )
ITC_IIC_SLAVE_HW 0.0.15 Add Enhanced and Optmized IP Core and some Additional APIs
EthernetFilter 0.0.2 Add Initial Version of the module that support basic functionalities
HOD 1.0.0 Initial Version
SwsRoller 0.0.1 First Version Of SWS Roller
Go to full history
Options Options
sysgen Com: Bp
sysgen Com: PcEthernet
sysgen SourceConfig: P2_Valeo_Generic.c5c
Interfaces Interfaces
Interface: GenCloneable  extends _Object
Enumerations
Clear
 Type to Search, Press Ctrl+f or F3 ..
Table of Contents

---

# Page 9

Enum1
Functions
DisplayData
SetUserTag
_Init
Messages
GeneralMessage
Enumerations
Enum: Enum1
Value
Value1
Value2
Value3
Functions
Function: DisplayData
Description: Display Cloneable Object data
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: _Init
Description: Init Cloneable Object
Parameters:
Name Type EncodedType
GenSignalint _Signal
GenEnumEnum1int
GenBoolbooleanbool
GenUint8int uint8
GenUint16int uint16
GenUint32int uint32
GenUint64long uint64
GenInt8 int int8
GenInt16 int int16
GenInt32 int int32
GenInt64 long int64
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: SensorsMux  extends BaseSensors _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define

---

# Page 10

the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: Calibrate  extends _Object
Description: Calibrate Castle HW This module provides the necessary APIs to set up and manage the calibration process for
Castle HW.
Enumerations
Component
NotCalibratedCause
Functions
Commit
CommitDataGet
CommitV3
DeleteCalibration
DowngradeToV2
GetComponentSerial
IsComponentSupported
SetUserTag
ValueGet
ValueSet
Messages
CommitConfirm
CommitDataGet
ComponentNotSupported
ComponentSupportedState
EepromSerialGet
GeneralMessage
Migration
NotCalibrated
ReadEeprom
ValueGet
Enumerations
Enum: Component
Value
Base
BIP
PIP
EPIP
DUT
Enum: NotCalibratedCause
Value
Empty
Crc
Length
Version
EepromAccess
Functions
Function: Commit
Description: 
Purpose: 

---

# Page 11

-This function is deprecated. Please use CommitV3 instead. 
Parameters:
Name Type EncodedType
ComponentComponentint
Year int uint16
Month int uint8
Day int uint8
Hour int uint8
Minute int uint8
Second int uint8
Response timeout: 1000
Result Message: CommitConfirm 
Faults: 
Function: CommitDataGet
Description: 
Purpose: 
-Get the data committed once PIM or HW are calibrated. This data includes the serial number and uniqueID (unique
identifier) for the chosen component. 
-The available components are: 
-Base: Base board for Castle 6 
-BIP : Bus Interface PCB 
-PIP : Product Interface PCBs 
-EPIP: Extended Product Interface PCBs 
-DUT : Device Under Test 
-The PIM module can include one or more of the previously mentioned components. The PIM serial number or uniqueID
(unique identifier) is the same as the Base component's for Castle 5 and Castle 6. 
Return Messages: 
-On Success: Logs "CommitDataGet" if the PIM or HW is calibrated 
-On Failure: Logs "NotCalibrated" if the PIM or HW is not calibrated 
-On Failure: Logs "ComponentNotSupported" if the PIM or HW is not supported for calibration 
Example: 
*_ApiCommitDataGet(ItfCalibrate.EnmComponent.Base) 
Parameters:
Name Type EncodedType
ComponentComponentint
Response timeout: 0
Result Message: CommitDataGet 
Faults: NotCalibrated ComponentNotSupported 
Function: CommitV3
Description: 
Purpose: 
-Start to write commit data to EEPROM. 
Example: 
*_ApiCommitV3(Base, ASA-ML, 1234, 5, 0, 3, 0, 0, 1, 2025, 4, 17, 15, 20, 20) 
Parameters:
Name Type EncodedTypeFormatMaxlength
Component Componentint - -
HwTypeName int[] uint8 utf8 16
Serial int uint16 -
HwVersionMajorint uint8 -
HwVersionMinorint uint8 -
HwVersionPatchint uint8 -
HwPatchMajor int uint8 -
HwPatchMinor int uint8 -
HwPatchPatch int uint8 -
CommitYear int uint16 -
CommitMonth int uint8 -
CommitDay int uint8 -
CommitHour int uint8 -
CommitMinute int uint8 -
CommitSecondint uint8 -
Response timeout: 1000
Result Message: CommitConfirm 

---

# Page 12

Faults: 
Function: DeleteCalibration
Description: 
Purpose: 
-Delete the calibration parameters from EEPROM. 
Example: 
*_ApiDeleteCalibration(ItfCalibrate.EnmComponent.Base) 
Parameters:
Name Type EncodedType
ComponentComponentint
Response timeout: 1000
Result Message: CommitConfirm 
Faults: 
Function: DowngradeToV2
Description: 
Purpose: 
-This shall be only used to keep commit data compatible to older projects. 
-The authentication key is 2585 
Example: 
*_ApiDowngradeToV2(2585) 
Parameters:
Name Type EncodedType
Authenticationint int32
Component Componentint
Response timeout: 1000
Result Message: CommitConfirm 
Faults: 
Function: GetComponentSerial
Description: 
Purpose: 
-Get the component serial number or uniqueID (unique identifier) from EEPROM for Castle 6, which is 16 bytes long. The
available components are: 
-Base: Base board for Castle 6 
-BIP : Bus Interface PCB 
-PIP : Product Interface PCBs 
-EPIP: Extended Product Interface PCBs 
-DUT : Device Under Test 
Example: 
*_ApiGetComponentSerial(ItfCalibrate.EnmComponent.Base) 
Parameters:
Name Type EncodedType
ComponentComponentint
Response timeout: 1000
Result Message: EepromSerialGet 
Faults: 
Function: IsComponentSupported
Description: 
Purpose: 
-Reports the supported state without causing an error. This is needed to query all date in the preamble task, where no
errors are acceptable. 
-State 1 supported, State 0 unsupported 
Example: 
*_ApiIsComponentSupported(ItfCalibrate.EnmComponent.Base) 
Parameters:
Name Type EncodedType
ComponentComponentint
Response timeout: 0
Result Message: ComponentSupportedState 
Faults: 

---

# Page 13

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: ValueGet
Description: 
Purpose: 
-Get the offset and scale values for a slot ID from EEPROM. 
Example: 
*_ApiValueGet(ItfCalibrate.EnmComponent.Base, 5) 
Parameters:
Name Type EncodedType
ComponentComponentint
SlotId int int16
Response timeout: 0
Result Message: ValueGet 
Faults: 
Function: ValueSet
Description: 
Purpose: 
-Set the offset and scale values for a slot ID in EEPROM. 
Example: 
*_ApiValueSet(ItfCalibrate.EnmComponent.Base, 5, 10, 8) 
Parameters:
Name Type EncodedTypeScaleUnit
ComponentComponentint - -
SlotId int int16
Offset int int32
Scale int int32 0.0001Δ%
back to interface definition
Messages
Message: CommitConfirm
Parameters:
Name Type EncodedType
ComponentComponentint
Message: CommitDataGet
Parameters:
Name Type EncodedTypeFormat
Component Componentint -
HwTypeName int[] uint8 utf8
Serial int uint16
HwVersionMajorint uint8
HwVersionMinorint uint8
HwVersionPatchint uint8
HwPatchMajor int uint8
HwPatchMinor int uint8
HwPatchPatch int uint8
UniqueId int[] uint8 raw
Year int uint16
Month int uint8
Day int uint8
Hour int uint8
Minute int uint8
Second int uint8

---

# Page 14

Message: ComponentNotSupported
Parameters:
Name Type EncodedType
ComponentComponentint
Message: ComponentSupportedState
Parameters:
Name Type EncodedType
ComponentComponentint
Supportedboolean bool
Message: EepromSerialGet
Parameters:
NameTypeEncodedTypeFormat
Serialint[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Migration
Parameters:
Name Type EncodedType
Component Component int
Cause NotCalibratedCauseint
OldVersion int uint32
CurrentVersionint uint32
Message: NotCalibrated
Description: 
Purpose: 
-When the PIM or HW is not calibrated, a warning message is logged. Upon startup of the CTE for Castle 5 and Castle 6,
the firmware checks if the PIM or HW is calibrated and logs a warning if it is not. 
Parameters:
Name Type EncodedType
Component Component int
Cause NotCalibratedCauseint
Value int uint32
ValueExpectedint uint32
Message: ReadEeprom
Parameters:
NameTypeEncodedType
Data int[]uint8
Message: ValueGet
Parameters:
Name Type EncodedTypeScaleUnit
ComponentComponentint - -
SlotId int int16
Offset int int32
Scale int int32 0.0001Δ%
back to interface definition
Interface: PsIic  extends _Object
Functions
Receive
Send
SetUserTag
Messages
GeneralMessage
ReceiveResponse

---

# Page 15

Events
SendCompleted
Objects
Functions
Function: Receive
Parameters:
NameTypeEncodedType
Bus int uint8
Deviceint uint8
Lengthint int32
Function: Send
Parameters:
NameTypeEncodedType
Bus int uint8
Deviceint uint8
Bufferint[]uint8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: ReceiveResponse
Parameters:
NameTypeEncodedType
Bufferint[]uint8
back to interface definition
Events
Event: SendCompleted
back to interface definition
Interface: StopWatch  extends _Object
Enumerations
Mode
Functions
CheckStarted
CheckStopped
Reset
SetMode
SetName
SetUserTag
Start
Stop
Messages
GeneralMessage
NotInReset
NotStarted
NotStopped
StartedByEvent

---

# Page 16

StoppedByEvent
Receivers
Start
Stop
Enumerations
Enum: Mode
Value
STRICT
RELAXED
Functions
Function: CheckStarted
Description: 
Purpose: 
Checks if the StopWatch object has been started and generates an error if it has not. 
Example: 
*_ApiCheckStarted();
Function: CheckStopped
Description: 
Purpose: 
Checks if the StopWatch object has been stopped and generates an error if it has not. 
Example: 
*_ApiCheckStopped();
Function: Reset
Description: 
Purpose: 
Resets the StopWatch object, setting the elapsed time to zero and preparing it for a new timing interval. 
Example: 
*_ApiReset();
Function: SetMode
Description: 
Purpose: 
Sets the operation mode to STRICT (the allowed order is Rest -> Start -> Stop. In any other case the system generates an
error) or RELAXED (Reset/Start/Stop can be called in any order). The default operation is STRICT. 
Example: 
*_ApiSetMode(enmMode.STRICT);
Parameters:
NameTypeEncodedType
ModeModeint
STRICT | RELAXED
Function: SetName
Description: 
Purpose: 
Sets an optional name for the StopWatch object. This name can be used for identification and logging purposes. 
Example: 
*_ApiSetName("MyStopWatch");
Parameters:
NameTypeEncodedType Format
Nameint[] uint8 utf8
Optional Name of up to 32
characters.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user

---

# Page 17

tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: Start
Description: 
Purpose: 
Starts the StopWatch object, initiating the timing interval. 
Example: 
*_ApiStart();
Function: Stop
Description: 
Purpose: 
Stops the StopWatch object, recording the elapsed time since the start. 
Example: 
*_ApiStop();
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NotInReset
Message: NotStarted
Message: NotStopped
Message: StartedByEvent
Description: The stopwatch was started by event
Parameters:
NameTypeEncodedType Format
Nameint[] uint8 utf8
Optional Name of up to 32
characters.
Message: StoppedByEvent
Description: The stopwatch was stopped by event
Parameters:
NameTypeEncodedType Format
Nameint[] uint8 utf8
Optional Name of up to 32
characters.
back to interface definition
Receivers
Receiver: Start
Receiver: Stop
back to interface definition
Objects
Object: Result
Description: Result value is assigned when stopping the stop watch.

---

# Page 18

NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
Result_SignalSignalint 0 0.001ms4 false false
back to interface definition
Interface: Timer  extends _Object
Functions
CheckStarted
CheckStopped
Reset
SetName
SetUserTag
StartInterval
StartOnce
Stop
Messages
GeneralMessage
NotStarted
NotStopped
Events
TimerOverflow
Objects
Functions
Function: CheckStarted
Description: 
Purpose: 
Generate an error if not yet started 
Example: 
*_ApiCheckStarted();
Function: CheckStopped
Description: 
Purpose: 
Generate an error if not yet stopped. 
Example: 
*_ApiCheckStopped();
Function: Reset
Description: 
Purpose: 
Resets the timer. 
Example: 
*_ApiReset();
Function: SetName
Description: 
Purpose: 
Starts the timer to trigger the "TimerOverflow" event every "interval" microseconds. 
Example: 
*_ApiStartInterval(1000);
Parameters:
NameTypeEncodedType Format
Nameint[] uint8 utf8
Optional Name of up to 32
characters.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 19

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartInterval
Description: 
Purpose: 
Starts the timer to trigger the "TimerOverflow" event every "interval" microseconds. 
Example: 
*_ApiStartInterval(1000);
Parameters:
NameType EncodedType Unit
intervallong uint64 us
The time interval in microseconds between each "TimerOverflow"
event.
Function: StartOnce
Description: 
Purpose: 
Starts the timer to trigger the "TimerOverflow" event after "duration" microseconds. 
Example: 
*_ApiStartOnce(5000);
Parameters:
Name TypeEncodedTypeUnit
durationlonguint64 us
Function: Stop
Description: 
Purpose: 
Stops the timer. 
Example: 
*_ApiStop();
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NotStarted
Message: NotStopped
back to interface definition
Events
Event: TimerOverflow
back to interface definition
Interface: CycleStats  extends _Object
Functions
LogStats
SetUserTag
StartNow
StartOnNextTrigger
StopAndDisconnectEvent
Messages
GeneralMessage
Stats
Receivers
Trigger

---

# Page 20

Functions
Function: LogStats
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartNow
Function: StartOnNextTrigger
Function: StopAndDisconnectEvent
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Stats
Parameters:
Name TypeEncodedTypeScaleUnit
CycleMin int uint32 0.001ms
CycleAvg int uint32 0.001ms
CycleMax int uint32 0.001ms
CycleStandardDeviationint uint32 0.001ms
back to interface definition
Receivers
Receiver: Trigger
back to interface definition
Interface: TriggerInput  extends _Object
Description: 
This module monitors a hardware digital signal on one of 32 channels of the TriggerInput Object. It triggers events (FirstRise,
FirstFall, SecondRise, SecondFall) based on signal edges, allowing the use of PauseUntilEvent to synchronize with these
hardware events in the firmware or testcases. 
Enumerations
EdgeType
Functions
Arm
Disarm
SetUserTag
Messages
FirstFall
FirstRise
GeneralMessage
SecondFall
SecondRise
Events
FirstRise
FirstFall
SecondRise
SecondFall
Objects
Line

---

# Page 21

Enumerations
Enum: EdgeType
Value
NONE
RISE
FALL
Functions
Function: Arm
Description: 
Purpose: 
Arms the trigger input to detect specified edge types on a selected channel. 
Example: 
*_ApiArm(0x01, RISE, FALL); //Arms the trigger input on channel 1 to detect a rising edge followed by a falling edge. 
Parameters:
Name Type EncodedType
Channelint uint8
Select a channel 0 .. 31.
FirstEdgeEdgeType int
The first edge type to detect (NONE is not allowed).
SecondEdgeEdgeType int
The second edge type to detect. If NONE is given, only the first edge is
detected.
Function: Disarm
Description: 
Purpose: Disarms the trigger input, stopping edge detection. 
Example: 
*_ApiDisarm(); //Disarms the trigger input. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: FirstFall
Message: FirstRise
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: SecondFall
Message: SecondRise
back to interface definition
Events
Event: FirstRise
Event: FirstFall
Event: SecondRise

---

# Page 22

Event: SecondFall
back to interface definition
Objects
Object: Line
Description: Passive Input Signal with the current line state.
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Line _SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: PerformanceMonitor  extends _Object
Description: 
Purpose: 
- This interface provides functions and messages to monitor and log performance-related information, such as scheduling delays
and task execution durations. 
- It allows configuring limits for warnings and errors, and setting logging options to manage the level of details and frequency of
performance logs. 
Background: 
- Castle runs on RTOS (real time operating system). the OS used by castle devide its work to sub tasks, and the scheduler is
responsible for 
- executing the right task at the right time. we say task is delayed when some task exceeds its predefined time or period. and we
say the task violated its duration run if it exceeded the expected time to execute 
Functions
LogRunDurations
SetDelayLimits
SetDurationLimits
SetLoggingOptions
SetUserTag
Messages
GeneralMessage
RunDurations
SchedulingDelays
Functions
Function: LogRunDurations
Description: 
Purpose: 
Triggers the logging of task run durations based on the configured duration limits and logging options. 
Example: 
objPerformanceMonitor().afcLogRunDurations(); // Initiates the logging of task execution durations. 
Dependency: 
Duration limits and logging options should be configured before calling this function by calling 'SetDurationLimits' API. 
Function: SetDelayLimits
Description: 
Purpose: 
Configures the maximum allowed delays for scheduling, when a task exceeds this time limit, warnings or errors will be
logged. 
Example: 
objPerformanceMonitor().afcSetDelayLimits(100, 200); // Sets a warning limit of 100µs and an error limit of 200µs for any
scheduled task. 
Parameters:
Name Type EncodedType Unit
MaxDelayWarnint int32 µs
The maximum delay, after that it will trigger a
warning.
MaxDelayErrorint int32 µs
The maximum delay, after that it will trigger an error.
Function: SetDurationLimits

---

# Page 23

Description: 
Purpose: 
- Configures the maximum allowed execution durations for tasks, when a task exceeds this time limit, warnings or errors
will be logged. 
- This function differentiates between normal and background task durations. 
Example: 
objPerformanceMonitor().afcSetDurationLimits(500, 1000, 1000, 2000); 
// Sets a warning limit of 500µs and an error limit of 1000µs for normal task durations. 
// Sets a warning limit of 1000µs and an error limit of 2000µs for background task durations. 
Parameters:
Name Type EncodedType Unit
MaxDurationWarnint int32 µs
Maximum duration for normal task that triggers warning
MaxDurationErrorint int32 µs
Maximum duration for normal task that triggers error
MaxDurationBackgroundWarnint int32 µs
Maximum duration for background task that triggers
warning
MaxDurationBackgroundErrorint int32 µs
Maximum duration for background task that triggers error
Function: SetLoggingOptions
Description: 
Purpose: 
Configures the logging behavior for performance monitoring, including verbose logging and the minimum time between log
entries. 
Example: 
objPerformanceMonitor().afcSetLoggingOptions(true, 500); // Enables verbose logging and sets a minimum pause of
500ms between loggings. 
Parameters:
Name Type EncodedType Unit
Verboseboolean bool
If verbose logging is enabled, Note that the logging may take long time and may slightly influence the reliability of later
processing.
MinimalPauseint int32 ms
The minimum time in between 2 loggings. This value should be bigger than 100ms.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: RunDurations
Description: 
Purpose: 
Reports that task run durations have exceeded the configured limits. 
Usage: 
This message is automatically sent when the task durations are checked, based on the set limits. 
Content: 
- MaxDurationWarn: The maximum allowed duration before a warning is issued for normal tasks. 
- MaxDurationError: The maximum allowed duration before an error is issued for normal tasks. 

---

# Page 24

- MaxDurationBackgroundWarn: The maximum allowed duration before a warning is issued for background tasks. 
- MaxDurationBackgroundError: The maximum allowed duration before an error is issued for background tasks. 
- MinimalLoggingPause: The minimum time in ms between log entries. 
- Text: Additional information about the task durations. 
Parameters:
Name Type EncodedType Unit Format
MaxDurationWarnint int32 µs
Maximum duration before a warning for normal task is issued
MaxDurationErrorint int32 µs
Maximum duration before an error for normal task is issued
MaxDurationBackgroundWarnint int32 µs
Maximum duration before a warning for background task is issued
MaxDurationBackgroundErrorint int32 µs
Maximum duration before an error for background task is issued
MinimalLoggingPauseint int32 ms
The minimum time in between 2 loggings. This value should be bigger than
100ms.
Textint[] uint8 utf8
Additionnal text about this durations
Message: SchedulingDelays
Description: 
Purpose: 
Reports that the scheduler has detected delays that exceed the configured limits. 
Usage: 
This message is automatically sent when scheduling delays are detected, based on the set limits. 
Content: 
- MaxDelayWarn: The maximum allowed delay before a warning is issued. 
- MaxDelayError: The maximum allowed delay before an error is issued. 
- MinimalLoggingPause: The minimum time in ms between log entries. 
- MessageDelay: the current delay from the tasks scheduled time 
- Text: Additional information about the delays. 
Parameters:
Name Type EncodedType Scale Unit Format
MaxDelayWarnint int32 µs
Maximum allowed delay before a warning
MaxDelayErrorint int32 µs
Maximum allowed delay before an error
MinimalLoggingPauseint int32 ms
The minimum time in between 2 loggings. This value should be bigger than
100ms.
MessageDelayint uint32 0.001 ms
The current delay from the scheduled time
Textint[] uint8 utf8
Additionnal text about this delay
back to interface definition
Interface: DataServerTest  extends _Object
Description: The DataServer is a service between the CTE and the module, which has no direct API for the user. This
DataServerTest interface provides a user accessible API to test this functionality.
It can copy up to 100KB to/from a RAM buffer with DownloadStart/UploadStart.
Copy does a whole file copy by transferring always 100KB pieces.
The used format for the URI is: file:///c:/mydir/myfile.txt. No remote hosts are supported in the URI. The URI must be an absolute
path. To call the functions with a URI, it must be given as hex string. E.g.:
objDataServerTest().afcDownloadStart( HexString.stringToUtf8Hex("file:///c:/mydir/myfile.txt")); 
To convert a file path into a URI, the File object has a toUri() method. Then call the toString() on it.
Functions
Abort
Copy
DownloadStart
SetUserTag
UploadStart
Messages
Aborted
Completed

---

# Page 25

GeneralMessage
StartNextDownload
StartNextUpload
Events
Completed
Objects
Functions
Function: Abort
Description: Abort the running process.
Function: Copy
Description: Copy from one source location to a target location. The process is implemented by download and uploading in
alternating sequence. Per transaction up to 100KB are transferred.
After completion, the event and the message "Completed" are triggered.
Parameters:
Name TypeEncodedTypeFormat
SourceUriint[]uint8 utf8
Example: file:///c:/mydir/myfile.txt
TargetUriint[]uint8 utf8
Example: file:///c:/mydir/myfile.txt
Response timeout: 60000
Result Message: Completed 
Faults: Aborted 
Function: DownloadStart
Description: Copy up to 100KB into a RAM buffer.
After completion, the event and the message "Completed" are triggered.
Parameters:
Name TypeEncodedTypeFormat
SourceUriint[]uint8 utf8
Example: file:///c:/mydir/myfile.txt
Response timeout: 5000
Result Message: Completed 
Faults: Aborted 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: UploadStart
Description: Copy the content of store RAM buffer to the PC.
After completion, the event and the message "Completed" are triggered.
Parameters:
Name Type EncodedTypeFormat
TargetUriint[] uint8 utf8
Example: file:///c:/mydir/myfile.txt
Append booleanbool
Response timeout: 5000
Result Message: Completed 
Faults: Aborted 
back to interface definition
Messages
Message: Aborted
Description: The started process was aborted due to an error or a call of the abort function.

---

# Page 26

Message: Completed
Description: The started process is successfully completed.
Parameters:
Name TypeEncodedTypeScale Unit
XferSize int int32
Duration longint64 0.000001ms
Bandwidthint int32 0.001 KB/s
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: StartNextDownload
Description: In the copy action, another download action is started.
Parameters:
NameTypeEncodedType
Indexint int32
Message: StartNextUpload
Description: In the copy action, another upload action is started.
Parameters:
Name TypeEncodedType
Remainingint int32
back to interface definition
Events
Event: Completed
Description: Signal the successful completion of the started process.
back to interface definition
Interface: SelfTest  extends _Object
Functions
SetUserTag
SfcDelayedFault1
SfcDelayedResponse
SfcNoResponse
Messages
GeneralMessage
SfcFault1
SfcFault2
SfcResult
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SfcDelayedFault1
Parameters:
NameTypeEncodedTypeUnit
Delayint int32 ms
Response timeout: 100
Result Message: SfcResult 
Faults: SfcFault1 SfcFault2 

---

# Page 27

Function: SfcDelayedResponse
Parameters:
NameTypeEncodedTypeUnit
Delayint int32 ms
Response timeout: 100
Result Message: SfcResult 
Faults: SfcFault1 SfcFault2 
Function: SfcNoResponse
Response timeout: 100
Result Message: SfcResult 
Faults: SfcFault1 SfcFault2 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: SfcFault1
Message: SfcFault2
Message: SfcResult
back to interface definition
Objects
Object: SelfTestSignalValue
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
SelfTestSignalValue_SignalSignalint 0 1 4 false false
Object: SelfTestSignalRaw
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
SelfTestSignalRaw_SignalSignalbyte 0 1 raw 8 false false
Object: DataServerTest
Name Interface
DataServerTestDataServerTest
back to interface definition
Interface: SystemInfo  extends _Object
Functions
GetHwAndFwHashes
SetUserTag
Messages
GeneralMessage
SystemHashes
Functions
Function: GetHwAndFwHashes
Description: Returns the compiled 1_Castle git repository commit hash used to build the firmware and, the one used to
build the hardware.
Response timeout: 0
Result Message: SystemHashes 
Faults: 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 28

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: SystemHashes
Parameters:
Name TypeEncodedTypeFormat
HardwareHashint uint32 hex
FirmwareHashint uint32 hex
back to interface definition
Interface: Climate  extends _Object
Description: Hold value written from the extern test environment. This is a way to bring those values into the C5 report. In the
firmware, nothing is done with the values.
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: ActualTemperature
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ActualTemperature_SignalSignalint 0 0.001°C 4 false false
Object: ActualHumidity
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ActualHumidity_SignalSignalint 0 0.001% 4 false false
Object: SetTemperature
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
SetTemperature_SignalSignalint 0 0.001°C 4 false false
Object: SetHumidity
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
SetHumidity_SignalSignalint 0 0.001% 4 false false
back to interface definition

---

# Page 29

Interface: PowerSupplyChannel  extends _Object
Description: Hold value written from the extern test environment. This is a way to bring those values into the C5 report. In the
firmware, nothing is done with the values.
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: ActualVoltage
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ActualVoltage_SignalSignalint 0 0.001V 4 false false
Object: SetVoltage
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
SetVoltage_SignalSignalint 0 0.001V 4 false false
Object: ActualCurrent
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ActualCurrent_SignalSignalint 0 0.000001A 4 false false
Object: SetCurrent
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
SetCurrent_SignalSignalint 0 0.000001A 4 false false
back to interface definition
Interface: PowerSupply  extends _Object
Description: Hold value written from the extern test environment. This is a way to bring those values into the C5 report. In the
firmware, nothing is done with the values.
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex

---

# Page 30

Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Channel
Name Interface
ChannelPowerSupplyChannel
back to interface definition
Interface: TestData  extends _Object
Description: Hold value written from the extern test environment. This is a way to bring those values into the C5 report. In the
firmware, nothing is done with the values.
Functions
SetText1
SetText2
SetUserTag
Messages
GeneralMessage
Functions
Function: SetText1
Description: The function must be called with the text converted as hex string, but the UI will show the text.
Parameters:
NameTypeEncodedTypeFormat
text int[]uint8 utf8
Function: SetText2
Description: The function must be called with the text converted as hex string, but the UI will show the text.
Parameters:
NameTypeEncodedTypeFormat
text int[]uint8 utf8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PowerSupply
Name Interface
PowerSupplyPowerSupply

---

# Page 31

Object: Climate
Name Interface
ClimateClimate
Object: Raw32
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Raw32_SignalSignalbyte 0 1 raw 32 false false
Object: Raw8
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Raw8_SignalSignalbyte 0 1 raw 8 false false
Object: Int32
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Int32_SignalSignalint 0 1 4 false false
Object: Int32Milli
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Int32Milli_SignalSignalint 0 0.0014 false false
Object: Int32Micro
Name InterfaceTypeEncodedTypeOffsetScale BytecountElasticLengthMutable
Int32Micro_SignalSignalint 0 0.0000014 false false
back to interface definition
Interface: GenericCommon  extends _Object
Enumerations
iicXferErrs
Functions
SetUserTag
Messages
GeneralMessage
IicXferError
Enumerations
Enum: iicXferErrs
Value
err_Ok
err_Rx_Negative_Ack
err_Arbitration_Lost
err_TimeOut
err_Receive_Error
err_SyncXferTimeOut
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IicXferError
Parameters:

---

# Page 32

Name Type EncodedTypeFormat
iicXferErrsiicXferErrsint -
iicAddressint uint8 hex
iicChannelint uint8 hex
back to interface definition
Objects
Object: PerformanceMonitor
Name Interface
PerformanceMonitorPerformanceMonitor
Object: FirmwareTracer
Name Interface
FirmwareTracerFirmwareTracer
Object: SelfTest
Name Interface
SelfTestSelfTest
Object: StopWatch
Name Interface
StopWatchStopWatch
Object: Timer
NameInterface
TimerTimer
Object: EventFilter
Description: Instances of Event Filter
Name Interface
EventFilterEventFilter
Object: TestData
Name Interface
TestDataTestData
Object: DelayedEvent
Name Interface
DelayedEventDelayedEvent
back to interface definition
Interface: Generic  extends GenericCommon _Object
Description: This is the Generic for C5 only
Functions
SetUserTag
Messages
GeneralMessage
IicXferError
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:

---

# Page 33

NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IicXferError
Parameters:
Name Type EncodedTypeFormat
iicXferErrsiicXferErrsint -
iicAddressint uint8 hex
iicChannelint uint8 hex
back to interface definition
Objects
Object: PerformanceMonitor
Name Interface
PerformanceMonitorPerformanceMonitor
Object: FirmwareTracer
Name Interface
FirmwareTracerFirmwareTracer
Object: SelfTest
Name Interface
SelfTestSelfTest
Object: StopWatch
Name Interface
StopWatchStopWatch
Object: Timer
NameInterface
TimerTimer
Object: EventFilter
Description: Instances of Event Filter
Name Interface
EventFilterEventFilter
Object: TestData
Name Interface
TestDataTestData
Object: DelayedEvent
Name Interface
DelayedEventDelayedEvent
Object: Calibrate
Name Interface
CalibrateCalibrate
Object: TriggerInput
Name Interface
TriggerInputTriggerInput
Object: SystemInfo
Name Interface
SystemInfoSystemInfo
Object: Tracer
NameInterface
TracerTracer
Object: Ping
NameInterface
Ping Ping
Object: ToeDriver
Description: Uses the rs232[0] of the base

---

# Page 34

Name Interface
ToeDriverToeDriver
back to interface definition
Interface: GenericC6  extends GenericCommon _Object
Functions
SetUserTag
Messages
GeneralMessage
IicXferError
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IicXferError
Parameters:
Name Type EncodedTypeFormat
iicXferErrsiicXferErrsint -
iicAddressint uint8 hex
iicChannelint uint8 hex
back to interface definition
Objects
Object: PerformanceMonitor
Name Interface
PerformanceMonitorPerformanceMonitor
Object: FirmwareTracer
Name Interface
FirmwareTracerFirmwareTracer
Object: SelfTest
Name Interface
SelfTestSelfTest
Object: StopWatch
Name Interface
StopWatchStopWatch
Object: Timer
NameInterface
TimerTimer
Object: EventFilter
Description: Instances of Event Filter
Name Interface
EventFilterEventFilter
Object: TestData

---

# Page 35

Name Interface
TestDataTestData
Object: DelayedEvent
Name Interface
DelayedEventDelayedEvent
Object: Calibrate
Name Interface
CalibrateCalibrate
Object: ToeDriver
Description: Uses the rs232[0] of the base
Name Interface
ToeDriverToeDriver
back to interface definition
Interface: GenericC6Apu  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PsIic
NameInterface
PsIicPsIic
back to interface definition
Interface: _SignalImpl  extends _Object
Description:
Passive Input Signal
Some input signals are not passive. They are updated implicitly e.g. a CAN RX signal is updated when the containing CAN frame
is received. Some signals, like a electrical line from the DUT may not have such a obvious update condition. So it is not updated
automatically by default.
The user can force the signal to update itself, by calling a Get/Check function or do a logging.
The signal can be updated as well automatically by enabling the update on interval.
Update Test
For each signal, a int32 update counter is maintained. In the beginning, this counter is zero. Every time, the signal is updated,
even if the value does not change, this counter is increased.
These methods are relevant here: 
UpdateCounterGet
UpdateCounterReset
UpdateCounterCheckAndReset

---

# Page 36

Timing Test
Timing test is activated with min/max limits for error and warning.
On each signal update, this test evaluates the limits. Also the limits are checked for all active timing tests on a regular basis, but
this interval is not defined. It is only guaranteed to be less than 1 second.
The time of an signal update is always stored into the signal data.
In this illustration, the event are expected to be received in a 10ms cycle. A timing test is made with the limit 8..12ms (warning
limits are omitted in this illustration). The blue flashes are the signal update event, the red flash is the slow cyclic task, that
catches the case of no-more-updates. 
 
1. Timing Test is activated
2. OK, first measured interval, is reported always
3. The update was missing, but a new update happens, so the error is reported when the limits are checked in this new update.
4. OK message, after error, the next OK is reported. The limits are now OK again.
5. Error, no more updates, detected in the slow cyclic check task.
6. Deactivate TimingTest
7. Report final state of the test.
Scenario: Activation if there is no signal update: If the test activation is prior to a max limit violation, then the test is evaluated as
normal on next update or the slow cyclic check. 
 
If the test activation is after a max limit is already violated, an error is generated immediately. 
 
If a timing test is active, and again activated with the same or other values, a message is first generated, like if “timing test off”
would have been called.
Enumerations
LoggingCause
Functions
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
CopyRawValueToProcUnitVariable
DisableTracerLogging
EnableTracerLogging
EqualsCheck
EqualsCheckNoneOf
EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
EqualsTestChangeToAfterUpdates
EqualsTestChangeToFromCurrent
EqualsTestChangeToOptionalValues
EqualsTestChangeToOptionalValuesAfterUpdates

---

# Page 37

EqualsTestFreeze
EqualsTestNoneOf
EqualsTestOneOf
EqualsTestWithCurrentValue
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
LoggingForceNow
LoggingOnIntervalDisable
LoggingOnIntervalEnable
LoggingOnUpdateDisable
LoggingOnUpdateEnable
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
ModifyBits
ModifyBytes
NotEqualsCheck
NotEqualsTest
OutOfRangeCheck
Set
SetDefaultValue
SetUserTag
SetWithMask
TimingTest
TimingTestOff
TimingTestWithFirstUpdate
UpdateCounterCheck
UpdateCounterCheckAndReset
UpdateCounterGet
UpdateCounterReset
UpdateIsAllowed
UpdateOnInterval
UpdateOnIntervalOff
ValueTestOff
Messages
ArrayEqualsTest
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
EqualsCheck
EqualsCheckNoneOf
EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
GeneralMessage
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
IndexOutOfBounds
Log
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
NotEqualsCheck
NotEqualsTest
NotYetUpdated
OutOfRangeCheck
RegisteredMonitorAliveCounterFunction
RegisteredMonitorChecksumFunction
RegisteredTxAliveCounterFunction
RegisteredTxChecksumFunction
TimingTest
TimingTestNoUpdates
TimingTestNotActive
UpdateCounterCheck

---

# Page 38

UpdateCounterGet
UpdateHappenedButNotAllowed
Events
Update
ValueChange
Receivers
Following
Objects
Enumerations
Enum: LoggingCause
Value
CausedByForceNow
CausedByUpdate
CausedByInterval
CausedByLoggingStart
Functions
Function: BitsInRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: BitsInRangeCheck 
Faults: IndexOutOfBounds 
Function: BitsOutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: BitsOutOfRangeCheck 
Faults: IndexOutOfBounds 

---

# Page 39

Function: CheckLastUpdateWithin
Description: Verify that the last update to this signal happened within the given time.
Parameters:
Name TypeEncodedTypeScaleUnit
WarnDurationMsint uint32 0.001ms
ErrorDurationMsint uint32 0.001ms
Function: CopyRawValueToProcUnitVariable
Description: Copy the signal raw value to a variable in the procunit with index "VariableIndex"
Parameters:
Name Type EncodedType
VariableIndexint uint8
Offset int uint8
ByteLength int uint8
BigEndian booleanbool
Function: DisableTracerLogging
Description: Disables signal logging into tracer.
Function: EnableTracerLogging
Description: Enables signal logging into tracer.
Function: EqualsCheck
Description: Check one time, that the current value is matching the expectation exactly. One message will be created with
severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Response timeout: 0
Result Message: EqualsCheck 
Faults: 
Function: EqualsCheckNoneOf
Description: Check one time, that the current value is not matching one of the non-expectations exactly. One message will
be created with severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckNoneOf 
Faults: 
Function: EqualsCheckOneOf
Description: Check one time, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckOneOf 
Faults: 
Function: EqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly. One message will be created
with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64

---

# Page 40

Function: EqualsTestChangeTo
Description: Test from now on, that the value is constantly matching the ValueExpectedNow exactly. The
ValueExpectedNow has to be detected at least once! At some time it is allowed to change to the ValueExpectedTarget and
is then no more allowed to change.
Example case: the horn switch is pressed with Castle and the CAN message is monitored. The CAN message is received
in short intervals and the time, when the value for the horn state changes is not exactly known. But it is known that the
signal change is in between 40ms .. 80ms. At 40ms the EqualsTestChangeTo is called. After the maximum allowed time
for the change EqualsTest is called to ensure the system detects if there was no change.
"
Parameters:
Name Type EncodedType
ValueExpectedNow _Signalint64
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToAfterUpdates
Description: EqualsTestChangeToAfterUpdates signal test monitors the signal value and after 'NrOfUpdates' signal update,
it has to match the 'ValueExpectedTarget'. Before the counter expires, the signal value can be either the original value or
the new value. The test remains active until another signal test or ValueTestOff is called.
Parameters:
Name Type EncodedType
NrOfUpdates int int16
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToFromCurrent
Description: EqualsTestChangeToFromCurrent signal test monitors the signal value change from the current value to the
next value and matches the ValueExpectedTarget with the next value. The test remains active until another signal test or
ValueTestOff is called.
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToOptionalValues
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.

---

# Page 41

Function: EqualsTestChangeToOptionalValuesAfterUpdates
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
NrOfUpdatesint int16
maximum number of allowed changes till reaching the ValueExpectedTarget
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.
Function: EqualsTestFreeze
Description: Test from now on, that the current value is constantl and not changing. This is equal to EqualsTest to be called
with the current signal value.
Function: EqualsTestNoneOf
Description: Test from now on, that the current value is not matching one of the non-expectations exactly. One message
will be created with severity Information/Error immediately and later messages will be created when the severity changes
between Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArray int64
Values that are not expected. [MAX =
50]
Function: EqualsTestOneOf
Description: Test from now on, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArray int64
Values that are expected. [MAX =
50]
Function: EqualsTestWithCurrentValue
Function: Get
Description: Get the current value
Response timeout: 0
Result Message: Get 
Faults: 
Function: InRangeCheck
Description: Check one time, that the current value is within a given range. One message will be created with severity
Information/Warning/Error immediately.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Response timeout: 0
Result Message: InRangeCheck 
Faults: 
Function: InRangeCheckRaw
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.

---

# Page 42

Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: InRangeCheckRaw 
Faults: IndexOutOfBounds 
Function: InRangeTest
Description: Test from now on, that the value is constantly within a given range.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Function: LoggingForceNow
Description: Create a single log of the current value of the signal. If this is a bus signal, the current value from the last
signal update.
Function: LoggingOnIntervalDisable
Description: Disable the logging of the signal value on interval times.
Function: LoggingOnIntervalEnable
Description: Enable logging of the signal value with a given interval time. If the logging on interval is already enabled,
reenabling forces a logging now and continues with the new interval time.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: LoggingOnUpdateDisable
Description: Disable the logging of the signal value on update events.
Function: LoggingOnUpdateEnable
Description: Enable logging of the signal value on each update event.
Parameters:
Name Type EncodedType
ValueChangedboolean bool
If true, the logging is only made on changes of the signal's
values.
Function: MaskedEqualsCheck
Description: Check one time, that the current value is matching the expectation exactly ignoring the bits which are masked
out
Parameters:
Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw

---

# Page 43

Response timeout: 0
Result Message: MaskedEqualsCheck 
Faults: 
Function: MaskedEqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: MaskedNotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Response timeout: 0
Result Message: MaskedNotEqualsCheck 
Faults: 
Function: MaskedNotEqualsTest
Description: Test from now on, that the value is constantly not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: ModifyBits
Description: Sets a range of bits defined by StartBit and BitLength in _Signal considering signal endianess and Sign. 
Parameters:
Name Type EncodedType
Value long int64
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: ModifyBytes
Description: Modify the framecontent by replacing a byte sequence
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Function: NotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly. One message will be created
with severity Information/Error.

---

# Page 44

Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Response timeout: 0
Result Message: NotEqualsCheck 
Faults: 
Function: NotEqualsTest
Description: Test from now on, that the current value is not matching the expectations exactly . One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Function: OutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: OutOfRangeCheck 
Faults: IndexOutOfBounds 
Function: Set
Description: Set the current value
Parameters:
NameType EncodedType
Value_Signalint64
Function: SetDefaultValue
Description: Reset the signal to the default value
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetWithMask
Description: Sets a signal value without modifying the masked out bits.
This translate to: 1 in the mask means that the bit will be modified. 0 in the mask means that the bit will NOT be modified. 
SignalValue = ( SignalValue & ~Mask ) | ( Value & Mask );

---

# Page 45

Parameters:
NameTypeEncodedTypeFormat
Valueint[]uint8 raw
Maskint[]uint8 raw
Function: TimingTest
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task.
Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
Function: TimingTestOff
Description: Deactivate the currently active test for the timing.
Function: TimingTestWithFirstUpdate
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task. If the test is
deactivated before the FirstUpdate time expires, there will be no error generated.
Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
FirstUpdate longint64 0.000001ms
Function: UpdateCounterCheck
Description: Check the update counter against an expectation value value range.
So also the Update Test description in the _Signal interface doc.
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterCheckAndReset
Description: Check the update counter against an expectation value value range. Afterwards, set the update counter to
zero.
So also the Update Test description in the _Signal interface doc.
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterGet
Description: Get the current state of the update counter. Optionally this function can set the update counter to zero
(DoReset).
So also the Update Test description in the _Signal interface doc.
Parameters:

---

# Page 46

Name Type EncodedType
DoResetbooleanbool
Response timeout: 0
Result Message: UpdateCounterGet 
Faults: 
Function: UpdateCounterReset
Description: Reset the update counter of the signal. 
So also the Update Test description in the _Signal interface doc.
Function: UpdateIsAllowed
Description: By default, all signals allow updates. If this is set to false, each update on this signal value will generate an
error.
Parameters:
Name Type EncodedType
Allowedbooleanbool
Function: UpdateOnInterval
Description: Passive input signal shall be updated on a periodic cycle.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: UpdateOnIntervalOff
Description: Passive input signal shall no more be updated on a periodic cycle.
Function: ValueTestOff
Description: Deactive the currently active test for value. This may be the equals test, in range, outside range.
back to interface definition
Messages
Message: ArrayEqualsTest
Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: BitsInRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: BitsOutOfRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMinint uint32

---

# Page 47

LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: CheckLastUpdateWithin
Parameters:
Name TypeEncodedTypeScaleUnit
RealDurationMsint uint32 0.001ms
WarnDurationMsint uint32 0.001ms
ErrorDurationMsint uint32 0.001ms
Message: EqualsCheck
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Value _Signalint64
Message: EqualsCheckNoneOf
Parameters:
Name Type EncodedType
ValuesNotExpected_SignalArrayint64
Value _Signal int64
Message: EqualsCheckOneOf
Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: EqualsTest
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Value _Signalint64
Message: EqualsTestChangeTo
Description: The message is generated once, when the EqualsTestChangeTo test is active and a signal value change is
detected.
Parameters:
Name Type EncodedType
ValueExpectedFrom_Signalint64
ValueExpectedTo _Signalint64
ValueAct _Signalint64
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Get
Parameters:
NameType EncodedType
Value_Signalint64
Message: InRangeCheck
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64

---

# Page 48

Message: InRangeCheckRaw
Parameters:
Name TypeEncodedType
Offset int uint16
ValueMin longint64
ValueMinWarnlongint64
Value longint64
ValueMaxWarnlongint64
ValueMax longint64
Message: InRangeTest
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received signal.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: Log
Parameters:
Name Type EncodedType
UpdateCountint int32
ValueChangedboolean bool
LoggingCauseLoggingCauseint
Value _Signal int64
Message: MaskedEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedNotEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedNotEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: NotEqualsCheck

---

# Page 49

Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64
Message: NotEqualsTest
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64
Message: NotYetUpdated
Description: Indicate the condition, that this signal had never had a value assigned since the Castle module's startup
Message: OutOfRangeCheck
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: RegisteredMonitorAliveCounterFunction
Message: RegisteredMonitorChecksumFunction
Message: RegisteredTxAliveCounterFunction
Message: RegisteredTxChecksumFunction
Message: TimingTest
Parameters:
Name Type EncodedTypeScale Unit
CycleMin long int64 0.000001ms
CycleMinWarn long int64 0.000001ms
CycleValue long int64 0.000001ms
CycleMaxWarn long int64 0.000001ms
CycleMax long int64 0.000001ms
SignalUpdateOccurredbooleanbool
Message: TimingTestNoUpdates
Parameters:
NameTypeEncodedTypeScale Unit
Sincelongint64 0.000001ms
Message: TimingTestNotActive
Message: UpdateCounterCheck
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
Value int int32
MaxWarnint int32
MaxErrorint int32
Message: UpdateCounterGet
Parameters:
NameTypeEncodedType
Valueint int32
Message: UpdateHappenedButNotAllowed

---

# Page 50

Description: The signal was set to UpdateIsAllowed false, but it was updated.
back to interface definition
Events
Event: Update
Event: ValueChange
back to interface definition
Receivers
Receiver: Following
Description: Force this signal to follow the physical value of another signal. Any Signal value are allowed. Offset, factor, the
bit length and the sign of the com signal are considered. Taken into Consideration [Physical Value = Raw Value * Factor +
Offset]
back to interface definition
Interface: _Signal  extends _Object _SignalImpl _SignalRaw _SignalValue
Functions
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
CopyRawValueToProcUnitVariable
DisableTracerLogging
EnableTracerLogging
EqualsCheck
EqualsCheckNoneOf
EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
EqualsTestChangeToAfterUpdates
EqualsTestChangeToFromCurrent
EqualsTestChangeToOptionalValues
EqualsTestChangeToOptionalValuesAfterUpdates
EqualsTestFreeze
EqualsTestNoneOf
EqualsTestOneOf
EqualsTestWithCurrentValue
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
LoggingForceNow
LoggingOnIntervalDisable
LoggingOnIntervalEnable
LoggingOnUpdateDisable
LoggingOnUpdateEnable
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
ModifyBits
ModifyBytes
NotEqualsCheck
NotEqualsTest
OutOfRangeCheck
Set
SetDefaultValue
SetUserTag
SetWithMask
TimingTest
TimingTestOff
TimingTestWithFirstUpdate
UpdateCounterCheck
UpdateCounterCheckAndReset
UpdateCounterGet
UpdateCounterReset

---

# Page 51

UpdateIsAllowed
UpdateOnInterval
UpdateOnIntervalOff
ValueTestOff
Messages
ArrayEqualsTest
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
EqualsCheck
EqualsCheckNoneOf
EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
GeneralMessage
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
IndexOutOfBounds
Log
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
NotEqualsCheck
NotEqualsTest
NotYetUpdated
OutOfRangeCheck
RegisteredMonitorAliveCounterFunction
RegisteredMonitorChecksumFunction
RegisteredTxAliveCounterFunction
RegisteredTxChecksumFunction
TimingTest
TimingTestNoUpdates
TimingTestNotActive
UpdateCounterCheck
UpdateCounterGet
UpdateHappenedButNotAllowed
Events
Update
ValueChange
Receivers
Following
Objects
Functions
Function: BitsInRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error

---

# Page 52

Response timeout: 0
Result Message: BitsInRangeCheck 
Faults: IndexOutOfBounds 
Function: BitsOutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: BitsOutOfRangeCheck 
Faults: IndexOutOfBounds 
Function: CheckLastUpdateWithin
Description: Verify that the last update to this signal happened within the given time.
Parameters:
Name TypeEncodedTypeScaleUnit
WarnDurationMsint uint32 0.001ms
ErrorDurationMsint uint32 0.001ms
Function: CopyRawValueToProcUnitVariable
Description: Copy the signal raw value to a variable in the procunit with index "VariableIndex"
Parameters:
Name Type EncodedType
VariableIndexint uint8
Offset int uint8
ByteLength int uint8
BigEndian booleanbool
Function: DisableTracerLogging
Description: Disables signal logging into tracer.
Function: EnableTracerLogging
Description: Enables signal logging into tracer.
Function: EqualsCheck
Description: Check one time, that the current value is matching the expectation exactly. One message will be created with
severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Response timeout: 0
Result Message: EqualsCheck 
Faults: 
Function: EqualsCheckNoneOf
Description: Check one time, that the current value is not matching one of the non-expectations exactly. One message will
be created with severity Information/Error.

---

# Page 53

Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckNoneOf 
Faults: 
Function: EqualsCheckOneOf
Description: Check one time, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckOneOf 
Faults: 
Function: EqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly. One message will be created
with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Function: EqualsTestChangeTo
Description: Test from now on, that the value is constantly matching the ValueExpectedNow exactly. The
ValueExpectedNow has to be detected at least once! At some time it is allowed to change to the ValueExpectedTarget and
is then no more allowed to change.
Example case: the horn switch is pressed with Castle and the CAN message is monitored. The CAN message is received
in short intervals and the time, when the value for the horn state changes is not exactly known. But it is known that the
signal change is in between 40ms .. 80ms. At 40ms the EqualsTestChangeTo is called. After the maximum allowed time
for the change EqualsTest is called to ensure the system detects if there was no change.
"
Parameters:
Name Type EncodedType
ValueExpectedNow _Signalint64
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToAfterUpdates
Description: EqualsTestChangeToAfterUpdates signal test monitors the signal value and after 'NrOfUpdates' signal update,
it has to match the 'ValueExpectedTarget'. Before the counter expires, the signal value can be either the original value or
the new value. The test remains active until another signal test or ValueTestOff is called.

---

# Page 54

Parameters:
Name Type EncodedType
NrOfUpdates int int16
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToFromCurrent
Description: EqualsTestChangeToFromCurrent signal test monitors the signal value change from the current value to the
next value and matches the ValueExpectedTarget with the next value. The test remains active until another signal test or
ValueTestOff is called.
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToOptionalValues
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.
Function: EqualsTestChangeToOptionalValuesAfterUpdates
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
NrOfUpdatesint int16
maximum number of allowed changes till reaching the ValueExpectedTarget
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.
Function: EqualsTestFreeze
Description: Test from now on, that the current value is constantl and not changing. This is equal to EqualsTest to be called
with the current signal value.
Function: EqualsTestNoneOf
Description: Test from now on, that the current value is not matching one of the non-expectations exactly. One message
will be created with severity Information/Error immediately and later messages will be created when the severity changes
between Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArray int64
Values that are not expected. [MAX =
50]
Function: EqualsTestOneOf
Description: Test from now on, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error.
Parameters:
Name Type EncodedType
_SignalArray int64

---

# Page 55

ValueExpectedValues that are expected. [MAX =
50]
Function: EqualsTestWithCurrentValue
Function: Get
Description: Get the current value
Response timeout: 0
Result Message: Get 
Faults: 
Function: InRangeCheck
Description: Check one time, that the current value is within a given range. One message will be created with severity
Information/Warning/Error immediately.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Response timeout: 0
Result Message: InRangeCheck 
Faults: 
Function: InRangeCheckRaw
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: InRangeCheckRaw 
Faults: IndexOutOfBounds 
Function: InRangeTest
Description: Test from now on, that the value is constantly within a given range.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Function: LoggingForceNow
Description: Create a single log of the current value of the signal. If this is a bus signal, the current value from the last
signal update.
Function: LoggingOnIntervalDisable
Description: Disable the logging of the signal value on interval times.

---

# Page 56

Function: LoggingOnIntervalEnable
Description: Enable logging of the signal value with a given interval time. If the logging on interval is already enabled,
reenabling forces a logging now and continues with the new interval time.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: LoggingOnUpdateDisable
Description: Disable the logging of the signal value on update events.
Function: LoggingOnUpdateEnable
Description: Enable logging of the signal value on each update event.
Parameters:
Name Type EncodedType
ValueChangedboolean bool
If true, the logging is only made on changes of the signal's
values.
Function: MaskedEqualsCheck
Description: Check one time, that the current value is matching the expectation exactly ignoring the bits which are masked
out
Parameters:
Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw
Response timeout: 0
Result Message: MaskedEqualsCheck 
Faults: 
Function: MaskedEqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: MaskedNotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Response timeout: 0
Result Message: MaskedNotEqualsCheck 
Faults: 
Function: MaskedNotEqualsTest
Description: Test from now on, that the value is constantly not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: ModifyBits
Description: Sets a range of bits defined by StartBit and BitLength in _Signal considering signal endianess and Sign. 

---

# Page 57

Parameters:
Name Type EncodedType
Value long int64
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: ModifyBytes
Description: Modify the framecontent by replacing a byte sequence
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Function: NotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly. One message will be created
with severity Information/Error.
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Response timeout: 0
Result Message: NotEqualsCheck 
Faults: 
Function: NotEqualsTest
Description: Test from now on, that the current value is not matching the expectations exactly . One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Function: OutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error

---

# Page 58

LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: OutOfRangeCheck 
Faults: IndexOutOfBounds 
Function: Set
Description: Set the current value
Parameters:
NameType EncodedType
Value_Signalint64
Function: SetDefaultValue
Description: Reset the signal to the default value
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetWithMask
Description: Sets a signal value without modifying the masked out bits.
This translate to: 1 in the mask means that the bit will be modified. 0 in the mask means that the bit will NOT be modified. 
SignalValue = ( SignalValue & ~Mask ) | ( Value & Mask );
Parameters:
NameTypeEncodedTypeFormat
Valueint[]uint8 raw
Maskint[]uint8 raw
Function: TimingTest
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task.
Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
Function: TimingTestOff
Description: Deactivate the currently active test for the timing.
Function: TimingTestWithFirstUpdate
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task. If the test is
deactivated before the FirstUpdate time expires, there will be no error generated.
Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
FirstUpdate longint64 0.000001ms
Function: UpdateCounterCheck
Description: Check the update counter against an expectation value value range.
So also the Update Test description in the _Signal interface doc.

---

# Page 59

Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterCheckAndReset
Description: Check the update counter against an expectation value value range. Afterwards, set the update counter to
zero.
So also the Update Test description in the _Signal interface doc.
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterGet
Description: Get the current state of the update counter. Optionally this function can set the update counter to zero
(DoReset).
So also the Update Test description in the _Signal interface doc.
Parameters:
Name Type EncodedType
DoResetbooleanbool
Response timeout: 0
Result Message: UpdateCounterGet 
Faults: 
Function: UpdateCounterReset
Description: Reset the update counter of the signal. 
So also the Update Test description in the _Signal interface doc.
Function: UpdateIsAllowed
Description: By default, all signals allow updates. If this is set to false, each update on this signal value will generate an
error.
Parameters:
Name Type EncodedType
Allowedbooleanbool
Function: UpdateOnInterval
Description: Passive input signal shall be updated on a periodic cycle.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: UpdateOnIntervalOff
Description: Passive input signal shall no more be updated on a periodic cycle.
Function: ValueTestOff
Description: Deactive the currently active test for value. This may be the equals test, in range, outside range.
back to interface definition
Messages
Message: ArrayEqualsTest

---

# Page 60

Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: BitsInRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: BitsOutOfRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin int uint32
LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: CheckLastUpdateWithin
Parameters:
Name TypeEncodedTypeScaleUnit
RealDurationMsint uint32 0.001ms
WarnDurationMsint uint32 0.001ms
ErrorDurationMsint uint32 0.001ms
Message: EqualsCheck
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Value _Signalint64
Message: EqualsCheckNoneOf
Parameters:
Name Type EncodedType
ValuesNotExpected_SignalArrayint64
Value _Signal int64
Message: EqualsCheckOneOf
Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: EqualsTest
Parameters:
Name Type EncodedType
ValueExpected_Signalint64

---

# Page 61

Value _Signalint64
Message: EqualsTestChangeTo
Description: The message is generated once, when the EqualsTestChangeTo test is active and a signal value change is
detected.
Parameters:
Name Type EncodedType
ValueExpectedFrom_Signalint64
ValueExpectedTo _Signalint64
ValueAct _Signalint64
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Get
Parameters:
NameType EncodedType
Value_Signalint64
Message: InRangeCheck
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Message: InRangeCheckRaw
Parameters:
Name TypeEncodedType
Offset int uint16
ValueMin longint64
ValueMinWarnlongint64
Value longint64
ValueMaxWarnlongint64
ValueMax longint64
Message: InRangeTest
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received signal.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: Log
Parameters:
Name Type EncodedType
UpdateCountint int32
ValueChangedboolean bool
LoggingCauseLoggingCauseint
Value _Signal int64

---

# Page 62

Message: MaskedEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedNotEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedNotEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: NotEqualsCheck
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64
Message: NotEqualsTest
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64
Message: NotYetUpdated
Description: Indicate the condition, that this signal had never had a value assigned since the Castle module's startup
Message: OutOfRangeCheck
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: RegisteredMonitorAliveCounterFunction
Message: RegisteredMonitorChecksumFunction
Message: RegisteredTxAliveCounterFunction
Message: RegisteredTxChecksumFunction
Message: TimingTest
Parameters:

---

# Page 63

Name Type EncodedTypeScale Unit
CycleMin long int64 0.000001ms
CycleMinWarn long int64 0.000001ms
CycleValue long int64 0.000001ms
CycleMaxWarn long int64 0.000001ms
CycleMax long int64 0.000001ms
SignalUpdateOccurredbooleanbool
Message: TimingTestNoUpdates
Parameters:
NameTypeEncodedTypeScale Unit
Sincelongint64 0.000001ms
Message: TimingTestNotActive
Message: UpdateCounterCheck
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
Value int int32
MaxWarnint int32
MaxErrorint int32
Message: UpdateCounterGet
Parameters:
NameTypeEncodedType
Valueint int32
Message: UpdateHappenedButNotAllowed
Description: The signal was set to UpdateIsAllowed false, but it was updated.
back to interface definition
Events
Event: Update
Event: ValueChange
back to interface definition
Receivers
Receiver: Following
Description: Force this signal to follow the physical value of another signal. Any Signal value are allowed. Offset, factor, the
bit length and the sign of the com signal are considered. Taken into Consideration [Physical Value = Raw Value * Factor +
Offset]
back to interface definition
Interface: _SignalValue  extends _Object _SignalImpl
Functions
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
CopyRawValueToProcUnitVariable
DisableTracerLogging
EnableTracerLogging
EqualsCheck
EqualsCheckNoneOf
EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
EqualsTestChangeToAfterUpdates
EqualsTestChangeToFromCurrent
EqualsTestChangeToOptionalValues
EqualsTestChangeToOptionalValuesAfterUpdates
EqualsTestFreeze

---

# Page 64

EqualsTestNoneOf
EqualsTestOneOf
EqualsTestWithCurrentValue
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
LoggingForceNow
LoggingOnIntervalDisable
LoggingOnIntervalEnable
LoggingOnUpdateDisable
LoggingOnUpdateEnable
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
ModifyBits
ModifyBytes
NotEqualsCheck
NotEqualsTest
OutOfRangeCheck
Set
SetDefaultValue
SetUserTag
SetWithMask
TimingTest
TimingTestOff
TimingTestWithFirstUpdate
UpdateCounterCheck
UpdateCounterCheckAndReset
UpdateCounterGet
UpdateCounterReset
UpdateIsAllowed
UpdateOnInterval
UpdateOnIntervalOff
ValueTestOff
Messages
ArrayEqualsTest
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
EqualsCheck
EqualsCheckNoneOf
EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
GeneralMessage
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
IndexOutOfBounds
Log
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
NotEqualsCheck
NotEqualsTest
NotYetUpdated
OutOfRangeCheck
RegisteredMonitorAliveCounterFunction
RegisteredMonitorChecksumFunction
RegisteredTxAliveCounterFunction
RegisteredTxChecksumFunction
TimingTest
TimingTestNoUpdates
TimingTestNotActive
UpdateCounterCheck
UpdateCounterGet

---

# Page 65

UpdateHappenedButNotAllowed
Events
Update
ValueChange
Receivers
Following
Objects
Functions
Function: BitsInRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: BitsInRangeCheck 
Faults: IndexOutOfBounds 
Function: BitsOutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: BitsOutOfRangeCheck 
Faults: IndexOutOfBounds 
Function: CheckLastUpdateWithin
Description: Verify that the last update to this signal happened within the given time.
Parameters:
Name TypeEncodedTypeScaleUnit
WarnDurationMsint uint32 0.001ms
ErrorDurationMsint uint32 0.001ms
Function: CopyRawValueToProcUnitVariable

---

# Page 66

Description: Copy the signal raw value to a variable in the procunit with index "VariableIndex"
Parameters:
Name Type EncodedType
VariableIndexint uint8
Offset int uint8
ByteLength int uint8
BigEndian booleanbool
Function: DisableTracerLogging
Description: Disables signal logging into tracer.
Function: EnableTracerLogging
Description: Enables signal logging into tracer.
Function: EqualsCheck
Description: Check one time, that the current value is matching the expectation exactly. One message will be created with
severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Response timeout: 0
Result Message: EqualsCheck 
Faults: 
Function: EqualsCheckNoneOf
Description: Check one time, that the current value is not matching one of the non-expectations exactly. One message will
be created with severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckNoneOf 
Faults: 
Function: EqualsCheckOneOf
Description: Check one time, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckOneOf 
Faults: 
Function: EqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly. One message will be created
with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Function: EqualsTestChangeTo
Description: Test from now on, that the value is constantly matching the ValueExpectedNow exactly. The
ValueExpectedNow has to be detected at least once! At some time it is allowed to change to the ValueExpectedTarget and
is then no more allowed to change.
Example case: the horn switch is pressed with Castle and the CAN message is monitored. The CAN message is received
in short intervals and the time, when the value for the horn state changes is not exactly known. But it is known that the
signal change is in between 40ms .. 80ms. At 40ms the EqualsTestChangeTo is called. After the maximum allowed time
for the change EqualsTest is called to ensure the system detects if there was no change.

---

# Page 67

"
Parameters:
Name Type EncodedType
ValueExpectedNow _Signalint64
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToAfterUpdates
Description: EqualsTestChangeToAfterUpdates signal test monitors the signal value and after 'NrOfUpdates' signal update,
it has to match the 'ValueExpectedTarget'. Before the counter expires, the signal value can be either the original value or
the new value. The test remains active until another signal test or ValueTestOff is called.
Parameters:
Name Type EncodedType
NrOfUpdates int int16
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToFromCurrent
Description: EqualsTestChangeToFromCurrent signal test monitors the signal value change from the current value to the
next value and matches the ValueExpectedTarget with the next value. The test remains active until another signal test or
ValueTestOff is called.
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToOptionalValues
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.
Function: EqualsTestChangeToOptionalValuesAfterUpdates
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
int int16

---

# Page 68

NrOfUpdates maximum number of allowed changes till reaching the ValueExpectedTarget
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.
Function: EqualsTestFreeze
Description: Test from now on, that the current value is constantl and not changing. This is equal to EqualsTest to be called
with the current signal value.
Function: EqualsTestNoneOf
Description: Test from now on, that the current value is not matching one of the non-expectations exactly. One message
will be created with severity Information/Error immediately and later messages will be created when the severity changes
between Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArray int64
Values that are not expected. [MAX =
50]
Function: EqualsTestOneOf
Description: Test from now on, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArray int64
Values that are expected. [MAX =
50]
Function: EqualsTestWithCurrentValue
Function: Get
Description: Get the current value
Response timeout: 0
Result Message: Get 
Faults: 
Function: InRangeCheck
Description: Check one time, that the current value is within a given range. One message will be created with severity
Information/Warning/Error immediately.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Response timeout: 0
Result Message: InRangeCheck 
Faults: 
Function: InRangeCheckRaw
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
boolean bool

---

# Page 69

AsSignedValue
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: InRangeCheckRaw 
Faults: IndexOutOfBounds 
Function: InRangeTest
Description: Test from now on, that the value is constantly within a given range.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Function: LoggingForceNow
Description: Create a single log of the current value of the signal. If this is a bus signal, the current value from the last
signal update.
Function: LoggingOnIntervalDisable
Description: Disable the logging of the signal value on interval times.
Function: LoggingOnIntervalEnable
Description: Enable logging of the signal value with a given interval time. If the logging on interval is already enabled,
reenabling forces a logging now and continues with the new interval time.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: LoggingOnUpdateDisable
Description: Disable the logging of the signal value on update events.
Function: LoggingOnUpdateEnable
Description: Enable logging of the signal value on each update event.
Parameters:
Name Type EncodedType
ValueChangedboolean bool
If true, the logging is only made on changes of the signal's
values.
Function: MaskedEqualsCheck
Description: Check one time, that the current value is matching the expectation exactly ignoring the bits which are masked
out
Parameters:
Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw
Response timeout: 0
Result Message: MaskedEqualsCheck 
Faults: 
Function: MaskedEqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly ignoring the bits which are
masked out
Parameters:

---

# Page 70

Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: MaskedNotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Response timeout: 0
Result Message: MaskedNotEqualsCheck 
Faults: 
Function: MaskedNotEqualsTest
Description: Test from now on, that the value is constantly not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: ModifyBits
Description: Sets a range of bits defined by StartBit and BitLength in _Signal considering signal endianess and Sign. 
Parameters:
Name Type EncodedType
Value long int64
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: ModifyBytes
Description: Modify the framecontent by replacing a byte sequence
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Function: NotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly. One message will be created
with severity Information/Error.
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Response timeout: 0
Result Message: NotEqualsCheck 
Faults: 
Function: NotEqualsTest

---

# Page 71

Description: Test from now on, that the current value is not matching the expectations exactly . One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Function: OutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: OutOfRangeCheck 
Faults: IndexOutOfBounds 
Function: Set
Description: Set the current value
Parameters:
NameType EncodedType
Value_Signalint64
Function: SetDefaultValue
Description: Reset the signal to the default value
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetWithMask
Description: Sets a signal value without modifying the masked out bits.
This translate to: 1 in the mask means that the bit will be modified. 0 in the mask means that the bit will NOT be modified. 
SignalValue = ( SignalValue & ~Mask ) | ( Value & Mask );
Parameters:
NameTypeEncodedTypeFormat
Valueint[]uint8 raw
Maskint[]uint8 raw
Function: TimingTest
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task.

---

# Page 72

Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
Function: TimingTestOff
Description: Deactivate the currently active test for the timing.
Function: TimingTestWithFirstUpdate
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task. If the test is
deactivated before the FirstUpdate time expires, there will be no error generated.
Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
FirstUpdate longint64 0.000001ms
Function: UpdateCounterCheck
Description: Check the update counter against an expectation value value range.
So also the Update Test description in the _Signal interface doc.
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterCheckAndReset
Description: Check the update counter against an expectation value value range. Afterwards, set the update counter to
zero.
So also the Update Test description in the _Signal interface doc.
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterGet
Description: Get the current state of the update counter. Optionally this function can set the update counter to zero
(DoReset).
So also the Update Test description in the _Signal interface doc.
Parameters:
Name Type EncodedType
DoResetbooleanbool
Response timeout: 0
Result Message: UpdateCounterGet 
Faults: 
Function: UpdateCounterReset
Description: Reset the update counter of the signal. 
So also the Update Test description in the _Signal interface doc.

---

# Page 73

Function: UpdateIsAllowed
Description: By default, all signals allow updates. If this is set to false, each update on this signal value will generate an
error.
Parameters:
Name Type EncodedType
Allowedbooleanbool
Function: UpdateOnInterval
Description: Passive input signal shall be updated on a periodic cycle.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: UpdateOnIntervalOff
Description: Passive input signal shall no more be updated on a periodic cycle.
Function: ValueTestOff
Description: Deactive the currently active test for value. This may be the equals test, in range, outside range.
back to interface definition
Messages
Message: ArrayEqualsTest
Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: BitsInRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: BitsOutOfRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin int uint32
LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: CheckLastUpdateWithin
Parameters:
Name TypeEncodedTypeScaleUnit
RealDurationMsint uint32 0.001ms
WarnDurationMsint uint32 0.001ms

---

# Page 74

ErrorDurationMsint uint32 0.001ms
Message: EqualsCheck
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Value _Signalint64
Message: EqualsCheckNoneOf
Parameters:
Name Type EncodedType
ValuesNotExpected_SignalArrayint64
Value _Signal int64
Message: EqualsCheckOneOf
Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: EqualsTest
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Value _Signalint64
Message: EqualsTestChangeTo
Description: The message is generated once, when the EqualsTestChangeTo test is active and a signal value change is
detected.
Parameters:
Name Type EncodedType
ValueExpectedFrom_Signalint64
ValueExpectedTo _Signalint64
ValueAct _Signalint64
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Get
Parameters:
NameType EncodedType
Value_Signalint64
Message: InRangeCheck
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Message: InRangeCheckRaw
Parameters:
Name TypeEncodedType
Offset int uint16
ValueMin longint64
ValueMinWarnlongint64
Value longint64
ValueMaxWarnlongint64
ValueMax longint64

---

# Page 75

Message: InRangeTest
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received signal.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: Log
Parameters:
Name Type EncodedType
UpdateCountint int32
ValueChangedboolean bool
LoggingCauseLoggingCauseint
Value _Signal int64
Message: MaskedEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedNotEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedNotEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: NotEqualsCheck
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64
Message: NotEqualsTest
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64

---

# Page 76

Message: NotYetUpdated
Description: Indicate the condition, that this signal had never had a value assigned since the Castle module's startup
Message: OutOfRangeCheck
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: RegisteredMonitorAliveCounterFunction
Message: RegisteredMonitorChecksumFunction
Message: RegisteredTxAliveCounterFunction
Message: RegisteredTxChecksumFunction
Message: TimingTest
Parameters:
Name Type EncodedTypeScale Unit
CycleMin long int64 0.000001ms
CycleMinWarn long int64 0.000001ms
CycleValue long int64 0.000001ms
CycleMaxWarn long int64 0.000001ms
CycleMax long int64 0.000001ms
SignalUpdateOccurredbooleanbool
Message: TimingTestNoUpdates
Parameters:
NameTypeEncodedTypeScale Unit
Sincelongint64 0.000001ms
Message: TimingTestNotActive
Message: UpdateCounterCheck
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
Value int int32
MaxWarnint int32
MaxErrorint int32
Message: UpdateCounterGet
Parameters:
NameTypeEncodedType
Valueint int32
Message: UpdateHappenedButNotAllowed
Description: The signal was set to UpdateIsAllowed false, but it was updated.
back to interface definition
Events
Event: Update
Event: ValueChange
back to interface definition
Receivers

---

# Page 77

Receiver: Following
Description: Force this signal to follow the physical value of another signal. Any Signal value are allowed. Offset, factor, the
bit length and the sign of the com signal are considered. Taken into Consideration [Physical Value = Raw Value * Factor +
Offset]
back to interface definition
Interface: _SignalRaw  extends _Object _SignalImpl
Functions
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
CopyRawValueToProcUnitVariable
DisableTracerLogging
EnableTracerLogging
EqualsCheck
EqualsCheckNoneOf
EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
EqualsTestChangeToAfterUpdates
EqualsTestChangeToFromCurrent
EqualsTestChangeToOptionalValues
EqualsTestChangeToOptionalValuesAfterUpdates
EqualsTestFreeze
EqualsTestNoneOf
EqualsTestOneOf
EqualsTestWithCurrentValue
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
LoggingForceNow
LoggingOnIntervalDisable
LoggingOnIntervalEnable
LoggingOnUpdateDisable
LoggingOnUpdateEnable
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
ModifyBits
ModifyBytes
NotEqualsCheck
NotEqualsTest
OutOfRangeCheck
Set
SetDefaultValue
SetUserTag
SetWithMask
TimingTest
TimingTestOff
TimingTestWithFirstUpdate
UpdateCounterCheck
UpdateCounterCheckAndReset
UpdateCounterGet
UpdateCounterReset
UpdateIsAllowed
UpdateOnInterval
UpdateOnIntervalOff
ValueTestOff
Messages
ArrayEqualsTest
BitsInRangeCheck
BitsOutOfRangeCheck
CheckLastUpdateWithin
EqualsCheck
EqualsCheckNoneOf

---

# Page 78

EqualsCheckOneOf
EqualsTest
EqualsTestChangeTo
GeneralMessage
Get
InRangeCheck
InRangeCheckRaw
InRangeTest
IndexOutOfBounds
Log
MaskedEqualsCheck
MaskedEqualsTest
MaskedNotEqualsCheck
MaskedNotEqualsTest
NotEqualsCheck
NotEqualsTest
NotYetUpdated
OutOfRangeCheck
RegisteredMonitorAliveCounterFunction
RegisteredMonitorChecksumFunction
RegisteredTxAliveCounterFunction
RegisteredTxChecksumFunction
TimingTest
TimingTestNoUpdates
TimingTestNotActive
UpdateCounterCheck
UpdateCounterGet
UpdateHappenedButNotAllowed
Events
Update
ValueChange
Receivers
Following
Objects
Functions
Function: BitsInRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: BitsInRangeCheck 
Faults: IndexOutOfBounds 
Function: BitsOutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
int uint16

---

# Page 79

StartBit
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: BitsOutOfRangeCheck 
Faults: IndexOutOfBounds 
Function: CheckLastUpdateWithin
Description: Verify that the last update to this signal happened within the given time.
Parameters:
Name TypeEncodedTypeScaleUnit
WarnDurationMsint uint32 0.001ms
ErrorDurationMsint uint32 0.001ms
Function: CopyRawValueToProcUnitVariable
Description: Copy the signal raw value to a variable in the procunit with index "VariableIndex"
Parameters:
Name Type EncodedType
VariableIndexint uint8
Offset int uint8
ByteLength int uint8
BigEndian booleanbool
Function: DisableTracerLogging
Description: Disables signal logging into tracer.
Function: EnableTracerLogging
Description: Enables signal logging into tracer.
Function: EqualsCheck
Description: Check one time, that the current value is matching the expectation exactly. One message will be created with
severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Response timeout: 0
Result Message: EqualsCheck 
Faults: 
Function: EqualsCheckNoneOf
Description: Check one time, that the current value is not matching one of the non-expectations exactly. One message will
be created with severity Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckNoneOf 
Faults: 
Function: EqualsCheckOneOf
Description: Check one time, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error.

---

# Page 80

Parameters:
Name Type EncodedType
ValueExpected_SignalArrayint64
Response timeout: 0
Result Message: EqualsCheckOneOf 
Faults: 
Function: EqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly. One message will be created
with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Function: EqualsTestChangeTo
Description: Test from now on, that the value is constantly matching the ValueExpectedNow exactly. The
ValueExpectedNow has to be detected at least once! At some time it is allowed to change to the ValueExpectedTarget and
is then no more allowed to change.
Example case: the horn switch is pressed with Castle and the CAN message is monitored. The CAN message is received
in short intervals and the time, when the value for the horn state changes is not exactly known. But it is known that the
signal change is in between 40ms .. 80ms. At 40ms the EqualsTestChangeTo is called. After the maximum allowed time
for the change EqualsTest is called to ensure the system detects if there was no change.
"
Parameters:
Name Type EncodedType
ValueExpectedNow _Signalint64
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToAfterUpdates
Description: EqualsTestChangeToAfterUpdates signal test monitors the signal value and after 'NrOfUpdates' signal update,
it has to match the 'ValueExpectedTarget'. Before the counter expires, the signal value can be either the original value or
the new value. The test remains active until another signal test or ValueTestOff is called.
Parameters:
Name Type EncodedType
NrOfUpdates int int16
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToFromCurrent
Description: EqualsTestChangeToFromCurrent signal test monitors the signal value change from the current value to the
next value and matches the ValueExpectedTarget with the next value. The test remains active until another signal test or
ValueTestOff is called.
Parameters:

---

# Page 81

Name Type EncodedType
ValueExpectedTarget_Signalint64
Function: EqualsTestChangeToOptionalValues
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.
Function: EqualsTestChangeToOptionalValuesAfterUpdates
Description: test the update sequence of a signal.
Note: the OptionalValues shall be passed as raw values to the firmware for proper operation"
Parameters:
Name Type EncodedType
ValueExpectedTarget_Signal int64
the desired final value which the signal will reach at the end of the sequence
NrOfUpdatesint int16
maximum number of allowed changes till reaching the ValueExpectedTarget
UseSequenceboolean bool
if true , then the signal will update exactly as the sequence given by the user , if false , then the signal will reach
these values but the order is not important
OptionalValueslong[] int64
the sequence of values which the signal could be updated to before reaching the desired final value.
Function: EqualsTestFreeze
Description: Test from now on, that the current value is constantl and not changing. This is equal to EqualsTest to be called
with the current signal value.
Function: EqualsTestNoneOf
Description: Test from now on, that the current value is not matching one of the non-expectations exactly. One message
will be created with severity Information/Error immediately and later messages will be created when the severity changes
between Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArray int64
Values that are not expected. [MAX =
50]
Function: EqualsTestOneOf
Description: Test from now on, that the current value is matching one of the expectations exactly. One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error.
Parameters:
Name Type EncodedType
ValueExpected_SignalArray int64
Values that are expected. [MAX =
50]
Function: EqualsTestWithCurrentValue
Function: Get
Description: Get the current value
Response timeout: 0
Result Message: Get 
Faults: 
Function: InRangeCheck

---

# Page 82

Description: Check one time, that the current value is within a given range. One message will be created with severity
Information/Warning/Error immediately.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Response timeout: 0
Result Message: InRangeCheck 
Faults: 
Function: InRangeCheckRaw
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: InRangeCheckRaw 
Faults: IndexOutOfBounds 
Function: InRangeTest
Description: Test from now on, that the value is constantly within a given range.
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Function: LoggingForceNow
Description: Create a single log of the current value of the signal. If this is a bus signal, the current value from the last
signal update.
Function: LoggingOnIntervalDisable
Description: Disable the logging of the signal value on interval times.
Function: LoggingOnIntervalEnable
Description: Enable logging of the signal value with a given interval time. If the logging on interval is already enabled,
reenabling forces a logging now and continues with the new interval time.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: LoggingOnUpdateDisable
Description: Disable the logging of the signal value on update events.

---

# Page 83

Function: LoggingOnUpdateEnable
Description: Enable logging of the signal value on each update event.
Parameters:
Name Type EncodedType
ValueChangedboolean bool
If true, the logging is only made on changes of the signal's
values.
Function: MaskedEqualsCheck
Description: Check one time, that the current value is matching the expectation exactly ignoring the bits which are masked
out
Parameters:
Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw
Response timeout: 0
Result Message: MaskedEqualsCheck 
Faults: 
Function: MaskedEqualsTest
Description: Test from now on, that the value is constantly matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: MaskedNotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Response timeout: 0
Result Message: MaskedNotEqualsCheck 
Faults: 
Function: MaskedNotEqualsTest
Description: Test from now on, that the value is constantly not matching the expectation exactly ignoring the bits which are
masked out
Parameters:
Name TypeEncodedTypeFormat
ValueNotExpectedint[]uint8 raw
Mask int[]uint8 raw
Function: ModifyBits
Description: Sets a range of bits defined by StartBit and BitLength in _Signal considering signal endianess and Sign. 
Parameters:

---

# Page 84

Name Type EncodedType
Value long int64
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: ModifyBytes
Description: Modify the framecontent by replacing a byte sequence
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Function: NotEqualsCheck
Description: Check one time, that the current value is not matching the expectation exactly. One message will be created
with severity Information/Error.
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Response timeout: 0
Result Message: NotEqualsCheck 
Faults: 
Function: NotEqualsTest
Description: Test from now on, that the current value is not matching the expectations exactly . One message will be
created with severity Information/Error immediately and later messages will be created when the severity changes between
Information/Error. That means, if the test was in error and the value changes, but the test is still in error, no new message
will be created.
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Function: OutOfRangeCheck
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: OutOfRangeCheck 
Faults: IndexOutOfBounds 
Function: Set
Description: Set the current value
Parameters:
NameType EncodedType
Value_Signalint64

---

# Page 85

Function: SetDefaultValue
Description: Reset the signal to the default value
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetWithMask
Description: Sets a signal value without modifying the masked out bits.
This translate to: 1 in the mask means that the bit will be modified. 0 in the mask means that the bit will NOT be modified. 
SignalValue = ( SignalValue & ~Mask ) | ( Value & Mask );
Parameters:
NameTypeEncodedTypeFormat
Valueint[]uint8 raw
Maskint[]uint8 raw
Function: TimingTest
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task.
Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
Function: TimingTestOff
Description: Deactivate the currently active test for the timing.
Function: TimingTestWithFirstUpdate
Description: Test from now on, that the difference time between two consequtive signal updates is withing a given range.
The check is done when calling TimingTest, TimingTestOff, signal update and on a slow cyclic task. If the test is
deactivated before the FirstUpdate time expires, there will be no error generated.
Parameters:
Name TypeEncodedTypeScale Unit
CycleMin longint64 0.000001ms
CycleMinWarnlongint64 0.000001ms
CycleMaxWarnlongint64 0.000001ms
CycleMax longint64 0.000001ms
FirstUpdate longint64 0.000001ms
Function: UpdateCounterCheck
Description: Check the update counter against an expectation value value range.
So also the Update Test description in the _Signal interface doc.
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterCheckAndReset
Description: Check the update counter against an expectation value value range. Afterwards, set the update counter to
zero.

---

# Page 86

So also the Update Test description in the _Signal interface doc.
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
MaxWarnint int32
MaxErrorint int32
Response timeout: 0
Result Message: UpdateCounterCheck 
Faults: 
Function: UpdateCounterGet
Description: Get the current state of the update counter. Optionally this function can set the update counter to zero
(DoReset).
So also the Update Test description in the _Signal interface doc.
Parameters:
Name Type EncodedType
DoResetbooleanbool
Response timeout: 0
Result Message: UpdateCounterGet 
Faults: 
Function: UpdateCounterReset
Description: Reset the update counter of the signal. 
So also the Update Test description in the _Signal interface doc.
Function: UpdateIsAllowed
Description: By default, all signals allow updates. If this is set to false, each update on this signal value will generate an
error.
Parameters:
Name Type EncodedType
Allowedbooleanbool
Function: UpdateOnInterval
Description: Passive input signal shall be updated on a periodic cycle.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: UpdateOnIntervalOff
Description: Passive input signal shall no more be updated on a periodic cycle.
Function: ValueTestOff
Description: Deactive the currently active test for value. This may be the equals test, in range, outside range.
back to interface definition
Messages
Message: ArrayEqualsTest
Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: BitsInRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian

---

# Page 87

AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: BitsOutOfRangeCheck
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin int uint32
LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: CheckLastUpdateWithin
Parameters:
Name TypeEncodedTypeScaleUnit
RealDurationMsint uint32 0.001ms
WarnDurationMsint uint32 0.001ms
ErrorDurationMsint uint32 0.001ms
Message: EqualsCheck
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Value _Signalint64
Message: EqualsCheckNoneOf
Parameters:
Name Type EncodedType
ValuesNotExpected_SignalArrayint64
Value _Signal int64
Message: EqualsCheckOneOf
Parameters:
Name Type EncodedType
ValuesExpected_SignalArrayint64
Value _Signal int64
Message: EqualsTest
Parameters:
Name Type EncodedType
ValueExpected_Signalint64
Value _Signalint64
Message: EqualsTestChangeTo
Description: The message is generated once, when the EqualsTestChangeTo test is active and a signal value change is
detected.
Parameters:
Name Type EncodedType
ValueExpectedFrom_Signalint64
ValueExpectedTo _Signalint64
ValueAct _Signalint64
Message: GeneralMessage
Parameters:

---

# Page 88

NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Get
Parameters:
NameType EncodedType
Value_Signalint64
Message: InRangeCheck
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Message: InRangeCheckRaw
Parameters:
Name TypeEncodedType
Offset int uint16
ValueMin longint64
ValueMinWarnlongint64
Value longint64
ValueMaxWarnlongint64
ValueMax longint64
Message: InRangeTest
Parameters:
Name Type EncodedType
ValueMin _Signalint64
ValueMinWarn_Signalint64
Value _Signalint64
ValueMaxWarn_Signalint64
ValueMax _Signalint64
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received signal.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: Log
Parameters:
Name Type EncodedType
UpdateCountint int32
ValueChangedboolean bool
LoggingCauseLoggingCauseint
Value _Signal int64
Message: MaskedEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -

---

# Page 89

Message: MaskedNotEqualsCheck
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: MaskedNotEqualsTest
Parameters:
Name Type EncodedTypeFormat
ValueNotExpected_Signalint64 -
Mask int[] uint8 raw
Value _Signalint64 -
Message: NotEqualsCheck
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64
Message: NotEqualsTest
Parameters:
Name Type EncodedType
ValueNotExpected_Signalint64
Value _Signalint64
Message: NotYetUpdated
Description: Indicate the condition, that this signal had never had a value assigned since the Castle module's startup
Message: OutOfRangeCheck
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: RegisteredMonitorAliveCounterFunction
Message: RegisteredMonitorChecksumFunction
Message: RegisteredTxAliveCounterFunction
Message: RegisteredTxChecksumFunction
Message: TimingTest
Parameters:
Name Type EncodedTypeScale Unit
CycleMin long int64 0.000001ms
CycleMinWarn long int64 0.000001ms
CycleValue long int64 0.000001ms
CycleMaxWarn long int64 0.000001ms
CycleMax long int64 0.000001ms
SignalUpdateOccurredbooleanbool
Message: TimingTestNoUpdates
Parameters:
NameTypeEncodedTypeScale Unit
Sincelongint64 0.000001ms
Message: TimingTestNotActive

---

# Page 90

Message: UpdateCounterCheck
Parameters:
Name TypeEncodedType
MinErrorint int32
MinWarnint int32
Value int int32
MaxWarnint int32
MaxErrorint int32
Message: UpdateCounterGet
Parameters:
NameTypeEncodedType
Valueint int32
Message: UpdateHappenedButNotAllowed
Description: The signal was set to UpdateIsAllowed false, but it was updated.
back to interface definition
Events
Event: Update
Event: ValueChange
back to interface definition
Receivers
Receiver: Following
Description: Force this signal to follow the physical value of another signal. Any Signal value are allowed. Offset, factor, the
bit length and the sign of the com signal are considered. Taken into Consideration [Physical Value = Raw Value * Factor +
Offset]
back to interface definition
Interface: _Com  extends _Object
Enumerations
ErrorLevel
Functions
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetUserTag
Messages
GeneralMessage
PduDlcMismatch
PduNotFoundInCom
Enumerations
Enum: ErrorLevel
Description: The error level used for reporting
Value
NOTHING
INFO
WARN
ERROR
FATAL
Functions
Function: ReportPduDlcMismatchInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 

---

# Page 91

Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat
Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom
Description: A pdu was received with no matching generated COM pdu.
Parameters:
NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Interface: _ComCan  extends _Com _Object

---

# Page 92

Functions
Init
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetUserTag
Messages
CanNetworkAlreadyInitialized
CanNetworkDeInitialized
CanNetworkHasBeenInitialized
GeneralMessage
PduDlcMismatch
PduNotFoundInCom
Functions
Function: Init
Description: 
Purpose:
- Assigns the communication (com) object to the CAN controller and initializes it. 
- This function prepares the CAN interface for communication. 
Example:
*_ApiInit() 
Function: ReportPduDlcMismatchInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetUserTag

---

# Page 93

Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: CanNetworkAlreadyInitialized
Description: Report that this network already initialized before
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: CanNetworkDeInitialized
Description: Log the deinitialized can network to init the new one
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: CanNetworkHasBeenInitialized
Description: Log the initialized can network after initialization
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat
Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom
Description: A pdu was received with no matching generated COM pdu.
Parameters:
NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Interface: _ComFlexray  extends _Com _Object
Functions
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetUserTag
Messages
GeneralMessage
PduDlcMismatch
PduNotFoundInCom
Functions
Function: ReportPduDlcMismatchInCom

---

# Page 94

Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat
Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom
Description: A pdu was received with no matching generated COM pdu.
Parameters:

---

# Page 95

NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Interface: ComLinSched_Tables  extends _Com _Object
Functions
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetUserTag
Messages
GeneralMessage
PduDlcMismatch
PduNotFoundInCom
Functions
Function: ReportPduDlcMismatchInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages

---

# Page 96

Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat
Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom
Description: A pdu was received with no matching generated COM pdu.
Parameters:
NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Interface: _ComLin  extends _Com _Object
Functions
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetClkDividerRxUartFollowFrame
SetUserTag
UpdateFrameTiming
Messages
GeneralMessage
PduDlcMismatch
PduNotFoundInCom
Functions
Function: ReportPduDlcMismatchInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:

---

# Page 97

*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetClkDividerRxUartFollowFrame
Description: 
Purpose:
- Sets the current receiver (Rx) baud rate to follow the sync field of the specified LIN frame. 
- This allows dynamic adjustment of the baud rate based on the incoming frame's synchronization. 
Example:
*_ApiSetClkDividerRxUartFollowFrame(objLinFrame, 120) 
Parameters:
Name Type EncodedType Unit
Frameint _ComFrameLin
The LIN frame object whose sync field will be used to adjust the Rx baud rate.
RxClkDividerint uint16 counts
The receiver clock divider value in counts to set for following the frame's sync
field.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: UpdateFrameTiming
Description: 
Purpose:
- Modifies LIN frame periodic timing specifications based on a selected Schedule Table and LIN frame object, using the
provided new timing parameters. 
Example:
*_ApiUpdateFrameTiming(objScheduleTable, objLinFrame, 100, 2, [1,1,1,1], 1, 500, 1000) 
Parameters:
Name Type EncodedType Unit
ScheduleTableint ComLinSched_Tables
The schedule table object to use for timing
modifications.
Frameint _ComFrameLin
The LIN frame object whose timing is to be updated.
ClkDividerint uint16 counts
Clock divider value in counts.
DelaySyncFieldint uint8 hb
Delay for the sync field in half-bits (hb).
DelayBytesint[] uint8 hb
Array of delays for each byte in half-bits (hb).
DelayChecksumint uint8 hb
Delay for the checksum in half-bits (hb).
FrameLengthint uint16 µs
Total frame length in microseconds (µs).
int uint16 µs

---

# Page 98

MsgSlot
Message slot time in microseconds (µs).
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat
Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom
Description: A pdu was received with no matching generated COM pdu.
Parameters:
NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Interface: _ComGeneric  extends _Com _Object
Functions
Init
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetUserTag
Messages
GeneralMessage
GenericNetworkAlreadyInitialized
GenericNetworkDeInitialized
GenericNetworkHasBeenInitialized
PduDlcMismatch
PduNotFoundInCom
Functions
Function: Init
Description: 
Purpose: 
- Assign the com to the generic controller and initialize it. 
Example: 
*_ApiInit() 
Function: ReportPduDlcMismatchInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:

---

# Page 99

Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GenericNetworkAlreadyInitialized
Description: Report that this network already initialized before
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: GenericNetworkDeInitialized
Description: Log the deinitialized generic network to init the new one
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: GenericNetworkHasBeenInitialized
Description: Log the initialized generic network after initialization
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat

---

# Page 100

Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom
Description: A pdu was received with no matching generated COM pdu.
Parameters:
NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Interface: _ComEthernet  extends _Com _Object
Functions
Deinit
Init
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetUserTag
Messages
EthernetNetworkAlreadyInitialized
EthernetNetworkDeInitialized
EthernetNetworkHasBeenInitialized
GeneralMessage
PduDlcMismatch
PduNotFoundInCom
Functions
Function: Deinit
Description: 
Purpose: 
- Detach the selected / initialized Com Ethernet Network. 
Example: 
*_ApiDeinit() 
Function: Init
Description: 
Purpose: 
- Assign the com to the can controller and initialize it. 
- Takes long time from 6 ms to 8 ms depending on Ethernet Cluster size. 
Example: 
*_ApiInit() 
Function: ReportPduDlcMismatchInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom

---

# Page 101

Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: EthernetNetworkAlreadyInitialized
Description: Report that this network already initialized before
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: EthernetNetworkDeInitialized
Description: Log the deinitialized ethernet network to init the new one
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: EthernetNetworkHasBeenInitialized
Description: Log the initialized ethernet network after initialization
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat
Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom

---

# Page 102

Description: A pdu was received with no matching generated COM pdu.
Parameters:
NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Interface: _ComFrameRx  extends _Object
Enumerations
EnableProcessingEnum
Functions
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: EnableProcessingEnum
Value Description
Discard Disable Frame Processing at all. This will save Castle processing power and you won't be able to test this frame
RawFrameProcess the frame on the level of the raw data of the frame only which means any children pdus or signals will not be
updated and cannot be tested. This will save partially Castle processing power
Full Process the whole frame with it's pdus and signals. This is a must to test the frame or any children related to it
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComFrameCanRx  extends _ComFrameRx _Object
Functions
CheckCanRxFrameDlc
EnableRxProcessing
SetUserTag
Messages
GeneralMessage
Functions
Function: CheckCanRxFrameDlc
Description: 
Purpose: 
- compare the received CAN frame DLC on the bus with the expected DLC provided by the user, specially used to test the
last received response of the diag. 
- There is a difference between this function, and the one that compares received dlc on the bus with the dlc of the DBC. 
Example: 
*_ApiCheckCanRxFrameDlc(40) 
Parameters:
Name TypeEncodedType
int uint8

---

# Page 103

DLC_ExpectedExpected DLC.
Function: EnableRxProcessing
Description: 
Purpose: 
- Due to CASTLE Processing Power Limitation, it's a must to call this API with RawFrame or Full to test any RX frame. 
- Also, if you want to optimize in Castle processing you can call this API with Disable option for the unneeded can frames. 
- The default value for this API is Discard. 
Example: 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard, Raw frame, or Full.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComFrameGenericRx  extends _ComFrameRx _Object
Description: Represent Rx frames of ComGeneric Bus (Any Bus with .DBC as a database)
Functions
EnableRxProcessing
SetUserTag
Messages
GeneralMessage
Functions
Function: EnableRxProcessing
Description: 
Purpose: 
- This is intialized by Full for the backward compatibility. 
Example: 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard, Raw frame, or Full.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex

---

# Page 104

Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComFrameCanTx  extends _Object
Enumerations
TxErrType
e_mode
Functions
SendAsEvent
SendCyclicPerHw
SendOnce
SendPerTimer
SendPerTimerOff
SetErrors
SetFrameDlc
SetFrameHeaderOptions
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
FrameSentAsEvent
PostTransmit
Objects
Enumerations
Enum: TxErrType
Value Description
TxNoErrInject no error, this is the default state that will be set automatically after injecting any
error
TxCrcErrInject CRC error in the next transimtted message
TxFormErrInject form error in the next transimtted message
TxStuffErrInject stuff error in the next transimtted message
Enum: e_mode
Value Description
DefaultSet the dlc with the default value in the
dbc
UserInputset the dlc with a user specified dlc
Functions
Function: SendAsEvent
Description: 
Purpose: 
- Send a CAN frame once after t ms (Delay) from its normal cycle. 
Example: 
*_ApiSendAsEvent(1000, 500) 
Parameters:
Name Type EncodedType Scale Unit
Delaylong uint64 1e-6 ms
Send a CAN frame once after t ms (Delay) from its normal cycle
PostEventPeriodlong uint64 1e-6 ms
After event occurs, send the frame periodically with delay
PostEventPeriod
Function: SendCyclicPerHw

---

# Page 105

Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner using hardware accelerator until SendPerTimerOff or another call to
SendCyclicPerHw is done. 
- Start with the first frame instance after the given delay. 
- This version of API doesn't support yet CAN frames with checksum or alive counter calculation, but for other cases it is
prefered to use it to utilize CPU performance. 
Example: 
*_ApiSendCyclicPerHw(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendOnce
Description: 
Purpose: 
- End the CAN frame now. This does not change the behavior of the SendPerTimer. 
Example: 
*_ApiSendOnce() 
Function: SendPerTimer
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner until SendPerTimerOff or another call to SendPerTimer is done. Start
with the first frame instance after the given delay. 
Example: 
*_ApiSendPerTimer(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendPerTimerOff
Description: 
Purpose: 
- Stop sending the frame from now on. 
Example: 
*_ApiSendPerTimerOff() 
Function: SetErrors
Description: 
Purpose: 
- Set the needed Tx errors flags for the next transmission only, used for negative testing. 
Example: 
*_ApiSetErrors(EnmTxErrType.TxNoErr) 
Parameters:
Name Type EncodedType
NextTxErrTxErrType int
Error Type: 0 (no Err) - 1 (Crc Err) - 2 (Form Err) - 3 (Stuff
Err)
Function: SetFrameDlc
Description: 
Purpose: 
- Sets Frame Dlc. 
Example: 
*_ApiSetFrameDlc(0, Enme_mode.Default) 
Parameters:

---

# Page 106

NameType EncodedType
Dlcint uint8
Dlc Value
Modee_mode int
e_mode: 0 (default) - 1 (User
Input)
Function: SetFrameHeaderOptions
Description: 
Purpose: 
- This API to set some of the CAN header options , RTR bit , IDE bit and shift extended Id to the left. 
Example: 
*_ApiSetFrameHeaderOptions(true, true, true, true, Enme_mode.Default) 
Parameters:
Name Type EncodedType
Rtrboolean bool
RTR bit ( Remote Frame )
Ideboolean bool
IDE bit ( Extended ID )
Brsboolean bool
BRS bit ( Bit Rate Switch )
ShiftIdLeftboolean bool
Shift left is to shift the extended Id from the 11 bit field to the 18 bit field at the
header
Modee_mode int
Default or User Input
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
Event: FrameSentAsEvent
Event: PostTransmit
Description: SW-driven implementation, we are not knowing when exactly the frame has been sent. In case of busy bus,
real sending is deferred.
back to interface definition
Interface:
_ComFrameGenericTx  extends _Object
Description: Represet Tx frames of ComGeneric Bus(Any Bus with .DBC as a database)
Enumerations
mode

---

# Page 107

Functions
CountedSendPerTimer
SendOnce
SendPerTimer
SendPerTimerOff
SetFrameLength
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PostTransmit
Objects
Enumerations
Enum: mode
Value Description
DefaultSet the length with the default value in the
dbc
UserInputset the length by user
Functions
Function: CountedSendPerTimer
Description: SendPerTimer untill specific frameCount , then SendPerTimerOff
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Countint uint16
Function: SendOnce
Function: SendPerTimer
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Function: SendPerTimerOff
Function: SetFrameLength
Description: Set length of Generic Frame
Parameters:
NameTypeEncodedType
Lengthint uint16
Modemodeint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 108

Events
Event: PreTransmit_1
Description: Not Implemented by default. Only specific projects implement it, eg. FrontCamera. refer to
VIS_Renault_CMFB.
Event: PreTransmit_2
Description: Not Implemented by default. Only specific projects implement it, eg. FrontCamera. refer to
VIS_Renault_CMFB.
Event: PostTransmit
Description: Not Implemented by default. Only specific projects implement it, eg. FrontCamera. refer to
VIS_Renault_CMFB.
back to interface definition
Interface: _ComFrameCanMux  extends _Object
Functions
SetMuxConf
SetUserTag
Messages
GeneralMessage
Functions
Function: SetMuxConf
Description: 
Purpose:
- Sets the configuration for multiplexer (mux) blocks. 
- This involves defining groups of signals and their respective durations for transmission. 
Example:
*_ApiSetMuxConf([1, 2], [100, 200]) // Configures two mux groups with IDs 1 and 2, and durations 100ms and 200ms
respectively. 
Parameters:
Name Type EncodedType Unit
GroupIDsint[] uint16
An array of group identifiers for the mux configuration.
GroupDurationsint[] uint16 ms
An array of durations (in milliseconds) corresponding to each group ID. The length of this array must match
GroupIDs.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComFrameCanMuxTx  extends _ComFrameCanMux _ComFrameCanTx _Object

---

# Page 109

Functions
SendAsEvent
SendCyclicPerHw
SendOnce
SendPerTimer
SendPerTimerOff
SetErrors
SetFrameDlc
SetFrameHeaderOptions
SetMuxConf
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
FrameSentAsEvent
PostTransmit
Objects
Functions
Function: SendAsEvent
Description: 
Purpose: 
- Send a CAN frame once after t ms (Delay) from its normal cycle. 
Example: 
*_ApiSendAsEvent(1000, 500) 
Parameters:
Name Type EncodedType Scale Unit
Delaylong uint64 1e-6 ms
Send a CAN frame once after t ms (Delay) from its normal cycle
PostEventPeriodlong uint64 1e-6 ms
After event occurs, send the frame periodically with delay
PostEventPeriod
Function: SendCyclicPerHw
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner using hardware accelerator until SendPerTimerOff or another call to
SendCyclicPerHw is done. 
- Start with the first frame instance after the given delay. 
- This version of API doesn't support yet CAN frames with checksum or alive counter calculation, but for other cases it is
prefered to use it to utilize CPU performance. 
Example: 
*_ApiSendCyclicPerHw(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendOnce
Description: 
Purpose: 
- End the CAN frame now. This does not change the behavior of the SendPerTimer. 
Example: 
*_ApiSendOnce() 
Function: SendPerTimer
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner until SendPerTimerOff or another call to SendPerTimer is done. Start
with the first frame instance after the given delay. 

---

# Page 110

Example: 
*_ApiSendPerTimer(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendPerTimerOff
Description: 
Purpose: 
- Stop sending the frame from now on. 
Example: 
*_ApiSendPerTimerOff() 
Function: SetErrors
Description: 
Purpose: 
- Set the needed Tx errors flags for the next transmission only, used for negative testing. 
Example: 
*_ApiSetErrors(EnmTxErrType.TxNoErr) 
Parameters:
Name Type EncodedType
NextTxErrTxErrType int
Error Type: 0 (no Err) - 1 (Crc Err) - 2 (Form Err) - 3 (Stuff
Err)
Function: SetFrameDlc
Description: 
Purpose: 
- Sets Frame Dlc. 
Example: 
*_ApiSetFrameDlc(0, Enme_mode.Default) 
Parameters:
NameType EncodedType
Dlcint uint8
Dlc Value
Modee_mode int
e_mode: 0 (default) - 1 (User
Input)
Function: SetFrameHeaderOptions
Description: 
Purpose: 
- This API to set some of the CAN header options , RTR bit , IDE bit and shift extended Id to the left. 
Example: 
*_ApiSetFrameHeaderOptions(true, true, true, true, Enme_mode.Default) 
Parameters:
Name Type EncodedType
Rtrboolean bool
RTR bit ( Remote Frame )
Ideboolean bool
IDE bit ( Extended ID )
Brsboolean bool
BRS bit ( Bit Rate Switch )
ShiftIdLeftboolean bool
Shift left is to shift the extended Id from the 11 bit field to the 18 bit field at the
header
Modee_mode int
Default or User Input
Function: SetMuxConf

---

# Page 111

Description: 
Purpose:
- Sets the configuration for multiplexer (mux) blocks. 
- This involves defining groups of signals and their respective durations for transmission. 
Example:
*_ApiSetMuxConf([1, 2], [100, 200]) // Configures two mux groups with IDs 1 and 2, and durations 100ms and 200ms
respectively. 
Parameters:
Name Type EncodedType Unit
GroupIDsint[] uint16
An array of group identifiers for the mux configuration.
GroupDurationsint[] uint16 ms
An array of durations (in milliseconds) corresponding to each group ID. The length of this array must match
GroupIDs.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
Event: FrameSentAsEvent
Event: PostTransmit
Description: SW-driven implementation, we are not knowing when exactly the frame has been sent. In case of busy bus,
real sending is deferred.
back to interface definition
Interface:
_ComFrameCanMuxRx  extends _ComFrameCanRx _ComFrameRx _Object
Functions
CheckCanRxFrameDlc
EnableRxProcessing
SetUserTag
Messages
GeneralMessage
Functions
Function: CheckCanRxFrameDlc
Description: 
Purpose: 
- compare the received CAN frame DLC on the bus with the expected DLC provided by the user, specially used to test the

---

# Page 112

last received response of the diag. 
- There is a difference between this function, and the one that compares received dlc on the bus with the dlc of the DBC. 
Example: 
*_ApiCheckCanRxFrameDlc(40) 
Parameters:
Name TypeEncodedType
DLC_Expectedint uint8
Expected DLC.
Function: EnableRxProcessing
Description: 
Purpose: 
- Due to CASTLE Processing Power Limitation, it's a must to call this API with RawFrame or Full to test any RX frame. 
- Also, if you want to optimize in Castle processing you can call this API with Disable option for the unneeded can frames. 
- The default value for this API is Discard. 
Example: 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard, Raw frame, or Full.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComFrameGmExtendedCan  extends _Object
Functions
SetSourceId
SetUserTag
Messages
GeneralMessage
Functions
Function: SetSourceId
Description: 
Purpose:
- Sets the source identifier for GM (General Motors) extended CAN frames. 
- This is specific to GMLAN implementations where the source of a message needs to be explicitly set. 
Example:
*_ApiSetSourceId(0x1A) // Sets the source ID for the frame to 0x1A. 
Parameters:

---

# Page 113

Name Type EncodedType
SourceIdint uint8
The source identifier to be set for the GM extended CAN
frame.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComFrameGmExtendedCanTx  extends _ComFrameCanTx _ComFrameGmExtendedCan _Object
Functions
SendAsEvent
SendCyclicPerHw
SendOnce
SendPerTimer
SendPerTimerOff
SetErrors
SetFrameDlc
SetFrameHeaderOptions
SetSourceId
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
FrameSentAsEvent
PostTransmit
Objects
Functions
Function: SendAsEvent
Description: 
Purpose: 
- Send a CAN frame once after t ms (Delay) from its normal cycle. 
Example: 
*_ApiSendAsEvent(1000, 500) 
Parameters:
Name Type EncodedType Scale Unit
Delaylong uint64 1e-6 ms
Send a CAN frame once after t ms (Delay) from its normal cycle
PostEventPeriodlong uint64 1e-6 ms
After event occurs, send the frame periodically with delay
PostEventPeriod
Function: SendCyclicPerHw
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner using hardware accelerator until SendPerTimerOff or another call to

---

# Page 114

SendCyclicPerHw is done. 
- Start with the first frame instance after the given delay. 
- This version of API doesn't support yet CAN frames with checksum or alive counter calculation, but for other cases it is
prefered to use it to utilize CPU performance. 
Example: 
*_ApiSendCyclicPerHw(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendOnce
Description: 
Purpose: 
- End the CAN frame now. This does not change the behavior of the SendPerTimer. 
Example: 
*_ApiSendOnce() 
Function: SendPerTimer
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner until SendPerTimerOff or another call to SendPerTimer is done. Start
with the first frame instance after the given delay. 
Example: 
*_ApiSendPerTimer(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendPerTimerOff
Description: 
Purpose: 
- Stop sending the frame from now on. 
Example: 
*_ApiSendPerTimerOff() 
Function: SetErrors
Description: 
Purpose: 
- Set the needed Tx errors flags for the next transmission only, used for negative testing. 
Example: 
*_ApiSetErrors(EnmTxErrType.TxNoErr) 
Parameters:
Name Type EncodedType
NextTxErrTxErrType int
Error Type: 0 (no Err) - 1 (Crc Err) - 2 (Form Err) - 3 (Stuff
Err)
Function: SetFrameDlc
Description: 
Purpose: 
- Sets Frame Dlc. 
Example: 
*_ApiSetFrameDlc(0, Enme_mode.Default) 
Parameters:
NameType EncodedType
Dlcint uint8
Dlc Value

---

# Page 115

Modee_mode int
e_mode: 0 (default) - 1 (User
Input)
Function: SetFrameHeaderOptions
Description: 
Purpose: 
- This API to set some of the CAN header options , RTR bit , IDE bit and shift extended Id to the left. 
Example: 
*_ApiSetFrameHeaderOptions(true, true, true, true, Enme_mode.Default) 
Parameters:
Name Type EncodedType
Rtrboolean bool
RTR bit ( Remote Frame )
Ideboolean bool
IDE bit ( Extended ID )
Brsboolean bool
BRS bit ( Bit Rate Switch )
ShiftIdLeftboolean bool
Shift left is to shift the extended Id from the 11 bit field to the 18 bit field at the
header
Modee_mode int
Default or User Input
Function: SetSourceId
Description: 
Purpose:
- Sets the source identifier for GM (General Motors) extended CAN frames. 
- This is specific to GMLAN implementations where the source of a message needs to be explicitly set. 
Example:
*_ApiSetSourceId(0x1A) // Sets the source ID for the frame to 0x1A. 
Parameters:
Name Type EncodedType
SourceIdint uint8
The source identifier to be set for the GM extended CAN
frame.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3

---

# Page 116

Event: FrameSentAsEvent
Event: PostTransmit
Description: SW-driven implementation, we are not knowing when exactly the frame has been sent. In case of busy bus,
real sending is deferred.
back to interface definition
Interface: _ComFrameCanRxTx  extends _ComFrameCanRx _ComFrameCanTx _ComFrameRx _Object
Functions
CheckCanRxFrameDlc
EnableRxProcessing
SendAsEvent
SendCyclicPerHw
SendOnce
SendPerTimer
SendPerTimerOff
SetErrors
SetFrameDlc
SetFrameHeaderOptions
SetUserTag
SwitchRxMode
SwitchTxMode
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
FrameSentAsEvent
PostTransmit
Objects
Functions
Function: CheckCanRxFrameDlc
Description: 
Purpose: 
- compare the received CAN frame DLC on the bus with the expected DLC provided by the user, specially used to test the
last received response of the diag. 
- There is a difference between this function, and the one that compares received dlc on the bus with the dlc of the DBC. 
Example: 
*_ApiCheckCanRxFrameDlc(40) 
Parameters:
Name TypeEncodedType
DLC_Expectedint uint8
Expected DLC.
Function: EnableRxProcessing
Description: 
Purpose: 
- Due to CASTLE Processing Power Limitation, it's a must to call this API with RawFrame or Full to test any RX frame. 
- Also, if you want to optimize in Castle processing you can call this API with Disable option for the unneeded can frames. 
- The default value for this API is Discard. 
Example: 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard, Raw frame, or Full.
Function: SendAsEvent
Description: 
Purpose: 
- Send a CAN frame once after t ms (Delay) from its normal cycle. 

---

# Page 117

Example: 
*_ApiSendAsEvent(1000, 500) 
Parameters:
Name Type EncodedType Scale Unit
Delaylong uint64 1e-6 ms
Send a CAN frame once after t ms (Delay) from its normal cycle
PostEventPeriodlong uint64 1e-6 ms
After event occurs, send the frame periodically with delay
PostEventPeriod
Function: SendCyclicPerHw
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner using hardware accelerator until SendPerTimerOff or another call to
SendCyclicPerHw is done. 
- Start with the first frame instance after the given delay. 
- This version of API doesn't support yet CAN frames with checksum or alive counter calculation, but for other cases it is
prefered to use it to utilize CPU performance. 
Example: 
*_ApiSendCyclicPerHw(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendOnce
Description: 
Purpose: 
- End the CAN frame now. This does not change the behavior of the SendPerTimer. 
Example: 
*_ApiSendOnce() 
Function: SendPerTimer
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner until SendPerTimerOff or another call to SendPerTimer is done. Start
with the first frame instance after the given delay. 
Example: 
*_ApiSendPerTimer(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendPerTimerOff
Description: 
Purpose: 
- Stop sending the frame from now on. 
Example: 
*_ApiSendPerTimerOff() 
Function: SetErrors
Description: 
Purpose: 
- Set the needed Tx errors flags for the next transmission only, used for negative testing. 
Example: 
*_ApiSetErrors(EnmTxErrType.TxNoErr) 
Parameters:
Name Type EncodedType

---

# Page 118

NextTxErrTxErrType int
Error Type: 0 (no Err) - 1 (Crc Err) - 2 (Form Err) - 3 (Stuff
Err)
Function: SetFrameDlc
Description: 
Purpose: 
- Sets Frame Dlc. 
Example: 
*_ApiSetFrameDlc(0, Enme_mode.Default) 
Parameters:
NameType EncodedType
Dlcint uint8
Dlc Value
Modee_mode int
e_mode: 0 (default) - 1 (User
Input)
Function: SetFrameHeaderOptions
Description: 
Purpose: 
- This API to set some of the CAN header options , RTR bit , IDE bit and shift extended Id to the left. 
Example: 
*_ApiSetFrameHeaderOptions(true, true, true, true, Enme_mode.Default) 
Parameters:
Name Type EncodedType
Rtrboolean bool
RTR bit ( Remote Frame )
Ideboolean bool
IDE bit ( Extended ID )
Brsboolean bool
BRS bit ( Bit Rate Switch )
ShiftIdLeftboolean bool
Shift left is to shift the extended Id from the 11 bit field to the 18 bit field at the
header
Modee_mode int
Default or User Input
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchRxMode
Description: 
Purpose:
- Switches the CAN frame mode back to Receive (RX). 
- After this call, the frame will behave as an RX frame, listening for incoming data. 
- This is often used to revert to the default behavior after a period of transmission. 
Example:
*_ApiSwitchRxMode() // Switches the frame to RX mode. 
Function: SwitchTxMode
Description: 
Purpose:

---

# Page 119

- Switches the CAN frame mode to Transmit (TX). 
- After this call, the frame will behave as a TX frame, allowing data to be sent. 
- The default mode for an RxTx frame is typically RX. 
Example:
*_ApiSwitchTxMode() // Switches the frame to TX mode. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
Event: FrameSentAsEvent
Event: PostTransmit
Description: SW-driven implementation, we are not knowing when exactly the frame has been sent. In case of busy bus,
real sending is deferred.
back to interface definition
Interface:
_ComFrameGenericRxTx  extends _ComFrameGenericRx _ComFrameGenericTx _ComFrameRx _Object
Functions
CountedSendPerTimer
EnableRxProcessing
SendOnce
SendPerTimer
SendPerTimerOff
SetFrameLength
SetUserTag
SwitchRxMode
SwitchTxMode
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PostTransmit
Objects
Functions
Function: CountedSendPerTimer
Description: SendPerTimer untill specific frameCount , then SendPerTimerOff
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Countint uint16
Function: EnableRxProcessing
Description: 
Purpose: 
- This is intialized by Full for the backward compatibility. 
Example: 

---

# Page 120

*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard, Raw frame, or Full.
Function: SendOnce
Function: SendPerTimer
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Function: SendPerTimerOff
Function: SetFrameLength
Description: Set length of Generic Frame
Parameters:
NameTypeEncodedType
Lengthint uint16
Modemodeint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchRxMode
Description: 
Purpose:
- Switches the generic frame mode back to Receive (RX). 
- After this call, the frame will behave as an RX frame for the generic bus. 
- This is often used to revert to the default behavior after a period of transmission. 
Example:
*_ApiSwitchRxMode() // Switches the generic frame to RX mode. 
Function: SwitchTxMode
Description: 
Purpose:
- Switches the generic frame mode to Transmit (TX). 
- After this call, the frame will behave as a TX frame for the generic bus. 
- The default mode for an RxTx frame is typically RX. 
Example:
*_ApiSwitchTxMode() // Switches the generic frame to TX mode. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 121

Events
Event: PreTransmit_1
Description: Not Implemented by default. Only specific projects implement it, eg. FrontCamera. refer to
VIS_Renault_CMFB.
Event: PreTransmit_2
Description: Not Implemented by default. Only specific projects implement it, eg. FrontCamera. refer to
VIS_Renault_CMFB.
Event: PostTransmit
Description: Not Implemented by default. Only specific projects implement it, eg. FrontCamera. refer to
VIS_Renault_CMFB.
back to interface definition
Interface:
_ComFrameCanMuxRxTx  extends _ComFrameCanMux _ComFrameCanRx _ComFrameCanRxTx
_ComFrameCanTx _ComFrameRx _Object
Functions
CheckCanRxFrameDlc
EnableRxProcessing
SendAsEvent
SendCyclicPerHw
SendOnce
SendPerTimer
SendPerTimerOff
SetErrors
SetFrameDlc
SetFrameHeaderOptions
SetMuxConf
SetUserTag
SwitchRxMode
SwitchTxMode
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
FrameSentAsEvent
PostTransmit
Objects
Functions
Function: CheckCanRxFrameDlc
Description: 
Purpose: 
- compare the received CAN frame DLC on the bus with the expected DLC provided by the user, specially used to test the
last received response of the diag. 
- There is a difference between this function, and the one that compares received dlc on the bus with the dlc of the DBC. 
Example: 
*_ApiCheckCanRxFrameDlc(40) 
Parameters:
Name TypeEncodedType
DLC_Expectedint uint8
Expected DLC.
Function: EnableRxProcessing
Description: 
Purpose: 
- Due to CASTLE Processing Power Limitation, it's a must to call this API with RawFrame or Full to test any RX frame. 
- Also, if you want to optimize in Castle processing you can call this API with Disable option for the unneeded can frames. 
- The default value for this API is Discard. 

---

# Page 122

Example: 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard, Raw frame, or Full.
Function: SendAsEvent
Description: 
Purpose: 
- Send a CAN frame once after t ms (Delay) from its normal cycle. 
Example: 
*_ApiSendAsEvent(1000, 500) 
Parameters:
Name Type EncodedType Scale Unit
Delaylong uint64 1e-6 ms
Send a CAN frame once after t ms (Delay) from its normal cycle
PostEventPeriodlong uint64 1e-6 ms
After event occurs, send the frame periodically with delay
PostEventPeriod
Function: SendCyclicPerHw
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner using hardware accelerator until SendPerTimerOff or another call to
SendCyclicPerHw is done. 
- Start with the first frame instance after the given delay. 
- This version of API doesn't support yet CAN frames with checksum or alive counter calculation, but for other cases it is
prefered to use it to utilize CPU performance. 
Example: 
*_ApiSendCyclicPerHw(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendOnce
Description: 
Purpose: 
- End the CAN frame now. This does not change the behavior of the SendPerTimer. 
Example: 
*_ApiSendOnce() 
Function: SendPerTimer
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner until SendPerTimerOff or another call to SendPerTimer is done. Start
with the first frame instance after the given delay. 
Example: 
*_ApiSendPerTimer(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendPerTimerOff
Description: 
Purpose: 
- Stop sending the frame from now on. 
Example: 
*_ApiSendPerTimerOff() 

---

# Page 123

Function: SetErrors
Description: 
Purpose: 
- Set the needed Tx errors flags for the next transmission only, used for negative testing. 
Example: 
*_ApiSetErrors(EnmTxErrType.TxNoErr) 
Parameters:
Name Type EncodedType
NextTxErrTxErrType int
Error Type: 0 (no Err) - 1 (Crc Err) - 2 (Form Err) - 3 (Stuff
Err)
Function: SetFrameDlc
Description: 
Purpose: 
- Sets Frame Dlc. 
Example: 
*_ApiSetFrameDlc(0, Enme_mode.Default) 
Parameters:
NameType EncodedType
Dlcint uint8
Dlc Value
Modee_mode int
e_mode: 0 (default) - 1 (User
Input)
Function: SetFrameHeaderOptions
Description: 
Purpose: 
- This API to set some of the CAN header options , RTR bit , IDE bit and shift extended Id to the left. 
Example: 
*_ApiSetFrameHeaderOptions(true, true, true, true, Enme_mode.Default) 
Parameters:
Name Type EncodedType
Rtrboolean bool
RTR bit ( Remote Frame )
Ideboolean bool
IDE bit ( Extended ID )
Brsboolean bool
BRS bit ( Bit Rate Switch )
ShiftIdLeftboolean bool
Shift left is to shift the extended Id from the 11 bit field to the 18 bit field at the
header
Modee_mode int
Default or User Input
Function: SetMuxConf
Description: 
Purpose:
- Sets the configuration for multiplexer (mux) blocks. 
- This involves defining groups of signals and their respective durations for transmission. 
Example:
*_ApiSetMuxConf([1, 2], [100, 200]) // Configures two mux groups with IDs 1 and 2, and durations 100ms and 200ms
respectively. 
Parameters:
Name Type EncodedType Unit
int[] uint16

---

# Page 124

GroupIDs An array of group identifiers for the mux configuration.
GroupDurationsint[] uint16 ms
An array of durations (in milliseconds) corresponding to each group ID. The length of this array must match
GroupIDs.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchRxMode
Description: 
Purpose:
- Switches the CAN frame mode back to Receive (RX). 
- After this call, the frame will behave as an RX frame, listening for incoming data. 
- This is often used to revert to the default behavior after a period of transmission. 
Example:
*_ApiSwitchRxMode() // Switches the frame to RX mode. 
Function: SwitchTxMode
Description: 
Purpose:
- Switches the CAN frame mode to Transmit (TX). 
- After this call, the frame will behave as a TX frame, allowing data to be sent. 
- The default mode for an RxTx frame is typically RX. 
Example:
*_ApiSwitchTxMode() // Switches the frame to TX mode. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
Event: FrameSentAsEvent
Event: PostTransmit
Description: SW-driven implementation, we are not knowing when exactly the frame has been sent. In case of busy bus,
real sending is deferred.
back to interface definition
Interface:
_ComFrameGmExtendedCanRxTx extends _ComFrameCanRx _ComFrameCanRxTx _ComFrameCanTx
_ComFrameGmExtendedCan _ComFrameRx _Object

---

# Page 125

Functions
CheckCanRxFrameDlc
EnableRxProcessing
SendAsEvent
SendCyclicPerHw
SendOnce
SendPerTimer
SendPerTimerOff
SetErrors
SetFrameDlc
SetFrameHeaderOptions
SetSourceId
SetUserTag
SwitchRxMode
SwitchTxMode
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
FrameSentAsEvent
PostTransmit
Objects
Functions
Function: CheckCanRxFrameDlc
Description: 
Purpose: 
- compare the received CAN frame DLC on the bus with the expected DLC provided by the user, specially used to test the
last received response of the diag. 
- There is a difference between this function, and the one that compares received dlc on the bus with the dlc of the DBC. 
Example: 
*_ApiCheckCanRxFrameDlc(40) 
Parameters:
Name TypeEncodedType
DLC_Expectedint uint8
Expected DLC.
Function: EnableRxProcessing
Description: 
Purpose: 
- Due to CASTLE Processing Power Limitation, it's a must to call this API with RawFrame or Full to test any RX frame. 
- Also, if you want to optimize in Castle processing you can call this API with Disable option for the unneeded can frames. 
- The default value for this API is Discard. 
Example: 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard, Raw frame, or Full.
Function: SendAsEvent
Description: 
Purpose: 
- Send a CAN frame once after t ms (Delay) from its normal cycle. 
Example: 
*_ApiSendAsEvent(1000, 500) 
Parameters:
Name Type EncodedType Scale Unit
Delaylong uint64 1e-6 ms
Send a CAN frame once after t ms (Delay) from its normal cycle

---

# Page 126

PostEventPeriodlong uint64 1e-6 ms
After event occurs, send the frame periodically with delay
PostEventPeriod
Function: SendCyclicPerHw
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner using hardware accelerator until SendPerTimerOff or another call to
SendCyclicPerHw is done. 
- Start with the first frame instance after the given delay. 
- This version of API doesn't support yet CAN frames with checksum or alive counter calculation, but for other cases it is
prefered to use it to utilize CPU performance. 
Example: 
*_ApiSendCyclicPerHw(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendOnce
Description: 
Purpose: 
- End the CAN frame now. This does not change the behavior of the SendPerTimer. 
Example: 
*_ApiSendOnce() 
Function: SendPerTimer
Description: 
Purpose: 
- Start to send the CAN frame on a cyclic manner until SendPerTimerOff or another call to SendPerTimer is done. Start
with the first frame instance after the given delay. 
Example: 
*_ApiSendPerTimer(1000) 
Parameters:
NameTypeEncodedTypeScaleUnit
Delaylonguint64 1e-6 ms
Delay value
Function: SendPerTimerOff
Description: 
Purpose: 
- Stop sending the frame from now on. 
Example: 
*_ApiSendPerTimerOff() 
Function: SetErrors
Description: 
Purpose: 
- Set the needed Tx errors flags for the next transmission only, used for negative testing. 
Example: 
*_ApiSetErrors(EnmTxErrType.TxNoErr) 
Parameters:
Name Type EncodedType
NextTxErrTxErrType int
Error Type: 0 (no Err) - 1 (Crc Err) - 2 (Form Err) - 3 (Stuff
Err)
Function: SetFrameDlc
Description: 
Purpose: 
- Sets Frame Dlc. 

---

# Page 127

Example: 
*_ApiSetFrameDlc(0, Enme_mode.Default) 
Parameters:
NameType EncodedType
Dlcint uint8
Dlc Value
Modee_mode int
e_mode: 0 (default) - 1 (User
Input)
Function: SetFrameHeaderOptions
Description: 
Purpose: 
- This API to set some of the CAN header options , RTR bit , IDE bit and shift extended Id to the left. 
Example: 
*_ApiSetFrameHeaderOptions(true, true, true, true, Enme_mode.Default) 
Parameters:
Name Type EncodedType
Rtrboolean bool
RTR bit ( Remote Frame )
Ideboolean bool
IDE bit ( Extended ID )
Brsboolean bool
BRS bit ( Bit Rate Switch )
ShiftIdLeftboolean bool
Shift left is to shift the extended Id from the 11 bit field to the 18 bit field at the
header
Modee_mode int
Default or User Input
Function: SetSourceId
Description: 
Purpose:
- Sets the source identifier for GM (General Motors) extended CAN frames. 
- This is specific to GMLAN implementations where the source of a message needs to be explicitly set. 
Example:
*_ApiSetSourceId(0x1A) // Sets the source ID for the frame to 0x1A. 
Parameters:
Name Type EncodedType
SourceIdint uint8
The source identifier to be set for the GM extended CAN
frame.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchRxMode
Description: 
Purpose:
- Switches the CAN frame mode back to Receive (RX). 
- After this call, the frame will behave as an RX frame, listening for incoming data. 
- This is often used to revert to the default behavior after a period of transmission. 

---

# Page 128

Example:
*_ApiSwitchRxMode() // Switches the frame to RX mode. 
Function: SwitchTxMode
Description: 
Purpose:
- Switches the CAN frame mode to Transmit (TX). 
- After this call, the frame will behave as a TX frame, allowing data to be sent. 
- The default mode for an RxTx frame is typically RX. 
Example:
*_ApiSwitchTxMode() // Switches the frame to TX mode. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
Event: FrameSentAsEvent
Event: PostTransmit
Description: SW-driven implementation, we are not knowing when exactly the frame has been sent. In case of busy bus,
real sending is deferred.
back to interface definition
Interface: _ComFrameLin  extends _Object
Functions
SendEnable
SetUserTag
Messages
GeneralMessage
WrongLinFrameDlcReceived
Functions
Function: SendEnable
Description: 
Purpose:
- Enables/Starts or disables/Stops the sending of a LIN frame. 
- If Castle is a LIN slave and sending is disabled/Stopped, it will not react when the master requests this frame. 
- If Castle is a LIN master and sending is disabled/Stopped, it will not send this frame. 
Example:
*_ApiSendEnable(true) // Enables sending of the LIN frame. 
*_ApiSendEnable(false) // Disables and Stop sending the selected LIN frame. 
Parameters:

---

# Page 129

NameType EncodedType
Enableboolean bool
Set to `true` to enable sending, `false` to
disable.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: WrongLinFrameDlcReceived
Description: Castle received a LIN frame with wrong DLC.
Parameters:
Name TypeEncodedTypeFormat
FrameDLC int uint16
ReceivedDLCint uint16
FrameId int uint8 hex
back to interface definition
Objects
Object: HeaderPresent
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
HeaderPresent_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: _ComFrameLinRx  extends _ComFrameLin _Object
Functions
SendEnable
SetUserTag
Messages
GeneralMessage
WrongLinFrameDlcReceived
Functions
Function: SendEnable
Description: 
Purpose:
- Enables/Starts or disables/Stops the sending of a LIN frame. 
- If Castle is a LIN slave and sending is disabled/Stopped, it will not react when the master requests this frame. 
- If Castle is a LIN master and sending is disabled/Stopped, it will not send this frame. 
Example:
*_ApiSendEnable(true) // Enables sending of the LIN frame. 
*_ApiSendEnable(false) // Disables and Stop sending the selected LIN frame. 
Parameters:
NameType EncodedType
Enableboolean bool
Set to `true` to enable sending, `false` to
disable.

---

# Page 130

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: WrongLinFrameDlcReceived
Description: Castle received a LIN frame with wrong DLC.
Parameters:
Name TypeEncodedTypeFormat
FrameDLC int uint16
ReceivedDLCint uint16
FrameId int uint8 hex
back to interface definition
Objects
Object: HeaderPresent
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
HeaderPresent_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: _ComFrameLinTx  extends _ComFrameLin _Object
Enumerations
e_mode
Functions
CorruptFrameChecksum
SendEnable
SetFrameDlc
SetUserTag
Messages
GeneralMessage
WrongLinFrameDlcReceived
Events
PreTransmit_1
PreTransmit_2
Objects
HeaderPresent
Enumerations
Enum: e_mode
Value Description
DefaultSet the dlc with the default value in the
dbc
UserInputset the dlc with a user specified dlc
Functions
Function: CorruptFrameChecksum
Description: 
Purpose:
- Enables or disables the corruption of the checksum byte for a transmitted LIN frame. 
- When `CorruptChecksum` is `true`, the checksum byte is inverted. 

---

# Page 131

- Note: This refers to the LIN frame checksum, not a CRC that might be part of the payload data. 
Example:
*_ApiCorruptFrameChecksum(true) // Enable checksum corruption for the next transmission. 
*_ApiCorruptFrameChecksum(false) // Disable checksum corruption. 
Parameters:
Name Type EncodedType
CorruptChecksumboolean bool
Set to `true` to enable checksum corruption, `false` to
disable.
Function: SendEnable
Description: 
Purpose:
- Enables/Starts or disables/Stops the sending of a LIN frame. 
- If Castle is a LIN slave and sending is disabled/Stopped, it will not react when the master requests this frame. 
- If Castle is a LIN master and sending is disabled/Stopped, it will not send this frame. 
Example:
*_ApiSendEnable(true) // Enables sending of the LIN frame. 
*_ApiSendEnable(false) // Disables and Stop sending the selected LIN frame. 
Parameters:
NameType EncodedType
Enableboolean bool
Set to `true` to enable sending, `false` to
disable.
Function: SetFrameDlc
Description: 
Purpose:
- Sets the Data Length Code (DLC) for the LIN frame. 
- Allows overriding the default DLC defined in the LDF/database. 
Example:
*_ApiSetFrameDlc(4, Enme_mode.UserInput) // Sets the frame DLC to 4 bytes. 
*_ApiSetFrameDlc(0, Enme_mode.Default) // Reverts to the default DLC from the LDF. 
Parameters:
NameType EncodedType
Dlcint uint8
The desired Data Length Code (number of data bytes).
Modee_mode int
Specifies the mode for setting the DLC: 
- `Default`: Use the DLC from the LDF. 
- `UserInput`: Use the `Dlc` value provided in this function
call.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage

---

# Page 132

Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: WrongLinFrameDlcReceived
Description: Castle received a LIN frame with wrong DLC.
Parameters:
Name TypeEncodedTypeFormat
FrameDLC int uint16
ReceivedDLCint uint16
FrameId int uint8 hex
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
back to interface definition
Objects
Object: HeaderPresent
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
HeaderPresent_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: _ComFrameFlexrayTx extends _Object
Functions
SendCyclic
SendCyclicOff
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
SendCyclicOverload
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendCyclic
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically according to its configuration in the FIBEX database. 
- The first frame instance is sent after the cyclic interval time defined in the FIBEX. 
- This continues until `SendCyclicOff` (or `SendPerTimerOff`) is called. 
Example:
*_ApiSendCyclic() // Starts sending the frame based on its FIBEX cycle. 
Function: SendCyclicOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendCyclic` or `SendPerTimer`. 
Example:

---

# Page 133

*_ApiSendCyclicOff() // Stops the cyclic sending of the frame. 
Function: SendOnce
Description: 
Purpose:
- Sends the FlexRay frame once, immediately (or in the next available slot). 
- This does not affect any ongoing periodic transmission configured by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendOnce() // Sends the FlexRay frame one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically based on a timer. 
- The first frame instance is sent after the specified `Delay`. 
- The controller sends the message in the next allowed slot for this frame, considering FlexRay timing and frame cycle
filtering. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:
*_ApiSendPerTimer(10000) // Starts sending the frame cyclically with an initial delay of 10ms (10000 µs). The cycle time is
typically defined in the FIBEX. 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The initial delay in microseconds (µs) before the first frame is sent. The subsequent cycle time is usually determined by the
FIBEX configuration.
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending of the frame. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: SendCyclicOverload

---

# Page 134

Description: 
Purpose:
- Indicates that the requested cyclic sending rate is too high and cannot be met by the system. 
- This typically occurs if the `InputCyclicTime` is less than the `MinCyclicTime` the hardware/software can support. 
Parameters:
Name Type EncodedType Unit
MinCyclicTimelong uint64 ns
The minimum supported cyclic time in nanoseconds (ns).
InputCyclicTimelong uint64 ns
The cyclic time in nanoseconds (ns) that was requested by the
user.
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface:
_ComFrameDynamicFlexrayTx  extends _ComFrameFlexrayTx _Object
Functions
SendCyclic
SendCyclicOff
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
UpdatePayloadLength
Messages
GeneralMessage
PayloadLengthExceed
SendCyclicOverload
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendCyclic
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically according to its configuration in the FIBEX database. 
- The first frame instance is sent after the cyclic interval time defined in the FIBEX. 
- This continues until `SendCyclicOff` (or `SendPerTimerOff`) is called. 
Example:
*_ApiSendCyclic() // Starts sending the frame based on its FIBEX cycle. 
Function: SendCyclicOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendCyclic` or `SendPerTimer`. 
Example:
*_ApiSendCyclicOff() // Stops the cyclic sending of the frame. 

---

# Page 135

Function: SendOnce
Description: 
Purpose:
- Sends the FlexRay frame once, immediately (or in the next available slot). 
- This does not affect any ongoing periodic transmission configured by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendOnce() // Sends the FlexRay frame one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically based on a timer. 
- The first frame instance is sent after the specified `Delay`. 
- The controller sends the message in the next allowed slot for this frame, considering FlexRay timing and frame cycle
filtering. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:
*_ApiSendPerTimer(10000) // Starts sending the frame cyclically with an initial delay of 10ms (10000 µs). The cycle time is
typically defined in the FIBEX. 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The initial delay in microseconds (µs) before the first frame is sent. The subsequent cycle time is usually determined by the
FIBEX configuration.
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending of the frame. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: UpdatePayloadLength
Description: 
Purpose:
- Updates the payload length for dynamic FlexRay frames. 
- The length of the FlexRay payload (data frame) can be up to 127 words (254 bytes). 
- This function is only applicable to frames configured as dynamic in the FIBEX. 
Example:

---

# Page 136

*_ApiUpdatePayloadLength(64) // Sets the payload length of the dynamic frame to 64 bytes. 
Parameters:
NameType EncodedType Unit
Lengthint uint8 byte
The new payload length in bytes. Must be an even number and within the allowed FlexRay limits (0-
254).
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PayloadLengthExceed
Description: 
Purpose:
- Indicates that the requested payload length exceeds the maximum allowed for FlexRay frames (254 bytes) or is otherwise
invalid (e.g., odd number). 
Parameters:
Name TypeEncodedType
MaxPayloadLengthint uint16
InputPayloadLengthint uint16
Message: SendCyclicOverload
Description: 
Purpose:
- Indicates that the requested cyclic sending rate is too high and cannot be met by the system. 
- This typically occurs if the `InputCyclicTime` is less than the `MinCyclicTime` the hardware/software can support. 
Parameters:
Name Type EncodedType Unit
MinCyclicTimelong uint64 ns
The minimum supported cyclic time in nanoseconds (ns).
InputCyclicTimelong uint64 ns
The cyclic time in nanoseconds (ns) that was requested by the
user.
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface:
_ComFrameStaticFlexrayTx  extends _ComFrameFlexrayTx _Object
Functions
SendCyclic
SendCyclicOff
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
SendCyclicOverload
Events
PreTransmit_1
PreTransmit_2

---

# Page 137

PreTransmit_3
Objects
Functions
Function: SendCyclic
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically according to its configuration in the FIBEX database. 
- The first frame instance is sent after the cyclic interval time defined in the FIBEX. 
- This continues until `SendCyclicOff` (or `SendPerTimerOff`) is called. 
Example:
*_ApiSendCyclic() // Starts sending the frame based on its FIBEX cycle. 
Function: SendCyclicOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendCyclic` or `SendPerTimer`. 
Example:
*_ApiSendCyclicOff() // Stops the cyclic sending of the frame. 
Function: SendOnce
Description: 
Purpose:
- Sends the FlexRay frame once, immediately (or in the next available slot). 
- This does not affect any ongoing periodic transmission configured by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendOnce() // Sends the FlexRay frame one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically based on a timer. 
- The first frame instance is sent after the specified `Delay`. 
- The controller sends the message in the next allowed slot for this frame, considering FlexRay timing and frame cycle
filtering. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:
*_ApiSendPerTimer(10000) // Starts sending the frame cyclically with an initial delay of 10ms (10000 µs). The cycle time is
typically defined in the FIBEX. 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The initial delay in microseconds (µs) before the first frame is sent. The subsequent cycle time is usually determined by the
FIBEX configuration.
Function: SendPerTimerOff
Description: 
Purpose:

---

# Page 138

- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending of the frame. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: SendCyclicOverload
Description: 
Purpose:
- Indicates that the requested cyclic sending rate is too high and cannot be met by the system. 
- This typically occurs if the `InputCyclicTime` is less than the `MinCyclicTime` the hardware/software can support. 
Parameters:
Name Type EncodedType Unit
MinCyclicTimelong uint64 ns
The minimum supported cyclic time in nanoseconds (ns).
InputCyclicTimelong uint64 ns
The cyclic time in nanoseconds (ns) that was requested by the
user.
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface:
_ComFrameFlexrayRx  extends _ComFrameRx _Object
Functions
EnableRxProcessing
SetUserTag
Messages
GeneralMessage
Functions
Function: EnableRxProcessing
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define

---

# Page 139

the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComFrameDynamicFlexrayRxTx extends _ComFrameFlexrayRx _ComFrameFlexrayTx _ComFrameRx _Object
Functions
EnableRxProcessing
SendCyclic
SendCyclicOff
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
SwitchRxMode
SwitchTxMode
UpdatePayloadLength
Messages
GeneralMessage
PayloadLengthExceed
SendCyclicOverload
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: EnableRxProcessing
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Function: SendCyclic
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically according to its configuration in the FIBEX database. 
- The first frame instance is sent after the cyclic interval time defined in the FIBEX. 
- This continues until `SendCyclicOff` (or `SendPerTimerOff`) is called. 
Example:
*_ApiSendCyclic() // Starts sending the frame based on its FIBEX cycle. 
Function: SendCyclicOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendCyclic` or `SendPerTimer`. 
Example:

---

# Page 140

*_ApiSendCyclicOff() // Stops the cyclic sending of the frame. 
Function: SendOnce
Description: 
Purpose:
- Sends the FlexRay frame once, immediately (or in the next available slot). 
- This does not affect any ongoing periodic transmission configured by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendOnce() // Sends the FlexRay frame one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically based on a timer. 
- The first frame instance is sent after the specified `Delay`. 
- The controller sends the message in the next allowed slot for this frame, considering FlexRay timing and frame cycle
filtering. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:
*_ApiSendPerTimer(10000) // Starts sending the frame cyclically with an initial delay of 10ms (10000 µs). The cycle time is
typically defined in the FIBEX. 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The initial delay in microseconds (µs) before the first frame is sent. The subsequent cycle time is usually determined by the
FIBEX configuration.
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending of the frame. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchRxMode
Description: 
Purpose:
- Switches the dynamic FlexRay RxTx frame back to Receive (RX) mode. 
- After this call, the frame will behave as an RX frame. 
Example:

---

# Page 141

*_ApiSwitchRxMode() // Switches the frame to RX mode. 
Function: SwitchTxMode
Description: 
Purpose:
- Switches the dynamic FlexRay RxTx frame to Transmit (TX) mode. 
- After this call, the frame will behave as a TX frame. 
Example:
*_ApiSwitchTxMode() // Switches the frame to TX mode. 
Function: UpdatePayloadLength
Description: 
Purpose:
- Updates the payload length for dynamic FlexRay frames that can be both transmitted (Tx) and received (Rx). 
- The length of the FlexRay payload (data frame) can be up to 127 words (254 bytes). 
- This function is only applicable to frames configured as dynamic in the FIBEX. 
Example:
*_ApiUpdatePayloadLength(32) // Sets the payload length of the dynamic RxTx frame to 32 bytes. 
Parameters:
NameType EncodedType Unit
Lengthint uint16 byte
The new payload length in bytes. Must be an even number and within the allowed FlexRay limits (0-
254).
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PayloadLengthExceed
Description: 
Purpose:
- Indicates that the requested payload length exceeds the maximum allowed for FlexRay frames (254 bytes) or is otherwise
invalid (e.g., odd number). 
Parameters:
Name TypeEncodedType
MaxPayloadLengthint uint16
InputPayloadLengthint uint16
Message: SendCyclicOverload
Description: 
Purpose:
- Indicates that the requested cyclic sending rate is too high and cannot be met by the system. 
- This typically occurs if the `InputCyclicTime` is less than the `MinCyclicTime` the hardware/software can support. 
Parameters:
Name Type EncodedType Unit
MinCyclicTimelong uint64 ns
The minimum supported cyclic time in nanoseconds (ns).
long uint64 ns

---

# Page 142

InputCyclicTimeThe cyclic time in nanoseconds (ns) that was requested by the
user.
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface:
_ComFrameStaticFlexrayRxTx  extends _ComFrameFlexrayRx _ComFrameFlexrayTx _ComFrameRx
_ComFrameStaticFlexrayTx _Object
Functions
EnableRxProcessing
SendCyclic
SendCyclicOff
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
SwitchRxMode
SwitchTxMode
Messages
GeneralMessage
SendCyclicOverload
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: EnableRxProcessing
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Function: SendCyclic
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically according to its configuration in the FIBEX database. 
- The first frame instance is sent after the cyclic interval time defined in the FIBEX. 
- This continues until `SendCyclicOff` (or `SendPerTimerOff`) is called. 
Example:
*_ApiSendCyclic() // Starts sending the frame based on its FIBEX cycle. 
Function: SendCyclicOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendCyclic` or `SendPerTimer`. 
Example:
*_ApiSendCyclicOff() // Stops the cyclic sending of the frame. 
Function: SendOnce
Description: 

---

# Page 143

Purpose:
- Sends the FlexRay frame once, immediately (or in the next available slot). 
- This does not affect any ongoing periodic transmission configured by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendOnce() // Sends the FlexRay frame one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the FlexRay frame cyclically based on a timer. 
- The first frame instance is sent after the specified `Delay`. 
- The controller sends the message in the next allowed slot for this frame, considering FlexRay timing and frame cycle
filtering. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:
*_ApiSendPerTimer(10000) // Starts sending the frame cyclically with an initial delay of 10ms (10000 µs). The cycle time is
typically defined in the FIBEX. 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The initial delay in microseconds (µs) before the first frame is sent. The subsequent cycle time is usually determined by the
FIBEX configuration.
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission of the FlexRay frame that was initiated by `SendPerTimer` or `SendCyclic`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending of the frame. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchRxMode
Description: 
Purpose:
- Switches the static FlexRay RxTx frame back to Receive (RX) mode. 
- After this call, the frame will behave as an RX frame. 
Example:
*_ApiSwitchRxMode() // Switches the frame to RX mode. 
Function: SwitchTxMode
Description: 

---

# Page 144

Purpose:
- Switches the static FlexRay RxTx frame to Transmit (TX) mode. 
- After this call, the frame will behave as a TX frame. 
Example:
*_ApiSwitchTxMode() // Switches the frame to TX mode. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: SendCyclicOverload
Description: 
Purpose:
- Indicates that the requested cyclic sending rate is too high and cannot be met by the system. 
- This typically occurs if the `InputCyclicTime` is less than the `MinCyclicTime` the hardware/software can support. 
Parameters:
Name Type EncodedType Unit
MinCyclicTimelong uint64 ns
The minimum supported cyclic time in nanoseconds (ns).
InputCyclicTimelong uint64 ns
The cyclic time in nanoseconds (ns) that was requested by the
user.
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComEthernetSpecific extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8

---

# Page 145

back to interface definition
Interface:
_ComFrameEthernetSpecificTx  extends _Object
Functions
SendAlways
SendAlwaysOff
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
Objects
Functions
Function: SendAlways
Description: 
Purpose:
- Configures the Ethernet-specific frame to be sent continuously or as frequently as possible, based on system resources
and configuration. 
- This mode is typically used for high-priority or status frames that need constant updates. 
Example:
*_ApiSendAlways() // Starts sending the frame continuously. 
Function: SendAlwaysOff
Description: 
Purpose:
- Stops the continuous transmission of the Ethernet-specific frame that was initiated by `SendAlways`. 
Example:
*_ApiSendAlwaysOff() // Stops the continuous sending of the frame. 
Function: SendOnce
Description: 
Purpose:
- Sends the Ethernet-specific frame once, immediately. 
- This does not affect any ongoing periodic transmission. 
Example:
*_ApiSendOnce() // Sends the Ethernet-specific frame one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the Ethernet-specific frame cyclically based on a timer. 
- The first frame instance is sent after the specified `Delay`. 
- The controller sends the message in the next allowed slot/opportunity. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:

---

# Page 146

*_ApiSendPerTimer(50000) // Starts sending the frame cyclically with an initial delay of 50ms (50000 µs). 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The initial delay in microseconds (µs) before the first frame is sent. The subsequent cycle time is usually determined by the
configuration.
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission of the Ethernet-specific frame that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending of the frame. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
back to interface definition
Interface:
_ComFrameEthernetSpecificRx  extends _ComFrameRx _Object
Functions
EnableRxProcessing
LogEthernetHeader
SetUserTag
Messages
GeneralMessage
Functions
Function: EnableRxProcessing
Description: 
Purpose:
- Configures the processing level for received Ethernet-specific frames. 
- `Discard`: Frame is ignored. 
- `RawFrame`: Only raw frame data is processed; PDUs/signals within are not. 
- `Full`: Full processing, including PDUs and signals. 
- This is initialized by `Full` for backward compatibility. 
Example:

---

# Page 147

*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Full) // Enable full processing. 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) // Discard incoming frames. 
Parameters:
NameType EncodedType
EnableEnableProcessingEnum int
The desired processing level: `Discard`, `RawFrame`, or
`Full`.
Function: LogEthernetHeader
Description: 
Purpose:
- Enables or disables the logging of Ethernet header data for received Ethernet-specific frames. 
- This is useful for debugging and verifying that Castle is receiving data from the correct sender and to the correct receiver
(based on MAC addresses, VLAN tags, etc.). 
Example:
*_ApiLogEthernetHeader(true) // Enable logging of Ethernet headers. 
*_ApiLogEthernetHeader(false) // Disable logging of Ethernet headers. 
Parameters:
NameType EncodedType
Enableboolean bool
Set to `true` to enable logging, `false` to
disable.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComFrameEthernetSpecificRxTx extends _ComFrameEthernetSpecificRx _ComFrameEthernetSpecificTx
_ComFrameRx _Object
Functions
EnableRxProcessing
LogEthernetHeader
SendAlways
SendAlwaysOff
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
SwitchRxMode
SwitchTxMode
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
Objects

---

# Page 148

Functions
Function: EnableRxProcessing
Description: 
Purpose:
- Configures the processing level for received Ethernet-specific frames. 
- `Discard`: Frame is ignored. 
- `RawFrame`: Only raw frame data is processed; PDUs/signals within are not. 
- `Full`: Full processing, including PDUs and signals. 
- This is initialized by `Full` for backward compatibility. 
Example:
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Full) // Enable full processing. 
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Discard) // Discard incoming frames. 
Parameters:
NameType EncodedType
EnableEnableProcessingEnum int
The desired processing level: `Discard`, `RawFrame`, or
`Full`.
Function: LogEthernetHeader
Description: 
Purpose:
- Enables or disables the logging of Ethernet header data for received Ethernet-specific frames. 
- This is useful for debugging and verifying that Castle is receiving data from the correct sender and to the correct receiver
(based on MAC addresses, VLAN tags, etc.). 
Example:
*_ApiLogEthernetHeader(true) // Enable logging of Ethernet headers. 
*_ApiLogEthernetHeader(false) // Disable logging of Ethernet headers. 
Parameters:
NameType EncodedType
Enableboolean bool
Set to `true` to enable logging, `false` to
disable.
Function: SendAlways
Description: 
Purpose:
- Configures the Ethernet-specific frame to be sent continuously or as frequently as possible, based on system resources
and configuration. 
- This mode is typically used for high-priority or status frames that need constant updates. 
Example:
*_ApiSendAlways() // Starts sending the frame continuously. 
Function: SendAlwaysOff
Description: 
Purpose:
- Stops the continuous transmission of the Ethernet-specific frame that was initiated by `SendAlways`. 
Example:
*_ApiSendAlwaysOff() // Stops the continuous sending of the frame. 

---

# Page 149

Function: SendOnce
Description: 
Purpose:
- Sends the Ethernet-specific frame once, immediately. 
- This does not affect any ongoing periodic transmission. 
Example:
*_ApiSendOnce() // Sends the Ethernet-specific frame one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the Ethernet-specific frame cyclically based on a timer. 
- The first frame instance is sent after the specified `Delay`. 
- The controller sends the message in the next allowed slot/opportunity. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:
*_ApiSendPerTimer(50000) // Starts sending the frame cyclically with an initial delay of 50ms (50000 µs). 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The initial delay in microseconds (µs) before the first frame is sent. The subsequent cycle time is usually determined by the
configuration.
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission of the Ethernet-specific frame that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending of the frame. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchRxMode
Description: 
Purpose:
- Switches the Ethernet-specific RxTx frame back to Receive (RX) mode. 
- After this call, the frame will behave as an RX frame. 
Example:
*_ApiSwitchRxMode() // Switches the frame to RX mode. 
Function: SwitchTxMode

---

# Page 150

Description: 
Purpose:
- Switches the Ethernet-specific RxTx frame to Transmit (TX) mode. 
- After this call, the frame will behave as a TX frame. 
Example:
*_ApiSwitchTxMode() // Switches the frame to TX mode. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
back to interface definition
Interface: _ComPduFlexrayTx  extends _ComPduTx _Object
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:

---

# Page 151

*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduFlexrayRx  extends _ComPduRx _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage

---

# Page 152

Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComPduFlexrayRxTx  extends _ComPduFlexrayRx _ComPduFlexrayTx _ComPduRx _ComPduTx
_Object
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:
*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 

---

# Page 153

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduLinTx  extends _ComPduTx _Object
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:

---

# Page 154

*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduLinRx  extends _ComPduRx _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages

---

# Page 155

Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComPduCanTx  extends _ComPduTx _Object
Enumerations
e_mode
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetPduDlc
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Enumerations
Enum: e_mode
Value Description
DefaultSet the dlc with the default value in the
dbc
UserInputset the dlc with a user specified dlc
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:
*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff

---

# Page 156

Description: 
Purpose:
- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 
Function: SetPduDlc
Description: 
Purpose:
- Sets the Data Length Code (DLC) for the CAN PDU. 
- Allows overriding the default DLC defined in the DBC/database for this PDU. 
Example:
*_ApiSetPduDlc(8, Enme_mode.UserInput) // Sets the PDU DLC to 8 bytes. 
*_ApiSetPduDlc(0, Enme_mode.Default) // Reverts to the default DLC from the DBC. 
Parameters:
NameType EncodedType
Dlcint uint8
Dlc Value
Modee_mode int
e_mode: 0 (default) - 1 (User
Input)
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduCanRx  extends _ComPduRx _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user

---

# Page 157

tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComPduCanRxTx  extends _ComPduRx _ComPduTx _Object
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:
*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff
Description: 

---

# Page 158

Purpose:
- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduGenericTx  extends _ComPduTx _Object
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 

---

# Page 159

Purpose:
- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:
*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduGenericRx  extends _ComPduRx _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.

---

# Page 160

Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComPduGenericRxTx  extends _ComPduRx _ComPduTx _Object
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:
*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff
Description: 
Purpose:

---

# Page 161

- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduTx  extends _Object
Functions
SendOnce
SendPerTimer
SendPerTimerOff
SetUserTag
Messages
GeneralMessage
Events
PreTransmit_1
PreTransmit_2
PreTransmit_3
Objects
Functions
Function: SendOnce
Description: 
Purpose:
- Sets a transmit request for this PDU to be sent once. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
Example:
*_ApiSendOnce() // Requests the PDU to be sent once in its containing frame. 
Function: SendPerTimer
Description: 
Purpose:

---

# Page 162

- Sets a transmit request for this PDU to be sent cyclically based on the provided `CycleTime`. 
- This function itself does not actively drive the transmission. The containing frame must be triggered to be sent. 
- The PDU transmit request will be evaluated during the frame's pre-transmit phase. 
- The PDU will be included in its frame according to this cycle time. 
Example:
*_ApiSendPerTimer(100000) // Requests the PDU to be sent every 100ms (100000 µs). 
Parameters:
Name Type EncodedType Scale Unit
CycleTimelong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. Valid range is typically from 100µs (0.1ms) to 10,000,000µs
(10s).
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission request for this PDU that was initiated by `SendPerTimer`. 
Example:
*_ApiSendPerTimerOff() // Stops the periodic sending request for the PDU. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PreTransmit_3
back to interface definition
Interface: _ComPduRx  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.

---

# Page 163

Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComPduSecured  extends _Object
Functions
SetDefaultKey
SetKey
SetUserTag
Messages
GeneralMessage
Functions
Function: SetDefaultKey
Description: 
Purpose:
- Sets the cryptographic key for the secured PDU to its default value. 
- The default key is typically taken from an AUTOSAR configuration file or a similar source. 
Example:
*_ApiSetDefaultKey() // Reverts the PDU's key to its default. 
Function: SetKey
Description: 
Purpose:
- Sets a specific cryptographic key for the secured PDU. 
- The key is typically a 16-byte array. 
- This allows for runtime changes of the key used for securing the PDU's transmission or reception. 
Example:
*_ApiSetKey([0x01, 0x02, ..., 0x10]) // Sets a new 16-byte key for the PDU. 
Parameters:
NameType EncodedType Format
Keyint[] uint8 raw
The cryptographic key as an array of bytes (typically 16 bytes for common algorithms like AES-
128).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages

---

# Page 164

Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComPduEthernetRx  extends _ComFrameRx _Object
Functions
EnableRxProcessing
SetUserTag
Messages
GeneralMessage
Functions
Function: EnableRxProcessing
Description: 
Purpose:
- Configures the processing level for received Ethernet PDUs. 
- `Discard`: PDU is ignored. 
- `RawFrame`: Only raw PDU data is processed; signals within are not. (Note: For PDUs, this might be interpreted as
processing the PDU's payload as raw bytes). 
- `Full`: Full processing, including signals defined within the PDU. 
Example:
*_ApiEnableRxProcessing(EnmEnableProcessingEnum.Full) // Enable full processing for the Ethernet PDU. 
Parameters:
NameType EncodedType
EnableEnableProcessingEnum int
The desired processing level: `Discard`, `RawFrame`, or
`Full`.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComPduEthernetTx  extends _Object
Functions
ActivateMulticast
SendOnce
SendPerTimer
SendPerTimerOff
SetPduLength
SetPduLengthDefault
SetUserTag
Messages
GeneralMessage
Events

---

# Page 165

PreTransmit_1
PreTransmit_2
PostTransmit
Objects
Functions
Function: ActivateMulticast
Description: 
Purpose:
- Determines whether this PDU will be sent as multicast or unicast. 
- If `isMulticast` is true, the PDU is sent to a multicast group. A multicast socket connection must exist for this PDU;
otherwise, an error ("This pdu cannot be sent Multicast") may occur. 
- If `isMulticast` is false, the PDU is sent unicast (typically to a specific destination IP). 
Example:
*_ApiActivateMulticast(true) // Configure the PDU to be sent as multicast. 
*_ApiActivateMulticast(false) // Configure the PDU to be sent as unicast. 
Parameters:
Name Type EncodedType
isMulticastboolean bool
Set to `true` to send as multicast, `false` for unicast. If `true`, ensure a multicast socket connection is configured for this
PDU.
Function: SendOnce
Description: 
Purpose:
- Sends the Ethernet PDU once, immediately. 
- This does not affect any ongoing periodic transmission. 
Example:
*_ApiSendOnce() // Sends the Ethernet PDU one time. 
Function: SendPerTimer
Description: 
Purpose:
- Starts sending the Ethernet PDU cyclically based on a timer. 
- The first PDU instance is sent after the specified `Delay`. 
- This continues until `SendPerTimerOff` is called or another `SendPerTimer` call reconfigures it. 
Example:
*_ApiSendPerTimer(20000) // Starts sending the PDU cyclically every 20ms (20000 µs). 
Parameters:
NameType EncodedType Scale Unit
Delaylong uint64 1e-6 ms
The cycle time in microseconds (µs) for sending the PDU. This also acts as the initial delay for the first
transmission.
Function: SendPerTimerOff
Description: 
Purpose:
- Stops the cyclic transmission of the Ethernet PDU that was initiated by `SendPerTimer`. 
Example:

---

# Page 166

*_ApiSendPerTimerOff() // Stops the periodic sending of the PDU. 
Function: SetPduLength
Description: 
Purpose:
- Forcibly sets the PDU length in the header field to a specific value for testing purposes. 
- This can be used to simulate PDUs with varying or incorrect lengths. 
Example:
*_ApiSetPduLength(128) // Sets the PDU length in the header to 128 bytes. 
Parameters:
Name Type EncodedType Unit
PduLengthint uint32 Byte
The PDU length in bytes to be set in the
header.
Function: SetPduLengthDefault
Description: 
Purpose:
- Resets the PDU length in the header field to its default value. 
- This is used to revert any changes made by `SetPduLength`. 
Example:
*_ApiSetPduLengthDefault() // Resets PDU length to its default. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: PreTransmit_1
Event: PreTransmit_2
Event: PostTransmit
back to interface definition
Interface:
_ComBrStructEthernetSpecificTx extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions

---

# Page 167

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComBrStructEthernetSpecificRx extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComSDServerService  extends _Object
Description: Service Discovery Service, where Castle is the server, DUT is the client
Functions
SendOfferService
SendStopOfferService
SetUserTag
SimulateServerStartUp
StopSendingOfferService
Messages
GeneralMessage
Events
ServiceOffered
Objects
Functions
Function: SendOfferService
Description: 

---

# Page 168

Purpose:
- Sends an "OfferService" entry once for this Service Discovery (SD) server service. 
- This informs clients on the network that this service is available. 
- The `IsIp4Multicast` argument influences how acknowledgments for events within this service are handled. 
Example:
*_ApiSendOfferService(true) // Sends an OfferService message, indicating IPv4 multicast for event acknowledgments. 
Parameters:
Name Type EncodedType
IsIp4Multicastboolean bool
If `true`, Castle will subscribe to acknowledgments for any event in this service using the IPv4 multicast option. If `false`,
unicast or another default mechanism might be used.
Function: SendStopOfferService
Description: 
Purpose:
- Sends a "StopOfferService" entry once for this SD server service. 
- This informs clients on the network that this service is no longer available or is being shut down. 
Example:
*_ApiSendStopOfferService() // Sends a StopOfferService message. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SimulateServerStartUp
Description: 
Purpose:
- Simulates the startup sequence of an SD server, which typically includes: 
1. Initial Wait Phase: A delay before starting to offer services. 
2. Repetition Phase: Offering the service multiple times with a short interval. 
3. Main Phase: Continuously offering the service, possibly at a longer interval. 
- Refer to AUTOSAR SWS Socket Adaptor documentation for detailed phase behavior. 
Example:
*_ApiSimulateServerStartUp() // Initiates the simulated server startup sequence. 
Function: StopSendingOfferService
Description: 
Purpose:
- Stops the cyclic sending of "OfferService" messages that might have been initiated during the main phase of
`SimulateServerStartUp`. 
- This is used if the `SimulateServerStartUp` function was configured (implicitly or explicitly) to send cyclic offers during its
main phase. 
Example:
*_ApiStopSendingOfferService() // Stops cyclic OfferService messages from the main phase. 
back to interface definition

---

# Page 169

Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: ServiceOffered
Description: If service has been offered by the server
back to interface definition
Interface: _ComSDClientService  extends _Object
Description: Service Discovery Service, where Castle is the client, DUT is the server
Functions
SendFindService
SetUserTag
SimulateClientStartUp
StopSendingFindService
Messages
GeneralMessage
Events
ServiceOffered
Objects
Functions
Function: SendFindService
Description: 
Purpose:
- Sends a "FindService" entry once from this Service Discovery (SD) client. 
- This is a request to servers on the network to announce if they offer the specified service. 
Example:
*_ApiSendFindService() // Sends a FindService message to discover available services. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SimulateClientStartUp
Description: 
Purpose:
- Simulates the startup sequence of an SD client, which typically includes: 
1. Initial Wait Phase: A delay before starting to find services. 
2. Repetition Phase: Sending "FindService" multiple times with a short interval. 
3. Main Phase: Potentially sending "FindService" at longer intervals or listening for offers. 
- Refer to AUTOSAR SWS Socket Adaptor documentation for detailed phase behavior. 
Example:
*_ApiSimulateClientStartUp() // Initiates the simulated client startup sequence. 

---

# Page 170

Function: StopSendingFindService
Description: 
Purpose:
- Stops the cyclic sending of "FindService" messages that might have been initiated during the main phase of
`SimulateClientStartUp`. 
- This is used if the `SimulateClientStartUp` function was configured (implicitly or explicitly) to send cyclic find requests
during its main phase. 
Example:
*_ApiStopSendingFindService() // Stops cyclic FindService messages from the main phase. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: ServiceOffered
Description: If service has been offered by the server
back to interface definition
Interface:
_ComSDProvidedEventGroup  extends _Object
Description: Service Discovery Event Group, where Castle is the provider, DUT is the consumer
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComSDConsumedEventGroup  extends _Object
Description: Service Discovery Event Group, where Castle is the consumer, DUT is the provider
Functions
SendStopSubscribeToEventGroup
SendSubscribeToEventGroup
SetUserTag

---

# Page 171

Messages
GeneralMessage
ServiceIsNotOffered
Functions
Function: SendStopSubscribeToEventGroup
Description: 
Purpose:
- Sends a "StopSubscribeToEventGroup" entry once from this SD consumer. 
- This informs the provider to stop sending event notifications for this event group to this consumer. 
Example:
*_ApiSendStopSubscribeToEventGroup() // Sends a request to unsubscribe from the event group. 
Function: SendSubscribeToEventGroup
Description: 
Purpose:
- Sends a "SubscribeToEventGroup" entry once from this Service Discovery (SD) consumer. 
- This requests the provider of the event group to start sending event notifications to this consumer. 
Example:
*_ApiSendSubscribeToEventGroup() // Sends a request to subscribe to the event group. 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: ServiceIsNotOffered
Description: 
Purpose:
- Indicates that a subscription to an event group failed because the parent service (to which the event group belongs) is not
currently offered or available. 
back to interface definition
Interface:
_ComDataMessagePublisher  extends _Object
Functions
Publish
SetUserTag
Messages
GeneralMessage
Functions

---

# Page 172

Function: Publish
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
_ComDataMessageSubscriber  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComMethodServer  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition

---

# Page 173

Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: _ComMethodClient  extends _Object
Functions
Call
SetUserTag
Messages
GeneralMessage
Functions
Function: Call
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: GenericDriver  extends _Object
Description: Generic Driver for Generic bus that holds Generic Com
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 174

Interface: Clamp  extends _Object
Description: Clamp Module in Castle There are two Clamp modules in Castle and each can be used as Clamp15 and/or
Clamp30. This module provides the API needed to configure the Clamp.
Enumerations
MeasurementRange
RangeChangeCause
VoltageMonitorSource
Functions
AveragingIntervalConfigure
AveragingIntervalConfigureDefault
AveragingIntervalsLog
EnableClampDischarge
Internal_DebugOutputs
IoutPeekReset
LimitCurrentRange
LimitCurrentRangeOff
LoggingDisable
LoggingEnable
LoggingOnce
LoggingRangeChanges
SetUserTag
SetVoltageMonitorSoure
Messages
AveragingIntervals
FastShortcut
GeneralMessage
LimitMeasurementRangeTo
LogValues
LogValuesv2
RangeChange
Shortcut
SwitchedOff
VoltageMonitorSourceInActive
VoltageSourceChange
Enumerations
Enum: MeasurementRange
Description: The current range identifiers
Value
MRX
MR0
MR1
MR2
Enum: RangeChangeCause
Description: The cause for a range change
Value
SwitchOn
AutoProbe
OverflowByAdc
OverflowByHw
UnderrunByHw
Enum: VoltageMonitorSource
Description: the source for the voltage measurement
Value
Uext
Uout
Udut
Functions
Function: AveragingIntervalConfigure
Description: 
Purpose: 

---

# Page 175

-Configure the intervals for building average values. This can be at minimum 50ms or a multiple of it. A given interval value
that is not a multiple of 50ms will be decreased to match this. The maximum is 1000ms. The averaging interval is used for
UExtAvr, UOutAvr and IOutAvr. 
Example: 
*_ApiAveragingIntervalConfigure(150) 
Parameters:
NameTypeEncodedTypeUnit
Intervalint uint32 ms
Function: AveragingIntervalConfigureDefault
Description: 
Purpose: 
-Configure the intervals for building average values to its default. 
Example: 
*_ApiAveragingIntervalConfigureDefault 
Function: AveragingIntervalsLog
Description: 
Purpose: 
-Log the interval value for building average values. 
Example: 
*_ApiAveragingIntervalsLog 
Function: EnableClampDischarge
Description: 
Purpose: 
-c6clamp , When enabled , the clamp is connected to gnd when turned off. 
Example: 
*_ApiEnableClampDischarge(true) 
Parameters:
NameType EncodedType
Enablebooleanbool
Function: Internal_DebugOutputs
Description: 
Purpose: 
-This is for C5 testing only. Not intended for the end user. Activate debugging message for the internal states. 
Example: 
*_ApiInternal_DebugOutputs(true) 
Parameters:
NameType EncodedType
Enablebooleanbool
Function: IoutPeekReset
Description: 
Purpose: 
-Activate a reset pulse on the Iout peek measurement. 
Example: 
*_ApiIoutPeekReset 
Function: LimitCurrentRange
Description: 
Purpose: 
-This makes the software to avoid switching to the most sensitive current measurement channels. Using 'MR2' is like
normal behaviour, but the console output is still active. 
Example: 
*_ApiLimitCurrentRange(MRX) 
Parameters:
NameType EncodedType
RangeMeasurementRangeint
Function: LimitCurrentRangeOff
Description: 
Purpose: 

---

# Page 176

-The measurement returns to normal behaviour. 
Example: 
*_ApiLimitCurrentRangeOff 
Function: LoggingDisable
Description: Logging disable 
Purpose: 
-Disable the periodic logging. 
Example: 
*_ApiLoggingDisable 
Function: LoggingEnable
Description: 
Purpose: 
-Enable the periodic logging in ms 
Example: 
*_ApiLoggingEnable(1000) 
Parameters:
NameType EncodedType Unit
Intervalint uint32 ms
Valid range for interval is 200ms .. 10000ms
Function: LoggingOnce
Description: 
Purpose: 
-Logging once, if interval is running, it stays active. 
Example: 
*_ApiLoggingOnce 
Response timeout: 1000
Result Message: LogValues 
Faults: 
Function: LoggingRangeChanges
Description: 
Purpose: 
-Create messages if the current measurement range is changed. By default this is turned off. 
Example: 
*_ApiLoggingRangeChanges 
Parameters:
NameType EncodedType
enablebooleanbool
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetVoltageMonitorSoure
Description: 
Purpose: 
-c6clamp , selects between three points for voltage measurment , Uext , Uout , Udut. 
Example: 
*_ApiSetVoltageMonitorSoure(Uext) 
Parameters:
NameType EncodedType
Usrc VoltageMonitorSourceint
back to interface definition
Messages
Message: AveragingIntervals

---

# Page 177

Description: 
Purpose: 
-Reports the currently used interval time for averaging. 
Parameters:
NameTypeEncodedTypeUnit
Intervalint uint32 ms
Message: FastShortcut
Description: 
Purpose: 
-Shortcut was detected on FPGA level. The Imrx returned the maximum value. The output is switched off. 
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: LimitMeasurementRangeTo
Description: 
Purpose: 
-The current measure range was changed 
Parameters:
NameType EncodedType
RangeMeasurementRangeint
Message: LogValues
Description: 
Purpose: 
-Log values for Castle 5. The values are each a set of an average value, the minimum value and the maximum value. From
these current and voltage readings, power consumption can be monitored 
Parameters:
Name Type EncodedTypeScale Unit
UextMin int uint32 0.000001V
UextAvr int uint32 0.000001V
UextMax int uint32 0.000001V
UoutMin int uint32 0.000001V
UoutAvr int uint32 0.000001V
UoutMax int uint32 0.000001V
IoutMin int uint32 0.001 mA
IoutAvr int uint32 0.001 mA
IoutMax int uint32 0.001 mA
IoutMsrRangeMeasurementRangeint - -
Message: LogValuesv2
Description: 
Purpose: 
-Log values for Castle 6. The values are each a set of an average value, the minimum value and the maximum value. From
these current and voltage readings, power consumption can be monitored 
Parameters:
Name Type EncodedTypeScale Unit
UoutMin int uint32 0.000001V
UoutAvr int uint32 0.000001V
UoutMax int uint32 0.000001V
IoutMin int uint32 0.001 mA
IoutAvr int uint32 0.001 mA
IoutMax int uint32 0.001 mA
IoutMsrRangeMeasurementRange int - -
Usrc VoltageMonitorSourceint - -
Message: RangeChange
Description: 
Purpose: 
-The current measure range was changed 

---

# Page 178

Parameters:
NameType EncodedType
RangeMeasurementRangeint
CauseRangeChangeCauseint
Message: Shortcut
Description: 
Purpose: 
-Shortcut was detected on software level. Imrx was above the valid limit for at least two 10ms cycles. The output is
switched off. 
Parameters:
Name TypeEncodedTypeScaleUnit
IoutAvr int uint32 0.001mA
IoutShortcutLimitint uint32 0.001mA
Message: SwitchedOff
Message: VoltageMonitorSourceInActive
Parameters:
Name Type EncodedType
ActiveUsrcVoltageMonitorSourceint
Message: VoltageSourceChange
Description: 
Purpose: 
-The Voltage Source was changed 
Parameters:
NameType EncodedType
Usrc VoltageMonitorSourceint
back to interface definition
Objects
Object: State
Description: 
Purpose: 
-Set the On/Off state of the Clamp switch. 
Example: 
*_ApiSet to On/Off status of the clamp 
*_ApiGet to get status of the clamp 
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
State_SignalSignalboolean 0 1 1 false false
Object: UextMin
Description: 
Purpose: 
-Minimum Voltage of the voltage from backplane. 
Example: 
*_ApiGet to get minimum value of voltage from backplane 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UextMin_SignalSignalint 0 0.000001V 4 false false
Object: UextAvr
Description: 
Purpose: 
- Average Voltage of the voltage from backplane. 
Example: 
*_ApiGet to get average voltage from backplane 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UextAvr_SignalSignalint 0 0.000001V 4 false false
Object: UextMax
Description: 
Purpose: 
- Maximum Voltage of the voltage from backplane. 

---

# Page 179

Example: 
*_ApiGet to get maximum voltage from backplane 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UextMax_SignalSignalint 0 0.000001V 4 false false
Object: UoutMin
Description: 
Purpose: 
- Minimum Voltage at the front connector. 
Example: 
*_ApiGet to get minimum voltage from connector 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UoutMin_SignalSignalint 0 0.000001V 4 false false
Object: UoutAvr
Description: 
Purpose: 
- Average Voltage at the front connector. 
Example: 
*_ApiGet to get average voltage from connector 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UoutAvr_SignalSignalint 0 0.000001V 4 false false
Object: UoutMax
Description: 
Purpose: 
- Maximum Voltage at the front connector. 
Example: 
*_ApiGet to get maximum voltage from connector 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UoutMax_SignalSignalint 0 0.000001V 4 false false
Object: UdutMin
Description: 
Purpose: 
- Minimum Voltage at at the Dut terminal. 
Example: 
*_ApiGet to get minimum voltage from dut terminal 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UdutMin_SignalSignalint 0 0.000001V 4 false false
Object: UdutAvr
Description: 
Purpose: 
-Average Voltage at at the Dut terminal. 
Example: 
*_ApiGet to get average voltage from dut terminal 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UdutAvr_SignalSignalint 0 0.000001V 4 false false
Object: UdutMax
Description: 
Purpose: 
-Maximum Voltage at at the Dut terminal. 
Example: 
*_ApiGet to get maximum voltage from dut terminal 
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
UdutMax_SignalSignalint 0 0.000001V 4 false false
Object: IoutMin
Description: 
Purpose: 
-Minimum Output current. 
Example: 
*_ApiGet to get minimum output current 

---

# Page 180

NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
IoutMin_SignalSignalint 0 0.001mA4 false false
Object: IoutAvr
Description: 
Purpose: 
-Average Output current. 
Example: 
*_ApiGet to get average output current 
NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
IoutAvr_SignalSignalint 0 0.001mA4 false false
Object: IoutMax
Description: 
Purpose: 
-Maximum Output current. 
Example: 
*_ApiGet to get maximum output current 
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
IoutMax_SignalSignalint 0 0.001mA4 false false
Object: IoutRms
Description: 
Purpose: 
-Output current, RMS. Caution: Currently this value is seems to have a hardware defekt. 
Example: 
*_ApiGet to get output current 
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
IoutRms_SignalSignalint 0 0.001mA4 false false
Object: IoutPeek
Description: 
Purpose: 
-Output current, peek. 
Example: 
*_ApiGet to get output current 
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
IoutPeek_SignalSignalint 0 0.001mA4 false false
back to interface definition
Interface: Rs232  extends _Object
Description: 
Purpose:
This interface provides functions and messages to interact with the RS232 serial communication protocol. It's designed to control
and monitor RS232 communication, including sending data, receiving responses, and testing data sequences. 
Usage:
This interface is primarily used to communicate with external devices that support the RS232 protocol. Common use cases
include controlling programmable power supplies, sending commands, and receiving status updates. 
Key Features:
Configuration: Set baud rate and parity settings.
Data Transmission: Send raw data or strings over RS232.
Response Logging: Log received responses for analysis.
Sequence Testing: Test for specific byte or string sequences in the received data.
Value Range Testing: Test for value ranges in SCPI (Standard Commands for Programmable Instruments) responses, such
as voltage and current values.

---

# Page 181

Limitations:
Maximum data length for sending is limited to 200 bytes per transmission.
SCPI protocol support is tailored for specific use cases.
Enumerations
ParityConf
e_baudrate
Functions
Configure
ConfigureParity
LogResponseString
SendData
SendString
SetCustomEndTransByte
SetUserTag
TestByteSequence
TestRangeMilliAmpere
TestRangeVolt
TestStringSequence
Messages
ConnectionError
CurrentOutofRange
Data
DataError
GeneralMessage
Indication
Length
LogData
LogString
RxDataTooShort
RxNoise
RxOverrun
RxParity
RxUartParityUnchecked
ScpiCurrent
ScpiVoltage
TestByteSequence
TestStringSequence
TxConf
TxConfirmation
TxDataTooLong
TxOverflow
VoltageOutofRange
Enumerations
Enum: ParityConf
Value
None
Odd
Even
Enum: e_baudrate
Value
BR_1200
BR_2400
BR_4800
BR_9600
BR_19200
BR_38400
BR_57600
BR_115200

---

# Page 182

Functions
Function: Configure
Description: 
Purpose:
Configures the RS232 interface with the specified baud rate with enabled or disabled Tx line. 
Example:
assume the interface object is called 'objRs232', then you can call:
exu().mode().objRs232().afcConfigure(e_baudrate.BR_9600, true); 
to configure the RS232 to work with baudrate 9600 with enabled transmission line 
Dependency: 
should be called first to configure the RS232 bus 
Parameters:
Name Type EncodedType
Baudratee_baudrate int
The desired baud rate for RS232 communication. Available options are e_baudrate.BR_1200, e_baudrate.BR_2400,
e_baudrate.BR_4800, e_baudrate.BR_9600, e_baudrate.BR_19200, e_baudrate.BR_38400, e_baudrate.BR_57600,
e_baudrate.BR_115200. 
TxLineEnableboolean bool
Enables or disables the transmission line. true to enable, false to disable.
Function: ConfigureParity
Description: 
Purpose:
Configures the parity bit for RS232 communication. The default configuration is 'None'. 
Example:
Configure the parity bit to 'Even': exu().mod().objRs232().afcConfigureParity(ParityConf.Even); 
Parameters:
Name Type EncodedType
ParityTypeParityConf int
The desired parity configuration. Available options are ParityConf.None, ParityConf.Odd,
ParityConf.Even.
Response timeout: 0
Result Message: RxUartParityUnchecked 
Faults: 
Function: LogResponseString
Description: 
Purpose:
Logs the received response as a string. 
Example:
exu().mod().objRs232().afcLogResponseString(); 
Result:
LogString: if the message has been received succeffully, you will get a response message 
RxNoise: on failure, you may get this message this message indicating that your rx line has noise 
Inidication: you may get also indication message (No response received) on failure 
Response timeout: 0
Result Message: LogString 
Faults: Indication RxNoise 

---

# Page 183

Function: SendData
Description: 
Purpose:
Sends raw data over the RS232 interface. 
Example:
Send some raw data over the RS232 interface. 
exu().mod().objRs232().afcSendData([0x01, 0x02, 0x03, 0x04]); 
Limitations:
The maximum allowed data length to be sent is 200 bytes. 
Result:
TxConfirmation: if the message sent to the UART queue (in order to be sent on bus) 
TxOverflow: on failure, you may get this message this message indicating that your tx line overflow 
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The raw data to be sent as an array of
bytes.
Response timeout: 0
Result Message: TxConfirmation 
Faults: TxOverflow 
Function: SendString
Description: 
Purpose:
Sends a string over the RS232 interface. 
Example:
Send a string over the RS232 interface. 
objRs232().afcSendString(true, "Hello, World!"); 
Limitations:
The maximum allowed data length to be sent is 200 bytes. 
Result:
TxConfirmation: if the message sent to the UART queue (in order to be sent on bus) 
TxOverflow: on failure, you may get this message this message indicating that your tx line overflow 
Parameters:
Name Type EncodedType Format
ReportConfirmationboolean bool
If set to true, a TxConfirmation message will be reported after the data has been sent to UART queue, in order to
be send on bus
Dataint[] uint8 utf8
The string to be sent, encoded in UTF-8 format.
Response timeout: 0
Result Message: TxConfirmation 
Faults: TxOverflow 
Function: SetCustomEndTransByte
Description: 
Purpose:

---

# Page 184

Allows the user to define a custom byte that signifies the end of a received transmission. This is crucial for protocols where
the end of transmission is not indicated by a fixed character, such as the newline character (0x0A) which is the default. 
Example:
Suppose the end of transmission is signified by the byte 0x0D (carriage return). You would use the following to configure it:
exu().mod().objRs232().afcSetCustomEndTransByte(0x0D); 
Parameters:
Name Type EncodedType
EndTransByteint uint8
The custom end-of-transmission byte.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: 
Purpose:
Tests the received buffer for a specific sequence of bytes. In case of a mismatch, an error message with the actual buffer
content vs the expected byte sequence is logged. 
Example:
Test the buffer for specific byte sequence. 
exu().mod().objRs232().afcTestByteSequence(10, [0x0A, 0x0B, 0x0C]); 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset within the buffer where the sequence of bytes should be
tested.
Dataint[] uint8 raw
The byte sequence to test against.
Function: TestRangeMilliAmpere
Description: 
Purpose:
Tests if a current value, received in SCPI protocol format, is within a given range. 
Example:
Test if the received current value is in the range of 1000 to 2000 mA. 
exu().mod().objRs232().afcTestRangeMilliAmpere(1000, 2000); 
Result: 
a message indicating the comparison match or mis mactch (out of range) 
Parameters:
NameType EncodedType Unit
Minint uint32 mA
The lower limit of the allowed current range in milliamperes
(mA).
Maxint uint32 mA
The upper limit of the allowed current range in milliamperes
(mA).
Response timeout: 0

---

# Page 185

Result Message: ScpiCurrent 
Faults: CurrentOutofRange 
Function: TestRangeVolt
Description: 
Purpose:
Tests if a voltage value, received in SCPI protocol format, is within a given range. 
Example:
To test if the received voltage value is in the range of 1.5 to 3.3 V. 
exu().mod().objRs232().afcTestRangeVolt(1500, 3300); //1.5V,3.3V 
Result: 
a message indicating the voltage comparison match or mis mactch (out of range) 
Parameters:
NameType EncodedType Scale Unit
Minint uint32 0.001 V
The lower limit of the allowed voltage range in volts (V). Scaled by
0.001
Maxint uint32 0.001 V
The upper limit of the allowed voltage range in volts (V). Scaled by
0.001
Response timeout: 0
Result Message: ScpiVoltage 
Faults: VoltageOutofRange 
Function: TestStringSequence
Description: 
Purpose:
Tests the received buffer for a specific string sequence. In case of a mismatch, an error message with the actual buffer
content vs the expected data is logged. 
Example:
Test the buffer for a specific string sequence. 
exu().mod().objRs232().afcTestStringSequence(5, "TEST"); 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset within the buffer where the string sequence should be
tested.
Dataint[] uint8 utf8
The string sequence to test against.
back to interface definition
Messages
Message: ConnectionError
Description: Connection Error
Message: CurrentOutofRange
Description: Tested the current received with SCPI protocol language is out of range. (Voltage value, Min, Max in this
message are all in mA)
Parameters:
NameTypeEncodedTypeUnit
Valueint uint32 mA
Min int uint32 mA
Max int uint32 mA
Message: Data
Description: data deviation

---

# Page 186

Parameters:
NameTypeEncodedType
Lengthint uint16
Offsetint uint16
Data int[]uint8
Message: DataError
Description: Data error message, showing the expected vs the actural received data
Parameters:
Name TypeEncodedTypeFormat
Expectedint[]uint8 utf8
Receivedint[]uint8 utf8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Indication
Description: Indication (No response received)
Message: Length
Description: length
Parameters:
Name TypeEncodedTypeFormat
IstLaengeint uint16 dec
current length info
SollLaengeint uint16 dec
expected length info
Dataint[]uint8
data info
Message: LogData
Description: Data logging as binary
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: LogString
Description: Data logging as string
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: RxDataTooShort
Description: The received data is too short for the requested test
Message: RxNoise
Description: detected noise on Rx line
Message: RxOverrun
Description: detected overrun error on Rx line
Message: RxParity
Description: detected parity check error on Rx line
Message: RxUartParityUnchecked
Description: Checking Parity bit of received data is unsupported in Even and Odd mode
Message: ScpiCurrent
Description: Tested the current received with SCPI protocol language (Voltage value, Min, Max are all in mA)

---

# Page 187

Parameters:
NameTypeEncodedTypeUnit
Valueint uint32 mA
Min int uint32 mA
Max int uint32 mA
Message: ScpiVoltage
Description: Tested the voltage received with SCPI protocol language. Voltage value, min, max in this message are scaled
by 0.001
Parameters:
NameTypeEncodedTypeScaleUnit
Valueint uint32 0.001V
Min int uint32 0.001V
Max int uint32 0.001V
Message: TestByteSequence
Description: Byte sequence test failed. message shows index of the error and the expected vs the actual received data
Parameters:
Name TypeEncodedTypeFormat
ErrorIndexint uint16
Expectedint[]uint8 raw
Receivedint[]uint8 raw
Message: TestStringSequence
Description: String sequence test failed. message shows index of the error and the expected vs the actual received data
Parameters:
Name TypeEncodedTypeFormat
ErrorIndexint uint16
Expectedint[]uint8 utf8
Receivedint[]uint8 utf8
Message: TxConf
Description: Tx Confirmation error message. indicating failure in sending message
Message: TxConfirmation
Description: Confirm that all data has been transmitted to the UART queue. Bytes may still be needed to be processed.
Message: TxDataTooLong
Description: The data is too long
Message: TxOverflow
Description: The last sending/transmission has not yet been completed due to TxOverflow
Message: VoltageOutofRange
Description: Tested the voltage received with SCPI protocol language is out of range, Voltage value, min, max in this
message are scaled by 0.001
Parameters:
NameTypeEncodedTypeScaleUnit
Valueint uint32 0.001V
Min int uint32 0.001V
Max int uint32 0.001V
back to interface definition
Interface: WaveGenOutput  extends _Object
Enumerations
InputVRange
WaveModes
Functions
EnableOutput
SetDCoffset
SetInputVRange
SetPulseParams
SetREG

---

# Page 188

SetUserTag
SetWaveParams
SetZeroAdjustment
Messages
GeneralMessage
PulseParameters
StartOfRamp1
StartOfRamp2
Enumerations
Enum: InputVRange
Description: +-5V or 0 to 10V
Value
Minus5VToPlus5V
ZeroTo10V
Enum: WaveModes
Value
Sine
Triangular
Square
Pulse
Functions
Function: EnableOutput
Description: 
Purpose : 
- If enabled, the output is connected to the backplane line. If disabled, the output is floating. 
Example: 
*_ApiEnableOutput(Enable)
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SetDCoffset
Description: 
Purpose : 
- Set the DC offset, range -5V to +5V, 12 bit resolution internally. This is the static part, there may be an overlay sine wave.
Example: 
*_ApiSetDCoffset(Voltage)
Parameters:
Name TypeEncodedTypeScaleUnit
Voltageint int16 0.001V
Range -5 .. +5V
Function: SetInputVRange
Description: 
Purpose : 
- Configure the input range -5V to +5V or 0V to 10V 
Example: 
*_ApiSetInputVRange(SetInputVRange)
Parameters:
Name Type EncodedType
InputVRangeInputVRangeint
Function: SetPulseParams
Description: 
Purpose : 
- Configure a pulse, with V, ΔV, tr, td 
Example: 

---

# Page 189

*_ApiSetPulseParams(Vnom,Vss,TR,Mode,AmpGain)
Parameters:
Name Type EncodedType Scale Unit
Vnomint uint16 0.001 V
Range 0 .. 20V.
Vssint uint16 0.001 V
Range 0 .. 20V.
TRint uint32 0.001 ms
Range 0.5ms to 1000ms
TDint uint32 0.001 ms
Range 1ms to 1000ms
ModeWaveModes int - -
Set the waveform mode, Sine, Triangular, Square, Pulse. Sine by default
AmpGainint uint16 0.001
Amplification factor of the Quadrature amplifier 1 to 10, in 0.001
resolution.
Function: SetREG
Description: 
Purpose : 
- DebugOnly:Configure SPI resigsters of AD9833 
Example: 
*_ApiSetREG(REG)
Parameters:
NameTypeEncodedTypeScale
REGint uint16 1
Range 0 .. 0xFF.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetWaveParams
Description: 
Purpose : 
- Configure an overlay wave, with frequency and amplitude, Max Amplitude 6V, 10 bit resolution internal. 
- Max frequency 5KHz. 
Example: 
*_ApiSetWaveParams(Frequency,Amplitude,Mode)
Parameters:
Name Type EncodedType Scale Unit
Frequencyint uint32 0.001 Hz
Range 0 to 5000Hz
Amplitudeint uint16 0.001 V
Range -5 .. +5V
ModeWaveModes int - -
Set the waveform mode, Sine, Triangular, Square.Sine by
default
Function: SetZeroAdjustment
Description: 
Purpose : 
- Call PulseParameters with Vnom and Vss zero - Measure the voltage, and then put the value as ZeroAdjustment voltage 
Example: 
*_ApiSetZeroAdjustment(Measured)
Parameters:
Name TypeEncodedTypeScaleUnit
int int16 0.001V

---

# Page 190

MeasuredRange -1V to +1V.
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PulseParameters
Description: Parameters of pulse that was generated.
Parameters:
NameTypeEncodedTypeScaleUnit
TR int uint32 0.001ms
TD int uint32 0.001ms
Vnomint uint32 0.001V
Vss int uint32 0.001V
Message: StartOfRamp1
Description: Start of ramp 1 TR time.
Message: StartOfRamp2
Description: Start of ramp 2 TD-TR .
back to interface definition
Interface: BaseIo  extends _Object
Functions
InputReaderOff
InputReaderSetInterval
SetUserTag
Messages
GeneralMessage
Functions
Function: InputReaderOff
Description: If reading of of the inputs is switched of, the signals are no more updated.
Function: InputReaderSetInterval
Description: The inputs of BaseIo are read in this configured interval. This is the digital inputs and the analog inputs.
Parameters:
NameTypeEncodedTypeScale Unit
Intervallonguint64 0.000001ms
Valid range for interval is 5ms .. 1000ms
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 191

Objects
Object: WaveGenOutput
Name Interface
WaveGenOutputWaveGenOutput
Object: Rs232
NameInterface
Rs232Rs232
Object: TriggerInput_DI_0
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
TriggerInput_DI_0_SignalSignalboolean 0 1 1 false false
Object: TriggerInput_DI_1
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
TriggerInput_DI_1_SignalSignalboolean 0 1 1 false false
Object: TriggerInput_Backplane_DI_0
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
TriggerInput_Backplane_DI_0_SignalSignalboolean 0 1 1 false false
Object: DO_0
Description: On the front connector
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
DO_0_SignalSignalboolean 0 1 1 false false
Object: DO_1
Description: On the front connector
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
DO_1_SignalSignalboolean 0 1 1 false false
Object: DAC0
Description: On the front connector
NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
DAC0_SignalSignalint 0 0.001% 4 false false
Object: DAC1
Description: On the front connector
NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
DAC1_SignalSignalint 0 0.001% 4 false false
Object: DAC10
Description: On the back plane
NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
DAC10_SignalSignalint 0 0.001% 4 false false
Object: DAC11
Description: On the back plane
NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
DAC11_SignalSignalint 0 0.001% 4 false false
Object: ADC0_Min
Description: On the front connector. Acquisition started with one read cycle, completion and signal update on the next read
cycle. Minimum value of all samples. Sampling rate 10k/s
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC0_Min_SignalSignalint 0 0.001% 4 false false
Object: ADC0_Avg
Description: On the front connector
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC0_Avg_SignalSignalint 0 0.001% 4 false false
Object: ADC0_Max

---

# Page 192

Description: On the front connector
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC0_Max_SignalSignalint 0 0.001% 4 false false
Object: ADC1_Min
Description: On the front connector
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC1_Min_SignalSignalint 0 0.001% 4 false false
Object: ADC1_Avg
Description: On the front connector
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC1_Avg_SignalSignalint 0 0.001% 4 false false
Object: ADC1_Max
Description: On the front connector
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC1_Max_SignalSignalint 0 0.001% 4 false false
Object: ADC10_Min
Description: On the back plane
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC10_Min_SignalSignalint 0 0.001% 4 false false
Object: ADC10_Avg
Description: On the back plane
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC10_Avg_SignalSignalint 0 0.001% 4 false false
Object: ADC10_Max
Description: On the back plane
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC10_Max_SignalSignalint 0 0.001% 4 false false
Object: ADC11_Min
Description: On the back plane
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC11_Min_SignalSignalint 0 0.001% 4 false false
Object: ADC11_Avg
Description: On the back plane
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC11_Avg_SignalSignalint 0 0.001% 4 false false
Object: ADC11_Max
Description: On the back plane
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ADC11_Max_SignalSignalint 0 0.001% 4 false false
back to interface definition
Interface: Base6Io  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.

---

# Page 193

Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Rs232
NameInterface
Rs232Rs232
back to interface definition
Interface: DataServer  extends _Object
Enumerations
ConnectionError
HwInterface
Functions
Download
DownloadBlock
EnsureConnection
SetUserTag
Messages
ConnectionEstablished
ConnectionProblem
GeneralMessage
Events
DownloadCompleted
Objects
Enumerations
Enum: ConnectionError
Value
Interuption
Protocol
Enum: HwInterface
Value Description
PcEthernetStandard Ethernet connection between module and control
PC
SATA Serial ATA connection to data server PC.
Functions
Function: Download
Description: Download a complete file
Parameters:
Name Type EncodedType Format Maxlength
Purposeint uint32 -
A number that may make sense for the firmware. So it can listen for the comple event and handle the
data.
FileNameint[] uint8 utf8 128
Function: DownloadBlock
Description: Download a section of a file
Parameters:
Name Type EncodedType Format Maxlength
int uint32 -

---

# Page 194

PurposeA number that may make sense for the firmware. So it can listen for the comple event and handle the
data.
FileNameint[] uint8 utf8 128
Offset long int64 -
Size long int64 -
Function: EnsureConnection
Description: Establish the connection. If already connected, verify the connection is active with the given parameters
Parameters:
Name Type EncodedTypeFormatMaxlength
HwInterfaceHwInterfaceint - -
TestParam int[] uint8 utf8 32
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: ConnectionEstablished
Description: Connection either already established, or the connection process just finished successfully
Message: ConnectionProblem
Description: Report if connection process failed or a existing connection is interrupted.
Parameters:
NameType EncodedType
CauseConnectionErrorint
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: DownloadCompleted
Description: If a single download was completed.
back to interface definition
Interface: FirmwareTracer  extends _Object
Enumerations
TracerStatus
Functions
Download
GetStatus
Initialize
SetUserTag
StartLogging
Messages
GeneralMessage
TraceDownloadPart
TracerStatus
Events
LoggingCompleted
Objects
Enumerations
Enum: TracerStatus

---

# Page 195

Value
Initialized
Logging
Full
Functions
Function: Download
Description: Download a complete logged traces list
Function: GetStatus
Description: Gets Firmware Tracer Status
Function: Initialize
Description: Initialize Log Buffers and Counters
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartLogging
Description: Start Logging Firmware traces
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: TraceDownloadPart
Description: This is a part of the logged firmware traces
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: TracerStatus
Description: Report if the tracer is initialized, logging or full
Parameters:
Name Type EncodedTypeUnit
Status TracerStatusint -
Cursor int uint32
Overheadint uint32 ns
back to interface definition
Events
Event: LoggingCompleted
Description: Firmware Tracer has completely filled its log buffer
back to interface definition
Interface: EventFilter  extends _Object
Description: Filter events and configure each filter to trigger its event after checking against configuration
Functions
ConfigureInRange
ConfigureInRangeRaw
ConfigureRawDataEquals

---

# Page 196

ConfigureTimeoutDetector
Deactivate
SetUserTag
Messages
DataTooLong
GeneralMessage
NotSupportedType
TimeoutOccurred
Events
Output
Receivers
Input
Objects
Functions
Function: ConfigureInRange
Description: Configure the minimum and maximum values of the signal value of the input and trigger if in range, the limits
values are inclusive, so if the value is equal to a boundary it counts as in range.
Parameters:
Name Type EncodedType
minValuelong int64
Set the minmum value of the signal change/update to be triggered on.
maxValuelong int64
Set the maximum value of the signal change/update to be triggered
on.
Function: ConfigureInRangeRaw
Description: Configure the minimum and maximum values of the signal value of the input and trigger if in range, the limits
values are inclusive, so if the value is equal to a boundary it counts as in range.
Parameters:
Name Type EncodedType
minValueRawlong int64
Set the minmum value of the signal change/update to be triggered on.
maxValueRawlong int64
Set the maximum value of the signal change/update to be triggered
on.
Function: ConfigureRawDataEquals
Description: Pass the byte sequence of the input so the event to be triggered if equal.
Parameters:
NameTypeEncodedType Format
Dataint[] uint8 raw
Data to be tested to fire needed
event
offsetint uint8
Function: ConfigureTimeoutDetector
Description: Activate the timeout checking. After detecting the first timeout, if ActiveContinuous is true and a new source
event is triggered, the timer starts again otherwise timeout will trigger only once.
Parameters:
Name Type EncodedTypeUnit
Timeout int int32 ms
ActiveContinuousbooleanbool
Function: Deactivate
Description: Disable the source event detection.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex

---

# Page 197

Valueint uint32 hex
back to interface definition
Messages
Message: DataTooLong
Description: The passed data is too long for the requested test
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NotSupportedType
Description: The type expected to filter is Signal Value
Message: TimeoutOccurred
back to interface definition
Events
Event: Output
back to interface definition
Receivers
Receiver: Input
back to interface definition
Interface: Tracer  extends _Object
Description: The tracer feature is used to monitor software and hardware signal changes.
They are then transferred to a web-based application to be plotted into a graph.
Two modes of operations are supported i.e. online mode and offline mode.
Online mode:
The signal(s) value changes are logged and plotted at runtime while it is changing.
Offline mode:
The signal(s) value changes are logged in the period of time between calling two APIs "EnableTracerLogging and
DownloadTrace.
Please refer to the following document for more technical details.
Tracer document
Enumerations
HeaderType
TracerMode
Functions
AttachDigitalChannel
DisableDigitalChannel
Dump
Go_Offline
Go_Online
SetUserTag
StartTracer
StopLogging
Messages
GeneralMessage
MoidTableLog
TracerLog
Enumerations
Enum: HeaderType
Value
NormalHeader
CompressedHeader
Enum: TracerMode
Value
OneShot

---

# Page 198

CircularBuffer
Functions
Function: AttachDigitalChannel
Description: Attaches an object ID to the given channel
Parameters:
Name TypeEncodedType
channelSignalint _Signal
channelId int uint16
hystLevel int uint16
clockDiv int uint16
Function: DisableDigitalChannel
Description: Disables Channel with given ID
Parameters:
Name TypeEncodedType
channelIdint uint8
Function: Dump
Description: Dumps Tracer Buffer Contents
Function: Go_Offline
Description: Puts Tracer in Offline mode , which stops the capture of packets from the core
Function: Go_Online
Description: Puts Tracer in Online mode , which triggers the capture of packets from the core
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartTracer
Description: Selects the tracer operating mode i.e. offline-mode or online-mode.
Selects header type i.e. compressed header (most probably used for hardware signals), or normal header
Enables the tracer logging functionalty.
N.B : This API must be called before using the tracer for proper operation.
Parameters:
Name Type EncodedType
Mode TracerModeint
HeaderTypeHeaderTypeint
HwEnable boolean bool
Function: StopLogging
Description: Stops the tracer logging functionality
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: MoidTableLog
Description: print The table which includes the mapping between the actual signal id and its corresponding compressed
twin to the CTE
Parameters:

---

# Page 199

Name TypeEncodedTypeFormat
compressedIdint uint8 hex
actualId int uint16 hex
Message: TracerLog
Description: print logged signal data to the CTE
Parameters:
Name TypeEncodedTypeFormat
dataEntryint uint32 hex
back to interface definition
Interface: DelayedEvent  extends _Object
Description: The purpose of the DelayedEvent is to configure an event that will be triggered in a defined time.
This allows the user to execute some actions in the mean time and continue the test not depending on the time that took those
actions.
Example:
- TriggerEventIn(2000)
- Some actions
- PauseUntilEvent( EvtDelayedEventTrig, 2000 )
- Continue the test
Functions
SetUserTag
TriggerEventIn
Messages
DelayedEventTriggered
GeneralMessage
Events
DelayedEventTrig
Objects
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TriggerEventIn
Parameters:
NameType EncodedType Unit
Timeint uint32 ms
In how long time will the event be triggered. (in
MS)
back to interface definition
Messages
Message: DelayedEventTriggered
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: DelayedEventTrig
back to interface definition
Interface: Ping  extends _Object
Description: Ping Application Utility.

---

# Page 200

Functions
PingSend
SetUserTag
Messages
GeneralMessage
PongReceived
PongTimeout
Functions
Function: PingSend
Description: Send Ping request from SourceIp(already defined in Castle) to DestinationIp
Parameters:
Name Type EncodedTypeUnitDefault
DestinationIPint[] uint32
isIpV6 booleanbool
PongTimeoutint uint32 ms1000
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PongReceived
Description: Pong msg is received
Message: PongTimeout
Description: Timeout while waiting for Pong response.
back to interface definition
Interface: ToeDriver  extends _Object
Description: 
Purpose: 
This interface provides functions and messages to control Toellner power supply through RS232. The module can be used to
send commands to the external equipment and to monitor the voltage/current/power. 
Background: 
- The Toellner Power supply is a programmable power supply that can be used to set the voltage, current and power. 
- The module supports multiple channels (channelX, channel1, channel2). 
Remarks: 
- The Init sets default values to the Toellner Power Supply like the communication language (COMP), the current limit to 2 Amps. 
- The Baudrate is taken from the Rs232 Port. 
Enumerations
ErrorLevel
RS232
chooseClamp
e_MeasurementType
e_baudrate
e_chooseChannel
e_language
e_readyindicationsource
e_slewState

---

# Page 201

e_voltageFunction
Functions
AutoVoltage
ChangeLanguage
ChangeOutput
ChangeRemote
ClearScreen
ConfigLoopBackMeasurement
ConfigSlewState
GetCurrentMilliAmpere
Init
InitWhenReady
ReportWrongChannelId
RequestMeasurement
Reset
SetCurrent
SetMaxPower
SetResetCallbackFunction
SetSenseAverage
SetUserTag
SetVoltage
SetVoltageCurrent
TestRangeMilliAmpere
Messages
ConnectionError
CurrentOutofRange
Data
DataError
GeneralMessage
IncorrectInitialization
Indication
LatestMeasuredCurrent
LogString
MaxPowertoSmall
Outputnotsupported
ReadyForInitIndication
RegisteredVersionofLookupTablesdifferstotheincludedone
RequestedMeasurement
RxDataTooShort
RxNoise
ScpiCurrent
StretchingFactorOutofRange
TestByteSequence
TestStringSequence
ToellnerIdInvalidOrWrong
TxConfirmation
TxDataTooLong
TxOverflow
VoltageFunctionFinished
VoltageOutofRange
Voltage_Offset_OutOfRange
Events
VoltageFunctionFinished
Objects
Enumerations
Enum: ErrorLevel
Description: The error level used for reporting worngChannelId msg
Value
NOTHING
INFO
WARN
ERROR
Enum: RS232
Value Description
device_0Choose RS232[0]
device_1Choose RS232[1]

---

# Page 202

Enum: chooseClamp
Value Description
CASTLE_CLAMP_0Mapps the selected Channel to Clamp 0
(A)
CASTLE_CLAMP_1Mapps the selected Channel to Clamp 1
(B)
NOT_MAPPED Loop back measurement switched off
Enum: e_MeasurementType
Value
NONE
CURRENT
VOLTAGE
POWER
Enum: e_baudrate
Value
BR_1200
BR_2400
BR_4800
BR_9600
BR_19200
BR_38400
BR_57600
Enum: e_chooseChannel
Value Description
CHANNELXSelects both Channels
CHANNEL1Selects first Channel
CHANNEL2Selects second Channel
Enum: e_language
ValueDescription
SCPIStandard Command for Programmable Instruments
COMPPacked SCPI Language for Toellner Power Supply
Enum: e_readyindicationsource
Value Description
NONE Start Toellner init immediatelly
UEXTXXStart Toellner init when supply voltage is seen at
UEXT15/30
Enum: e_slewState
ValueDescription
SLOWSets a slower gain of voltage at Toellner power supply
FASTEnables a fast gain of voltage at Toellner power
supply
Enum: e_voltageFunction
Value Description
Power_Cranking_Sweep_Range_MultipleDefault Function for cranking out of Power Management Excel Sheet
Power_Cranking_Sweep_Range_Single Default Function for cranking out of Power Management Excel Sheet
Power_Cold_Cranking_Short Default Function for cold cranking out of Power Management Excel Sheet
Power_Transient_Overvoltage_EnduranceDefault Function for overvoltage out of Power Management Excel Sheet
Power_Jump_StartDefault Function for jump of voltage during start out of Power Management Excel
Sheet
Power_Reset_Behavior_Short Default Function for a power reset behavior out of Power Management Excel Sheet
Power_Reset_Behavior_Long Default Function for a power reset behavior out of Power Management Excel Sheet
Power_Cold_Start Default Function for cold start out of Power Management Excel Sheet
Power_Warm_Start Default Function for warm start out of Power Management Excel Sheet
Power_Slow_Increase_Decrease Default Function for rise of voltage out of Power Management Excel Sheet
Power_Slow_Decrease_Increase Default Function for drop of voltage out of Power Management Excel Sheet
Functions
Function: AutoVoltage
Description:
Voltage Functions
Purbose: Function to set the power supply voltage automatically 

---

# Page 203

Charts
Power_Cranking_Sweep_Range_Multiple
Voltage Profile:
Volt 0 -> Wait 5 sec -> Volt 12 -> Wait (t1) 0.01=< t1=< 3.01 -> Volt 5.5 -> Wait (t2) 0.01=< t2=< 1.01 -> Volt 12
Power_Cranking_Sweep_Range_Single
Voltage Profile:
Volt 0 -> Wait 5 sec -> Volt 12 -> Wait (t1) 0.05=< t1 =< 5.00 -> Volt 5 
Power_Cold_Cranking_Short
Voltage Profile:
Volt 0 -> Wait 5 sec -> Volt 12 -> Wait 3 sec -> Volt 6.5 -> Wait 0.5 sec
loop 20 times:
Volt 12 -> Wait 0.5 sec -> Volt 6.5 -> Wait 0.5 sec
loop 4 times:

---

# Page 204

Volt 9 -> Wait 0.5 sec -> Volt 6.5 -> Wait 0.5 sec -> Volt 12
Power_Transient_Overvoltage_Endurance
Voltage Profile:
Volt 9 -> Wait 400ms -> Volt 16 -> Wait 500ms -> Volt 12 -> Wait 500ms -> Volt 9 sec
Power_Jump_Start
Voltage Profile:
Volt 9 -> Wait 10 sec -> Volt 16V -> Wait 10 sec -> Volt 9 
Power_Reset_Behavior_Short
Voltage Profile:
Volt 9 -> Wait 900ms 
loop (until 6V):
Decrease 0.5V from latest value( 8.5 , 8 , 7.5 etc)
Wait 100 ms
Set Volt 9 again

---

# Page 205

Wait 900 ms 
loop (until 0V):
Decrease 0.2V from latest value( 5.8, 5.6, 5.4 etc)
Wait 0.1 sec
Set Volt 9 again
Wait 900 ms 
Volt 9V
Power_Reset_Behavior_Long
Voltage Profile:
Volt 9 -> Wait 10 sec 
loop (until 6V):
Decrease 0.5V from latest value( 8.5 , 8 , 7.5 etc)
Wait 10 sec
Set Volt 9 again
Wait 10 sec
loop (until 0V):
Decrease 0.2V from latest value( 5.8, 5.6, 5.4 etc)
Wait 10 sec
Set Volt 9 again
Wait 10 sec
Volt 12V
Power_Cold_Start
Check OEM requirements for Cold Start voltage and timings.
Adapt the function in the RS232 Excel file and run the macro than you have to replace the created c code with the voltage
function in the firmware.
Set 12V -> Wait 10 ms -> Set Volt 4 -> Wait 1 sec -> Set Volt 6 -> Wait 6.5 sec -> Set Volt 9 -> Wait 10 ms -> Set Volt 9.5
-> Set Volt 0.5*sin(5*(time-t7)/1000)+10 -> Wait 3.5 sec -> Set Volt 12 

---

# Page 206

Power_Warm_Start
Check OEM requirements for Warm Start voltage and timings.
Adapt the function in the RS232 Excel file and run the macro than you have to replace the created c code with the voltage
function in the firmware.
Set 12V -> Wait 10 ms -> Set Volt 4 -> Wait 1 sec -> Set Volt 6 -> Wait 6.5 sec -> Set Volt 9 -> Wait 2.5 sec -> Set Volt 12 
Power_Slow_Increase_Decrease
Voltage Profile:
Volt 16 -> Wait 10ms -> Increase 16 Volt to 21V with 0.05V steps each 10 ms -> Decrease 0.05V for each 10 ms until 16V 
Power_Slow_Decrease_Increase
Voltage Profile:
Volt 9 -> Wait 10 ms -> Decrase 0.05V for each 10 ms until 4V -> Increase 4 Volt to 9V with 0.05V steps each 10 ms
Result: voltage function finished message on success or function never finished error message on failure
Parameters:
Name Type EncodedType Scale Unit
e_voltageFunction int - -

---

# Page 207

choosetableSpecifies the voltage function to be applied by the Toellner power supply. This parameter determines the specific
voltage profile that the power supply will generate over time. 
Possible Values: Refer to the e_voltageFunction enumeration for a list of supported voltage functions. Each function
corresponds to a predefined voltage profile. The following are the available voltage functions:
Power_Cranking_Sweep_Range_Multiple: Default Function for cranking out of Power Management Excel Sheet.
Power_Cranking_Sweep_Range_Single: Default Function for cranking out of Power Management Excel Sheet.
Power_Cold_Cranking_Short: Default Function for cold cranking out of Power Management Excel Sheet.
Power_Transient_Overvoltage_Endurance: Default Function for overvoltage out of Power Management Excel Sheet.
Power_Jump_Start: Default Function for jump of voltage during start out of Power Management Excel Sheet.
Power_Reset_Behavior_Short: Default Function for a power reset behavior out of Power Management Excel Sheet.
Power_Reset_Behavior_Long: Default Function for a power reset behavior out of Power Management Excel Sheet.
Power_Cold_Start: Default Function for cold start out of Power Management Excel Sheet.
Power_Warm_Start: Default Function for warm start out of Power Management Excel Sheet.
Power_Slow_Increase_Decrease: Default Function for rise of voltage out of Power Management Excel Sheet.
Power_Slow_Decrease_Increase: Default Function for drop of voltage out of Power Management Excel Sheet.
Impact: Selecting a voltage function will define the sequence of voltage changes and the timing for each change. 
Requirement: This parameter is mandatory.
channele_chooseChannel int - -
Specifies the channel on the Toellner power supply to which the voltage function will be applied. 
Possible Values: Refer to the e_chooseChannel enumeration for supported channels. The following are the available
channels:
CHANNELX: Selects both Channels.
CHANNEL1: Selects the first Channel.
CHANNEL2: Selects the second Channel.
Impact: Determines which of the power supply's outputs will be affected by the selected voltage function. If
CHANNELX is selected, the voltage will be set on both output channels. 
Requirement: This parameter is mandatory.
offsetint int32 0.001 V
Specifies an offset voltage to be added to the voltage values defined in the chosen voltage function. 
Units: Volts (V). 
Scale: The value should be given as a scaled integer, where 1 represents 0.001V. Therefore, an input of 1000
corresponds to 1V. 
Example: Setting this parameter to 5000 means adding an offset of 5V to the profile. So, if a voltage function specifies
a step to 10V, with an offset of 5V, the actual voltage would be 15V. 
Impact: Shifts the entire voltage profile upwards or downwards by a constant amount. 
Requirement: This parameter is mandatory. 
Important : the total Voltage(Voltage + offset) must be under the max of Toellner.
stretchingFactorint uint16 0.01
Specifies a stretching factor that will be used to adjust the duration of the time intervals in the selected voltage
function. 
Scale: The value should be given as a scaled integer, where 1 represents a stretching factor of 0.01. Therefore, an
input of 100 corresponds to factor of 1.00 (no stretching/no time change). 
Example: Setting this parameter to 200 means doubling the time intervals. If a voltage function had a 1-second step, it
would become a 2-second step. Setting this parameter to 50 means halving the time intervals. If a voltage function
had a 1-second step, it would become a 0.5-second step. 
Range: The allowed values must be greater than 0. 
Impact: Controls the speed at which the voltage profile changes over time. A higher value means a slower voltage
change; a lower value means a faster voltage change. 
Requirement: This parameter is mandatory.
Response timeout: 600000
Result Message: VoltageFunctionFinished 
Faults: FunctionNeverFinished 
Function: ChangeLanguage
Description: Change the language for communicating with power supply. Normally, its used after 'Init' API to change the
communication language
Parameters:
Name Type EncodedType
languagee_languageint
Function: ChangeOutput
Description: 
Purpose: Turns the output of the Toellner power supply on or off. 
Example: 
objToeDriver().afcChangeOutput(true); // Turns the output on. 
objToeDriver().afcChangeOutput(false); // Turns the output off. 
Parameters:
NameType EncodedType
Enableboolean bool
Specifies whether to turn the output on (true) or off
(false).
Function: ChangeRemote
Description: 

---

# Page 208

Purpose: 
Changes the control mode of the Toellner power supply between remote and local control. 
Example: 
objToeDriver().afcChangeRemote(true); // Enables remote control. 
objToeDriver().afcChangeRemote(false); // Disables remote control (enables local control). 
Parameters:
NameType EncodedType
Enableboolean bool
Specifies whether to enable (true) or disable (false) remote
control.
Function: ClearScreen
Description: 
Purpose: 
Clears the registers of the Toellner Power Supply. This function is used to clear any previous settings or data. 
Example: 
objToeDriver().afcClearScreen(); 
Function: ConfigLoopBackMeasurement
Description: 
Purpose: 
Enables or disables the loop back measurement feature, which verifies the output voltage of the Toellner power supply by
using a connected clamp module. 
Example: 
To enable loop back measurement with a 150ms delay and a 1500mV accepted deviation, mapping channel 1 to clamp
module 0 and channel 2 to clamp module 1 you would use 
objToeDriver().afcConfigLoopBackMeasurement(150, 1500, chooseClamp.CASTLE_CLAMP_0,
chooseClamp.CASTLE_CLAMP_1); 
Parameters:
Name Type EncodedType Unit
Delayint uint16 ms
Specifies the delay in milliseconds (ms) to wait after setting the voltage or voltage and current before checking
the clamp measurement. A good value can be eg. 100ms. Minimum delay is 100ms due to measurement cycle of
clamp module.
AcceptedDeviationint uint32 mV
Specifies the accepted deviation in millivolts (mV) between the set voltage and the voltage measured by the
clamp. A good value can be eg. 2000mV. Minimum deviation is 100mV.
Channel1MappedTochooseClamp int -
Specifies which clamp module is mapped to channel 1 for voltage measurement.
Channel2MappedTochooseClamp int -
Specifies which clamp module is mapped to channel 2 for voltage measurement.
Function: ConfigSlewState
Description: Configure the voltage gain for the outputs
Parameters:
Name Type EncodedType
channele_chooseChannelint
slewStatee_slewState int
Function: GetCurrentMilliAmpere
Description: 
Purpose: 
Returns the latest current value captured by the TestRangeMilliAmpere API. This function allows retrieving the last
measured current value. 
Example: 
objToeDriver().afcGetCurrentMilliAmpere(); 
Response timeout: 0
Result Message: LatestMeasuredCurrent 
Faults: 
Function: Init
Description: 

---

# Page 209

Purpose: 
Initializes the Toellner power supply driver and the Toellner device with specified parameters, and checks the device ID. 
Example: 
exu().mod().objToeDriver().afcInit(12, 2, 24, 12, 2, 24, e_language.SCPI, e_baudrate.BR_9600,
e_chooseChannel.CHANNELX, RS232.device_0); 
Dependency: 
either this or 'InitWhenReady' API are the first APIs to be called 
Parameters:
Name Type EncodedType ScaleUnitDefault
voltagechannel1int int32 0.001V
The start voltage for channel 1 in Volt (V).
currentchannel1int int32 0.001A
The start current limit for channel 1 in Ampere (A).
powerchannel1int int32 0.001W
The start power limit for channel 1 in Watt (W).
voltagechannel2int int32 0.001V
The start voltage for channel 2 in Volt (V).
currentchannel2int int32 0.001A
The start current limit for channel 2 in Ampere (A).
powerchannel2int int32 0.001W
The start power limit for channel 2 in Watt (W).
Languagee_language int - -
The communication language (COMP or SCPI).
Baudratee_baudrate int - -
The communication baud rate.
channele_chooseChannelint - - CHANNELX
The channel to be configured (CHANNELX, CHANNEL1,
CHANNEL2).
RS232DeviceRS232 int - - device_0
The RS232 device to use (device_0, device_1).
Function: InitWhenReady
Description: 
Purpose: 
Initializes the Toellner power supply when external supply voltage is detected at UEXT. 
Example: 
objToeDriver().afcInitWhenReady(12, 2, 24, 12, 2, 24, e_language.COMP, e_baudrate.BR_9600,
e_chooseChannel.CHANNELX, RS232.device_0, e_readyindicationsource.UEXTXX); 
Dependency: 
either this or 'Init' API are the first APIs to be called 
Parameters:
Name Type EncodedTypeScaleUnitDefault
voltagechannel1int int32 0.001V
The default voltage for channel 1 in Volt (V).
currentchannel1int int32 0.001A
The default current limit for channel 1 in Ampere (A).
powerchannel1int int32 0.001W
The default power limit for channel 1 in Watt (W).
voltagechannel2int int32 0.001V
The default voltage for channel 2 in Volt (V).
currentchannel2int int32 0.001A
The default current limit for channel 2 in Ampere (A).
powerchannel2int int32 0.001W
The default power limit for channel 2 in Watt (W).
Languagee_language int - -
The communication language (COMP or SCPI).
Baudratee_baudrate int - -
The communication baud rate.
channele_chooseChannel int - - CHANNELX
The channel to be configured (CHANNELX, CHANNEL1,
CHANNEL2).
RS232DeviceRS232 int - - device_0
The RS232 device to use (device_0, device_1).

---

# Page 210

readyindicationsrce_readyindicationsourceint - - NONE
The source of ready indication (NONE, UEXTXX).
Function: ReportWrongChannelId
Description: 
Purpose: 
Configures the system to report when the Toellner power supply either does not respond or responds with an incorrect
channel ID, and sets the severity level of these reports. 
Example: 
To configure the system to issue a warning when the Toellner responds with an incorrect channel ID 
objToeDriver().afcReportWrongChannelId(ErrorLevel.WARN); 
To configure the system to avoid reporting when the Toellner responds with an incorrect channel ID 
objToeDriver().afcReportWrongChannelId(ErrorLevel.NOTHING); 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
Specifies the severity level for reporting. Possible values include NOTHING, INFO, WARN, and
ERROR.
Function: RequestMeasurement
Description: 
Purpose: 
Sends a request to the Toellner power supply to perform a measurement of a specified type for the selected channel and
returns the result. 
Example: 
- objToeDriver().afcRequestMeasurement(e_chooseChannel.CHANNELX, e_MeasurementType.VOLTAGE); // Requests a
voltage measurement for both channels. 
- objToeDriver().afcRequestMeasurement(e_chooseChannel.CHANNEL1, e_MeasurementType.CURRENT); // Requests a
current measurement for CHANNEL1. 
Parameters:
Name Type EncodedType
channele_chooseChannel int
Specifies the channel for which to request the measurement. Possible values are CHANNELX (both channels), CHANNEL1
(channel 1), or CHANNEL2 (channel 2).
typee_MeasurementType int
Specifies the type of measurement to request. Possible values are NONE, CURRENT, VOLTAGE, or POWER.
Response timeout: 100
Result Message: RequestedMeasurement 
Faults: 
Function: Reset
Description: 
Purpose: 
Resets the Toellner power supply to its initial or default status. 
Example: 
objToeDriver().afcReset(); 
Function: SetCurrent
Description: 
Purpose: 
Sets the current limit for the selected channel of the Toellner power supply. 
Example: 
objToeDriver().afcSetCurrent(e_chooseChannel.CHANNEL1, 2000); // Sets the current limit for CHANNEL1 to 2A (2000
mA). 
Parameters:
Name Type EncodedType Scale Unit
channele_chooseChannel int - -
Specifies the channel to which the current limit will be applied. Possible values are CHANNELX (both channels), CHANNEL1
(channel 1), or CHANNEL2 (channel 2).
currentint int32 0.001 A
Specifies the current limit in Ampere (A). The value is scaled by 0.001, so a value of 2000 corresponds to 2A.
Function: SetMaxPower

---

# Page 211

Description: 
Purpose: 
Sets the maximum output power limit for the selected channel of the Toellner power supply. 
Example: 
objToeDriver().afcSetMaxPower(e_chooseChannel.CHANNEL1, 24000); // Sets the maximum power for CHANNEL1 to
24W (24000 mW). 
Parameters:
Name Type EncodedType Scale Unit
channele_chooseChannel int - -
Specifies the channel to which the maximum power limit will be applied. Possible values are CHANNELX (both channels),
CHANNEL1 (channel 1), or CHANNEL2 (channel 2).
powerint int32 0.001 W
Specifies the maximum power limit in Watt (W). The value is scaled by 0.001, so a value of 24000 corresponds to 24W.
Function: SetResetCallbackFunction
Description: 
Purpose: 
Enables or disables the Toellner driver's callback function after a transmission, allowing control over whether the driver or
the user-managed RS232 module handles subsequent communications. 
Example: 
To disable the callback function, you would use: 
objToeDriver().afcSetResetCallbackFunction(false); 
To enable the callback again, you would use: 
objToeDriver().afcSetResetCallbackFunction(true); 
Parameters:
Name Type EncodedType
SetCallbackboolean bool
Specifies whether to set (true) or reset (false) the Toellner driver's callback function. If set to false, the RS232 module can
be used directly by the user. Setting to true will reactivate the Toe Driver call back again.
Function: SetSenseAverage
Description: 
Purpose: 
Configures the Sense Average mode for the selected channel of the Toellner power supply. When enabled, measurement
values are composed of an average of 8 individual measurements. 
Example: 
objToeDriver().afcSetSenseAverage(e_chooseChannel.CHANNEL1, true); // Enables sense average mode for
CHANNEL1. 
objToeDriver().afcSetSenseAverage(e_chooseChannel.CHANNEL2, false); // Disables sense average mode for
CHANNEL2. 
Parameters:
Name Type EncodedType
channele_chooseChannel int
Specifies the channel for which to configure Sense Average mode. Possible values are CHANNELX (both channels),
CHANNEL1 (channel 1), or CHANNEL2 (channel 2).
Enableboolean bool
Specifies whether to enable (true) or disable (false) Sense Average mode.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetVoltage
Description: 
Purpose: 
Sets the output voltage for the selected channel of the Toellner power supply. 
Example: 

---

# Page 212

objToeDriver().afcSetVoltage(e_chooseChannel.CHANNEL2, 12000); // Sets the voltage for CHANNEL2 to 12V (12000
mV). 
Parameters:
Name Type EncodedType Scale Unit
channele_chooseChannel int - -
Specifies the channel to which the voltage will be applied. Possible values are CHANNELX (both channels), CHANNEL1
(channel 1), or CHANNEL2 (channel 2).
voltageint int32 0.001 V
Specifies the voltage in Volt (V). The value is scaled by 0.001, so a value of 12000 corresponds to 12V.
Function: SetVoltageCurrent
Description: 
Purpose: 
Sets both the output voltage and the current limit for the selected channel of the Toellner power supply. 
Example: 
objToeDriver().afcSetVoltageCurrent(e_chooseChannel.CHANNEL2, 12000, 2000); // Sets the voltage for CHANNEL2 to
12V and the current limit to 2A. 
Parameters:
Name Type EncodedType Scale Unit
channele_chooseChannel int - -
Specifies the channel to which the voltage and current will be applied. Possible values are CHANNELX (both channels),
CHANNEL1 (channel 1), or CHANNEL2 (channel 2).
voltageint int32 0.001 V
Specifies the voltage in Volt (V). The value is scaled by 0.001, so a value of 12000 corresponds to 12V.
currentint int32 0.001 A
Specifies the current limit in Ampere (A). The value is scaled by 0.001, so a value of 2000 corresponds to 2A.
Function: TestRangeMilliAmpere
Description: 
Purpose: 
Tests if the measured current value from the Toellner power supply, when using SCPI protocol, falls within a specified
range. 
Example: 
To test if the current on channel 1 is between 1A and 2A, you would use: 
objToeDriver().afcTestRangeMilliAmpere(1000, 2000, e_chooseChannel.CHANNEL1); 
where 1000 represents 1A (1000 mA), 2000 represents 2A (2000 mA), and CHANNEL1 specifies that the test should be
applied to channel 1. 
Parameters:
Name Type EncodedType Scale Unit
Minint uint32 0.001 A
Specifies the minimum acceptable current value in Amperes (A). The value is scaled by 0.001, so a value of 1000 represents
1A.
Maxint uint32 0.001 A
Specifies the maximum acceptable current value in Amperes (A). The value is scaled by 0.001, so a value of 2000 represents
2A.
channele_chooseChannel int - -
Specifies the channel to monitor. It can be CHANNELX (both channels), CHANNEL1 (channel 1), or CHANNEL2 (channel 2).
Response timeout: 0
Result Message: ScpiCurrent 
Faults: 
back to interface definition
Messages
Message: ConnectionError
Description: Connection Error (loop back measurement failed). Values in this message are in mV
Parameters:
Name TypeEncodedTypeUnit
ExpectedVoltage int uint32 mV
ActualClampVoltageint int32 mV
Message: CurrentOutofRange
Description: Current measured by power supply is out of range. Values in this message are in mA
Parameters:

---

# Page 213

NameTypeEncodedTypeUnit
Valueint uint32 mA
Min int uint32 mA
Max int uint32 mA
Message: Data
Description: Data deviation
Parameters:
NameTypeEncodedType
Lengthint uint16
Offsetint uint16
Data int[]uint8
Message: DataError
Description: Data error. shows expected vs actual received data
Parameters:
Name TypeEncodedTypeFormat
Expectedint[]uint8 utf8
Receivedint[]uint8 utf8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IncorrectInitialization
Description: Driver initialization is not correct - call init function first (which registers the driver call backs at the required
rs232 module)
Message: Indication
Description: Indication (No response)
Message: LatestMeasuredCurrent
Description: Latest current measured by power supply. Value in this message is in mA
Parameters:
NameTypeEncodedTypeUnit
Valueint uint32 mA
Message: LogString
Description: Data logging as string
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: MaxPowertoSmall
Description: Selected max power is to small to set on Toellner. Values in this message are in scale of 0.001
Parameters:
Name TypeEncodedTypeScaleUnit
Power int uint32 0.001W
MinPowerint uint32 0.001W
Message: Outputnotsupported
Description: Selected output isn't supported
Message: ReadyForInitIndication
Description: Criteria was met which indicates that execution of ToeInit is save
Message: RegisteredVersionofLookupTablesdifferstotheincludedone
Description: The generated Version of the LookupTable Header is different to the registered in the ToeDriver.c
Message: RequestedMeasurement
Description: Retuns the measurement that was requested from the device via the request functions

---

# Page 214

Parameters:
NameType EncodedType
Valueint uint32
type e_MeasurementTypeint
Message: RxDataTooShort
Description: The received data is too short for the requested test
Message: RxNoise
Description: RxNoise
Message: ScpiCurrent
Description: Current measured by power supply is in range. Values in this message are in mA
Parameters:
NameTypeEncodedTypeUnit
Valueint uint32 mA
Min int uint32 mA
Max int uint32 mA
Message: StretchingFactorOutofRange
Description: Stretching factor of the VoltageFunction out of range. all the values in this message have scale of 0.01
Parameters:
NameTypeEncodedTypeScale
Valueint uint16 0.01
Min int uint16 0.01
Max int uint16 0.01
Message: TestByteSequence
Description: Data error. shows expected vs actual received sequence of bytes
Parameters:
Name TypeEncodedTypeFormat
ErrorIndexint uint16
Expectedint[]uint8 raw
Receivedint[]uint8 raw
Message: TestStringSequence
Description: Data error. shows expected vs actual received string
Parameters:
Name TypeEncodedTypeFormat
ErrorIndexint uint16
Expectedint[]uint8 utf8
Receivedint[]uint8 utf8
Message: ToellnerIdInvalidOrWrong
Description: The Toellner Device ID was not received or indicates an unsupported device. Please check connection
Message: TxConfirmation
Description: Confirm that all data has been transmitted to the UART queue. Bytes may still be needed to be processed.
Message: TxDataTooLong
Description: The data is too long
Message: TxOverflow
Description: The last transmission is not yet complete.
Message: VoltageFunctionFinished
Description: Execution of the voltage function finished
Parameters:
Name TypeEncodedType
functionint uint32

---

# Page 215

Message: VoltageOutofRange
Description: Voltage measured by power supply is out of range. all the values in this message have scale of 0.01
Parameters:
NameTypeEncodedTypeScaleUnit
Valueint uint32 0.01 V
Min int uint32 0.01 V
Max int uint32 0.01 V
Message: Voltage_Offset_OutOfRange
Description: The resulting voltage out of function and offset is out of secure range. all the values in this message have
scale of 0.01
Parameters:
NameTypeEncodedTypeScaleUnit
Valueint int32 0.001V
Min int uint32 0.001V
Max int uint32 0.001V
back to interface definition
Events
Event: VoltageFunctionFinished
back to interface definition
Interface: EthernetDevice  extends _Object
Description: 
Purpose: 
To provide comprehensive control and monitoring capabilities for Ethernet device operations 
Description: 
This interface manages Ethernet device functionality including PHY control, link status management, transmission/reception
control, and various diagnostic capabilities. It supports features like delay injection, failure simulation, link monitoring, and
MacSec configuration. 
Note: 
Most of The functions used in this interface are coupled with the enabled features of the used Ethernet device in hw image.
therefore not all of these functions will work with every ethernet MAC/PHY 
Example: Typical usage sequence: 
1. core operations (optional): 
- Configure link status using SetLinkStatus() 
- Set master configuration if needed using SetMasterConfiguartion() 
2. Optional Monitoring Setup: 
- Enable PHY monitoring using PhyMonitor() if continuous link monitoring is needed 
3. Runtime Operations: 
- Manage transmission/reception using DelayTx()/DelayRx() 
- Control frame reception using DisableRxFramesInConnection()/EnableRxFramesInConnection() 
- Monitor link status using TestLinkStatus() 
4. Diagnostic Operations: 
- Use PhyDump() for debugging 
- Read/Write registers using PhyReadRegister()/PhyWriteRegister() 
Enumerations
FailureType
LinkStatus
Functions
ConfigureMacSec
ConfigureReceiveSignal
DelayRx
DelayTx
DisableRxFramesInConnection
EnableRxFramesInConnection
GetUpLinkStatus
PhyDump
PhyMonitor

---

# Page 216

PhyReadRegister
PhyRst
PhyWriteRegister
SendRAWData
SetFailure
SetLinkSpeed
SetLinkStatus
SetMasterConfiguartion
SetUserTag
TestLinkStatus
Messages
GeneralMessage
TestLinkStatus
UpLinkStatus
Enumerations
Enum: FailureType
Description: Type of Generated Ethernet Failure
Value
None
OpenCircuitFailure
Enum: LinkStatus
Description: Link Status
Value
Down
Up
Functions
Function: ConfigureMacSec
Description: 
Purpose: 
Configures MacSec security parameters for encrypted communication 
Example: 
ethDevice.ConfigureMacSec([0x00,0x01,...,0x0F], [0x10,0x11,...,0x1F]) // Sets TX and RX security keys 
Dependency: 
Only supported on Castle 6 BIP Phy (MV88Q324X). Should be configured before establishing secure connections 
Parameters:
Name TypeEncodedTypeMinLengthMaxlength
SA_Key_Txint[]uint8 16 16
16-byte security key for transmission encryption
SA_Key_Rxint[]uint8 16 16
16-byte security key for reception decryption
Function: ConfigureReceiveSignal
Description: 
Purpose: 
Controls the overall receive functionality of the Ethernet device 
Example: 
ethDevice.ConfigureReceiveSignal(true) // Enables receive functionality 
Dependency: 
Basic configuration function that can be called at any time 
Parameters:
NameType EncodedType
Enableboolean bool
True to enable receive functionality, False to
disable
Function: DelayRx
Description: 

---

# Page 217

Purpose: 
Injects a specified delay between clock and data reception lines 
Example: 
ethDevice.DelayRx(10) // Adds 10 CLK delay to RX lines 
Dependency: 
Can be called at any time during normal operation. No specific dependencies. 
Parameters:
NameType EncodedType Unit
Delayint uint32 CLKs
Number of clock cycles to delay the reception. Higher values increase the delay between clock and data
lines.
Function: DelayTx
Description: 
Purpose: 
Injects a specified delay between clock and data transmission lines 
Example: 
ethDevice.DelayTx(10) // Adds 10 CLK delay to TX lines 
Dependency: 
Can be called at any time during normal operation. No specific dependencies. 
Parameters:
NameType EncodedType Unit
Delayint uint32 CLKs
Number of clock cycles to delay the transmission. Higher values increase the delay between clock and data
lines.
Function: DisableRxFramesInConnection
Description: 
Purpose: 
Blocks reception of frames from specific IP addresses 
Example: 
ethDevice.DisableRxFramesInConnection(false, 0, [192,168,1,1], [192,168,1,2], false) 
Dependency: 
Can be called at any time to filter traffic 
Parameters:
Name Type EncodedType MinLength Maxlength
VlanSupportedboolean bool - -
Indicates whether VLAN tagging is supported for the filtered frames
VlanIdint uint16 - -
VLAN ID to filter when VlanSupported is true
SourceIPint[] uint32 4 4
Source IP address to filter in dotted decimal format [xxx,xxx,xxx,xxx]
DestinationIPint[] uint32 4 4
Destination IP address to filter in dotted decimal format
[xxx,xxx,xxx,xxx]
isIpV6boolean bool - -
Indicates whether IPv6 addressing is used
Function: EnableRxFramesInConnection
Description: 
Purpose: 
Enables reception of previously blocked frames from specific IP addresses 
Example: 
ethDevice.EnableRxFramesInConnection(false, 0, [192,168,1,1], [192,168,1,2], false) 
Dependency: 
Should be called after DisableRxFramesInConnection to re-enable traffic 
Parameters:
Name Type EncodedType MinLength Maxlength

---

# Page 218

VlanSupportedboolean bool - -
Indicates whether VLAN tagging is supported for the frames to enable
VlanIdint uint16 - -
VLAN ID to enable when VlanSupported is true
SourceIPint[] uint32 4 4
Source IP address to enable in dotted decimal format [xxx,xxx,xxx,xxx]
DestinationIPint[] uint32 4 4
Destination IP address to enable in dotted decimal format
[xxx,xxx,xxx,xxx]
isIpV6boolean bool - -
Indicates whether IPv6 addressing is used
Function: GetUpLinkStatus
Description: 
Purpose: 
get the up-link status between the MAC and Phy. UpLinkStatus Message should return the status 
Example: 
status = ethDevice.GetUpLinkStatus() // Returns up-link state 
Dependency: 
Can be called at any time to check link status between MAC (FPGA) and Phy 
Function: PhyDump
Description: 
Purpose: 
Provides a complete dump of all PHY registers for debugging 
Example: 
ethDevice.PhyDump() // Dumps all register values 
Dependency: 
Can be called at any time for diagnostic purposes 
Function: PhyMonitor
Description: 
Purpose: 
Implements automatic PHY monitoring and reset functionality 
Example: 
ethDevice.PhyMonitor(true, 1000) // Activates monitoring with 1-second check interval 
Dependency: 
Should be configured after initial PHY setup (if needed). May interact with SetLinkStatus(). 
Parameters:
Name Type EncodedType Unit
Activateboolean bool
Controls the monitoring feature. True to enable monitoring, False to
disable.
Timeoutint uint16 ms
Defines the monitoring interval in milliseconds. 
Lower values provide more frequent checking. 
Function: PhyReadRegister
Description: 
Purpose: 
Reads a specific PHY register value using MDIO interface 
Example: 
ethDevice.PhyReadRegister(0x0001, 0x02) // Reads register 0x0001 from device 0x02 
Dependency: 
Can be called at any time for diagnostic or configuration purposes 
Parameters:
Name Type EncodedType
RegisterAddressint uint16

---

# Page 219

The address of the register to read
RegisterDeviceint uint8
The device ID for the MDIO
transaction
Function: PhyRst
Description: 
Purpose: 
Performs a hardware reset of the PHY 
Example: 
ethDevice.PhyRst() // Resets the PHY 
Dependency: 
Can be called at any time. Will temporarily interrupt network communication. 
Function: PhyWriteRegister
Description: 
Purpose: 
Writes a value to a specific PHY register using MDIO interface 
Example: 
ethDevice.PhyWriteRegister(0x0001, 0x02, 0x1234) // Writes 0x1234 to register 0x0001 of device 0x02 
Dependency: 
Use with caution as incorrect values can disrupt PHY operation 
Parameters:
Name Type EncodedType
RegisterAddressint uint16
The address of the register to write
RegisterDeviceint uint8
The device ID for the MDIO transaction
RegisterValueint uint16
The value to write to the specified
register
Function: SendRAWData
Description: 
Purpose: 
Diretly send RAW Ethernet data over the created Network Interface without any extra protocol packetization or framing 
Example: 
Assume the EthernetNetworkInterface object is called 'ethNetIf' and the module name is modTS, then it can be used as:
exu.modTS().ethNetIf().afcSendRAWData( [0xAA,0xBB,0xCC,0xDD,0xEE,0xFF]) 
Dependency: 
Can be called at any time after the EthernetNetworkInterface object is initialized. 
Parameters:
NameType EncodedType MinLength Maxlength
Dataint[] uint8 1 1500
The RAW Tx data to be transmitted over the created Network
Interface 
Function: SetFailure
Description: 
Purpose: 
Simulates specific Ethernet PHY failures for testing purposes 
Example: 
ethDevice.SetFailure(FailureType.OpenCircuitFailure) // Simulates an open circuit failure 
Dependency: 
Can be called at any time to simulate failures. Should be used carefully in testing environments. 
Parameters:
Name Type EncodedType

---

# Page 220

FailureTypeFailureType int
The type of failure to simulate. Can be None for normal operation or OpenCircuitFailure for simulating connection
issues.
Function: SetLinkSpeed
Description: 
Purpose: 
Modifies the Ethernet link speed during runtime 
Example: 
ethDevice.SetLinkSpeed(1000) // Sets link speed to 1000 Mbps 
Dependency: 
Only supported on Castle 6 BIP Phy (MV88Q324X). Should be called when link is established 
Parameters:
Name Type EncodedType
linkSpeedint uint16
Desired link speed in Mbps. 
Common values: 10, 100, 1000 
Must be supported by both ends of the
connection 
Function: SetLinkStatus
Description: 
Purpose: 
Forces the Ethernet link status to a specific state 
Example: 
ethDevice.SetLinkStatus(LinkStatus.Up) // Forces link to Up state 
Dependency: 
Can be called at any time. May affect PhyMonitor functionality if active. 
Parameters:
NameType EncodedType
StatusLinkStatus int
Desired link status state. Up for active connection, Down for disconnected
state.
Function: SetMasterConfiguartion
Description: 
Purpose: 
Configures the PHY as master or slave in the network hierarchy 
Example: 
ethDevice.SetMasterConfiguartion(true) // Sets PHY as master 
Dependency: 
Should be called during initial setup (if needed because normally, its automatically set in firmware), before establishing
network connections 
Parameters:
Name Type EncodedType
isMasterboolean bool
True to configure as master, False for slave
configuration
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestLinkStatus
Description: 

---

# Page 221

Purpose: 
Tests and returns the current link status 
Example: 
status = ethDevice.TestLinkStatus() // Returns current link state 
Dependency: 
Can be called at any time to check link status 
Response timeout: 0
Result Message: TestLinkStatus 
Faults: 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: TestLinkStatus
Description: Result of link up/down check
Parameters:
Name Type EncodedType
linkStatebooleanbool
Message: UpLinkStatus
Description: Result of link up/down check
Parameters:
Name Type EncodedType
linkStatebooleanbool
back to interface definition
Objects
Object: EthernetNetworkInterface
Name Interface
EthernetNetworkInterfaceEthernetNetworkInterface
Object: droppedFramesPerSec
Description: Updated every 250ms, showing the rate per second (It's only used with the EthernetMacLite v1.02.v core)
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
droppedFramesPerSec_SignalSignalint 0 1 1/s4 false false
Object: ReceivedData
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
ReceivedData_SignalSignalbyte 0 1 raw 1500 true false
back to interface definition
Interface:
EthernetNetworkInterface  extends _Object
Description: 
Purpose: 
- This interface provides functionalities for configuring and managing a general Ethernet Network Interface in Castle. 
- A network interface is a hardware or software component that connects a device to a network and allows it to communicate with
other devices 
- A newtork inteface is defined by serveral parameters like its MAC-Address, logical IP address, subnet mask, vlan_id (for virtual
lans) 
Description: 
It allows setting up the basic network parameters, managing MAC addresses, and removing the network interface. 
Example: 
- To configure a network interface (either it already exists or to be created) with the basic network parameters, you could use 
exu.().().afcConfigure(, , , , , ) 
Use case: you have an already defined network interface with specific Mac Address and you want to update it in order to change

---

# Page 222

its MAC address then you can use 'Configure' API, passing the network interface source ip you already know and all other
parameters like vlan_id (if exists) and pass the new MAC address you want to set 
- To set Destination Mac address for some netowrk interface, you could use 'SetDestMac' API. In that way you can associate a
new 
MAC address to some destination ip address so castle will not have to send ARP requests in order to get the associated MAC
address 
as it will be already known to castle 
Use case: you might need to bypass ARP requests and send data directly to some other device for testing purpose or whatever
the need 
- To get the Mac address defined for some network interface, you could use 'GetMacAddress' API. 
- To remove a specific network interface you could use 'Remove' API. 
Functions
Configure
GetMacAddress
Remove
SetDestMac
SetUserTag
Messages
GeneralMessage
LogMacAddress
Functions
Function: Configure
Description: 
Purpose: 
Configures the Ethernet Network Interface with basic network parameters. 
Note that if you pass a completely new parameters, a new network interface will be initialized but if you pass an already
defined ip for existing network interface along with new MAC-Address, this will re configure the network interface with the
newly added MAC-Address 
Example: 
Assume the EthernetNetworkInterface object is called 'ethNetIf' and the module name is modTS, 
then it can be used as: exu.modTS().ethNetIf().afcConfigure([0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF], true, 10, true, [192,
168, 1, 10], [255, 255, 255, 0]) 
Dependency: 
Should be called after the EthernetNetworkInterface object is initialized. network interface is initialized if the hw image
supports working ethernet channel and it has been initialized successfully. Currently, running EthernetSocketInterface APIs
without proper initialization can cause crashes/errors 
Parameters:
Name Type EncodedType MinLength Maxlength
MacAddressint[] uint8 6 6
The MAC address of the Ethernet Network Interface. 
Format: An array of 6 bytes (e.g., [0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF]). 
VlanSupportedboolean bool - -
Specifies whether VLAN (Virtual LAN) is supported on this interface. 
true: VLAN is supported. 
false: VLAN is not supported. 
VlanIdint uint16 - -
The VLAN ID to be used if VLAN is supported. 
Range: 1-4094 
Note: should be set only if 'VlanSupported' is true 
isIpV6boolean bool - -
Specifies whether IPv6 protocol is enabled. 
true: IPv6 is enabled. 
false: IPv6 is not enabled (IPv4 is assumed). 
int[] uint32 4 4

---

# Page 223

SourceIPThe IP address of the Ethernet Network Interface. 
Format: An array of 4 bytes 
- Example for ipv4: [192,168,1,10] 
- Example for ipve6: if you enable ipv6, Consider the IPv6 address: 2001:0db8:85a3:0000:0000:8a2e:0370:7334,
- convert it into 32bit segments: 2001:0db8 
85a3:0000 
0000:8a2e 
0370:7334 
- then convert each segement to 32bit integer: 
2001:0db8 → 0x20010db8 
85a3:0000 → 0x85a30000 
0000:8a2e → 0x00008a2e 
0370:7334 → 0x03707334 
- the input array will be: [0x20010db8,0x85a30000,0x00008a2e,0x03707334] 
SubnetMaskint[] uint32 4 4
The subnet mask for the Ethernet Network Interface. 
Format: An array of 4 bytes 
- example for ipv4 subnet mask: [255,255,255,0] 
- example for ipv6 subnet mask: [0xFFFFFFFF,0xFFFFFFFF,0x00000000,0x00000000] 
Function: GetMacAddress
Description: 
Purpose: 
Retrieves the MAC address of the Ethernet Network Interface associated with this object. 
Example: 
Assume the EthernetNetworkInterface object is called 'ethNetIf' and the module name is modTS then it can be used as:
exu.modTS().ethNetIf().afcGetMacAddress() 
Dependency: 
Can be called at any time after the EthernetNetworkInterface object is initialized. EthernetNetwork interface is 
inititalized when you have hw image with ethernet supported and configured a new network interface using 'Configure' API
or changed existing network interface parameters using also 'Configure' API 
Result: 
The MAC address will be reported by "LogMacAddress" message 
Function: Remove
Description: 
Purpose: 
Removes or de-initializes the Ethernet Network Interface. 
Example: 
Assume the EthernetNetworkInterface object is called 'ethNetIf' and the module name is modTS, then it can be used as:
exu.modTS().ethNetIf().afcRemove() 
Dependency: 
Can be called/Applied on an already existing network interface when its no longer needed. 
Function: SetDestMac
Description: 
Purpose: 
Forces a specific destination MAC address to be associated with a destination IP address in the Castle ARP table. 
Example: 
Assume the EthernetNetworkInterface object is called 'ethNetIf' and the module name is modTS, then it can be used as:
exu.modTS().ethNetIf().afcSetDestMac(false, [192,168,144,20], [0xAA,0xBB,0xCC,0xDD,0xEE,0xFF]) 
Dependency: 
Can be called at any time after the EthernetNetworkInterface object is initialized. 
Parameters:
Name Type EncodedType MinLength Maxlength
isIpV6boolean bool - -
Specifies whether the target destination IP address is IPv6. 
true: The destination IP is IPv6. 
false: The destination IP is IPv4. 
int[] uint32 4 4

---

# Page 224

DestinationIPThe destination IP address. 
Format: An array of 4 bytes 
- Example for ipv4: [192,168,144,15] 
- Example for ipve6: if you enable ipv6, Consider the IPv6 address: 2001:0db8:85a3:0000:0000:8a2e:0370:7334,
- convert it into 32bit segments: 2001:0db8 
85a3:0000 
0000:8a2e 
0370:7334 
- then convert each segement to 32bit integer: 
2001:0db8 → 0x20010db8 
85a3:0000 → 0x85a30000 
0000:8a2e → 0x00008a2e 
0370:7334 → 0x03707334 
- the input array will be: [0x20010db8,0x85a30000,0x00008a2e,0x03707334] 
MacAddressint[] uint8 6 6
The MAC address to be associated with the specified destination IP. 
Format: An array of 6 bytes (e.g., [0xAA,0xBB,0xCC,0xDD,0xEE,0xFF]). 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: LogMacAddress
Description: 
Purpose: 
Reports the MAC address of the Ethernet Network Interface. 
Triggered by: 
afcGetMacAddress() 
Parameters:
Name Type EncodedType Format
MacAddressint[] uint8 raw
The MAC address of the Ethernet Network Interface. 
Format: An array of 6 bytes (e.g., [0xAA, 0xBB, 0xCC, 0xDD, 0xEE,
0xFF]). 
back to interface definition
Interface: EthernetSocket  extends _Object
Description: 
Purpose: 
Provides user APIs for sending and receiving raw Ethernet packets over tcp or udp. in case the user choose 
TCP protocol, castle will act as a client, if you want castle to act as a server, please use the other 
interface: 'EthernetServerSocket' 
Example: 
typical example for using EthernetSocket: 
exu.mod..afcBind(VlanSupported, VlanId, isIpV6, tpType, sourceIp, sourcePort); 
exu.mod..afcConnect(detinationIp, destinationPort); 
exu.mod..objTransmitData().afcSet("Data_to_send"); //set Data to send 
exu.mod..afcSendOnce(); //send data once or use afcSendPerTimer(periodicity[ms]); to send peridoic data and to get the receive
data use: exu.mod..objReceivedData().afcGet() 
Important notes: 

---

# Page 225

- module_name is project dependant (e.g MM/TS/ETS) 
- EthernetSocketObj is the ethernet socket object name defined in config.appl/ file as instance of EthernetSocket interface 
- Bind API is used to 'bind' source ip and port for castle so they are the local ip and port that castle send/receive from 
- Connect API is used to connect to the server, castle can't send or receive data from the remote side if the connection is not
successfully established (tcp handshake process done successfully) 
- Connect API is used with Tcp only, Udp is connectionless protocol and you can receive or send Udp data directly after
succssfull 'Bind' (by calling afcBind() API) 
- if you use Tcp and received RST or FIN message from remote side, the connection will be closed and you can't send or recieve
data anymore unless you successfully connect to remote side again RST most of time represents error caused the local or
remote side to abort the connection while FIN is normal closure occurs when any side finish sending its data and want to close
the connection gracefully 
Enumerations
TpType
Functions
Bind
CheckTcpConnectionEstablished
Close
ConfigureFastAck
ConfigureNagleAlgorithm
Connect
JoinGroup
LeaveGroup
SendOnce
SendPerTimer
SendPerTimerOff
SetRetransmissionTimeout
SetUserTag
TcpReconnect
TcpRst
_Init
Messages
GeneralMessage
TestTcpConnection
Enumerations
Enum: TpType
Description: Ip version
Value
TcpClient
Udp
Functions
Function: Bind
Description: 
Purpose: 
Bind socket to specific ip and port (with support of vlanId if needed) 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcBind(); 
Dependency: 
should be called after init (if init is used, see the _init API document, otherwise it should be called first) 
Parameters:
Name Type EncodedType MinLength Maxlength
VlanSupportedboolean bool - -
boolean to specify whether the user will use virtual lan. true value will allow virtual lan
virtual lan: is a logical subdivision of a physical Ethernet network, enabling devices to be grouped together regardless
of their physical locations.
Virtual lans work on layer 2 of network stack (Network layer) so, devices within the same virtual lan can communicate
the data directly without routing capabilities, if some socket within specific virtual lan want to send data to other socket
in other virtual lan, it need to use layer 3, routing capabilities
VlanIdint uint16 - -
Virtual lan id, it can be project specific or defined randomly for testing prupose
boolean bool - -

---

# Page 226

isIpV6 boolean to specify whether the user will use Ipv6, 'true' value will allow Ipv6
TpTypeTpType int - -
transport layer: could be Tcp or Udp
SourceIPint[] uint32 4 4
source/local ip for castle
input example: [192,168,144,11] for ipv4
ipv4 is 4 bytes while ipv6 is 16 bytes
Note that: you should consider the subnet that is the destination ip is part of. Although layer 3 of network stack can
handle communication between different subnets (by routing the data to default gateway/router), usually with castle
project we don't use routers. so for example if the destination ip is 10.144.13.1, you should use source ip in the same
subnet (10.144.13.2 for example)
SourcePortint uint16 - -
source/local port for castle
input example: 52000, setting port to zero will let the network stack to choose random source port
input range: 0 - 65535
Well-Known Ports (0–1023), Registered Ports (1024–49151), Dynamic or Private Ports (49152–65535)
Function: CheckTcpConnectionEstablished
Description: 
Purpose: 
Check that TCP connection is established successfully. a connection can be refused by the remote side (normally by
sending RST signal) so,you may need to check it with this API 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcCheckTcpConnectionEstablished() 
Dependency: 
Should be called after 'Connect' API to check if the connection is successfully established. 
Result: 
You will get a response indicating whether the connection is established 
Parameters:
Name Type EncodedTypeDefault
CheckIsEstablishedbooleanbool true
Response timeout: 0
Result Message: TestTcpConnection 
Faults: 
Function: Close
Description: 
Purpose: 
Closes the TCP connection and initiates the connection termination process with configurable Maximum Segment Lifetime
(MSL). 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcClose() 
Dependency: 
Should be called on a successfully established connection 
Parameters:
NameType EncodedType Unit Default
MSLint uint32 ms 0
Time before deleting the pcb at all after sending the first FIN symbol. ["0" value means to wait for the standard MSL which is 2
mins]
Function: ConfigureFastAck
Description: 
Purpose: 
Configures the TCP Fast ACK mechanism to control immediate acknowledgment behavior 
Example: 

---

# Page 227

assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcConfigureFastAck(true) 
Dependency: 
Should be called after 'bind' API and before establishing connection using 'Connect' API 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable Fast ACK. When enabled (true), ACKs are sent immediately. When disabled (false), ACKs may be delayed
and combined.
Function: ConfigureNagleAlgorithm
Description: 
Purpose: 
Configures Nagle's algorithm which controls the buffering of small packets in TCP to reduce network overhead 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcConfigureNagleAlgorithm(true) 
Dependency: 
Should be called after 'bind' API and before establishing connection using 'Connect' API 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable Nagle's algorithm. When enabled (true), small packets are buffered and combined. When disabled (false),
packets are sent immediately.
Function: Connect
Description: 
Purpose: 
Connect Castle as a client to the destination IP\Port server 
Example: 
- assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcConnect() 
- Note that: you may need to connect multiple times to get succeffull connection if the server close the connection by
sending RST signal. Also, timing of connect is crucial, sometimes server closes the connection if the client try to connect in
wrong state (from server prospective) 
Dependency: 
Can't be called before Bind() API 
Parameters:
Name Type EncodedType MinLength Maxlength
DestinationIPint[] uint32 4 4
Destination ip where the client wants to connect
input example: [192,168,144,220] for ipv4
ipv4 is 4 bytes while ipv6 is 16 bytes
DestinationPortint uint16 - -
remote port of target device
input example: 52000, setting port to zero will let the network stack to choose random source port
input range: 0 - 65535
Well-Known Ports (0–1023), Registered Ports (1024–49151), Dynamic or Private Ports (49152–
65535)
Function: JoinGroup
Description: 
Purpose: 
Adds the socket to a specified multicast group to receive multicast traffic 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcJoinGroup() 

---

# Page 228

Dependency: 
Can be called after socket creation 
Result: 
Socket will begin receiving traffic sent to the specified multicast group 
Parameters:
NameType EncodedType MinLength Maxlength
Groupint[] uint32 4 4
multicast group address represented as an array of length 4 (e.g., [224, 0, 0, 1] for multicast address
224.0.0.1).
Function: LeaveGroup
Description: 
Purpose: 
Removes the socket from a specified multicast group to stop receiving multicast traffic 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcLeaveGroup() 
Dependency: 
Should only be called after previously joining some group 
Parameters:
NameType EncodedType MinLength Maxlength
Groupint[] uint32 4 4
multicast group address represented as an array of length 4 (e.g., [224, 0, 0, 1] for multicast address
224.0.0.1).
Function: SendOnce
Description: 
Purpose: 
To start sending data passed by "TransmitData" object Once 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcSendOnce() 
Dependency: 
Should be called after establishing a connection using 'Connect' API and setting the data to send by calling
exu.mod..objTransmitData().afcSet("Data_to_send"); 
Function: SendPerTimer
Description: 
Purpose: 
To start sending data passed by "TransmitData" object after the time specified in the arg TimeMs 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcSendOnce() 
Dependency: 
Should be called after establishing a connection using 'Connect' API and setting the data to send by calling
exu.mod..objTransmitData().afcSet("Data_to_send"); 
Parameters:
Name Type EncodedType Unit
TimeMsint uint32 ms
periodic time in ms to send the data specified by 'TransmitData' object
signal
Function: SendPerTimerOff
Description: 
Purpose: 
Stop sending the data started by "SendPerTimer" API 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:

---

# Page 229

exu.modTS().EthernetSocket().afcSendPerTimerOff() 
Dependency: 
Should be called after SendPerTimer API to stop sending periodic messages 
Function: SetRetransmissionTimeout
Description: 
Purpose: 
Sets the TCP retransmission timeout value for unacknowledged packets 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcSetRetransmissionTimeout() 
Dependency: 
Can be called at any time, but best practice is to set before establishing a connection using 'Connect' API 
Parameters:
NameType EncodedType Unit
rtoint uint32 ms
Retransmission timeout value in milliseconds. Default is
3000ms.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TcpReconnect
Description: 
Purpose: 
Monitor that TCP connection is continuously receiving data successfully. It continously checks if the 'RstTimeout' argument
exceeded to reconnect the socket again 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afcTcpReconnect() 
Dependency: 
Should be called after 'Connect' API 
Result: 
You will get a response indicating whether the connection is established again 
Parameters:
Name Type EncodedType Unit
Activateboolean bool
boolean to activate or deactivate tcp reconnect feature
WarningTimeoutint uint16 ms
The allowed time between any two consecutive received packets before raising missed data warning.
RstTimeoutint uint16 ms
The maximum allowed time between any two consecutive received packets. After this time Castle will reset the TCP
connection
Response timeout: 0
Result Message: TestTcpConnection 
Faults: 
Function: TcpRst
Description: 
Purpose: 
Reset Tcp Connection 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:

---

# Page 230

exu.modTS().EthernetSocket().afcTcpRst() 
Dependency: 
Should be used (when needed) after establishing a connection using 'Connect' API 
Function: _Init
Description: 
Purpose: 
Initialize the Ethernet Socket 
Example: 
assume the EthernetSocket obj is called 'EthernetSocket' and the module name is modTS then you can use it as follow:
exu.modTS().EthernetSocket().afc_Init(); 
Dependency: 
- Should be called as the first API in this module (i.e before calling bind and connect APIs, ((when needed))) 
- Note that: Based on the current implementation, if you use only one EthernetSocket (castle act as one client with one
defined ip and port), then you don't have to call this API, its already called from FW but if you have array of
EthernetSockets for example and castle will simulate multiple clients then you have to call this API per each
EthernetSocket object 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: TestTcpConnection
Description: Result of the TCP connection check
Parameters:
Name Type EncodedType
ConnectionEstablishedbooleanbool
ConnectionStatus int uint8
back to interface definition
Objects
Object: TransmitData
Description: Used to set the data to be transmitted
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
TransmitData_SignalSignalbyte 0 1 raw 51200 true false
Object: ReceivedData
Description: Used to get the received data
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
ReceivedData_SignalSignalbyte 0 1 raw 51200 true false
Object: TcpConnectionCount
Description: Used to count the currently connected sockets
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
TcpConnectionCount_SignalSignalint 0 1 4 false false
Object: RemoteSignalRST
Description: check if Received RST signal from remote side
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
RemoteSignalRST_SignalSignalboolean 0 1 1 false false
Object: RemoteSignalCLSD
Description: check if Received FIN signal from remote side
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
RemoteSignalCLSD_SignalSignalboolean 0 1 1 false false
back to interface definition

---

# Page 231

Interface:
EthernetServerSocketConnection extends _Object
Description: 
Purpose: 
Provides user APIs for sending and receiving raw Ethernet packets over tcp or udp. in case the user choose TCP protocol, castle
will act as server, if you want castle to act as a client, please use the other interface: 'EthernetSocket' 
Example: 
typical example for using EthernetServerSocket: 
exu.mod..afcBind(VlanSupported, VlanId, isIpV6, tpType, sourceIp, sourcePort); 
exu.mod..afcConnect(detinationIp, destinationPort); 
exu.mod..objTransmitData().afcSet("Data_to_send"); //set Data to send 
exu.mod..afcSendOnce(); //send data once or use afcSendPerTimer(periodicity[ms]); to send peridoic data and to get the receive
data use: exu.mod..objReceivedData().afcGet() 
Important notes: 
- module_name is project dependant (e.g MM/TS/ETS) 
- EthernetServerSocketObj is the ethernet socket object name defined in config.appl/ file 
as instance of EthernetSocket interface 
- Bind API is used to 'bind' source ip and port for castle so they are the local ip and port 
that castle send/receive from 
- Connect API is used to connect to the server, castle can't send or receive data from the remote 
side if the connection is not successfully established (tcp handshake process done successfully) 
- Connect API is used with Tcp only, Udp is connectionless protocol and you can receive or send 
Udp data directly after succssfull 'Bind' (by calling afcBind() API) 
- if you use Tcp and received RST or FIN message from remote side, the connection will be closed and you 
can't send or recieve data anymore unless you successfully connect to remote side again 
RST most of time represents error caused the local or remote side to abort the connection while 
FIN is normal closure occurs when any side finish sending its data and want to close the connection gracefully 
Functions
CheckTcpConnectionEstablished
Close
ConfigureFastAck
ConfigureNagleAlgorithm
SendOnce
SendPerTimer
SendPerTimerOff
SendTcpRst
SetRetransmissionTimeout
SetUserTag
Messages
GeneralMessage
TestTcpConnection
Functions
Function: CheckTcpConnectionEstablished
Description: Check that TCP connection is established successfully
Parameters:
Name Type EncodedType Default
CheckIsEstablishedboolean bool true
Specifies whether to check if the connection is established (true) or not established
(false). 
true: The API will check if a connection is established. 
false: The API will check if no connection is established. 
Response timeout: 0
Result Message: TestTcpConnection 
Faults: 
Function: Close
Description: 
Purpose: 
Closes the TCP connection and initiates the connection termination process with configurable Maximum Segment Lifetime

---

# Page 232

(MSL). 
Example: 
assume the EthernetServerSocket obj is called 'EthernetServerSocket' and the module name is modTS then you can use it
as follow: exu.modTS().EthernetServerSocket().objEthernetServerSocketConnection(0).afcClose() 
Dependency: 
Should be called on a successfully established connection (normally you can know that when you get a message indicating
a new client has connected to the server) 
Parameters:
NameType EncodedType Unit Default
MSLint uint32 ms 0
Time before deleting the connection after sending the first FIN symbol (FIN symbol is sent to initiate the connection termination
process). ["0" value means to wait for the standard MSL which is 2 mins]
Function: ConfigureFastAck
Description: 
Purpose: 
Configures the TCP Fast Acknowledgement (ACK) mechanism for this socket, ACKS are sent immediately. 
Example: 
assume the EthernetServerSocketConnection obj is called 'EthernetServerSocketConnection' and the module name is
modTS, then you can use it as follows:
exu.modTS().EthernetServerSocket().objEthernetServerSocketConnection(0).afcConfigureFastAck(true) 
Dependency: 
Should be called after the socket is initialized and before establishing a connection. 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable Fast ACK. 
true: Enable Fast ACK (ACKs are sent immediately). 
false: Disable Fast ACK (ACKs may be delayed and
combined). 
Function: ConfigureNagleAlgorithm
Description: 
Purpose: 
Configures Nagle's algorithm for this socket. Nagle's algorithm is used to improve network efficiency by reducing the
number of small packets sent over the network. 
Example: 
assume the EthernetServerSocketConnection obj is called 'EthernetServerSocketConnection' and the module name is
modTS, 
then you can use it as follows:
exu.modTS().EthernetServerSocket().objEthernetServerSocketConnection(0).afcConfigureNagleAlgorithm(true) 
Dependency: 
should be be called after the socket is initialized and before establishing a connection. 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable Nagle's algorithm. 
true: Enable Nagle's algorithm (small packets are buffered and combined).
false: Disable Nagle's algorithm (packets are sent immediately). 
Function: SendOnce
Description: 
Purpose: 
To start sending data passed by "TransmitData" object Once 
Example: 
assume the EthernetServerSocket obj is called 'EthernetServerSocket' and the module name is modTS then you can use it

---

# Page 233

as follow: exu.modTS().EthernetServerSocket().objEthernetServerSocketConnection(0).afcSendOnce() 
Dependency: 
Should be called after establishing a successfull connection with the client (normally, you will get message indicating a new
client has connected to the server) and setting the data to send by calling
exu.mod..objEthernetServerSocketConnection(0).objTransmitData().afcSet("Data_to_send"); 
Function: SendPerTimer
Description: 
Purpose: 
To start sending data passed by "TransmitData" object after the time specified in the arg TimeMs 
Example: 
assume the EthernetServerSocket obj is called 'EthernetServerSocket' and the module name is modTS then you can use it
as follow: exu.modTS().EthernetServerSocket().objEthernetServerSocketConnection(0).afcSendPerTimer() 
Dependency: 
Should be called after establishing a successfull connection with the client (normally, you will get message indicating a new
client has connected to the server) and setting the data to send by calling
exu.mod..objEthernetServerSocketConnection(0).objTransmitData().afcSet("Data_to_send"); 
Parameters:
Name Type EncodedType Unit
TimeMsint uint32 ms
periodic time in ms to send the data specified by 'TransmitData' object
signal
Function: SendPerTimerOff
Description: Stop sending the data started by "SendPerTimer" API
Function: SendTcpRst
Description: 
Purpose: 
Sends a TCP RST (reset) packet to immediately terminate the connection. 
Example: 
assume the EthernetServerSocketConnection obj is called 'EthernetServerSocketConnection' and the module name is
modTS,then you can use it as follows:
exu.modTS().EthernetServerSocket().objEthernetServerSocketConnection(0).afcSendTcpRst() 
Dependency: 
Should be called when there is a need to immediately abort the connection. This will abort the connection without going
through the normal TCP close sequence. 
Function: SetRetransmissionTimeout
Description: 
Purpose: 
Sets the TCP Retransmission Timeout (RTO) for this socket. The RTO is the time that TCP will wait for an
acknowledgment (ACK) before retransmitting a packet. 
Example: 
assume the EthernetServerSocketConnection obj is called 'EthernetServerSocketConnection' and the module name is
modTS, then you can use it as follows:
exu.modTS().EthernetServerSocket().objEthernetServerSocketConnection(0).afcSetRetransmissionTimeout(2000) 
Dependency: 
it's recommended to set it after the socket is initialized and before establishing a connection. 
Parameters:
NameType EncodedType Unit
rtoint uint32 ms
Retransmission timeout value in milliseconds. Default is
3000ms.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 234

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: TestTcpConnection
Description: Result of the TCP connection check
Parameters:
Name Type EncodedType
ConnectionEstablishedbooleanbool
ConnectionStatus int uint8
back to interface definition
Objects
Object: TransmitData
Description: Used to set the data to be transmitted
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
TransmitData_SignalSignalbyte 0 1 raw 51200 true false
Object: ReceivedData
Description: Used to get the received data
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
ReceivedData_SignalSignalbyte 0 1 raw 51200 true false
back to interface definition
Interface: EthernetServerSocket extends _Object
Description: 
Purpose: 
Provides user APIs for sending and receiving raw Ethernet packets over tcp or udp. in case the user choose TCP protocol, castle
will act as server, if you want castle to act as a client, please use the other interface: 'EthernetSocket' 
Example: 
typical example for using EthernetServerSocket: 
exu.mod..afcBind(VlanSupported, VlanId, isIpV6, sourceIp, sourcePort); 
//upon receiving a message indicating a new client has connected to your server you can do: 
exu.mod..objTransmitData().afcSet("Data_to_send"); //set Data to send 
exu.mod..afcSendOnce(); //send data once or use afcSendPerTimer(periodicity[ms]); to send peridoic data or get the received
data using: exu.mod..objReceivedData().afcGet() 
Important notes: 
- module_name is project dependant (e.g MM/TS/ETS) 
- EthernetServerSocketObj is the ethernet socket object name defined in the project config.appl/ file 
as instance of EthernetServerSocket interface 
- Bind API is used to 'bind' source ip and port for castle so they are effectively the local ip and port 
that castle send/receive from 
- if you use Tcp and received 'RST' or 'FIN' message from remote side, the connection will be closed and you 
can't send or recieve data anymore unless the remote side successfully connects to you again 
'RST' most of time represents error caused the local or remote side to abort the connection while 
FIN is normal closure occurs when any side finish sending its data and want to close the connection gracefully 
- This module currently accepts Tcp connections only (udp is not supported yet) 
- by default this server socket can accept up to 4 client socket connections simultaneously 
and you can send or receive data from/to each one of them by utilizing 'objEthernetServerSocketConnection[i]' where 'i' is the 
index of the remote connection so for example to receive data from server socket 1 you can call: 
exu.mod().().objEthernetServerSocketConnection(0).objReceivedData().afcGet(); 
Functions
Bind
Close
SetUserTag

---

# Page 235

_Init
Messages
GeneralMessage
Functions
Function: Bind
Description: 
Purpose: 
Bind socket to specific ip and port (with support of vlanId if needed) 
Example: 
assume the EthernetServerSocket obj is called 'EthernetServerSocket' and the module name is modTS then you can use it
as follow: exu.modTS().EthernetServerSocket().afcBind(); 
Dependency: 
should be called after init (if init is used, see the _init API document, otherwise it should be called first) 
Parameters:
Name Type EncodedType MinLength Maxlength
VlanSupportedboolean bool - -
boolean to specify whether the user will use virtual lan. true value will allow virtual lan
virtual lan: is a logical subdivision of a physical Ethernet network, enabling devices to be grouped together regardless
of their physical locations.
Virtual lans work on layer 2 of network stack (Network layer) so, devices within the same virtual lan can communicate
the data directly without routing capabilities, if some socket within specific virtual lan want to send data to other socket
in other virtual lan, it need to use layer 3, routing capabilities
VlanIdint uint16 - -
Virtual lan id, it can be project specific or defined randomly for testing prupose
isIpV6boolean bool - -
boolean to specify whether the user will use Ipv6, 'true' value will allow Ipv6
SourceIPint[] uint32 4 4
source/local ip for castle
input example: [192,168,144,11] for ipv4
ipv4 is 4 bytes while ipv6 is 16 bytes
Note that: you should consider the subnet that is the destination ip is part of. Although layer 3 of network stack can
handle communication between different subnets (by routing the data to default gateway/router), usually with castle
project we don't use routers. so for example if the destination ip is 10.144.13.1, you should use source ip in the same
subnet (10.144.13.2 for example)
SourcePortint uint16 - -
source/local port for castle
input example: 52000, setting port to zero will let the network stack to choose random source port
input range: 0 - 65535
Well-Known Ports (0–1023), Registered Ports (1024–49151), Dynamic or Private Ports (49152–65535)
Function: Close
Description: 
Purpose: 
Closes the TCP connection 
Example: 
assume the EthernetServerSocket obj is called 'EthernetServerSocket' and the module name is modTS then you can use it
as follow: exu.modTS().EthernetServerSocket().afcClose() 
Dependency: 
Should be called (when needed) after server accepts successfully established connection 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat

---

# Page 236

Maskint uint32 hex
Valueint uint32 hex
Function: _Init
Description: 
Purpose: 
Initialize Ethernet server Socket 
Example: 
assume the EthernetServerSocket obj is called 'EthernetServerSocket' and the module name is modTS then you can use it
as follow: exu.modTS().EthernetServerSocket().afc_Init(); 
Dependency: 
Should be called as the first API in this module (i.e before calling bind API) 
Note that: Based on the current implementation, if you use only one EthernetServerSocket (castle act as one server with
one defined ip and port), then you don't have to call this API but if you want to simulate multiple server by castle so, you
created array of EthernetServerSocket objects in config.appl/ then you may need to call this API per each
EthernetServerSocket object 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: EthernetServerSocketConnection
Description: 
this object represents ethernet client connection connected to castle server and you can use this object APIs to send or
receive data with that specific remote client
Name Interface
EthernetServerSocketConnectionEthernetServerSocketConnection
back to interface definition
Interface: PTP  extends _Object
Description: 
Purpose: 
Provides Ethernet PTP APIs 
Example: 
ssume the PTP obj is called 'PTPObj' and the module name is 'TS' 
xu.TS().PTPObj().afc_Init(); 
xu.TS().PTPObj().afcConfigure(true, 10, false, [192, 168, 1, 10], 0, -3, 0, -3, false, false, [0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], 0x00, 0x00); 
xu.TS().PTPObj().afcEnable(); 
Optional APIs: 
ample: exu.TS().PTPObj().EnableIssueSync(true); //true for enable, false for disable 
ample: exu.TS().PTPObj().EnableIssuePathDelayRequest(true); //true for enable, false for disable 
ample: exu.TS().PTPObj().afcEnableIssueDelayResponse(true); //true for enable, false for disable 
ample: exu.TS().PTPObj().afcSetGlobalClockTimeOffsetNs(727164000*1000000000); //set the global time to "01/16/1993 @
6:00am (UTC)" 
ample: exu.TS().PTPObj().afcAddTimeOffsetNs(3000000000); // increment the current timestamp on the bus by 3 seconds. 
ample: exu.TS().PTPObj().afcAddTimeOffsetNs(-3000000000);// decrement the current timestamp on the bus by 3 seconds. 
ample: exu.TS().PTPObj().afcSetSyncPeriod(0); // T = 1 second 
ample: exu.TS().PTPObj().afcSetSyncPeriod(-3); // T = 0.125 seconds. 
ample: exu.TS().PTPObj().afcSetAnnouncePeriod(0); // T = 1 second 
ample: exu.TS().PTPObj().afcSetAnnouncePeriod(3); // T = 8 seconds. 
ample: exu.TS().PTPObj().afcSetPdelayReqPeriod(0); // T = 1 second 
ample: exu.TS().PTPObj().afcSetPdelayReqPeriod(3); // T = 8 seconds. 
Functions
AddTimeOffsetNs
Configure
Disable

---

# Page 237

Enable
EnableIssueDelayResponse
EnableIssuePathDelayRequest
EnableIssueSync
SetGlobalClockTimeOffsetNs
SetSyncPeriod
SetUserTag
_Init
Messages
GeneralMessage
Functions
Function: AddTimeOffsetNs
Description: 
Purpose: 
Adds an offset in nanoseconds to the current timestamp value. Positive values will increment the current timestamp and
Negative values will decrement it. 
Example: 
exu.mod().objPTP().afcAddTimeOffsetNs(3000000000); // increment the current timestamp on the bus by 3 seconds. 
exu.mod().objPTP().afcAddTimeOffsetNs(-3000000000);// decrement the current timestamp on the bus by 3 seconds. 
Dependency: 
Can be called any time after Configure. 
Parameters:
Name Type EncodedType
timeOffsetNslong int64
The time offset to be added in
nanoseconds.
Function: Configure
Description: 
Purpose: 
Configures the PTP module with the specified parameters. This function sets up the PTP domain, IP address, VLAN
settings, and other timing-related configurations. 
Example: 
exu.mod().objPTP().afcConfigure(true, 10, false, [192, 168, 1, 10], 0, -3, 0, -3, false, false, [0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], 0x00, 0x00); 
Dependency: 
should be called after _Init and before Enable. 
Parameters:
Name Type EncodedType MinLength Maxlength
VlanSupportedboolean bool - -
Specifies whether VLAN is supported. true: VLAN is supported. false: VLAN is not
supported.
VlanIdint uint16 - -
The VLAN ID to be used if VLAN is supported. Range: 1-4094.
isIpV6boolean bool - -
Specifies whether IPv6 is enabled. true: IPv6 is enabled. false: IPv4 is used.
SourceIPint[] uint32 4 4
The IP address of the PTP interface. Format: An array of 4 bytes. Example for ipv4:
[192,168,1,10]. example for ipv6: [0x20010db8,0x85a30000,0x00008a2e,0x03707334].
OffsetFromGlobalClockNslong uint64 - -
The offset from the global clock in nanoseconds.
LogAnnounceIntervalint int8 - -
The log base 2 of the announce message interval in seconds.
LogSyncIntervalint int8 - -
The log base 2 of the sync message interval in seconds.
LogMinPdelayReqIntervalint int8 - -
The log base 2 of the Pdelay_Req message interval in seconds. Range: -128 to 127.
AnyDomainboolean bool - -
Specifies whether any PTP domain is allowed. true: Any PTP domain is allowed. false:
Only a specific domain is allowed.
IsAutosarboolean bool - -
Specifies whether Autosar is used. true: Autosar is used. false: Autosar is not used.

---

# Page 238

AutosarFollowUpDataIDListint[] uint8 16 16
Autosar Follow Up Data ID list. An array of 16 bytes.
AutosarFollowUpSubTLVIncludedint uint32 - -
You can do logical 'OR' for the below configuration:
INC_AUTOSAR_SUB_TLV_TIME_SECURED(0x01)
STATUS_SECURED(0x02)
STATUS_NOT_SECURED(0x04)
USER_DATA_SECURED(0x08)
USER_DATA_NOT_SECURED(0x10)
OFS_SECURED(0x20)
OFS_NOT_SECURED(0x40)
AutosarFollowUpTimeSecuredSubTlvCrcFlagsint uint8 - -
You can do logical 'OR' for the below configuration:
MESSAGE_LENGTH(0x00000001)
DOMAIN_NUMBER(0x00000002)
CORRECTION_FIELD(0x00000004)
SOURCE_PORT_IDENTITY(0x00000008)
SEQUENCE_ID(0x00000010)
PRECISE_ORIGIN_TIMESTAMP(0x00000020)
Function: Disable
Description: 
Purpose: 
Stops the PTP module. 
example: 
exu.mod().objPTP().afcDisable(); 
dependency: 
Can be called any time after Enable. 
Function: Enable
Description: 
Purpose: 
Enables the PTP module. After calling this API, PTP messages will be sent according to the previously set configuration. 
Example: 
exu.mod().objPTP().afcEnable(); 
Dependency: 
Should be called after Configure. 
Function: EnableIssueDelayResponse
Description: 
purpose: 
Enables or disables issuing Delay Response messages from PTP module. 
example: 
exu.mod().objPTP().afcEnableIssueDelayResponse(true); //enable issuing delay response messages 
exu.mod().objPTP().afcEnableIssueDelayResponse(false); //disable issuing delay response messages 
dependency: 
Can be called any time after Configure. 
Parameters:
NameType EncodedType
Enableboolean bool
true: enable issuing delay response messages. false: disable issuing delay response
messages.
Function: EnableIssuePathDelayRequest
Description: 
purpose: 
Enables or disables issuing Pdelay Request messages from PTP module. 
example: 
exu.mod().objPTP().afcEnableIssuePathDelayRequest(true); //enable issuing pdelay request messages 
exu.mod().objPTP().afcEnableIssuePathDelayRequest(false); //disable issuing pdelay request messages 
dependency: 
Can be called any time after Configure. 

---

# Page 239

Parameters:
NameType EncodedType
Enableboolean bool
true: enable issuing Pdelay Request messages. false: disable issuing Pdelay Request
messages.
Function: EnableIssueSync
Description: 
purpose: 
Enables or disables issuing Sync messages from PTP module. 
example: 
exu.mod().objPTP().afcEnableIssueSync(true); //enable issuing sync messages 
exu.mod().objPTP().afcEnableIssueSync(false); //disable issuing sync messages 
dependency: 
Can be called any time after Configure. 
Parameters:
NameType EncodedType
Enableboolean bool
true: enable issuing sync messages. false: disable issuing sync
messages.
Function: SetGlobalClockTimeOffsetNs
Description: 
Purpose: 
Changes the default PTP time offset from the global clock to a user-defined offset in nanoseconds. 
Example: 
exu.mod().objPTP().afcSetGlobalClockTimeOffsetNs(727164000*1000000000); //set the global time to "01/16/1993 @
6:00am (UTC)" 
Dependency: Can be called any time after Configure. 
Parameters:
Name Type EncodedType
timeOffsetGlobalClockNslong uint64
The new time offset from the global clock in
nanoseconds.
Function: SetSyncPeriod
Description: 
Purpose: 
Sets the period between each sync/follow_up message, according to the formula T = 1 * (2 ^ (logSyncInterval)) seconds. 
Example: 
exu.mod().objPTP().afcSetSyncPeriod(0); // T = 1 second 
exu.mod().objPTP().afcSetSyncPeriod(-3); // T = 0.125 seconds. 
Dependency: 
Can be called any time after Configure. 
Parameters:
Name Type EncodedType
logSyncIntervalint int8
The log base 2 of the sync message interval in
seconds.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: _Init

---

# Page 240

Description: 
Purpose: 
Initializes the PTP module. This function should be called before any other PTP function. 
Example: 
exu.mod().objPTP().afc_Init(); 
Dependency: 
Should be the first PTP API called. 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: MasterOriginTimeStampSeconds
Description: Signal to represent the MSB value (16-bit) + LSB value (32-bit) of Sesonds Time Stamp.
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
MasterOriginTimeStampSeconds_SignalSignallong 0 1 8 false false
Object: MasterOriginTimeStampNanoSeconds
Description: Signal to represent the value (32-bit) of Nano Sesonds Time Stamp.
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
MasterOriginTimeStampNanoSeconds_SignalSignalint 0 1 4 false false
back to interface definition
Interface: EthernetXcp  extends XCP _Object
Functions
AlignRespCounter
ConfigureByteOrder
ConfigureLogging
EnableRxProcessing
SendRaw
SendRawConcatenated
Send_Connect
Send_Disconnect
Send_Download
Send_GET_COMM_MODE_INFO
Send_GET_ID
Send_GetStatus
Send_ModifyBits
Send_SetMta
Send_ShortUpload
Send_Synch
Send_UPLOAD
SetUserTag
Set_XCPResCntIncStep
Set_XcpReqCnt
TestByteSequence
TestByteSequenceNotEqual
TestNoEcuResponse
TestPattern
TestPositiveResponse
TestValueRangeSigned
TestValueRangeUnsigned
_Init
Messages
ByteSequenceMatching
ByteSequenceNotMatching
GeneralMessage
NoData
PatternNotMatching

---

# Page 241

Send_ShortUpload
TestResult
TestValueRangeSigned
TestValueRangeUnsigned
Timeout
UploadData
XCPProtocolIndication
Functions
Function: AlignRespCounter
Description: Align Expected Response Counter with Obtained Response
Function: ConfigureByteOrder
Parameters:
Name Type EncodedType
isBigEndianbooleanbool
Function: ConfigureLogging
Description: Configure the logging behaviour.
Parameters:
Name Type EncodedType
EveryReceivedFramebooleanbool
Function: EnableRxProcessing
Description: Configure disabling/enabling receiving pdu. Default is Enabled
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SendRaw
Description: Send raw data[0..83]
Parameters:
NameTypeEncodedType
Data int[]uint8
Function: SendRawConcatenated
Parameters:
Name TypeEncodedType
Data int[]uint8
concatMsgsLengthint[]uint8
Function: Send_Connect
Description: Establishes a continuous, logical, point-to-point connection with a slave device.
Parameters:
NameTypeEncodedType
Modeint uint8
Function: Send_Disconnect
Description: Brings the slave to the DISCONNECTED​ state.
Function: Send_Download
Description: Download from master to slave.
Parameters:
NameTypeEncodedType
Size int uint8
Data int[]uint8
Function: Send_GET_COMM_MODE_INFO
Description: Returns optional information on different Communication Modes supported by the slave.
Function: Send_GET_ID

---

# Page 242

Description: Used for automatic session configuration and for slave device identification.
Parameters:
NameTypeEncodedType
Typeint uint8
Function: Send_GetStatus
Description: Returns all current status information of the slave device. This includes the status of the resource protection,
pending store requests and the general status of data acquisition and stimulation.
Function: Send_ModifyBits
Description: Send Modify Bits command along with AND and XOR mask.
Parameters:
Name TypeEncodedType
ShiftValueint uint8
AND_Maskint[]uint8
XOR_Maskint[]uint8
Function: Send_SetMta
Description: Send SetMta Command 0xF6
Parameters:
Name TypeEncodedType
Address longuint64
AddressExtensionlonguint64
Function: Send_ShortUpload
Description: Upload from slave to master (short version).
Parameters:
Name Type EncodedType
Size int uint8
Address int uint32
AddressExtension int uint8
AllowNegResponsebooleanbool
Response timeout: 0
Result Message: Send_ShortUpload 
Faults: 
Function: Send_Synch
Description: Used to synchronize command execution after timeout conditions.
Function: Send_UPLOAD
Description: A data block of the specified length, starting at the current MTA, will be returned.
Parameters:
NameTypeEncodedType
Size int uint8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: Set_XCPResCntIncStep
Description: Overide the default XCP expected response counter incrementing step.
Parameters:
Name TypeEncodedType
incStepint uint8
Function: Set_XcpReqCnt

---

# Page 243

Description: Set XCP request counter to a given value
Parameters:
Name TypeEncodedType
RefCNTint uint8
Function: TestByteSequence
Description: Test that the received byte sequence is equal to the given byte sequence
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceNotMatching 
Function: TestByteSequenceNotEqual
Description: Test that the received byte sequence is not equal to the given byte sequence.
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceMatching 
Function: TestNoEcuResponse
Description: Test that no response is received from the Ecu.
Response timeout: 0
Result Message: TestResult 
Faults: 
Function: TestPattern
Description: Test that the received byte sequence is equal to the given pattern
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Mask int[]uint8
Offset int uint8
Response timeout: 0
Result Message: TestResult 
Faults: NoData PatternNotMatching 
Function: TestPositiveResponse
Description: Test that a positive response was received (0xFF).
Response timeout: 0
Result Message: TestResult 
Faults: 
Function: TestValueRangeSigned
Description: Test for a numerical value range, where the number is interpreted as signed value of 8, 16, 24 or 32 bit.
Parameters:
Name TypeEncodedType
Min int int32
Max int int32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeSigned 
Faults: NoData 
Function: TestValueRangeUnsigned

---

# Page 244

Description: Test for a numerical value range, where the number is interpreted as unsigned value of 8, 16, 24 or 32 bit.
Parameters:
Name TypeEncodedType
Min int uint32
Max int uint32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeUnsigned 
Faults: NoData 
Function: _Init
Parameters:
Name TypeEncodedType
RequestPdu int _ComPduEthernetTx
ResponsePduint _ComPduEthernetRx
back to interface definition
Messages
Message: ByteSequenceMatching
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Obtainedint[]uint8
Message: ByteSequenceNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Expectedint[]uint8
Obtainedint[]uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NoData
Message: PatternNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Mask int[]uint8
Expectedint[]uint8
Obtainedint[]uint8
Message: Send_ShortUpload
Message: TestResult
Message: TestValueRangeSigned
Parameters:
Name TypeEncodedType
Offset int uint8
BytesCountint uint8
Min int int32
Value int int32
Max int int32
Message: TestValueRangeUnsigned
Parameters:
Name TypeEncodedType

---

# Page 245

Offset int uint8
BytesCountint uint8
Min int uint32
Value int uint32
Max int uint32
Message: Timeout
Message: UploadData
Parameters:
Name Type EncodedType
isPositiveResponsebooleanbool
uploadSize int uint32
uploadAddrExt int uint32
uploadAddr int uint32
rxdata int[] uint8
Message: XCPProtocolIndication
Parameters:
Name TypeEncodedType
msgdataint[]uint8
back to interface definition
Interface: EthernetBap  extends Bap _Object
Description: 
Purpose: 
- Provides an interface for interacting with the BAP (Bedien- und Anzeigeprotokoll - Operating and Display Protocol)
communication layer specifically over an Ethernet transport. 
- It allows initializing the BAP context with Ethernet frame details and setting BAP header data for transmission. 
Examples: 
- Initialize the Ethernet BAP interface with specific signal and frame objects: 
`EthernetBap._Init(HeaderSignal=MyBapHeaderSignal, HeaderFrame=MyEthernetRxPdu)` 
- Set the BAP header data to be sent in the next Ethernet frame: 
`EthernetBap.SetHeader(Header=[0x01, 0x02, 0x03, 0x04])` 
Functions
ConfigureBapTimeout
SetFeatureID
SetHeader
SetUserTag
TestByteSequence
TestByteSequenceWithMask
TestByteValueNoneOf
TestByteValueOneOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
_Init
Messages
BapResponseLogging
BapTimeOut
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage
IndexOutOfBounds
NoData
TestByteSequence
TestByteSequenceWithMask
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Functions
Function: ConfigureBapTimeout

---

# Page 246

Description: Configures the maximum delay between consecutive bap frames
Parameters:
Name TypeEncodedTypeUnit
Timeoutint uint32 ms
Function: SetFeatureID
Description: Set the feature ID to be tested
Parameters:
Name Type EncodedType
CheckForAnyFeaturebooleanbool
FeatureID int uint8
Function: SetHeader
Description: 
Purpose: 
Sets the raw byte content of the BAP header that will be used, for subsequent transmission within an Ethernet frame. 
Example: 
`EthernetBap.SetHeader(e.g Header=[0xDE, 0xAD, 0xBE, 0xEF])` 
Return Messages: 
No specific success message defined. The BapResponseLogging message might log related events or potential errors
encountered during processing or transmission. 
Dependency: 
Requires the interface to be initialized, via the _Init function. 
Parameters:
NameType EncodedType Format
Headerint[] uint8 raw
The raw byte array representing the BAP header data.
Hint: 
Provide an array of unsigned 8-bit integers (bytes). 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: Test for a byte sequence in the bap response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: Test for a byte sequence in the response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
int[] uint8 raw

---

# Page 247

Mask
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: Test that a byte in the Bap Response is none of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8
TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: Test that a byte in the Bap Response is one of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8
TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestValueBitsInRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error

---

# Page 248

LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitErrorMinlong int64

---

# Page 249

Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: _Init
Description: 
Purpose: 
Initializes the Ethernet BAP interface, potentially linking it to underlying signal and Ethernet frame objects for context. 
Example: 
`EthernetBap._Init(HeaderSignal=SigObj_BapHeaderStatus, HeaderFrame=PduObj_EthBapRx)` 
Return Messages: 
No specific message defined for direct return, but initialization success/failure might be indicated indirectly or through
system logs. The BapResponseLogging message might log related events. 
Dependency: 
Should be called before other functions like SetHeader to establish the necessary context. 
Parameters:
Name Type EncodedType
HeaderSignalint _Signal
Links a signal object, possibly representing the status or content source/destination for the BAP header. (Note: Marked
as 'To be removed later'). 
Hint: 
Provide an object reference to an existing Signal instance. 
HeaderFrameint _ComPduEthernetRx
Links an Ethernet PDU (Protocol Data Unit) object, representing the incoming Ethernet frame where BAP headers are
expected or the outgoing frame structure. 
Hint: 
Provide an object reference to an existing _ComPduEthernetRx instance. 
back to interface definition
Messages

---

# Page 250

Message: BapResponseLogging
Description: - Logs messages related to BAP operations over Ethernet. - This can include received responses, status
updates, warnings, or errors encountered during BAP communication.
Parameters:
Name Type EncodedType Format
msgdataint[] uint8 raw
Contains the raw data associated with the logged BAP event or
message.
Message: BapTimeOut
Description: Test of a byte sequence
Parameters:
NameTypeEncodedTypeUnit
delayint uint32 ms
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: NoData
Description: Data is not yet received.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw

---

# Page 251

Data int[]uint8 raw
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin int uint32
LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
back to interface definition
Objects
Object: DLC
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
DLC _SignalSignalbyte 0 1 raw 1 false false
Object: FeatureID
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
FeatureID_SignalSignalbyte 0 1 raw 1 false false
Object: Data1

---

# Page 252

NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data1_SignalSignalbyte 0 1 raw 1 false false
Object: Data2
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data2_SignalSignalbyte 0 1 raw 1 false false
Object: Data3
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data3_SignalSignalbyte 0 1 raw 1 false false
Object: Data4
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data4_SignalSignalbyte 0 1 raw 1 false false
Object: Data5
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data5_SignalSignalbyte 0 1 raw 1 false false
Object: Data6
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data6_SignalSignalbyte 0 1 raw 1 false false
Object: Data7
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data7_SignalSignalbyte 0 1 raw 1 false false
Object: Data8
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data8_SignalSignalbyte 0 1 raw 1 false false
Object: SegmentedDataBuffer
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
SegmentedDataBuffer_SignalSignalbyte 0 1 raw 256 false false
back to interface definition
Interface: EthernetIperf  extends _Object
Description: Provides user APis for starting Iperf client socket.
Enumerations
IperfReportType
Functions
SetUserTag
StartClient
_Init
Messages
GeneralMessage
TestTcpConnection
Enumerations
Enum: IperfReportType
Description: Report the Ipref results
Value
DONE_SERVER
DONE_CLIENT
ABORTED_LOCAL
ABORTED_LOCAL_DATAERROR
ABORTED_LOCAL_TXERROR
ABORTED_REMOTE
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 253

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartClient
Description: 
Purpose: 
Start the Castle as a Iperf Tcp client to a remote IP/Port. 
Example: *_ApiStartClient([10, 10, 3, 12], 5201); 
Parameters:
Name TypeEncodedType MinLength Maxlength
DestinationIPint[] uint32 4 4
Destination IP address of the Iperf server to connect
to.
Portint uint16 - -
Port number on the destination IP to connect to.
Function: _Init
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: TestTcpConnection
Description: Result of the TCP connection check
Parameters:
Name Type EncodedTypeMinLengthMaxlength
IperfReportTypeIperfReportTypeint - -
SourceIP int[] uint32 4 4
SourcePort int uint16 - -
DestinationIP int[] uint32 4 4
DestinationPort int uint16 - -
BytesTransferredint uint32 - -
DurationMS int uint32 - -
BandwidthKpbs int uint32 - -
back to interface definition
Interface: Iperf3  extends _Object
Description: Provides user APis for starting and closing Iperf3 client socket.
Enumerations
IperfReportType
Functions
GetIperf3Results
SetUserTag
StartTcpClient
_Init
Messages
GeneralMessage
GetIperf3Results
Enumerations
Enum: IperfReportType
Description: Report the Ipref results
Value
IPERF_START
TEST_END
DISPLAY_RESULTS
SERVER_TERMINATE
ACCESS_DENIED
SERVER_ERROR

---

# Page 254

Functions
Function: GetIperf3Results
Description: Return the Iperf3 Messurements results.
Response timeout: 0
Result Message: GetIperf3Results 
Faults: NoData 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartTcpClient
Description: Start the Castle as a Iperf tcp client the remote IP\Port server.
Parameters:
Name TypeEncodedTypeMinLengthMaxlength
DestinationIPint[]uint32 4 4
TxTime int uint32 - -
Function: _Init
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetIperf3Results
Description: Result of the TCP connection check
Parameters:
Name Type EncodedType
IperfReportType IperfReportTypeint
SenderBytesTransferred long uint64
SenderBandwidth long uint64
ReceiverBytesTransferredlong uint64
ReceiverBandwidth long uint64
back to interface definition
Interface: XCP  extends _Object
Description: Option sysgen/Bip is added as a workaround. Should be removed later when a fix is introduced
Functions
AlignRespCounter
ConfigureByteOrder
ConfigureLogging
EnableRxProcessing
SendRaw
SendRawConcatenated
Send_Connect
Send_Disconnect
Send_Download
Send_GET_COMM_MODE_INFO
Send_GET_ID
Send_GetStatus
Send_ModifyBits
Send_SetMta
Send_ShortUpload
Send_Synch

---

# Page 255

Send_UPLOAD
SetUserTag
Set_XCPResCntIncStep
Set_XcpReqCnt
TestByteSequence
TestByteSequenceNotEqual
TestNoEcuResponse
TestPattern
TestPositiveResponse
TestValueRangeSigned
TestValueRangeUnsigned
Messages
ByteSequenceMatching
ByteSequenceNotMatching
GeneralMessage
NoData
PatternNotMatching
Send_ShortUpload
TestResult
TestValueRangeSigned
TestValueRangeUnsigned
Timeout
UploadData
XCPProtocolIndication
Functions
Function: AlignRespCounter
Description: Align Expected Response Counter with Obtained Response
Function: ConfigureByteOrder
Parameters:
Name Type EncodedType
isBigEndianbooleanbool
Function: ConfigureLogging
Description: Configure the logging behaviour.
Parameters:
Name Type EncodedType
EveryReceivedFramebooleanbool
Function: EnableRxProcessing
Description: Configure disabling/enabling receiving pdu. Default is Enabled
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SendRaw
Description: Send raw data[0..83]
Parameters:
NameTypeEncodedType
Data int[]uint8
Function: SendRawConcatenated
Parameters:
Name TypeEncodedType
Data int[]uint8
concatMsgsLengthint[]uint8
Function: Send_Connect
Description: Establishes a continuous, logical, point-to-point connection with a slave device.
Parameters:
NameTypeEncodedType
Modeint uint8

---

# Page 256

Function: Send_Disconnect
Description: Brings the slave to the DISCONNECTED​ state.
Function: Send_Download
Description: Download from master to slave.
Parameters:
NameTypeEncodedType
Size int uint8
Data int[]uint8
Function: Send_GET_COMM_MODE_INFO
Description: Returns optional information on different Communication Modes supported by the slave.
Function: Send_GET_ID
Description: Used for automatic session configuration and for slave device identification.
Parameters:
NameTypeEncodedType
Typeint uint8
Function: Send_GetStatus
Description: Returns all current status information of the slave device. This includes the status of the resource protection,
pending store requests and the general status of data acquisition and stimulation.
Function: Send_ModifyBits
Description: Send Modify Bits command along with AND and XOR mask.
Parameters:
Name TypeEncodedType
ShiftValueint uint8
AND_Maskint[]uint8
XOR_Maskint[]uint8
Function: Send_SetMta
Description: Send SetMta Command 0xF6
Parameters:
Name TypeEncodedType
Address longuint64
AddressExtensionlonguint64
Function: Send_ShortUpload
Description: Upload from slave to master (short version).
Parameters:
Name Type EncodedType
Size int uint8
Address int uint32
AddressExtension int uint8
AllowNegResponsebooleanbool
Response timeout: 0
Result Message: Send_ShortUpload 
Faults: 
Function: Send_Synch
Description: Used to synchronize command execution after timeout conditions.
Function: Send_UPLOAD
Description: A data block of the specified length, starting at the current MTA, will be returned.
Parameters:
NameTypeEncodedType
Size int uint8
Function: SetUserTag

---

# Page 257

Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: Set_XCPResCntIncStep
Description: Overide the default XCP expected response counter incrementing step.
Parameters:
Name TypeEncodedType
incStepint uint8
Function: Set_XcpReqCnt
Description: Set XCP request counter to a given value
Parameters:
Name TypeEncodedType
RefCNTint uint8
Function: TestByteSequence
Description: Test that the received byte sequence is equal to the given byte sequence
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceNotMatching 
Function: TestByteSequenceNotEqual
Description: Test that the received byte sequence is not equal to the given byte sequence.
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceMatching 
Function: TestNoEcuResponse
Description: Test that no response is received from the Ecu.
Response timeout: 0
Result Message: TestResult 
Faults: 
Function: TestPattern
Description: Test that the received byte sequence is equal to the given pattern
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Mask int[]uint8
Offset int uint8
Response timeout: 0
Result Message: TestResult 
Faults: NoData PatternNotMatching 
Function: TestPositiveResponse
Description: Test that a positive response was received (0xFF).
Response timeout: 0

---

# Page 258

Result Message: TestResult 
Faults: 
Function: TestValueRangeSigned
Description: Test for a numerical value range, where the number is interpreted as signed value of 8, 16, 24 or 32 bit.
Parameters:
Name TypeEncodedType
Min int int32
Max int int32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeSigned 
Faults: NoData 
Function: TestValueRangeUnsigned
Description: Test for a numerical value range, where the number is interpreted as unsigned value of 8, 16, 24 or 32 bit.
Parameters:
Name TypeEncodedType
Min int uint32
Max int uint32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeUnsigned 
Faults: NoData 
back to interface definition
Messages
Message: ByteSequenceMatching
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Obtainedint[]uint8
Message: ByteSequenceNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Expectedint[]uint8
Obtainedint[]uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NoData
Message: PatternNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Mask int[]uint8
Expectedint[]uint8
Obtainedint[]uint8
Message: Send_ShortUpload
Message: TestResult
Message: TestValueRangeSigned
Parameters:

---

# Page 259

Name TypeEncodedType
Offset int uint8
BytesCountint uint8
Min int int32
Value int int32
Max int int32
Message: TestValueRangeUnsigned
Parameters:
Name TypeEncodedType
Offset int uint8
BytesCountint uint8
Min int uint32
Value int uint32
Max int uint32
Message: Timeout
Message: UploadData
Parameters:
Name Type EncodedType
isPositiveResponsebooleanbool
uploadSize int uint32
uploadAddrExt int uint32
uploadAddr int uint32
rxdata int[] uint8
Message: XCPProtocolIndication
Parameters:
Name TypeEncodedType
msgdataint[]uint8
back to interface definition
Interface: Bap  extends _Object
Description: BAP:Bedien und Anzeigeprotokoll i.e. "Operation and display protocol", is a protocol within networked control units in
motor vehicles, with which a separation of function control devices and display control units is completed.
please refer to the following for more details:
automotive-bap-protocol
BAP documents
Functions
ConfigureBapTimeout
SetFeatureID
SetUserTag
TestByteSequence
TestByteSequenceWithMask
TestByteValueNoneOf
TestByteValueOneOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Messages
BapTimeOut
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage
IndexOutOfBounds
NoData
TestByteSequence
TestByteSequenceWithMask
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Functions

---

# Page 260

Function: ConfigureBapTimeout
Description: Configures the maximum delay between consecutive bap frames
Parameters:
Name TypeEncodedTypeUnit
Timeoutint uint32 ms
Function: SetFeatureID
Description: Set the feature ID to be tested
Parameters:
Name Type EncodedType
CheckForAnyFeaturebooleanbool
FeatureID int uint8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: Test for a byte sequence in the bap response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: Test for a byte sequence in the response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: Test that a byte in the Bap Response is none of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8
TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestNoneOf 

---

# Page 261

Faults: 
Function: TestByteValueOneOf
Description: Test that a byte in the Bap Response is one of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8
TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestValueBitsInRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.

---

# Page 262

1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:

---

# Page 263

Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
back to interface definition
Messages
Message: BapTimeOut
Description: Test of a byte sequence
Parameters:
NameTypeEncodedTypeUnit
delayint uint32 ms
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: NoData
Description: Data is not yet received.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:

---

# Page 264

Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin int uint32
LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64

---

# Page 265

Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
back to interface definition
Objects
Object: DLC
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
DLC _SignalSignalbyte 0 1 raw 1 false false
Object: FeatureID
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
FeatureID_SignalSignalbyte 0 1 raw 1 false false
Object: Data1
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data1_SignalSignalbyte 0 1 raw 1 false false
Object: Data2
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data2_SignalSignalbyte 0 1 raw 1 false false
Object: Data3
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data3_SignalSignalbyte 0 1 raw 1 false false
Object: Data4
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data4_SignalSignalbyte 0 1 raw 1 false false
Object: Data5
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data5_SignalSignalbyte 0 1 raw 1 false false
Object: Data6
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data6_SignalSignalbyte 0 1 raw 1 false false
Object: Data7
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data7_SignalSignalbyte 0 1 raw 1 false false
Object: Data8
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data8_SignalSignalbyte 0 1 raw 1 false false
Object: SegmentedDataBuffer
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
SegmentedDataBuffer_SignalSignalbyte 0 1 raw 256 false false
back to interface definition
Interface: BipIo  extends _Object
Description: This module works with BIP version 4.6
All IO is related to the BIP (Bus Interface Pcb). That is shortcuts on bus lines.
For Bus line errors the ErrorEnablement must be active, so the error is really active. This can be done in a static way with
SetErrorEnablement, or for very accurate and short error condition the PulseErrorEnablement can be used.
Activating a specific error is done via internal IIC communication, that takes up to 5ms to get active. The ErrorEnablement is a
wired AND connection is very accurate. So if the exact timing is important, the error should configured first and the activation and
deactivate be controlled via the ErrorEnablement.
The relevant schematics can be found in g:\Projekt\P2SW\CASTLE\8_Hardware\994_BIP\R04.6\S6e5997_994 R04.6
Vollbestückung 20110209.pdfg:\Projekt\P2SW\CASTLE\8_Hardware\994_BIP\R04.6\"S6e5997_994 R04.6 Vollbestückung
20110209.pdf
Lin Bus Errors:

---

# Page 266

CAN bus errors, bus lines left, right to the CAN controllers:
Flexray bus errors, bus is right side, left from the controllers:
Enumerations
BipVersion
BusBi
BusUni
Line
LineError
SingleWireTransModes
Functions
ConfigureConnectedBip
LineErrorBipolar
LineErrorUnipolar
LineShorting
PulseErrorEnablement
SetErrorEnablement
SetSingleWireCanTransmissionMode
SetUserTag
Messages
BipCommunicationError
GeneralMessage
Enumerations

---

# Page 267

Enum: BipVersion
Description: Bip Version whether 4.6 or 4.7
Value
Bip46
Bip47
Enum: BusBi
Value
CAN0
CAN1
FLEX0A
FLEX0B
FLEX1A
FLEX1B
Enum: BusUni
Value Description
LIN Lin 0
LIN1 Lin 1
KLINE K-Line
SWCANSingle Wire
Can
Enum: Line
Value
NONE
LOW
HIGH
ALL
Enum: LineError
Value Description
NOERRORRemove all errors on the selected line
SC_GND Connect the selected line to Ground
SC_VCC Connect the selected line to Vcc
OPENDisconnect the selected line which means make it connected to open
circuit
Enum: SingleWireTransModes
Description: Single wire can transmission modes
Value
SleepMode
WakeupMode
HighSpeedMode
NormalMode
Functions
Function: ConfigureConnectedBip
Description: Configures the single wire CAN transceiver transmission modes.
Parameters:
Name Type EncodedType
BipVersionBipVersionint
Function: LineErrorBipolar
Description: Valid busses are CAN, Flexray. Line=1 is low or minus, Line=2 is high or plus, Line=3 is both.
Note: Use Set/Pulse-ErrorEnablement to activate the error condition.
Parameters:
Name Type EncodedType
Bus BusBi int
Line Line int
ErrorTypeLineErrorint
Function: LineErrorUnipolar
Description: Create Errors on Unipolar busses which are LIN, KLINE.
Note: Use Set/Pulse-ErrorEnablement to activate the error condition.

---

# Page 268

Parameters:
Name Type EncodedType
Bus BusUniint
ErrorTypeLineErrorint
Function: LineShorting
Description: Valid busses are CAN, Flexray. This activates a shortcut between the bus lines low-high or minus-plus. To
remove the error call LineErrorBipolar with NOERROR for both lines.
Note: Use Set/Pulse-ErrorEnablement to activate the error condition.
Parameters:
NameTypeEncodedType
Bus BusBiint
Function: PulseErrorEnablement
Description: Generate a pulse on the error simulation enable line. For example if a line shorting with 500µs shall be
simulated, first disable the ErrorEnablement (see SetErrorEnablement), then prepare the simulation with the individual
Line... functions, then trigger the error with this function.
Parameters:
NameTypeEncodedTypeUnit
Delayint uint16 µs
Pulseint uint16 µs
Function: SetErrorEnablement
Description: Switch the enable line for the error simulation hardware. If inactive, no error is active at all.
Parameters:
NameType EncodedType
Statebooleanbool
Function: SetSingleWireCanTransmissionMode
Description: Configures the single wire CAN transceiver transmission modes.
Parameters:
Name Type EncodedType
SingleWireCanModeSingleWireTransModesint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: BipCommunicationError
Parameters:
Name TypeEncodedTypeFormat
Addressint uint8 hex
Device int[]uint8 ascii
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: CanDiagSlave  extends DiagSlave _Object
Functions
Prepare
PrepareModify

---

# Page 269

PrepareModifyBits
PrepareModifyBitsProcUnitVariable
PrepareModifyProcUnitVariable
PrepareModifyWithMask
Send
SendPrepared
SetUserTag
Messages
GeneralMessage
Log
MsgTooLong
NoData
Protocol
ResponsePending
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
Events
RequestReceived
Objects
Functions
Function: Prepare
Description: Prepare the repuest to be send.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Function: PrepareModify
Description: Modify the prepared request by replacing a byte sequence.
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Function: PrepareModifyBits
Description: Modify the prepared repuest by replacing a bit sequence.
Parameters:
Name Type EncodedType
Value long int64
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: PrepareModifyBitsProcUnitVariable
Description: Modify the prepared repuest by replacing a bit sequence from a variable in the proc unit.
Parameters:
Name Type EncodedType
VariableIndex int uint8
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: PrepareModifyProcUnitVariable
Description: Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit.
Parameters:
Name Type EncodedType
VariableIndex int uint8
Offsetint uint16

---

# Page 270

ByteLength int uint8
ByteOrderBigEndianbooleanbool
Function: PrepareModifyWithMask
Description: Modify the prepared repuest by replacing a masked byte sequence.
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Maskint[]uint8 raw
Function: Send
Description: Send a diagnostic response. If a response is received, store it in the internal buffer and generate a logging
message
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Response timeout: 5000
Result Message: Log 
Faults: Protocol Timeout 
Function: SendPrepared
Description: Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging
message
Response timeout: 5000
Result Message: Log 
Faults: Protocol Timeout 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.
Message: Protocol
Description: Transport layer error.
Message: ResponsePending
Description: DUT returned response pending.

---

# Page 271

Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive
Description: Received a frame from the DUT when it was not expected.
back to interface definition
Events
Event: RequestReceived
back to interface definition
Interface: CanDriver  extends _Object
Description: 
Overview:
The most commonly used features are listed in the following:
- init is used to intialize the CAN driver in either normal mode or self-ack mode like Canoe.
- Filtering received CAN messages for flexibility is achieved using EnableRxProcessing API.
- Send\Receive periodic raw CAN frames with configurable DLC and frame ID.
- Enable/Disable reporting of CAN errors as, errorpassive and busOff.
- Send/Receive CAN Frames with different baud/data rates in runtime.
Enumerations
CAN_bitRate
CAN_dataRate
CanControllerMode
EnableProcessingEnum
ErrorLevel
Mode
RestartCause
Functions
ConfigureRestart
DisableNextRxMessageAck
DisableTxFIFOInterrupt
EnableCanStatReaderTask
EnableRxRawFrameProcessing
Init
InjectRxFrame
ReportFrameDlcMismatchInCom
ReportFrameNotFoundInCom
RxRawFrame
SetBusTimingRegister
SetCanControllerMode
SetCanFdSpeed
SetCanSpeed
SetDataTimingRegister
SetUserTag
Shutdown
StopRxAckSpecificFrame
TxRawFdFrame
TxRawFrame

---

# Page 272

TxStartPeriodicRawFdFrame
TxStartPeriodicRawFrame
TxStopPeriodicRawFrame
Messages
BusRestart
CanFrameDlcMismatch
FrameNotFoundInCom
GeneralMessage
NoCanFrameId
TransmissionFIFOFull
Enumerations
Enum: CAN_bitRate
Value
BITRATE_33_KBPS
BITRATE_83_KBPS
BITRATE_100_KBPS
BITRATE_125_KBPS
BITRATE_250_KBPS
BITRATE_500_KBPS
BITRATE_1_MBPS
Enum: CAN_dataRate
Value
DATARATE_500_KBPS
DATARATE_1_MBPS
DATARATE_2_MBPS
DATARATE_4_MBPS
DATARATE_5_MBPS
DATARATE_8_MBPS
Enum: CanControllerMode
Value
NonIsoCanFd
IsoCanFd
Enum: EnableProcessingEnum
Value
Discard
RawFrame
Enum: ErrorLevel
Description: The error level used for reporting
Value
NOTHING
INFO
WARN
ERROR
FATAL
Enum: Mode
Value
NORMAL
SELF_ACK
Enum: RestartCause
Description: What event type shall cause a bus restart
Value
ErrorPassive
BusOff
Functions
Function: ConfigureRestart
Description: 
Purpose: 
Configures the CAN bus restart behavior based on error events. 

---

# Page 273

Example: 
*_ApiConfigureRestart(ItfCanDriver.EnmRestartCause.BusOff, ItfCanDriver.EnmErrorLevel.WARN,
ItfCanDriver.EnmErrorLevel.ERROR); 
Parameters:
Name Type EncodedType
BusRestartOnRestartCause int
Specifies the event that triggers a bus restart (ErrorPassive or
BusOff).
ReportLevelErrorPassiveErrorLevel int
Sets the error reporting level for the ErrorPassive event.
ReportLevelBusOffErrorLevel int
Sets the error reporting level for the BusOff event.
Function: DisableNextRxMessageAck
Description: 
Purpose: 
Disable sending Castle ACK flag of the next NonAckCount received messages. Only 1 is the supported number for
NonAckCount. 
Example: 
*_ApiDisableNextRxMessageAck(1); 
Parameters:
Name Type EncodedType Default
NonAckCountint uint8 1
The number of messages to disable ACK for (currently only 1 is
supported).
Function: DisableTxFIFOInterrupt
Description: 
Purpose: 
Disable the error message which the TX fifo is full. 
Example: 
*_ApiDisableTxFIFOInterrupt(true); 
Parameters:
Name Type EncodedType
DisableTXFiFoIntboolean bool
True to disable, False to
enable.
Function: EnableCanStatReaderTask
Description: 
Purpose: 
Enable or disable scheduling of canStatReader task, needed for some projects to enhance performance monitoring. 
Example: 
*_ApiEnableCanStatReaderTask(true); 
Parameters:
NameType EncodedType
Enableboolean bool
True to enable, False to
disable.
Function: EnableRxRawFrameProcessing
Description: 
Purpose: 
To enable or disable the processing of the raw frame which configured by RxRawFrame API. 
Example: 
*_ApiEnableRxRawFrameProcessing(ItfCanDriver.EnmEnableProcessingEnum.RawFrame); 
Parameters:
NameType EncodedType
EnableEnableProcessingEnumint
Discard or RawFrame.

---

# Page 274

Function: Init
Description: 
Purpose: 
- Activate the CAN driver. If already active, it is re-initialized. 
- A normal mode is used when other nodes are active. 
- This call is normally not needed. It makes sense, if the bus lines were shorted, and a explicit activation is needed. 
- When Initialization is set with SELF_ACK mode, an acknowledge from other nodes is not needed. 
Example: 
*_ApiInit(ItfCanDriver.EnmMode.SELF_ACK); 
Parameters:
NameTypeEncodedType
ModeModeint
NORMAL or
SELF_ACK.
Function: InjectRxFrame
Description: 
Purpose: 
Simulate the processing as if a frame would have been received. 
Example: 
*_ApiInjectRxFrame(0x123, "AA BB CC"); 
Parameters:
Name Type EncodedType Format
CanIdint int32
The CAN identifier of the injected frame.
Payloadint[] uint8 raw
The raw data bytes of the injected
frame.
Function: ReportFrameDlcMismatchInCom
Description: 
Purpose: 
If a frame received on the bus in the network but with a mismatch dlc than expected. report this frame with the given error
level, or not if the error level is given as NOTHING. 
Example: 
*_ApiReportFrameDlcMismatchInCom(ItfCanDriver.EnmErrorLevel.ERROR); 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
NOTHING, INFO, WARN, ERROR or
FATAL.
Function: ReportFrameNotFoundInCom
Description: 
Purpose: 
If a frame was received on the bus, but no matching Frame in the generated COM was found, report this frame with the
given error level, or not if the error level is given as NOTHING. 
Example: 
*_ApiReportFrameNotFoundInCom(ItfCanDriver.EnmErrorLevel.WARN); 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
NOTHING, INFO, WARN, ERROR or
FATAL.
Function: RxRawFrame
Description: 
Purpose: 
Configure the ID of the receive raw frame. If a frame on that ID is received, the signals RxRawFrameContent, RxRawDlc
and RxRawId are updated. 
Example: 

---

# Page 275

*_ApiRxRawFrame(0x123); 
Parameters:
NameType EncodedType Format
IDint uint32 hex
The CAN identifier to filter for (hex
format).
Function: SetBusTimingRegister
Description: 
Purpose: 
- Overrides the btr0 and btr1 of the sja1000 controller into the fpga. 
For more information about sja1000 : visit this link 
For more information about correct values for your case : visit this link 
Example: 
*_ApiSetBusTimingRegister(0x10, 0x00); 
Parameters:
NameTypeEncodedType
Btr0int uint8
Value for the btr0
register.
Btr1int uint8
Value for the btr1
register.
Function: SetCanControllerMode
Description: 
Purpose: 
Modify the Can Fd Controller Mode between ISO and Non ISO. 
Example: 
*_ApiSetCanControllerMode(ItfCanDriver.EnmCanControllerMode.IsoCanFd); 
Parameters:
Name Type EncodedType
CanControllerModeCanControllerMode int
The desired CAN FD controller mode (NonIsoCanFd or
IsoCanFd).
Function: SetCanFdSpeed
Description: 
Purpose: 
- Modify the CAN-FD transmission bit rate and data rate at runtime. 
Here's the default btr0 and btr1 for different bit rates: 
33  Kbps (btr0=0x31 and btr1=0x39) 
83  Kbps (btr0=0x4E and btr1=0x3E) 
100 Kbps (btr0=0x09 and btr1=0x7F) 
125 Kbps (btr0=0x49 and btr1=0x3E) 
250 Kbps (btr0=0x44 and btr1=0x3E) 
500 Kbps (btr0=0x01 and btr1=0x7F) 
1  Mbps (btr0=0x00 and btr1=0x7F) 
- Here's the default dtr0 and dtr1 for different data rates: 
500 Kbps (dtr0=0x03 and dtr1=0x7F) 
1  Mbps (dtr0=0x01 and dtr1=0x7F) 
2  Mbps (dtr0=0x00 and dtr1=0x7F) 
4  Mbps (dtr0=0x00 and dtr1=0x45) 
5  Mbps (dtr0=0x00 and dtr1=0x34) 
8  Mbps (dtr0=0x00 and dtr1=0x11) 
For more information about sja1000 : visit this link 
Example: 
*_ApiSetCanFdSpeed(ItfCanDriver.EnmCAN_bitRate.BITRATE_1_MBPS,
ItfCanDriver.EnmCAN_dataRate.DATARATE_2_MBPS); 
Parameters:
Name Type EncodedType
BitRateCAN_bitRate int
The desired bit rate.

---

# Page 276

DataRateCAN_dataRateint
The desired data rate.
Function: SetCanSpeed
Description: 
Purpose: 
- Modify the CAN transmission bit rate at runtime. 
- Here's the default btr0 and btr1 for different bit rates: 
33  Kbps (btr0=0x31 and btr1=0x39) 
83  Kbps (btr0=0x4E and btr1=0x3E) 
100 Kbps (btr0=0x09 and btr1=0x7F) 
125 Kbps (btr0=0x49 and btr1=0x3E) 
250 Kbps (btr0=0x44 and btr1=0x3E) 
500 Kbps (btr0=0x01 and btr1=0x7F) 
1  Mbps (btr0=0x00 and btr1=0x7F)>br> 
For more information about sja1000 : visit this link 
Example: 
*_ApiSetCanSpeed(ItfCanDriver.EnmCAN_bitRate.BITRATE_500_KBPS); 
Parameters:
NameType EncodedType
BitRateCAN_bitRateint
The desired bit rate.
Function: SetDataTimingRegister
Description: 
Purpose: 
Overrides the dtr0 and dtr1 of the modified sja1000 controller into the fpga. 
For more information about correct values for your case : visit this link 
Example: 
*_ApiSetDataTimingRegister(0x10, 0x00); 
Parameters:
NameTypeEncodedType
Dtr0int uint8
Value for the dtr0
register.
Dtr1int uint8
Value for the dtr1
register.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: Shutdown
Description: 
Purpose: 
Deactivate the CAN driver. 
Example: 
*_ApiShutdown(); 
Function: StopRxAckSpecificFrame
Description: 
Purpose: 
Enable or disable stop Rx acknowledgement on specific frame ID. 
Example: 
*_ApiStopRxAckSpecificFrame(true, RxFrameObject); 
Parameters:

---

# Page 277

NameType EncodedType
Enableboolean bool
True to enable stopping Rx acknowledgement, False to
disable.
Frameint _ComFrameCanRx
The CAN receive frame object.
Function: TxRawFdFrame
Description: 
Purpose: 
Send data on the CAN bus as raw frame for CAN FD. This call is by passing the normal signal processing and can send
any ID on the CAN bus. The DLC is taken from the length of the given data. 
Example: 
*_ApiTxRawFdFrame(0x123, "AA BB CC", true, true, false, false); 
Parameters:
NameType EncodedTypeFormatMinLengthMaxlength
IDint uint32 hex - -
The CAN identifier for the frame (hex format).
Dataint[] uint8 raw 0 64
The raw data to be sent.
IDEbooleanbool - -
Identifier Extension bit.
EDLbooleanbool - -
Extended Data Length bit.
BRSbooleanbool - -
Bit Rate Switch bit.
RTRbooleanbool - -
Remote Transmission Request bit.
Function: TxRawFrame
Description: 
Purpose: 
Send data on the CAN bus as raw frame for CAN. This call is by passing the normal signal processing and can send any
ID on the CAN bus. The DLC is taken from the length of the given data. 
Example: 
*_ApiTxRawFrame(0x123, "AA BB CC"); 
Parameters:
NameTypeEncodedTypeFormatMinLengthMaxlength
IDint uint32 hex - -
The CAN identifier for the frame (hex format).
Dataint[]uint8 raw 0 8
The raw data to be sent.
Function: TxStartPeriodicRawFdFrame
Description: 
Purpose: 
Send data on the CAN bus as raw frame for CAN FD periodically. This call is by passing the normal signal processing and
can send any ID on the CAN bus. The DLC is taken from the length of the given data. 8 Tx Raw frames can be active at
the same time. 
Example: 
*_ApiTxStartPeriodicRawFdFrame(0x123, "AA BB CC", true, true, false, false, 100); 
Parameters:
Name Type EncodedTypeUnitFormatMinLengthMaxlength
IDint uint32 hex - -
The CAN identifier for the frame (hex format).
Dataint[] uint8 raw 0 64
The raw data to be sent.
IDEbooleanbool - -
Identifier Extension bit.
EDLbooleanbool - -
Extended Data Length bit.
BRSbooleanbool - -
Bit Rate Switch bit.

---

# Page 278

RTRbooleanbool - -
Remote Transmission Request bit.
CycleTimeint uint32 ms - -
The period in milliseconds.
Function: TxStartPeriodicRawFrame
Description: 
Purpose: 
Send data on the CAN bus as raw frame for CAN periodically. This call is by passing the normal signal processing and can
send any ID on the CAN bus. The DLC is taken from the length of the given data. 8 Tx Raw frames can be active at the
same time. 
Example: 
*_ApiTxStartPeriodicRawFrame(0x123, "AA BB CC", 100); 
Parameters:
Name TypeEncodedTypeUnitFormatMinLengthMaxlength
IDint uint32 hex - -
The CAN identifier for the frame (hex format).
Dataint[]uint8 raw 0 8
The raw data to be sent.
CycleTimeint uint32 ms - -
The period in milliseconds.
Function: TxStopPeriodicRawFrame
Description: 
Purpose: 
Stops immediatly the periodic sending of the raw frame given by the frame ID. 
Example: 
*_ApiTxStopPeriodicRawFrame(0x123); 
Parameters:
NameType EncodedType Format
IDint uint32 hex
The CAN identifier of the frame to stop (hex
format).
back to interface definition
Messages
Message: BusRestart
Description: The CAN controller was reset and the TX queue was cleared. This happened because of increased error
counters. The controller was going into at least error passive state.
Parameters:
Name Type EncodedType
RestartCause RestartCauseint
TxErrorCounterint uint16
RxErrorCounterint uint16
Message: CanFrameDlcMismatch
Description: A Can frame received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat
Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: FrameNotFoundInCom
Description: A frame was received with no matching generated COM frame.
Parameters:
NameTypeEncodedTypeFormat
ID int uint32 hex
DLC int uint8
Message: GeneralMessage

---

# Page 279

Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NoCanFrameId
Description: The user try to enable processing rx raw frame although no id set to be enabled, API "RxRawFrame" shall be
called first to parse the id.
Message: TransmissionFIFOFull
Description: The user try to send can messages while the transmission fifo is full so there will be some missed messages
on the bus.
back to interface definition
Objects
Object: ValidFramesPerSec
Description: Updated every 250ms, showing the rate per second
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ValidFramesPerSec_SignalSignalint 0 1 1/s2 false false
Object: ErrorFramesPerSec
Description: Updated every 250ms, showing the rate per second
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ErrorFramesPerSec_SignalSignalint 0 1 1/s2 false false
Object: RxRawFrameContent
Description: The data bytes of the last received raw frame. Configured by RxRawFrame
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
RxRawFrameContent_SignalSignalbyte 0 1 raw 64 true false
Object: RxRawFrameDlc
Description: The DLC (data length code) of the last received raw frame. Configured by RxRawFrame
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
RxRawFrameDlc_SignalSignalint 0 1 1 false false
Object: RxRawFrameId
Description: The CAN ID of the last received raw frame. Configured by RxRawFrame
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
RxRawFrameId_SignalSignalint 0 1 4 false false
back to interface definition
Interface: CanXcp  extends XCP _Object
Functions
AlignRespCounter
ConfigureByteOrder
ConfigureLogging
EnableRxProcessing
SendRaw
SendRawConcatenated
Send_Connect
Send_Disconnect
Send_Download
Send_GET_COMM_MODE_INFO
Send_GET_ID
Send_GetStatus
Send_ModifyBits
Send_SetMta
Send_ShortUpload
Send_Synch
Send_UPLOAD
SetUserTag
Set_XCPResCntIncStep
Set_XcpReqCnt
TestByteSequence
TestByteSequenceNotEqual

---

# Page 280

TestNoEcuResponse
TestPattern
TestPositiveResponse
TestValueRangeSigned
TestValueRangeUnsigned
_Init
Messages
ByteSequenceMatching
ByteSequenceNotMatching
GeneralMessage
NoData
PatternNotMatching
Send_ShortUpload
TestResult
TestValueRangeSigned
TestValueRangeUnsigned
Timeout
UploadData
XCPProtocolIndication
Functions
Function: AlignRespCounter
Description: Align Expected Response Counter with Obtained Response
Function: ConfigureByteOrder
Parameters:
Name Type EncodedType
isBigEndianbooleanbool
Function: ConfigureLogging
Description: Configure the logging behaviour.
Parameters:
Name Type EncodedType
EveryReceivedFramebooleanbool
Function: EnableRxProcessing
Description: Configure disabling/enabling receiving pdu. Default is Enabled
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SendRaw
Description: Send raw data[0..83]
Parameters:
NameTypeEncodedType
Data int[]uint8
Function: SendRawConcatenated
Parameters:
Name TypeEncodedType
Data int[]uint8
concatMsgsLengthint[]uint8
Function: Send_Connect
Description: Establishes a continuous, logical, point-to-point connection with a slave device.
Parameters:
NameTypeEncodedType
Modeint uint8
Function: Send_Disconnect
Description: Brings the slave to the DISCONNECTED​ state.
Function: Send_Download

---

# Page 281

Description: Download from master to slave.
Parameters:
NameTypeEncodedType
Size int uint8
Data int[]uint8
Function: Send_GET_COMM_MODE_INFO
Description: Returns optional information on different Communication Modes supported by the slave.
Function: Send_GET_ID
Description: Used for automatic session configuration and for slave device identification.
Parameters:
NameTypeEncodedType
Typeint uint8
Function: Send_GetStatus
Description: Returns all current status information of the slave device. This includes the status of the resource protection,
pending store requests and the general status of data acquisition and stimulation.
Function: Send_ModifyBits
Description: Send Modify Bits command along with AND and XOR mask.
Parameters:
Name TypeEncodedType
ShiftValueint uint8
AND_Maskint[]uint8
XOR_Maskint[]uint8
Function: Send_SetMta
Description: Send SetMta Command 0xF6
Parameters:
Name TypeEncodedType
Address longuint64
AddressExtensionlonguint64
Function: Send_ShortUpload
Description: Upload from slave to master (short version).
Parameters:
Name Type EncodedType
Size int uint8
Address int uint32
AddressExtension int uint8
AllowNegResponsebooleanbool
Response timeout: 0
Result Message: Send_ShortUpload 
Faults: 
Function: Send_Synch
Description: Used to synchronize command execution after timeout conditions.
Function: Send_UPLOAD
Description: A data block of the specified length, starting at the current MTA, will be returned.
Parameters:
NameTypeEncodedType
Size int uint8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 282

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: Set_XCPResCntIncStep
Description: Overide the default XCP expected response counter incrementing step.
Parameters:
Name TypeEncodedType
incStepint uint8
Function: Set_XcpReqCnt
Description: Set XCP request counter to a given value
Parameters:
Name TypeEncodedType
RefCNTint uint8
Function: TestByteSequence
Description: Test that the received byte sequence is equal to the given byte sequence
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceNotMatching 
Function: TestByteSequenceNotEqual
Description: Test that the received byte sequence is not equal to the given byte sequence.
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceMatching 
Function: TestNoEcuResponse
Description: Test that no response is received from the Ecu.
Response timeout: 0
Result Message: TestResult 
Faults: 
Function: TestPattern
Description: Test that the received byte sequence is equal to the given pattern
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Mask int[]uint8
Offset int uint8
Response timeout: 0
Result Message: TestResult 
Faults: NoData PatternNotMatching 
Function: TestPositiveResponse
Description: Test that a positive response was received (0xFF).
Response timeout: 0
Result Message: TestResult 
Faults: 
Function: TestValueRangeSigned
Description: Test for a numerical value range, where the number is interpreted as signed value of 8, 16, 24 or 32 bit.

---

# Page 283

Parameters:
Name TypeEncodedType
Min int int32
Max int int32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeSigned 
Faults: NoData 
Function: TestValueRangeUnsigned
Description: Test for a numerical value range, where the number is interpreted as unsigned value of 8, 16, 24 or 32 bit.
Parameters:
Name TypeEncodedType
Min int uint32
Max int uint32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeUnsigned 
Faults: NoData 
Function: _Init
Parameters:
Name TypeEncodedType
RequestFrame int _ComFrameCanTx
ResponseFrameint _ComFrameCanRx
back to interface definition
Messages
Message: ByteSequenceMatching
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Obtainedint[]uint8
Message: ByteSequenceNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Expectedint[]uint8
Obtainedint[]uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NoData
Message: PatternNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Mask int[]uint8
Expectedint[]uint8
Obtainedint[]uint8
Message: Send_ShortUpload
Message: TestResult
Message: TestValueRangeSigned

---

# Page 284

Parameters:
Name TypeEncodedType
Offset int uint8
BytesCountint uint8
Min int int32
Value int int32
Max int int32
Message: TestValueRangeUnsigned
Parameters:
Name TypeEncodedType
Offset int uint8
BytesCountint uint8
Min int uint32
Value int uint32
Max int uint32
Message: Timeout
Message: UploadData
Parameters:
Name Type EncodedType
isPositiveResponsebooleanbool
uploadSize int uint32
uploadAddrExt int uint32
uploadAddr int uint32
rxdata int[] uint8
Message: XCPProtocolIndication
Parameters:
Name TypeEncodedType
msgdataint[]uint8
back to interface definition
Interface: CanDiag  extends Diag _Object
Functions
CalculateAccessKey
ConfigureDefaultTimeout
ConfigureDiag
ConfigureExtendedAdressing
ConfigureFlowControlSendStMin
ConfigureNextSend_DisableTimeout
ConfigureNextSend_FirstConsecutiveDelay
ConfigureNextSend_FlowControlData
ConfigureNextSend_FlowControlDelay
ConfigureNextSend_Response
ConfigureNextSend_Retries
ConfigureNextSend_Timeout
ConfigureNextSend_Type
ConfigureUnexpectedReceive
Configure_OnTestResponseFailedLogResponseAsError
CopyRequestBitsToProcUnitVariable
CopyRequestLengthToProcUnitVariable
CopyRequestToProcUnitVariable
CopyResponseBitsToProcUnitVariable
CopyResponseLengthToProcUnitVariable
CopyResponseToProcUnitVariable
EnableAlternateTxFrm
EnablePadding
GetCyclicResponse
Prepare
PrepareFromResponse
PrepareModify
PrepareModifyBits
PrepareModifyBitsProcUnitVariable
PrepareModifyFromResponsePart
PrepareModifyProcUnitVariable

---

# Page 285

PrepareModifyWithMask
Send
SendCyclicStartNoRespMinDelay
SendCyclicStartWithRespMinDelay
SendCyclicStop
SendPrepared
SetPadding
SetUserTag
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskDoesNotExist
TestByteSequenceWithMaskExist
TestByteSequenceWithMaskNotMatching
TestByteValueNoneOf
TestByteValueOneOf
TestResponse
TestResponseNotReceived
TestUdsDtcNotPresent
TestUdsDtcPresent
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitSequenceInRange
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
UpdateDiagFrames
Messages
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage
GetCyclicResponse
IndexOutOfBounds
InvalidMasklength
InvalidResponse
InvalidSearchStep
Log
LogAdditionBytesWithMask
LogAdditionBytesWithShortData
MsgTooLong
NoData
PreparedRequest
Protocol
ResponsePending
ResponseTooShort
SchedNotRunning
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskNotMatching
TestResponse
TestUdsDtcPresence
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
UpdatedDiagFrames
Events

---

# Page 286

ResponseReceived
CyclicActionCompleted
Objects
Functions
Function: CalculateAccessKey
Description: 
Purpose: 
Calculate a security access key based on a seed and other parameters. 
Example: 
*_ApiCalculateAccessKey(4, 4, 2, 2, 0x01, [0xDE, 0xAD, 0xBE, 0xEF]) 
Parameters:
Name Type EncodedType Default
SeedSizeint uint32
The seed size in bytes
KeySizeint uint32
The key size in bytes
SeedOffsetint uint32
The seed offset in diag response buffer
KeyOffsetint uint32
The key offset in diag request buffer
SecurityLevelint uint8
Security Level Number
StaticKeyint[] uint8 []
To Decrypt/Encrypt Seed/Key (e.g. In AES128 Algo). Leave it empty if not
needed
Function: ConfigureDefaultTimeout
Description: 
Purpose: 
Configure default timeout for all send actions. 
Example: 
*_ApiConfigureDefaultTimeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureDiag
Description: 
Purpose: 
Configure Diag Module: Enable/Disable Tp. 
Example: 
*_ApiConfigureDiag(true) 
Parameters:
Name Type EncodedType
EnableTpboolean bool
If true, enables the Transport Protocol (TP) layer for diagnostics; if false, disables
it.
Function: ConfigureExtendedAdressing
Description: 
Purpose: 
Configure the Diagnostic Object with Extended Addressing. 
Example: 
*_ApiConfigureExtendedAdressing(0x12, 0x34); 
Parameters:

---

# Page 287

Name TypeEncodedType
DutTargetAddrPhyint uint8
Physical target address.
DutTargetAddrFuncint uint8
Functional target
address.
Function: ConfigureFlowControlSendStMin
Description: 
Purpose: 
Configure CASTLE to overwrite STMin value received from the ECU in Flow Control Frame 
Example: 
*_ApiConfigureFlowControlSendStMin(10, UserInput) 
Parameters:
Name Type EncodedTypeUnit
FcSendStMinint uint8 ms
The flow control send StMin (in ms).
SendStMinModeSendStMinModeint -
The mode for sending StMin.
Function: ConfigureNextSend_DisableTimeout
Description: 
Purpose: 
Configure disabling the timeout for the next send action. 
Example: 
*_ApiConfigureNextSend_DisableTimeout() 
Function: ConfigureNextSend_FirstConsecutiveDelay
Description: 
Purpose: 
Configure Castle first consecutive frame with a user defined delay time measured from the Ecu flow control signal. 
Example: 
*_ApiConfigureNextSend_FirstConsecutiveDelay(5) 
Parameters:
Name Type EncodedType Unit
CfDelayint uint8 ms
The consecutive frame delay (in
ms).
Function: ConfigureNextSend_FlowControlData
Description: 
Purpose: 
Configure Castle next flow control frame data : receive block size and receive StMin. 
Example: 
*_ApiConfigureNextSend_FlowControlData(8, 10) 
Parameters:
Name Type EncodedType Unit
FcRecvBlockSizeint uint8
The flow control receive block size.
FcRecvStMinint uint8 ms
The flow control receive StMin (in
ms).
Function: ConfigureNextSend_FlowControlDelay
Description: 
Purpose: 
Configure Castle flow control signal with a user defined delay time measured from the Ecu first frame. 
Example: 
*_ApiConfigureNextSend_FlowControlDelay(10) 
Parameters:
Name TypeEncodedTypeUnit

---

# Page 288

FcDelayint uint16 ms
The flow control delay (in
ms).
Function: ConfigureNextSend_Response
Description: 
Purpose: 
Configure what is expected as response. 
Example: 
*_ApiConfigureNextSend_Response(true, false, true) 
Parameters:
Name Type EncodedType
SuppressNegRspboolean bool
If true, negative responses will be
suppressed.
SuppressPosRspboolean bool
If true, positive responses will be suppressed.
AllowResponsePendingboolean bool
If true, response pending is allowed.
Function: ConfigureNextSend_Retries
Description: 
Purpose: 
Configure options for automatic retry in the case where "busy repeat" was the response from ECU. 
Example: 
*_ApiConfigureNextSend_Retries(3, 10) 
Parameters:
Name TypeEncodedTypeScaleUnit
Retriesint uint8
The number of retries to perform.
PauseTimeint uint16 0.2 ms
The pause time between retries (in
ms).
Function: ConfigureNextSend_Timeout
Description: 
Purpose: 
Configure next timeout for all send actions 
Example: 
*_ApiConfigureNextSend_Timeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureNextSend_Type
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiConfigureNextSend_Type(true) 
Parameters:
Name Type EncodedType
AsFunctionalboolean bool
If true, the request will be sent as a functional request. If false, it will be sent as a physical
request.
Function: ConfigureUnexpectedReceive
Description: 

---

# Page 289

Purpose: 
Configure disabling/enabling the unexpected receive if no send action was made. 
Example: 
*_ApiConfigureUnexpectedReceive(true) 
Parameters:
Name Type EncodedType
AllowUnexpectedReceiveWarningboolean bool
If true, unexpected receive warning is allowed.
Function: Configure_OnTestResponseFailedLogResponseAsError
Description: 
Purpose: 
When enabled, and TestResponse fails, the response will be logged as an error. 
Example: 
*_ApiConfigure_OnTestResponseFailedLogResponseAsError(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable logging the response as an error when TestResponse
fails.
Function: CopyRequestBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestBitsToProcUnitVariable(2, 4, 8, false, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request bits to.
StartBitint uint16
The starting bit position in the current request data from which to copy.
BitLengthint uint16
The number of bits to copy from the request data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyRequestLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestLengthToProcUnitVariable(2) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the current request length will be
copied.
Function: CopyRequestToProcUnitVariable
Description: 
Purpose: 
Copy a part of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestToProcUnitVariable(2, 1, 3, false) 
Parameters:

---

# Page 290

Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request data to.
Offsetint uint8
The starting offset in the current request data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the request data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: CopyResponseBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseBitsToProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response bits to.
StartBitint uint16
The starting bit position in the received response data from which to copy.
BitLengthint uint16
The number of bits to copy from the response data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyResponseLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseLengthToProcUnitVariable(1) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the response length will be
copied.
Function: CopyResponseToProcUnitVariable
Description: 
Purpose: 
Copy a part of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseToProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response data to.
Offsetint uint8
The starting offset in the received response data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the response data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: EnableAlternateTxFrm
Description: 
Purpose: 

---

# Page 291

Enable or disable alternate tx frame. If enabled, the FlowControl will be sent over the NewTxFrame. 
Example: 
*_ApiEnableAlternateTxFrm(true, NewTxFrameObject); 
Parameters:
Name Type EncodedType
isEnableboolean bool
True to enable the alternate TX frame, False to
disable.
NewTxFrameint _ComFrameCanTx
The new CAN transmit frame object for FlowControl.
Function: EnablePadding
Description: 
Purpose: 
Enable or disable padding for diagnostic messages. Padding is enabled by default. 
Example: 
*_ApiEnablePadding(false) 
Parameters:
NameType EncodedType
Enableboolean bool
If true, enables padding for diagnostic messages; if false, disables padding. Padding is enabled by
default.
Function: GetCyclicResponse
Description: 
Purpose: 
Gets the latest response received from a cyclically sent diagnostic request. 
Example: 
*_ApiGetCyclicResponse() 
Function: Prepare
Description: 
Purpose: 
Prepare the request to be send. 
Example: 
*_ApiPrepare([0x10, 0x03]) 
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
The data to prepare for
sending.
Function: PrepareFromResponse
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareFromResponse() 
Function: PrepareModify
Description: 
Purpose: 
Modify the prepared request by replacing a byte sequence. 
Example: 
*_ApiPrepareModify(2, [0x01, 0x02]) 
Parameters:
NameTypeEncodedType Format
Offsetint uint16
The offset where to replace the
data.

---

# Page 292

Dataint[] uint8 raw
The data to replace with.
Function: PrepareModifyBits
Description: 
Purpose: 
Modify the prepared repuest by replacing a bit sequence. 
Example: 
*_ApiPrepareModifyBits(0x1234, 8, 16, true, false) 
Parameters:
Name Type EncodedType
Valuelong int64
The value to set.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as
signed.
Function: PrepareModifyBitsProcUnitVariable
Description: 
Purpose: 
Modify the prepared request by replacing a bit sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyBitsProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc
unit.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as signed.
Function: PrepareModifyFromResponsePart
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareModifyFromResponsePart(2, 4, 1) 
Parameters:
Name Type EncodedType
RspPartOffsetint uint16
The offset of the response part to use.
RspPartLengthint uint16
The length of the response part to use.
ReqOffsetint uint16
The offset in the request where to insert the response
part.
Function: PrepareModifyProcUnitVariable
Description: 
Purpose: 
Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit. 

---

# Page 293

Example: 
*_ApiPrepareModifyProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc unit.
Offsetint uint16
The offset where to replace the data.
ByteLengthint uint8
The length of the byte sequence to
replace.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
Function: PrepareModifyWithMask
Description: 
Purpose: 
Modify the prepared repuest by replacing a masked byte sequence. 
Example: 
*_ApiPrepareModifyWithMask(2, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset where to replace the data.
Dataint[] uint8 raw
The data to replace with.
Maskint[] uint8 raw
The mask to apply during
replacement.
Function: Send
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSend([0x10, 0x03]) 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be
sent.
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SendCyclicStartNoRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. No response is expected from the other part.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartNoRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
int[] uint8 raw

---

# Page 294

Data The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStartWithRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. The response can be "get" though the API GetCyclicResponse.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartWithRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStop
Description: 
Purpose: 
Stops the cyclically sent diagnostic request. 
Example: 
*_ApiSendCyclicStop() 
Function: SendPrepared
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSendPrepared() 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SetPadding
Description: 
Purpose: 
Set the padding byte used in the Tx Diagnostic Buffer. 
Example: 
*_ApiSetPadding(0x55) 
Parameters:
NameType EncodedType
Valueint uint8
The byte value to be used for padding in the transmit diagnostic
buffer.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 295

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: 
Purpose: 
Test for a byte sequence in the response. 
Example: 
*_ApiTestByteSequence(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequence] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceDoesNotExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the
response.
Function: TestByteSequenceExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Function: TestByteSequenceNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match. 

---

# Page 296

Example: 
*_ApiTestByteSequenceNotMatching(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected to not be in the
response.
Response timeout: 0
Result Message: TestByteSequenceNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: 
Purpose: 
Test for a byte sequence in the response with a mask. 
Example: 
*_ApiTestByteSequenceWithMask(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMask] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMaskDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskDoesNotExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.

---

# Page 297

Function: TestByteSequenceWithMaskExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match, with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskNotMatching(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMaskNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected to not be in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMaskNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is none of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueNoneOf(3, [0xCC, 0xDD]) 
Return Messages: 
On Success: 
Logs [TestByteValueNoneOf] if the response matches the expected response. 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset does not match any value in this
list.

---

# Page 298

Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is one of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueOneOf(3, [0xAA, 0xBB]) 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset matches any value in this
list.
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestResponse
Description: 
Purpose: 
Test if a response is stored. Then verify the response length is in range LengthMin .. LengthMax, inclusive. 
Example: 
*_ApiTestResponse(10, 20) 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
Name Type EncodedType
LengthMinint uint16
Minimal valid length of the response.
LengthMaxint uint16
Maximal valid length of the
response.
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestResponseNotReceived
Description: 
Purpose: 
Test if no response is stored. 
Example: 
*_ApiTestResponseNotReceived() 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestUdsDtcNotPresent

---

# Page 299

Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the absence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is NOT in the response, CASTLE generates 'TestUdsDtcPresence' information message with 0 byte index. 
If the DTC is in the list, CASTLE generates a 'TestUdsDtcPresence' error message with the byte index of the DTC in the
response. 
Example: 
*_ApiTestUdsDtcNotPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC not presenct as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
absence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the presence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response, CASTLE generates 'TestUdsDtcPresence' information message with the byte index of the
DTC in the response. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message with 0 byte index. 
Example: 
*_ApiTestUdsDtcPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC presence as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
presence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcStatus
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the status of a DTC. 

---

# Page 300

The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response AND the expected status matches the masked status byte, CASTLE generates
'TestUdsDtcStatus' information message. 
If the DTC is in the response AND the expected status does not match the masked status byte, CASTLE generates
'TestUdsDtcStatus' error message. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message. 
Example: 
*_ApiTestUdsDtcStatus(0x123456, 0xFF, 0x01) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC status as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameType EncodedType Format
DtcIdint uint32 hex
The DTC ID to check for status.
Maskint uint8 hex
Only the masked bits will be tested in the status
byte.
Statusint uint8 hex
The expected status of the DTC.
Response timeout: 0
Result Message: TestUdsDtcStatus 
Faults: NoData 
Function: TestUdsDtcsPresentSubsetOf
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the existing DTCs are subset of a predefined list (DtcIdsAllowed). 
The received response must be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
It is not mandatory that the response contains all DTCs exist in the list (DtcIdsAllowed). 
If any DTC in the response is NOT exist in the list (DtcIdsAllowed), CASTLE generates a 'TestUdsDtcsPresentSubsetOf'
error message with all present DTCs and not exist in the list. 
Example: 
*_ApiTestUdsDtcsPresentSubsetOf([0x123456, 0xABCDEF]) 
Return Messages: 
On Success: 
Logs [TestUdsDtcsPresentSubsetOf] if the subset dtc list as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [InvalidResponse] error if the subset is not present in the response. 
Parameters:
Name Type EncodedType Format
DtcIdsAllowedint[] uint32 hex
Array of all allowed DTCs (without status
mask).
Response timeout: 0
Result Message: TestUdsDtcsPresentSubsetOf 
Faults: NoData InvalidResponse 
Function: TestValueBitSequenceInRange

---

# Page 301

Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
start bit index in the data buffer the left
BitLengthint uint16
number of bits
IsLsbFirstboolean bool
true if the start bit is the least significant
AsSignedValueboolean bool
signed value or unsigned
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range. 
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit. 
 
1. Startbit 7, Length 8, Big Endian 
2. Startbit 8, Length 8, Little Endian 
3. Startbit 31, Length 9, Big Endian 
4. Startbit 48, Length 9, Little Endian 
If complete bytes shall be tested, see TestValueInRange. 
Example: 
*_ApiTestValueBitsInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 

---

# Page 302

- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
 
1: Startbit 7, Length 8, Big Endian 
2: Startbit 8, Length 8, Little Endian 
3: Startbit 31, Length 9, Big Endian 
4: Startbit 48, Length 9, Little Endian 
Example: 
*_ApiTestValueBitsOutOfRange(true, 2, 2, true -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueOutOfRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64

---

# Page 303

Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit. The byte
order can be configured. 
Example: 
*_ApiTestValueInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian.
Offsetint uint16
Offset in byte count.
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValueboolean bool
If true, interpret the value as signed.
LimitErrorMinlong int64
Minimum value that is not yet an error.
LimitWarnMinlong int64
Minimum value that is not yet a warning.
LimitWarnMaxlong int64
Maximum value that is not yet a warning.
LimitErrorMaxlong int64
Maximum value that is not yet an error.
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType

---

# Page 304

ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint16
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: UpdateDiagFrames
Description: 
Purpose: 
Update Diag Frames. 
Example: 
*_ApiUpdateDiagFrames(TxPhysDiagFrameObject, TxFuncDiagFrameObject, RxPhysDiagFrameObject); 
Parameters:
Name Type EncodedType
TxPhysDiagFrameint _ComFrameCanTx
The physical transmit diagnostic frame.
TxFuncDiagFrameint _ComFrameCanTx
The functional transmit diagnostic
frame.
RxPhysDiagFrameint _ComFrameCanRx
The physical receive diagnostic frame.
back to interface definition
Messages
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetCyclicResponse
Description: Returns the latest response received from the cyclic diag request.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw

---

# Page 305

Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: InvalidMasklength
Description: The used mask length doesn't match the data length.
Message: InvalidResponse
Description: The current response is not valid to apply this API 
Used only with response 59 02 xx .....
Message: InvalidSearchStep
Description: The used search step is invalid.
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: LogAdditionBytesWithMask
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Mask int[]uint8 raw
Message: LogAdditionBytesWithShortData
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
ShortData int[]uint8 raw
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.
Message: PreparedRequest
Description: The data send out. This is generated by SendPreparedRequest
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: Protocol
Description: Transport layer error.
Parameters:
NameTypeEncodedType
Codeint int32
Message: ResponsePending

---

# Page 306

Description: DUT returned response pending.
Message: ResponseTooShort
Description: The received response is too Short.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: SchedNotRunning
Description: LinMaster scheduling is not running.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
ShortData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceDoesNotExist
Description: Tests the absence of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceExist
Description: Tests the existance of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceNotMatching
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMaskNotMatching
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw

---

# Page 307

ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestResponse
Description: Test if response is received and its length.
Parameters:
Name Type EncodedType
ResponseReceivedbooleanbool
Length int uint16
Message: TestUdsDtcPresence
Parameters:
NameTypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
Message: TestUdsDtcStatus
Parameters:
Name TypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
ExpectedStatusint uint8 hex
Status int uint8 hex
Mask int uint8 hex
Message: TestUdsDtcsPresentSubsetOf
Description: List all DTCs which are not allowed to be present
Parameters:
Name TypeEncodedTypeFormat
NotAllowedDtcsint[]uint32 hex
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin long int64
LimitWarnMin long int64
Value long int64
LimitWarnMax long int64
LimitErrorMax long int64
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin long int64
LimitErrorMin long int64
Value long int64
LimitErrorMax long int64
LimitWarnMax long int64
Message: TestValueInRange
Description: Result of the in range test
Parameters:

---

# Page 308

Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive
Description: Received a frame from the DUT when it was not expected.
Message: UpdatedDiagFrames
Parameters:
Name TypeEncodedType
TxPhysDiagFrameint _ComFrameCanTx
TxFuncDiagFrameint _ComFrameCanTx
RxPhysDiagFrameint _ComFrameCanRx
back to interface definition
Events
Event: ResponseReceived
Event: CyclicActionCompleted
back to interface definition
Interface: CanBap  extends Bap _Object
Functions
ConfigureBapTimeout
SetFeatureID
SetHeader
SetUserTag
TestByteSequence
TestByteSequenceWithMask
TestByteValueNoneOf
TestByteValueOneOf

---

# Page 309

TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
_Init
Messages
BapResponseLogging
BapTimeOut
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage
IndexOutOfBounds
NoData
TestByteSequence
TestByteSequenceWithMask
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Functions
Function: ConfigureBapTimeout
Description: Configures the maximum delay between consecutive bap frames
Parameters:
Name TypeEncodedTypeUnit
Timeoutint uint32 ms
Function: SetFeatureID
Description: Set the feature ID to be tested
Parameters:
Name Type EncodedType
CheckForAnyFeaturebooleanbool
FeatureID int uint8
Function: SetHeader
Description: Set the header to be tested
Parameters:
NameTypeEncodedType
Headerint uint8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: Test for a byte sequence in the bap response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask

---

# Page 310

Description: Test for a byte sequence in the response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: Test that a byte in the Bap Response is none of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8
TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: Test that a byte in the Bap Response is one of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8
TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestValueBitsInRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
int uint16

---

# Page 311

StartBit Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
int uint8

---

# Page 312

Offset in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: _Init
Parameters:
Name TypeEncodedType
HeaderSignalint _Signal
To be removed later
HeaderFrameint _ComFrameCanRx
back to interface definition
Messages
Message: BapResponseLogging
Parameters:
Name TypeEncodedTypeFormat
msgdataint[]uint8 raw
Message: BapTimeOut
Description: Test of a byte sequence
Parameters:
NameTypeEncodedTypeUnit
delayint uint32 ms
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list

---

# Page 313

Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: NoData
Description: Data is not yet received.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: TestValueBitsOutOfRange
Description: Result of the range test

---

# Page 314

Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin int uint32
LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
back to interface definition
Objects
Object: DLC
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
DLC _SignalSignalbyte 0 1 raw 1 false false
Object: FeatureID
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
FeatureID_SignalSignalbyte 0 1 raw 1 false false
Object: Data1
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data1_SignalSignalbyte 0 1 raw 1 false false
Object: Data2
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data2_SignalSignalbyte 0 1 raw 1 false false
Object: Data3
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data3_SignalSignalbyte 0 1 raw 1 false false
Object: Data4
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data4_SignalSignalbyte 0 1 raw 1 false false
Object: Data5
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data5_SignalSignalbyte 0 1 raw 1 false false
Object: Data6

---

# Page 315

NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data6_SignalSignalbyte 0 1 raw 1 false false
Object: Data7
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data7_SignalSignalbyte 0 1 raw 1 false false
Object: Data8
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data8_SignalSignalbyte 0 1 raw 1 false false
Object: SegmentedDataBuffer
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
SegmentedDataBuffer_SignalSignalbyte 0 1 raw 256 false false
back to interface definition
Interface: Diag  extends _Object
Enumerations
SendStMinMode
Functions
CalculateAccessKey
ConfigureDefaultTimeout
ConfigureDiag
ConfigureFlowControlSendStMin
ConfigureNextSend_DisableTimeout
ConfigureNextSend_FirstConsecutiveDelay
ConfigureNextSend_FlowControlData
ConfigureNextSend_FlowControlDelay
ConfigureNextSend_Response
ConfigureNextSend_Retries
ConfigureNextSend_Timeout
ConfigureNextSend_Type
ConfigureUnexpectedReceive
Configure_OnTestResponseFailedLogResponseAsError
CopyRequestBitsToProcUnitVariable
CopyRequestLengthToProcUnitVariable
CopyRequestToProcUnitVariable
CopyResponseBitsToProcUnitVariable
CopyResponseLengthToProcUnitVariable
CopyResponseToProcUnitVariable
EnablePadding
GetCyclicResponse
Prepare
PrepareFromResponse
PrepareModify
PrepareModifyBits
PrepareModifyBitsProcUnitVariable
PrepareModifyFromResponsePart
PrepareModifyProcUnitVariable
PrepareModifyWithMask
Send
SendCyclicStartNoRespMinDelay
SendCyclicStartWithRespMinDelay
SendCyclicStop
SendPrepared
SetPadding
SetUserTag
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskDoesNotExist
TestByteSequenceWithMaskExist
TestByteSequenceWithMaskNotMatching
TestByteValueNoneOf
TestByteValueOneOf
TestResponse
TestResponseNotReceived

---

# Page 316

TestUdsDtcNotPresent
TestUdsDtcPresent
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitSequenceInRange
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Messages
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage
GetCyclicResponse
IndexOutOfBounds
InvalidMasklength
InvalidResponse
InvalidSearchStep
Log
LogAdditionBytesWithMask
LogAdditionBytesWithShortData
MsgTooLong
NoData
PreparedRequest
Protocol
ResponsePending
ResponseTooShort
SchedNotRunning
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskNotMatching
TestResponse
TestUdsDtcPresence
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
Events
ResponseReceived
CyclicActionCompleted
Objects
Enumerations
Enum: SendStMinMode
Value
Default
UserInput
Functions
Function: CalculateAccessKey
Description: 
Purpose: 
Calculate a security access key based on a seed and other parameters. 
Example: 
*_ApiCalculateAccessKey(4, 4, 2, 2, 0x01, [0xDE, 0xAD, 0xBE, 0xEF]) 
Parameters:

---

# Page 317

Name Type EncodedType Default
SeedSizeint uint32
The seed size in bytes
KeySizeint uint32
The key size in bytes
SeedOffsetint uint32
The seed offset in diag response buffer
KeyOffsetint uint32
The key offset in diag request buffer
SecurityLevelint uint8
Security Level Number
StaticKeyint[] uint8 []
To Decrypt/Encrypt Seed/Key (e.g. In AES128 Algo). Leave it empty if not
needed
Function: ConfigureDefaultTimeout
Description: 
Purpose: 
Configure default timeout for all send actions. 
Example: 
*_ApiConfigureDefaultTimeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureDiag
Description: 
Purpose: 
Configure Diag Module: Enable/Disable Tp. 
Example: 
*_ApiConfigureDiag(true) 
Parameters:
Name Type EncodedType
EnableTpboolean bool
If true, enables the Transport Protocol (TP) layer for diagnostics; if false, disables
it.
Function: ConfigureFlowControlSendStMin
Description: 
Purpose: 
Configure CASTLE to overwrite STMin value received from the ECU in Flow Control Frame 
Example: 
*_ApiConfigureFlowControlSendStMin(10, UserInput) 
Parameters:
Name Type EncodedTypeUnit
FcSendStMinint uint8 ms
The flow control send StMin (in ms).
SendStMinModeSendStMinModeint -
The mode for sending StMin.
Function: ConfigureNextSend_DisableTimeout
Description: 
Purpose: 
Configure disabling the timeout for the next send action. 
Example: 
*_ApiConfigureNextSend_DisableTimeout() 
Function: ConfigureNextSend_FirstConsecutiveDelay

---

# Page 318

Description: 
Purpose: 
Configure Castle first consecutive frame with a user defined delay time measured from the Ecu flow control signal. 
Example: 
*_ApiConfigureNextSend_FirstConsecutiveDelay(5) 
Parameters:
Name Type EncodedType Unit
CfDelayint uint8 ms
The consecutive frame delay (in
ms).
Function: ConfigureNextSend_FlowControlData
Description: 
Purpose: 
Configure Castle next flow control frame data : receive block size and receive StMin. 
Example: 
*_ApiConfigureNextSend_FlowControlData(8, 10) 
Parameters:
Name Type EncodedType Unit
FcRecvBlockSizeint uint8
The flow control receive block size.
FcRecvStMinint uint8 ms
The flow control receive StMin (in
ms).
Function: ConfigureNextSend_FlowControlDelay
Description: 
Purpose: 
Configure Castle flow control signal with a user defined delay time measured from the Ecu first frame. 
Example: 
*_ApiConfigureNextSend_FlowControlDelay(10) 
Parameters:
Name TypeEncodedTypeUnit
FcDelayint uint16 ms
The flow control delay (in
ms).
Function: ConfigureNextSend_Response
Description: 
Purpose: 
Configure what is expected as response. 
Example: 
*_ApiConfigureNextSend_Response(true, false, true) 
Parameters:
Name Type EncodedType
SuppressNegRspboolean bool
If true, negative responses will be
suppressed.
SuppressPosRspboolean bool
If true, positive responses will be suppressed.
AllowResponsePendingboolean bool
If true, response pending is allowed.
Function: ConfigureNextSend_Retries
Description: 
Purpose: 
Configure options for automatic retry in the case where "busy repeat" was the response from ECU. 
Example: 
*_ApiConfigureNextSend_Retries(3, 10) 
Parameters:

---

# Page 319

Name TypeEncodedTypeScaleUnit
Retriesint uint8
The number of retries to perform.
PauseTimeint uint16 0.2 ms
The pause time between retries (in
ms).
Function: ConfigureNextSend_Timeout
Description: 
Purpose: 
Configure next timeout for all send actions 
Example: 
*_ApiConfigureNextSend_Timeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureNextSend_Type
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiConfigureNextSend_Type(true) 
Parameters:
Name Type EncodedType
AsFunctionalboolean bool
If true, the request will be sent as a functional request. If false, it will be sent as a physical
request.
Function: ConfigureUnexpectedReceive
Description: 
Purpose: 
Configure disabling/enabling the unexpected receive if no send action was made. 
Example: 
*_ApiConfigureUnexpectedReceive(true) 
Parameters:
Name Type EncodedType
AllowUnexpectedReceiveWarningboolean bool
If true, unexpected receive warning is allowed.
Function: Configure_OnTestResponseFailedLogResponseAsError
Description: 
Purpose: 
When enabled, and TestResponse fails, the response will be logged as an error. 
Example: 
*_ApiConfigure_OnTestResponseFailedLogResponseAsError(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable logging the response as an error when TestResponse
fails.
Function: CopyRequestBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the current request to a variable in the procunit. 
Example: 

---

# Page 320

*_ApiCopyRequestBitsToProcUnitVariable(2, 4, 8, false, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request bits to.
StartBitint uint16
The starting bit position in the current request data from which to copy.
BitLengthint uint16
The number of bits to copy from the request data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyRequestLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestLengthToProcUnitVariable(2) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the current request length will be
copied.
Function: CopyRequestToProcUnitVariable
Description: 
Purpose: 
Copy a part of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestToProcUnitVariable(2, 1, 3, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request data to.
Offsetint uint8
The starting offset in the current request data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the request data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: CopyResponseBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseBitsToProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response bits to.
StartBitint uint16
The starting bit position in the received response data from which to copy.
BitLengthint uint16
The number of bits to copy from the response data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).

---

# Page 321

Function: CopyResponseLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseLengthToProcUnitVariable(1) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the response length will be
copied.
Function: CopyResponseToProcUnitVariable
Description: 
Purpose: 
Copy a part of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseToProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response data to.
Offsetint uint8
The starting offset in the received response data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the response data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: EnablePadding
Description: 
Purpose: 
Enable or disable padding for diagnostic messages. Padding is enabled by default. 
Example: 
*_ApiEnablePadding(false) 
Parameters:
NameType EncodedType
Enableboolean bool
If true, enables padding for diagnostic messages; if false, disables padding. Padding is enabled by
default.
Function: GetCyclicResponse
Description: 
Purpose: 
Gets the latest response received from a cyclically sent diagnostic request. 
Example: 
*_ApiGetCyclicResponse() 
Function: Prepare
Description: 
Purpose: 
Prepare the request to be send. 
Example: 
*_ApiPrepare([0x10, 0x03]) 
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
The data to prepare for
sending.

---

# Page 322

Function: PrepareFromResponse
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareFromResponse() 
Function: PrepareModify
Description: 
Purpose: 
Modify the prepared request by replacing a byte sequence. 
Example: 
*_ApiPrepareModify(2, [0x01, 0x02]) 
Parameters:
NameTypeEncodedType Format
Offsetint uint16
The offset where to replace the
data.
Dataint[] uint8 raw
The data to replace with.
Function: PrepareModifyBits
Description: 
Purpose: 
Modify the prepared repuest by replacing a bit sequence. 
Example: 
*_ApiPrepareModifyBits(0x1234, 8, 16, true, false) 
Parameters:
Name Type EncodedType
Valuelong int64
The value to set.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as
signed.
Function: PrepareModifyBitsProcUnitVariable
Description: 
Purpose: 
Modify the prepared request by replacing a bit sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyBitsProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc
unit.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as signed.
Function: PrepareModifyFromResponsePart

---

# Page 323

Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareModifyFromResponsePart(2, 4, 1) 
Parameters:
Name Type EncodedType
RspPartOffsetint uint16
The offset of the response part to use.
RspPartLengthint uint16
The length of the response part to use.
ReqOffsetint uint16
The offset in the request where to insert the response
part.
Function: PrepareModifyProcUnitVariable
Description: 
Purpose: 
Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc unit.
Offsetint uint16
The offset where to replace the data.
ByteLengthint uint8
The length of the byte sequence to
replace.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
Function: PrepareModifyWithMask
Description: 
Purpose: 
Modify the prepared repuest by replacing a masked byte sequence. 
Example: 
*_ApiPrepareModifyWithMask(2, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset where to replace the data.
Dataint[] uint8 raw
The data to replace with.
Maskint[] uint8 raw
The mask to apply during
replacement.
Function: Send
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSend([0x10, 0x03]) 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 

---

# Page 324

Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be
sent.
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SendCyclicStartNoRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. No response is expected from the other part.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartNoRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStartWithRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. The response can be "get" though the API GetCyclicResponse.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartWithRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStop
Description: 
Purpose: 
Stops the cyclically sent diagnostic request. 
Example: 
*_ApiSendCyclicStop() 
Function: SendPrepared
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSendPrepared() 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Response timeout: 60000
Result Message: Log 

---

# Page 325

Faults: Protocol Timeout SchedNotRunning 
Function: SetPadding
Description: 
Purpose: 
Set the padding byte used in the Tx Diagnostic Buffer. 
Example: 
*_ApiSetPadding(0x55) 
Parameters:
NameType EncodedType
Valueint uint8
The byte value to be used for padding in the transmit diagnostic
buffer.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: 
Purpose: 
Test for a byte sequence in the response. 
Example: 
*_ApiTestByteSequence(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequence] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceDoesNotExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the
response.

---

# Page 326

Function: TestByteSequenceExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Function: TestByteSequenceNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match. 
Example: 
*_ApiTestByteSequenceNotMatching(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected to not be in the
response.
Response timeout: 0
Result Message: TestByteSequenceNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: 
Purpose: 
Test for a byte sequence in the response with a mask. 
Example: 
*_ApiTestByteSequenceWithMask(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMask] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.

---

# Page 327

Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMaskDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskDoesNotExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match, with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskNotMatching(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMaskNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected to not be in the response.
Response timeout: 0

---

# Page 328

Result Message: TestByteSequenceWithMaskNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is none of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueNoneOf(3, [0xCC, 0xDD]) 
Return Messages: 
On Success: 
Logs [TestByteValueNoneOf] if the response matches the expected response. 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset does not match any value in this
list.
Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is one of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueOneOf(3, [0xAA, 0xBB]) 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset matches any value in this
list.
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestResponse
Description: 
Purpose: 
Test if a response is stored. Then verify the response length is in range LengthMin .. LengthMax, inclusive. 
Example: 
*_ApiTestResponse(10, 20) 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
Name Type EncodedType
LengthMinint uint16
Minimal valid length of the response.
int uint16

---

# Page 329

LengthMaxMaximal valid length of the
response.
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestResponseNotReceived
Description: 
Purpose: 
Test if no response is stored. 
Example: 
*_ApiTestResponseNotReceived() 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestUdsDtcNotPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the absence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is NOT in the response, CASTLE generates 'TestUdsDtcPresence' information message with 0 byte index. 
If the DTC is in the list, CASTLE generates a 'TestUdsDtcPresence' error message with the byte index of the DTC in the
response. 
Example: 
*_ApiTestUdsDtcNotPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC not presenct as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
absence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the presence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response, CASTLE generates 'TestUdsDtcPresence' information message with the byte index of the
DTC in the response. 

---

# Page 330

If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message with 0 byte index. 
Example: 
*_ApiTestUdsDtcPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC presence as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
presence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcStatus
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the status of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response AND the expected status matches the masked status byte, CASTLE generates
'TestUdsDtcStatus' information message. 
If the DTC is in the response AND the expected status does not match the masked status byte, CASTLE generates
'TestUdsDtcStatus' error message. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message. 
Example: 
*_ApiTestUdsDtcStatus(0x123456, 0xFF, 0x01) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC status as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameType EncodedType Format
DtcIdint uint32 hex
The DTC ID to check for status.
Maskint uint8 hex
Only the masked bits will be tested in the status
byte.
Statusint uint8 hex
The expected status of the DTC.
Response timeout: 0
Result Message: TestUdsDtcStatus 
Faults: NoData 
Function: TestUdsDtcsPresentSubsetOf
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the existing DTCs are subset of a predefined list (DtcIdsAllowed). 
The received response must be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 

---

# Page 331

It is not mandatory that the response contains all DTCs exist in the list (DtcIdsAllowed). 
If any DTC in the response is NOT exist in the list (DtcIdsAllowed), CASTLE generates a 'TestUdsDtcsPresentSubsetOf'
error message with all present DTCs and not exist in the list. 
Example: 
*_ApiTestUdsDtcsPresentSubsetOf([0x123456, 0xABCDEF]) 
Return Messages: 
On Success: 
Logs [TestUdsDtcsPresentSubsetOf] if the subset dtc list as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [InvalidResponse] error if the subset is not present in the response. 
Parameters:
Name Type EncodedType Format
DtcIdsAllowedint[] uint32 hex
Array of all allowed DTCs (without status
mask).
Response timeout: 0
Result Message: TestUdsDtcsPresentSubsetOf 
Faults: NoData InvalidResponse 
Function: TestValueBitSequenceInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
start bit index in the data buffer the left
BitLengthint uint16
number of bits
IsLsbFirstboolean bool
true if the start bit is the least significant
AsSignedValueboolean bool
signed value or unsigned
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range. 
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit. 

---

# Page 332

 
1. Startbit 7, Length 8, Big Endian 
2. Startbit 8, Length 8, Little Endian 
3. Startbit 31, Length 9, Big Endian 
4. Startbit 48, Length 9, Little Endian 
If complete bytes shall be tested, see TestValueInRange. 
Example: 
*_ApiTestValueBitsInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.

---

# Page 333

 
1: Startbit 7, Length 8, Big Endian 
2: Startbit 8, Length 8, Little Endian 
3: Startbit 31, Length 9, Big Endian 
4: Startbit 48, Length 9, Little Endian 
Example: 
*_ApiTestValueBitsOutOfRange(true, 2, 2, true -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueOutOfRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit. The byte
order can be configured. 
Example: 
*_ApiTestValueInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian.
Offsetint uint16
Offset in byte count.

---

# Page 334

BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValueboolean bool
If true, interpret the value as signed.
LimitErrorMinlong int64
Minimum value that is not yet an error.
LimitWarnMinlong int64
Minimum value that is not yet a warning.
LimitWarnMaxlong int64
Maximum value that is not yet a warning.
LimitErrorMaxlong int64
Maximum value that is not yet an error.
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint16
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
back to interface definition
Messages
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list

---

# Page 335

Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetCyclicResponse
Description: Returns the latest response received from the cyclic diag request.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: InvalidMasklength
Description: The used mask length doesn't match the data length.
Message: InvalidResponse
Description: The current response is not valid to apply this API 
Used only with response 59 02 xx .....
Message: InvalidSearchStep
Description: The used search step is invalid.
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: LogAdditionBytesWithMask
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Mask int[]uint8 raw
Message: LogAdditionBytesWithShortData
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
ShortData int[]uint8 raw
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.

---

# Page 336

Message: PreparedRequest
Description: The data send out. This is generated by SendPreparedRequest
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: Protocol
Description: Transport layer error.
Parameters:
NameTypeEncodedType
Codeint int32
Message: ResponsePending
Description: DUT returned response pending.
Message: ResponseTooShort
Description: The received response is too Short.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: SchedNotRunning
Description: LinMaster scheduling is not running.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
ShortData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceDoesNotExist
Description: Tests the absence of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceExist
Description: Tests the existance of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceNotMatching
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:

---

# Page 337

Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMaskNotMatching
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestResponse
Description: Test if response is received and its length.
Parameters:
Name Type EncodedType
ResponseReceivedbooleanbool
Length int uint16
Message: TestUdsDtcPresence
Parameters:
NameTypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
Message: TestUdsDtcStatus
Parameters:
Name TypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
ExpectedStatusint uint8 hex
Status int uint8 hex
Mask int uint8 hex
Message: TestUdsDtcsPresentSubsetOf
Description: List all DTCs which are not allowed to be present
Parameters:
Name TypeEncodedTypeFormat
NotAllowedDtcsint[]uint32 hex
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin long int64
LimitWarnMin long int64
Value long int64
LimitWarnMax long int64
LimitErrorMax long int64
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:

---

# Page 338

Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin long int64
LimitErrorMin long int64
Value long int64
LimitErrorMax long int64
LimitWarnMax long int64
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive
Description: Received a frame from the DUT when it was not expected.
back to interface definition
Events
Event: ResponseReceived
Event: CyclicActionCompleted
back to interface definition
Interface: DiagSlave  extends _Object

---

# Page 339

Functions
Prepare
PrepareModify
PrepareModifyBits
PrepareModifyBitsProcUnitVariable
PrepareModifyProcUnitVariable
PrepareModifyWithMask
Send
SendPrepared
SetUserTag
Messages
GeneralMessage
Log
MsgTooLong
NoData
Protocol
ResponsePending
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
Events
RequestReceived
Objects
Functions
Function: Prepare
Description: Prepare the repuest to be send.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Function: PrepareModify
Description: Modify the prepared request by replacing a byte sequence.
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Function: PrepareModifyBits
Description: Modify the prepared repuest by replacing a bit sequence.
Parameters:
Name Type EncodedType
Value long int64
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: PrepareModifyBitsProcUnitVariable
Description: Modify the prepared repuest by replacing a bit sequence from a variable in the proc unit.
Parameters:
Name Type EncodedType
VariableIndex int uint8
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
AsSignedValue booleanbool
Function: PrepareModifyProcUnitVariable
Description: Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit.
Parameters:

---

# Page 340

Name Type EncodedType
VariableIndex int uint8
Offset int uint16
ByteLength int uint8
ByteOrderBigEndianbooleanbool
Function: PrepareModifyWithMask
Description: Modify the prepared repuest by replacing a masked byte sequence.
Parameters:
NameTypeEncodedTypeFormat
Offsetint uint16
Data int[]uint8 raw
Maskint[]uint8 raw
Function: Send
Description: Send a diagnostic response. If a response is received, store it in the internal buffer and generate a logging
message
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Response timeout: 5000
Result Message: Log 
Faults: Protocol Timeout 
Function: SendPrepared
Description: Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging
message
Response timeout: 5000
Result Message: Log 
Faults: Protocol Timeout 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.
Message: Protocol
Description: Transport layer error.

---

# Page 341

Message: ResponsePending
Description: DUT returned response pending.
Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive
Description: Received a frame from the DUT when it was not expected.
back to interface definition
Events
Event: RequestReceived
back to interface definition
Interface: FlexrayDriver  extends _Object
Description: Related to the FR controller functionality.
Enumerations
FrChannel
PocEvent
Functions
DisableFlexrayFilter
Init
InjectRxFrame
MemoryDump
NoRestartWhenActive
OnDutWakeup
SetUserTag
ShutdownCluster
StartupCluster
WakeupCluster
Messages
BusErrors
ClockAndResetIrq
ClusterAlreadyRunning
DumpFrControllerRegisters
DutWakeup
DutWakeupDebouncedEnd
DutWakeupDetected
ErrEvent
GeneralMessage
InvalidPocStateTransition
OnlyFlexrayController_4310IsSupported
PocEvent
ProtocolCommandWriteIsBusy
ProtocolState
StartupCausedByDutWakeup
Enumerations

---

# Page 342

Enum: FrChannel
Description: A or B
Value
A
B
Enum: PocEvent
Description: Event of the protocol operation control
Value
Timer_1_expired
Timer_2_expired
Transmission_across_boundary_on_channel_A
Transmission_across_boundary_on_channel_B
Violation_on_Channel_A
Violation_on_Channel_B
Media_Access_Test_Symbol_Received
Max_Sync_Frames_Detected
Clock_Correction_Limit_Reached
Missing_Offset_Correction
Missing_Rate_Correction
Cold_Start_Abort
Illegal_Protocol_Configuration
Internal_Protocol_Error
Fatal_Protocol_Error
Odd_Cycle_Table_Written_Interrupt_Flag
Even_Cycle_Table_Written_Interrupt_Flag
Slot_Status_Counter_0_Incremented
Slot_Status_Counter_1_Incremented
Slot_Status_Counter_2_Incremented
Slot_Status_Counter_3_Incremented
Protocol_Engine_Communication_Failure
Illegal_Protocol_Control_Command
Error_Mode_Changed
Functions
Function: DisableFlexrayFilter
Description: 
Purpose: 
This function is used to disable the FlexRay filter feature if it is not stable. 
Example: 
*_ApiDisableFlexrayFilter(true);
Parameters:
Name Type EncodedType
Disableboolean bool
A boolean value to disable (true) or enable (false) the FlexRay
filter.
Function: Init
Description: 
Purpose: 
Initialize the flexray hardware and status variables. This is done already after PIM power up, but can be redone at request.
After Init, the PIM is ready but passive on the flexray bus. 
Example: 
*_ApiInit();
Function: InjectRxFrame
Description: 
Purpose: 
This function simulates the reception of a FlexRay frame, allowing for testing of processing logic without actual hardware
communication. 
Example: 
*_ApiInjectRxFrame(A, 10, 100, [0x01, 0x02, 0x03, 0x04]);

---

# Page 343

Parameters:
Name Type EncodedType Format
ChannelFrChannel int -
Specifies the FlexRay channel (A or B) on which the frame is simulated to be
received.
SlotIdint int32
The slot ID of the simulated received frame.
CycleCounterint int32
The cycle counter value of the simulated received frame.
Payloadint[] uint8 raw
The payload data of the simulated received frame.
Function: MemoryDump
Description: 
Purpose: 
This function is used to trigger a memory dump of the FlexRay controller. 
Example: 
*_ApiMemoryDump();
Function: NoRestartWhenActive
Description: 
Purpose: 
if set to true and POC is normal Active then FR Init, Wakupcluster, Startupcluster is skipped when called because FR is
already running 
Example: 
*_ApNoRestartWhenActive(true); 
Parameters:
Name Type EncodedType
NoRestartboolean bool
A boolean value. If set to true, the FlexRay initialization, wakeup, and startup sequences are skipped if the FlexRay cluster
is already running in the normal active state.
Function: OnDutWakeup
Description: 
Purpose: 
This function configures the behavior of the system in case of a wakeup event from the Device Under Test (DUT). 
Example: 
*_ApiOnDutWakeup(true, false, 100);
Parameters:
Name Type EncodedType Unit
GenerateErrorboolean bool
A boolean value indicating whether to generate an error in response to a DUT wakeup.
DoStartupboolean bool
A boolean value indicating whether to initiate a startup sequence in response to a DUT
wakeup.
StartUpDebounceDelayint uint16 ms
The debounce delay in milliseconds to wait before processing a DUT wakeup event.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: ShutdownCluster
Description: 
Purpose: 
Stops the Flexray Cluster. The cluster can be reactivated with Startup. Castle is still able to receive wakeup events. A call
to Init is optional. 

---

# Page 344

Example: 
*_ApiShutdownCluster(true);
Parameters:
Name Type EncodedType Default
ResetBuffersboolean bool true
Activate/Deactivate resetting FR payload buffers (frames, pdus and signals) to zero. By default resetting FR buffers is
activated.
Function: StartupCluster
Description: 
Purpose: 
Starts the Flexray Cluster with the internal controllers. 
Example: 
*_ApiStartupCluster();
Function: WakeupCluster
Description: Send a wakeup pattern on the flexray. This shall only be called while the flexray is not running.
back to interface definition
Messages
Message: BusErrors
Parameters:
Name TypeEncodedType
ReInitCountint uint16
ErrorCountint uint16
Message: ClockAndResetIrq
Parameters:
Name Type EncodedType
Controller int uint8
LowVoltageResetOccured booleanbool
ClockMonitorResetOccuredbooleanbool
PowerOnResetOccured booleanbool
ExternalResetOccured booleanbool
Message: ClusterAlreadyRunning
Parameters:
Name TypeEncodedType
CurrentProtocolStateint uint8
Message: DumpFrControllerRegisters
Description: Dump Fr Controller main Registers
Parameters:
Name Type EncodedTypeFormat
CcIndexbooleanbool
chierfr int uint16 hex
gifer int uint16 hex
pifr0 int uint16 hex
pifr1 int uint16 hex
psr0 int uint16 hex
psr1 int uint16 hex
psr2 int uint16 hex
psr3 int uint16 hex
Message: DutWakeup
Message: DutWakeupDebouncedEnd
Message: DutWakeupDetected
Message: ErrEvent
Parameters:
NameTypeEncodedType

---

# Page 345

Whatint uint8
CcId int uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: InvalidPocStateTransition
Parameters:
Name TypeEncodedType
CurrentProtocolState int uint8
NextRequestedProtocolStateint uint8
NextCorrectProtocolState int uint8
Message: OnlyFlexrayController_4310IsSupported
Description: If this message raised to you. You have to check the Bus Interface (BIP). It may be corrupted or not connected
properly.
Parameters:
Name Type EncodedType
CcIndexbooleanbool
Message: PocEvent
Parameters:
Name Type EncodedType
Controllerint uint8
Event PocEventint
Message: ProtocolCommandWriteIsBusy
Description: If this message raised to you. You have to check the Bus Interface (BIP). It may be corrupted or not connected
properly.
Parameters:
Name Type EncodedType
CcIndexbooleanbool
Message: ProtocolState
Parameters:
Name TypeEncodedType
Controller int uint8
ProtocolStateint uint8
Message: StartupCausedByDutWakeup
back to interface definition
Objects
Object: DutWakeupCounter
Description: Number of DUT wakeup events received.
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
DutWakeupCounter_SignalSignalint 0 1 2 false false
Object: ValidFramesPerSec
Description: Updated every 250ms, showing the rate per second
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ValidFramesPerSec_SignalSignalint 0 1 1/s2 false false
Object: ErrorFramesPerSec
Description: Updated every 250ms, showing the rate per second
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
ErrorFramesPerSec_SignalSignalint 0 1 1/s2 false false
Object: NullFramesPerSec
Description: Updated every 250ms, showing the rate per second

---

# Page 346

Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
NullFramesPerSec_SignalSignalint 0 1 1/s2 false false
Object: isReplaymode
Description: Updated every 250ms, showing the rate per second
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
isReplaymode_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: FlexrayDiag  extends Diag _Object
Functions
CalculateAccessKey
ConfigureDefaultTimeout
ConfigureDiag
ConfigureFlowControlSendStMin
ConfigureNextSend_DisableTimeout
ConfigureNextSend_FirstConsecutiveDelay
ConfigureNextSend_FlowControlData
ConfigureNextSend_FlowControlDelay
ConfigureNextSend_Response
ConfigureNextSend_Retries
ConfigureNextSend_Timeout
ConfigureNextSend_Type
ConfigureUnexpectedReceive
Configure_OnTestResponseFailedLogResponseAsError
CopyRequestBitsToProcUnitVariable
CopyRequestLengthToProcUnitVariable
CopyRequestToProcUnitVariable
CopyResponseBitsToProcUnitVariable
CopyResponseLengthToProcUnitVariable
CopyResponseToProcUnitVariable
EnablePadding
GetCyclicResponse
Prepare
PrepareFromResponse
PrepareModify
PrepareModifyBits
PrepareModifyBitsProcUnitVariable
PrepareModifyFromResponsePart
PrepareModifyProcUnitVariable
PrepareModifyWithMask
Send
SendCyclicStartNoRespMinDelay
SendCyclicStartWithRespMinDelay
SendCyclicStop
SendPrepared
SetPadding
SetUserTag
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskDoesNotExist
TestByteSequenceWithMaskExist
TestByteSequenceWithMaskNotMatching
TestByteValueNoneOf
TestByteValueOneOf
TestResponse
TestResponseNotReceived
TestUdsDtcNotPresent
TestUdsDtcPresent
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitSequenceInRange
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange

---

# Page 347

Messages
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage
GetCyclicResponse
IndexOutOfBounds
InvalidMasklength
InvalidResponse
InvalidSearchStep
Log
LogAdditionBytesWithMask
LogAdditionBytesWithShortData
MsgTooLong
NoData
PreparedRequest
Protocol
ResponsePending
ResponseTooShort
SchedNotRunning
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskNotMatching
TestResponse
TestUdsDtcPresence
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
Events
ResponseReceived
CyclicActionCompleted
Objects
Functions
Function: CalculateAccessKey
Description: 
Purpose: 
Calculate a security access key based on a seed and other parameters. 
Example: 
*_ApiCalculateAccessKey(4, 4, 2, 2, 0x01, [0xDE, 0xAD, 0xBE, 0xEF]) 
Parameters:
Name Type EncodedType Default
SeedSizeint uint32
The seed size in bytes
KeySizeint uint32
The key size in bytes
SeedOffsetint uint32
The seed offset in diag response buffer
KeyOffsetint uint32
The key offset in diag request buffer
SecurityLevelint uint8
Security Level Number
StaticKeyint[] uint8 []
To Decrypt/Encrypt Seed/Key (e.g. In AES128 Algo). Leave it empty if not
needed
Function: ConfigureDefaultTimeout

---

# Page 348

Description: 
Purpose: 
Configure default timeout for all send actions. 
Example: 
*_ApiConfigureDefaultTimeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureDiag
Description: 
Purpose: 
Configure Diag Module: Enable/Disable Tp. 
Example: 
*_ApiConfigureDiag(true) 
Parameters:
Name Type EncodedType
EnableTpboolean bool
If true, enables the Transport Protocol (TP) layer for diagnostics; if false, disables
it.
Function: ConfigureFlowControlSendStMin
Description: 
Purpose: 
Configure CASTLE to overwrite STMin value received from the ECU in Flow Control Frame 
Example: 
*_ApiConfigureFlowControlSendStMin(10, UserInput) 
Parameters:
Name Type EncodedTypeUnit
FcSendStMinint uint8 ms
The flow control send StMin (in ms).
SendStMinModeSendStMinModeint -
The mode for sending StMin.
Function: ConfigureNextSend_DisableTimeout
Description: 
Purpose: 
Configure disabling the timeout for the next send action. 
Example: 
*_ApiConfigureNextSend_DisableTimeout() 
Function: ConfigureNextSend_FirstConsecutiveDelay
Description: 
Purpose: 
Configure Castle first consecutive frame with a user defined delay time measured from the Ecu flow control signal. 
Example: 
*_ApiConfigureNextSend_FirstConsecutiveDelay(5) 
Parameters:
Name Type EncodedType Unit
CfDelayint uint8 ms
The consecutive frame delay (in
ms).
Function: ConfigureNextSend_FlowControlData
Description: 
Purpose: 

---

# Page 349

Configure Castle next flow control frame data : receive block size and receive StMin. 
Example: 
*_ApiConfigureNextSend_FlowControlData(8, 10) 
Parameters:
Name Type EncodedType Unit
FcRecvBlockSizeint uint8
The flow control receive block size.
FcRecvStMinint uint8 ms
The flow control receive StMin (in
ms).
Function: ConfigureNextSend_FlowControlDelay
Description: 
Purpose: 
Configure Castle flow control signal with a user defined delay time measured from the Ecu first frame. 
Example: 
*_ApiConfigureNextSend_FlowControlDelay(10) 
Parameters:
Name TypeEncodedTypeUnit
FcDelayint uint16 ms
The flow control delay (in
ms).
Function: ConfigureNextSend_Response
Description: 
Purpose: 
Configure what is expected as response. 
Example: 
*_ApiConfigureNextSend_Response(true, false, true) 
Parameters:
Name Type EncodedType
SuppressNegRspboolean bool
If true, negative responses will be
suppressed.
SuppressPosRspboolean bool
If true, positive responses will be suppressed.
AllowResponsePendingboolean bool
If true, response pending is allowed.
Function: ConfigureNextSend_Retries
Description: 
Purpose: 
Configure options for automatic retry in the case where "busy repeat" was the response from ECU. 
Example: 
*_ApiConfigureNextSend_Retries(3, 10) 
Parameters:
Name TypeEncodedTypeScaleUnit
Retriesint uint8
The number of retries to perform.
PauseTimeint uint16 0.2 ms
The pause time between retries (in
ms).
Function: ConfigureNextSend_Timeout
Description: 
Purpose: 
Configure next timeout for all send actions 
Example: 
*_ApiConfigureNextSend_Timeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit

---

# Page 350

Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureNextSend_Type
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiConfigureNextSend_Type(true) 
Parameters:
Name Type EncodedType
AsFunctionalboolean bool
If true, the request will be sent as a functional request. If false, it will be sent as a physical
request.
Function: ConfigureUnexpectedReceive
Description: 
Purpose: 
Configure disabling/enabling the unexpected receive if no send action was made. 
Example: 
*_ApiConfigureUnexpectedReceive(true) 
Parameters:
Name Type EncodedType
AllowUnexpectedReceiveWarningboolean bool
If true, unexpected receive warning is allowed.
Function: Configure_OnTestResponseFailedLogResponseAsError
Description: 
Purpose: 
When enabled, and TestResponse fails, the response will be logged as an error. 
Example: 
*_ApiConfigure_OnTestResponseFailedLogResponseAsError(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable logging the response as an error when TestResponse
fails.
Function: CopyRequestBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestBitsToProcUnitVariable(2, 4, 8, false, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request bits to.
StartBitint uint16
The starting bit position in the current request data from which to copy.
BitLengthint uint16
The number of bits to copy from the request data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyRequestLengthToProcUnitVariable

---

# Page 351

Description: 
Purpose: 
Copy the length of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestLengthToProcUnitVariable(2) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the current request length will be
copied.
Function: CopyRequestToProcUnitVariable
Description: 
Purpose: 
Copy a part of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestToProcUnitVariable(2, 1, 3, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request data to.
Offsetint uint8
The starting offset in the current request data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the request data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: CopyResponseBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseBitsToProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response bits to.
StartBitint uint16
The starting bit position in the received response data from which to copy.
BitLengthint uint16
The number of bits to copy from the response data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyResponseLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseLengthToProcUnitVariable(1) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the response length will be
copied.
Function: CopyResponseToProcUnitVariable
Description: 

---

# Page 352

Purpose: 
Copy a part of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseToProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response data to.
Offsetint uint8
The starting offset in the received response data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the response data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: EnablePadding
Description: 
Purpose: 
Enable or disable padding for diagnostic messages. Padding is enabled by default. 
Example: 
*_ApiEnablePadding(false) 
Parameters:
NameType EncodedType
Enableboolean bool
If true, enables padding for diagnostic messages; if false, disables padding. Padding is enabled by
default.
Function: GetCyclicResponse
Description: 
Purpose: 
Gets the latest response received from a cyclically sent diagnostic request. 
Example: 
*_ApiGetCyclicResponse() 
Function: Prepare
Description: 
Purpose: 
Prepare the request to be send. 
Example: 
*_ApiPrepare([0x10, 0x03]) 
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
The data to prepare for
sending.
Function: PrepareFromResponse
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareFromResponse() 
Function: PrepareModify
Description: 
Purpose: 
Modify the prepared request by replacing a byte sequence. 
Example: 
*_ApiPrepareModify(2, [0x01, 0x02]) 

---

# Page 353

Parameters:
NameTypeEncodedType Format
Offsetint uint16
The offset where to replace the
data.
Dataint[] uint8 raw
The data to replace with.
Function: PrepareModifyBits
Description: 
Purpose: 
Modify the prepared repuest by replacing a bit sequence. 
Example: 
*_ApiPrepareModifyBits(0x1234, 8, 16, true, false) 
Parameters:
Name Type EncodedType
Valuelong int64
The value to set.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as
signed.
Function: PrepareModifyBitsProcUnitVariable
Description: 
Purpose: 
Modify the prepared request by replacing a bit sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyBitsProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc
unit.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as signed.
Function: PrepareModifyFromResponsePart
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareModifyFromResponsePart(2, 4, 1) 
Parameters:
Name Type EncodedType
RspPartOffsetint uint16
The offset of the response part to use.
RspPartLengthint uint16
The length of the response part to use.
ReqOffsetint uint16
The offset in the request where to insert the response
part.

---

# Page 354

Function: PrepareModifyProcUnitVariable
Description: 
Purpose: 
Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc unit.
Offsetint uint16
The offset where to replace the data.
ByteLengthint uint8
The length of the byte sequence to
replace.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
Function: PrepareModifyWithMask
Description: 
Purpose: 
Modify the prepared repuest by replacing a masked byte sequence. 
Example: 
*_ApiPrepareModifyWithMask(2, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset where to replace the data.
Dataint[] uint8 raw
The data to replace with.
Maskint[] uint8 raw
The mask to apply during
replacement.
Function: Send
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSend([0x10, 0x03]) 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be
sent.
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SendCyclicStartNoRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. No response is expected from the other part.
Implemented for CAN and Flexray. Not yet implemented for LIN. 

---

# Page 355

Example: 
*_ApiSendCyclicStartNoRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStartWithRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. The response can be "get" though the API GetCyclicResponse.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartWithRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStop
Description: 
Purpose: 
Stops the cyclically sent diagnostic request. 
Example: 
*_ApiSendCyclicStop() 
Function: SendPrepared
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSendPrepared() 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SetPadding
Description: 
Purpose: 
Set the padding byte used in the Tx Diagnostic Buffer. 
Example: 
*_ApiSetPadding(0x55) 
Parameters:
NameType EncodedType
Valueint uint8
The byte value to be used for padding in the transmit diagnostic
buffer.

---

# Page 356

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: 
Purpose: 
Test for a byte sequence in the response. 
Example: 
*_ApiTestByteSequence(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequence] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceDoesNotExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the
response.
Function: TestByteSequenceExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.

---

# Page 357

Dataint[] uint8 raw
Raw data that is expected in the
response.
Function: TestByteSequenceNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match. 
Example: 
*_ApiTestByteSequenceNotMatching(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected to not be in the
response.
Response timeout: 0
Result Message: TestByteSequenceNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: 
Purpose: 
Test for a byte sequence in the response with a mask. 
Example: 
*_ApiTestByteSequenceWithMask(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMask] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMaskDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskDoesNotExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
int uint8

---

# Page 358

StartIndex The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match, with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskNotMatching(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMaskNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected to not be in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMaskNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is none of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueNoneOf(3, [0xCC, 0xDD]) 
Return Messages: 
On Success: 

---

# Page 359

Logs [TestByteValueNoneOf] if the response matches the expected response. 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset does not match any value in this
list.
Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is one of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueOneOf(3, [0xAA, 0xBB]) 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset matches any value in this
list.
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestResponse
Description: 
Purpose: 
Test if a response is stored. Then verify the response length is in range LengthMin .. LengthMax, inclusive. 
Example: 
*_ApiTestResponse(10, 20) 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
Name Type EncodedType
LengthMinint uint16
Minimal valid length of the response.
LengthMaxint uint16
Maximal valid length of the
response.
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestResponseNotReceived
Description: 
Purpose: 
Test if no response is stored. 
Example: 
*_ApiTestResponseNotReceived() 
Return Messages: 
On Success: 

---

# Page 360

Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestUdsDtcNotPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the absence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is NOT in the response, CASTLE generates 'TestUdsDtcPresence' information message with 0 byte index. 
If the DTC is in the list, CASTLE generates a 'TestUdsDtcPresence' error message with the byte index of the DTC in the
response. 
Example: 
*_ApiTestUdsDtcNotPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC not presenct as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
absence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the presence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response, CASTLE generates 'TestUdsDtcPresence' information message with the byte index of the
DTC in the response. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message with 0 byte index. 
Example: 
*_ApiTestUdsDtcPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC presence as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
presence.
Response timeout: 0

---

# Page 361

Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcStatus
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the status of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response AND the expected status matches the masked status byte, CASTLE generates
'TestUdsDtcStatus' information message. 
If the DTC is in the response AND the expected status does not match the masked status byte, CASTLE generates
'TestUdsDtcStatus' error message. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message. 
Example: 
*_ApiTestUdsDtcStatus(0x123456, 0xFF, 0x01) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC status as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameType EncodedType Format
DtcIdint uint32 hex
The DTC ID to check for status.
Maskint uint8 hex
Only the masked bits will be tested in the status
byte.
Statusint uint8 hex
The expected status of the DTC.
Response timeout: 0
Result Message: TestUdsDtcStatus 
Faults: NoData 
Function: TestUdsDtcsPresentSubsetOf
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the existing DTCs are subset of a predefined list (DtcIdsAllowed). 
The received response must be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
It is not mandatory that the response contains all DTCs exist in the list (DtcIdsAllowed). 
If any DTC in the response is NOT exist in the list (DtcIdsAllowed), CASTLE generates a 'TestUdsDtcsPresentSubsetOf'
error message with all present DTCs and not exist in the list. 
Example: 
*_ApiTestUdsDtcsPresentSubsetOf([0x123456, 0xABCDEF]) 
Return Messages: 
On Success: 
Logs [TestUdsDtcsPresentSubsetOf] if the subset dtc list as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [InvalidResponse] error if the subset is not present in the response. 
Parameters:
Name Type EncodedType Format

---

# Page 362

DtcIdsAllowedint[] uint32 hex
Array of all allowed DTCs (without status
mask).
Response timeout: 0
Result Message: TestUdsDtcsPresentSubsetOf 
Faults: NoData InvalidResponse 
Function: TestValueBitSequenceInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
start bit index in the data buffer the left
BitLengthint uint16
number of bits
IsLsbFirstboolean bool
true if the start bit is the least significant
AsSignedValueboolean bool
signed value or unsigned
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range. 
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit. 
 
1. Startbit 7, Length 8, Big Endian 
2. Startbit 8, Length 8, Little Endian 
3. Startbit 31, Length 9, Big Endian 
4. Startbit 48, Length 9, Little Endian 

---

# Page 363

If complete bytes shall be tested, see TestValueInRange. 
Example: 
*_ApiTestValueBitsInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
 
1: Startbit 7, Length 8, Big Endian 
2: Startbit 8, Length 8, Little Endian 
3: Startbit 31, Length 9, Big Endian 
4: Startbit 48, Length 9, Little Endian 
Example: 
*_ApiTestValueBitsOutOfRange(true, 2, 2, true -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueOutOfRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 

---

# Page 364

Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit. The byte
order can be configured. 
Example: 
*_ApiTestValueInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian.
Offsetint uint16
Offset in byte count.
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValueboolean bool
If true, interpret the value as signed.
LimitErrorMinlong int64
Minimum value that is not yet an error.
LimitWarnMinlong int64
Minimum value that is not yet a warning.
LimitWarnMaxlong int64
Maximum value that is not yet a warning.
LimitErrorMaxlong int64
Maximum value that is not yet an error.
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 

---

# Page 365

Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint16
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
back to interface definition
Messages
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetCyclicResponse
Description: Returns the latest response received from the cyclic diag request.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: InvalidMasklength

---

# Page 366

Description: The used mask length doesn't match the data length.
Message: InvalidResponse
Description: The current response is not valid to apply this API 
Used only with response 59 02 xx .....
Message: InvalidSearchStep
Description: The used search step is invalid.
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: LogAdditionBytesWithMask
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Mask int[]uint8 raw
Message: LogAdditionBytesWithShortData
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
ShortData int[]uint8 raw
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.
Message: PreparedRequest
Description: The data send out. This is generated by SendPreparedRequest
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: Protocol
Description: Transport layer error.
Parameters:
NameTypeEncodedType
Codeint int32
Message: ResponsePending
Description: DUT returned response pending.
Message: ResponseTooShort
Description: The received response is too Short.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: SchedNotRunning

---

# Page 367

Description: LinMaster scheduling is not running.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
ShortData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceDoesNotExist
Description: Tests the absence of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceExist
Description: Tests the existance of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceNotMatching
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMaskNotMatching
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestResponse
Description: Test if response is received and its length.
Parameters:
Name Type EncodedType
ResponseReceivedbooleanbool
Length int uint16

---

# Page 368

Message: TestUdsDtcPresence
Parameters:
NameTypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
Message: TestUdsDtcStatus
Parameters:
Name TypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
ExpectedStatusint uint8 hex
Status int uint8 hex
Mask int uint8 hex
Message: TestUdsDtcsPresentSubsetOf
Description: List all DTCs which are not allowed to be present
Parameters:
Name TypeEncodedTypeFormat
NotAllowedDtcsint[]uint32 hex
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin long int64
LimitWarnMin long int64
Value long int64
LimitWarnMax long int64
LimitErrorMax long int64
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin long int64
LimitErrorMin long int64
Value long int64
LimitErrorMax long int64
LimitWarnMax long int64
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange

---

# Page 369

Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive
Description: Received a frame from the DUT when it was not expected.
back to interface definition
Events
Event: ResponseReceived
Event: CyclicActionCompleted
back to interface definition
Interface: FlexrayXcp  extends XCP _Object
Functions
AlignRespCounter
ConfigureByteOrder
ConfigureLogging
EnableRxProcessing
SendRaw
SendRawConcatenated
Send_Connect
Send_Disconnect
Send_Download
Send_GET_COMM_MODE_INFO
Send_GET_ID
Send_GetStatus
Send_ModifyBits
Send_SetMta
Send_ShortUpload
Send_Synch
Send_UPLOAD
SetUserTag
Set_XCPResCntIncStep
Set_XcpReqCnt
TestByteSequence
TestByteSequenceNotEqual
TestNoEcuResponse
TestPattern
TestPositiveResponse

---

# Page 370

TestValueRangeSigned
TestValueRangeUnsigned
_Init
Messages
ByteSequenceMatching
ByteSequenceNotMatching
GeneralMessage
NoData
PatternNotMatching
Send_ShortUpload
TestResult
TestValueRangeSigned
TestValueRangeUnsigned
Timeout
UploadData
XCPProtocolIndication
Functions
Function: AlignRespCounter
Description: Align Expected Response Counter with Obtained Response
Function: ConfigureByteOrder
Parameters:
Name Type EncodedType
isBigEndianbooleanbool
Function: ConfigureLogging
Description: Configure the logging behaviour.
Parameters:
Name Type EncodedType
EveryReceivedFramebooleanbool
Function: EnableRxProcessing
Description: Configure disabling/enabling receiving pdu. Default is Enabled
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SendRaw
Description: Send raw data[0..83]
Parameters:
NameTypeEncodedType
Data int[]uint8
Function: SendRawConcatenated
Parameters:
Name TypeEncodedType
Data int[]uint8
concatMsgsLengthint[]uint8
Function: Send_Connect
Description: Establishes a continuous, logical, point-to-point connection with a slave device.
Parameters:
NameTypeEncodedType
Modeint uint8
Function: Send_Disconnect
Description: Brings the slave to the DISCONNECTED​ state.
Function: Send_Download
Description: Download from master to slave.
Parameters:

---

# Page 371

NameTypeEncodedType
Size int uint8
Data int[]uint8
Function: Send_GET_COMM_MODE_INFO
Description: Returns optional information on different Communication Modes supported by the slave.
Function: Send_GET_ID
Description: Used for automatic session configuration and for slave device identification.
Parameters:
NameTypeEncodedType
Typeint uint8
Function: Send_GetStatus
Description: Returns all current status information of the slave device. This includes the status of the resource protection,
pending store requests and the general status of data acquisition and stimulation.
Function: Send_ModifyBits
Description: Send Modify Bits command along with AND and XOR mask.
Parameters:
Name TypeEncodedType
ShiftValueint uint8
AND_Maskint[]uint8
XOR_Maskint[]uint8
Function: Send_SetMta
Description: Send SetMta Command 0xF6
Parameters:
Name TypeEncodedType
Address longuint64
AddressExtensionlonguint64
Function: Send_ShortUpload
Description: Upload from slave to master (short version).
Parameters:
Name Type EncodedType
Size int uint8
Address int uint32
AddressExtension int uint8
AllowNegResponsebooleanbool
Response timeout: 0
Result Message: Send_ShortUpload 
Faults: 
Function: Send_Synch
Description: Used to synchronize command execution after timeout conditions.
Function: Send_UPLOAD
Description: A data block of the specified length, starting at the current MTA, will be returned.
Parameters:
NameTypeEncodedType
Size int uint8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex

---

# Page 372

Function: Set_XCPResCntIncStep
Description: Overide the default XCP expected response counter incrementing step.
Parameters:
Name TypeEncodedType
incStepint uint8
Function: Set_XcpReqCnt
Description: Set XCP request counter to a given value
Parameters:
Name TypeEncodedType
RefCNTint uint8
Function: TestByteSequence
Description: Test that the received byte sequence is equal to the given byte sequence
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceNotMatching 
Function: TestByteSequenceNotEqual
Description: Test that the received byte sequence is not equal to the given byte sequence.
Parameters:
NameTypeEncodedType
Data int[]uint8
Offsetint uint8
Response timeout: 0
Result Message: TestResult 
Faults: ByteSequenceMatching 
Function: TestNoEcuResponse
Description: Test that no response is received from the Ecu.
Response timeout: 0
Result Message: TestResult 
Faults: 
Function: TestPattern
Description: Test that the received byte sequence is equal to the given pattern
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Mask int[]uint8
Offset int uint8
Response timeout: 0
Result Message: TestResult 
Faults: NoData PatternNotMatching 
Function: TestPositiveResponse
Description: Test that a positive response was received (0xFF).
Response timeout: 0
Result Message: TestResult 
Faults: 
Function: TestValueRangeSigned
Description: Test for a numerical value range, where the number is interpreted as signed value of 8, 16, 24 or 32 bit.
Parameters:
Name TypeEncodedType

---

# Page 373

Min int int32
Max int int32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeSigned 
Faults: NoData 
Function: TestValueRangeUnsigned
Description: Test for a numerical value range, where the number is interpreted as unsigned value of 8, 16, 24 or 32 bit.
Parameters:
Name TypeEncodedType
Min int uint32
Max int uint32
BytesCountint uint8
Offset int uint8
Response timeout: 0
Result Message: TestValueRangeUnsigned 
Faults: NoData 
Function: _Init
Parameters:
Name Type EncodedType
RequestFrame int _ComFrameFlexrayTx
ResponseFrame int _ComFrameFlexrayRx
NodeId int uint8
supportConcatenatonbooleanbool
back to interface definition
Messages
Message: ByteSequenceMatching
Parameters:
Name TypeEncodedType
Expectedint[]uint8
Obtainedint[]uint8
Message: ByteSequenceNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Expectedint[]uint8
Obtainedint[]uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NoData
Message: PatternNotMatching
Parameters:
Name TypeEncodedType
FailIndexint uint32
Mask int[]uint8
Expectedint[]uint8
Obtainedint[]uint8
Message: Send_ShortUpload
Message: TestResult
Message: TestValueRangeSigned

---

# Page 374

Parameters:
Name TypeEncodedType
Offset int uint8
BytesCountint uint8
Min int int32
Value int int32
Max int int32
Message: TestValueRangeUnsigned
Parameters:
Name TypeEncodedType
Offset int uint8
BytesCountint uint8
Min int uint32
Value int uint32
Max int uint32
Message: Timeout
Message: UploadData
Parameters:
Name Type EncodedType
isPositiveResponsebooleanbool
uploadSize int uint32
uploadAddrExt int uint32
uploadAddr int uint32
rxdata int[] uint8
Message: XCPProtocolIndication
Parameters:
Name TypeEncodedType
msgdataint[]uint8
back to interface definition
Interface: FlexrayBap  extends Bap _Object
Functions
ConfigureBapTimeout
SetFeatureID
SetHeader
SetUserTag
TestByteSequence
TestByteSequenceWithMask
TestByteValueNoneOf
TestByteValueOneOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
_Init
Messages
BapResponseLogging
BapTimeOut
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage
IndexOutOfBounds
NoData
TestByteSequence
TestByteSequenceWithMask
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Functions
Function: ConfigureBapTimeout

---

# Page 375

Description: Configures the maximum delay between consecutive bap frames
Parameters:
Name TypeEncodedTypeUnit
Timeoutint uint32 ms
Function: SetFeatureID
Description: Set the feature ID to be tested
Parameters:
Name Type EncodedType
CheckForAnyFeaturebooleanbool
FeatureID int uint8
Function: SetHeader
Description: Set the header to be tested
Parameters:
NameTypeEncodedType
Headerint uint8
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: Test for a byte sequence in the bap response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: Test for a byte sequence in the response.
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: Test that a byte in the Bap Response is none of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8

---

# Page 376

TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: Test that a byte in the Bap Response is one of some given list of values.
Offset: Byte Position
TestValues: Byte Array with needed list of values
Parameters:
Name TypeEncodedTypeFormat
Offset int uint8
TestValuesint[]uint8 raw
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestValueBitsInRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
If complete bytes shall be tested, see TestValueInRange.
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.

---

# Page 377

1: Startbit 7, Length 8, Big Endian
2: Startbit 8, Length 8, Little Endian
3: Startbit 31, Length 9, Big Endian
4: Startbit 48, Length 9, Little Endian
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit.
The byte order can be configured.
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: Test for a numerical value range, where the number is interpreted as (un)signed value. The limits values are
exclusive, so if the value is equal to a boundary it counts as out of range.
Parameters:

---

# Page 378

Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint8
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: _Init
Parameters:
Name TypeEncodedType
HeaderSignalint _Signal
To be removed later
HeaderFrameint _ComPduFlexrayRx
back to interface definition
Messages
Message: BapResponseLogging
Parameters:
Name TypeEncodedTypeFormat
msgdataint[]uint8 raw
Message: BapTimeOut
Description: Test of a byte sequence
Parameters:
NameTypeEncodedTypeUnit
delayint uint32 ms
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:

---

# Page 379

NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: NoData
Description: Data is not yet received.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin int uint32
LimitWarnMin int uint32
Value int uint32
LimitWarnMax int uint32
LimitErrorMax int uint32
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin int uint32
LimitErrorMin int uint32
Value int uint32
LimitErrorMax int uint32
LimitWarnMax int uint32
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Valuelongint64

---

# Page 380

LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
back to interface definition
Objects
Object: DLC
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
DLC _SignalSignalbyte 0 1 raw 1 false false
Object: FeatureID
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
FeatureID_SignalSignalbyte 0 1 raw 1 false false
Object: Data1
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data1_SignalSignalbyte 0 1 raw 1 false false
Object: Data2
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data2_SignalSignalbyte 0 1 raw 1 false false
Object: Data3
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data3_SignalSignalbyte 0 1 raw 1 false false
Object: Data4
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data4_SignalSignalbyte 0 1 raw 1 false false
Object: Data5
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data5_SignalSignalbyte 0 1 raw 1 false false
Object: Data6
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data6_SignalSignalbyte 0 1 raw 1 false false
Object: Data7
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data7_SignalSignalbyte 0 1 raw 1 false false
Object: Data8
NameInterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
Data8_SignalSignalbyte 0 1 raw 1 false false
Object: SegmentedDataBuffer
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
SegmentedDataBuffer_SignalSignalbyte 0 1 raw 256 false false
back to interface definition
Interface: EthernetDoIP  extends Diag _Object
Description: 
Purpose: Diagnostic over ip, to send or receive diagnostic messages over ip, using ethernet protocol 
Example: Typical example for using EthernetDoip: 
if(!isCastleServer) { 

---

# Page 381

exu.mod().().afcResetTcpConnection(); //optional 
} 
exu.pause(Default_pause); 
exu.mod().().afcResetDiagRequest(); 
exu.pause(Default_pause); 
exu.mod().().afcClearDoIPBuffer(); 
exu.pause(Default_pause); 
exu.mod().().afcChooseBuffers(EnmBuffersEnum.DoIP); 
exu.pause(Default_pause); 
exu.mod().().afcSend(""); 
exu.pause(Default_pause); 
exu.mod().().afcConfigureUnexpectedReceive(false); 
exu.pause(Default_pause); 
exu.mod().().afcChooseBuffers(EnmBuffersEnum.Diagnostics); 
exu.pause(Default_pause); 
exu.mod().().afcConfigureNextSend_Type(false); 
exu.pause(Default_pause); 
exu.mod().().afcSend(diagnostic_data); 
exu.pause(50); 
Important notes: 
If castle act as a server in doip communication with Ecu (less likely), then the boolean 
'your_module' is the module running name on the PIM you want to execute (e.g MM/TS/ETS) 
'Ethernet_doip_obj': represents the doip object, typically defined in config.appl/ file 
'isCastleServer' is true, otherwise its false 
'Default_pause' is >= 5ms according to your project needs 
'routing_activation_request': needed for most projects once before sending any diagnostic request. 
Its project dependant. it should be sent once at the beginning then subsequent 
diagnostic requests can be sent without it 
Enumerations
BuffersEnum
Functions
CalculateAccessKey
ChooseBuffers
ChooseCyclicBuffers
ClearDoIPBuffer
ConfigureDefaultTimeout
ConfigureDiag
ConfigureFlowControlSendStMin
ConfigureNextSend_DisableTimeout
ConfigureNextSend_FirstConsecutiveDelay
ConfigureNextSend_FlowControlData
ConfigureNextSend_FlowControlDelay
ConfigureNextSend_Response
ConfigureNextSend_Retries
ConfigureNextSend_Timeout
ConfigureNextSend_Type
ConfigureUnexpectedReceive
Configure_OnTestResponseFailedLogResponseAsError
CopyRequestBitsToProcUnitVariable
CopyRequestLengthToProcUnitVariable
CopyRequestToProcUnitVariable
CopyResponseBitsToProcUnitVariable
CopyResponseLengthToProcUnitVariable
CopyResponseToProcUnitVariable
EnablePadding
GetCyclicResponse
Prepare
PrepareFromResponse
PrepareModify
PrepareModifyBits
PrepareModifyBitsProcUnitVariable
PrepareModifyFromResponsePart
PrepareModifyProcUnitVariable
PrepareModifyWithMask
ResetDiagRequest
ResetTcpConnection
Send
SendCyclicStartNoRespMinDelay

---

# Page 382

SendCyclicStartWithRespMinDelay
SendCyclicStop
SendPrepared
SetFunctionalDestinationAddress
SetPadding
SetPhysicalDestinationAddress
SetSourceAddress
SetUserTag
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskDoesNotExist
TestByteSequenceWithMaskExist
TestByteSequenceWithMaskNotMatching
TestByteValueNoneOf
TestByteValueOneOf
TestResponse
TestResponseNotReceived
TestUdsDtcNotPresent
TestUdsDtcPresent
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitSequenceInRange
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
TlsInit
Messages
ByteValueTestNoneOf
ByteValueTestOneOf
DoIPLog
GeneralMessage
GetCyclicResponse
IndexOutOfBounds
InvalidMasklength
InvalidResponse
InvalidSearchStep
Log
LogAdditionBytesWithMask
LogAdditionBytesWithShortData
MsgTooLong
NoData
PreparedRequest
Protocol
ResponsePending
ResponseTooShort
SchedNotRunning
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskNotMatching
TestResponse
TestUdsDtcPresence
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
Events

---

# Page 383

ResponseReceived
CyclicActionCompleted
Objects
Enumerations
Enum: BuffersEnum
Value
DoIP
Diagnostics
Functions
Function: CalculateAccessKey
Description: 
Purpose: 
Calculate a security access key based on a seed and other parameters. 
Example: 
*_ApiCalculateAccessKey(4, 4, 2, 2, 0x01, [0xDE, 0xAD, 0xBE, 0xEF]) 
Parameters:
Name Type EncodedType Default
SeedSizeint uint32
The seed size in bytes
KeySizeint uint32
The key size in bytes
SeedOffsetint uint32
The seed offset in diag response buffer
KeyOffsetint uint32
The key offset in diag request buffer
SecurityLevelint uint8
Security Level Number
StaticKeyint[] uint8 []
To Decrypt/Encrypt Seed/Key (e.g. In AES128 Algo). Leave it empty if not
needed
Function: ChooseBuffers
Description: 
Purpose: 
Choose internal buffers for Doip messages sent once, you can choose between Doip or diagnostic buffers 
Example: 
- if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcChooseBuffers(ItfEthernetDoIP.EnmBuffersEnum.DoIP); 
or afcChooseBuffers(ItfEthernetDoIP.EnmBuffersEnum.Diagnostics); 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: 
typically you would call this API with 'doip' option at the beginning of your test to send routing activation then call it again
with 'Diagnostic' option to start sending diagnostic requests 
Parameters:
NameType EncodedType
BuffersBuffersEnum int
internal buffers to be used in doip communication. you can choose either doip or diagnostic buffers. it changes the scope of the
data you interested in, whether its diagnostic data or doip protocol dependant data
Function: ChooseCyclicBuffers
Description: 
Purpose: 
Choose internal buffers for Doip messages sent cyclic, you can choose between Doip or diagnostic buffers 
Example: 
- if your Doip object defined in the project config.appl/ as 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcChooseCyclicBuffers(ItfEthernetDoIP.EnmBuffersEnum.DoIP); 
or afcChooseBuffers(ItfEthernetDoIP.EnmBuffersEnum.Diagnostics); 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 

---

# Page 384

Dependency: 
typically you would call this API with 'doip' option at the beginning of your test to send routing activation then call it again
with 'Diagnostic' option to start sending diagnostic requests 
Parameters:
NameType EncodedType
BuffersBuffersEnum int
internal buffers to be used in doip communication. you can choose either doip or diagnostic buffers. it changes the scope of the
data you interested in, whether its diagnostic data or doip protocol dependant data
Function: ClearDoIPBuffer
Description: 
Purpose: 
Clear DoIP buffer. If an error occured while receiving diagnostics data, clearing DoIP buffer at the end of the subseries of
test case, prevents error propagation. 
Example: 
- if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcClearDoIPBuffer(); 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: typically you can call this API before sending the next diag request to ensure there is no errors 
Function: ConfigureDefaultTimeout
Description: 
Purpose: 
Configure default timeout for all send actions. 
Example: 
*_ApiConfigureDefaultTimeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureDiag
Description: 
Purpose: 
Configure Diag Module: Enable/Disable Tp. 
Example: 
*_ApiConfigureDiag(true) 
Parameters:
Name Type EncodedType
EnableTpboolean bool
If true, enables the Transport Protocol (TP) layer for diagnostics; if false, disables
it.
Function: ConfigureFlowControlSendStMin
Description: 
Purpose: 
Configure CASTLE to overwrite STMin value received from the ECU in Flow Control Frame 
Example: 
*_ApiConfigureFlowControlSendStMin(10, UserInput) 
Parameters:
Name Type EncodedTypeUnit
FcSendStMinint uint8 ms
The flow control send StMin (in ms).
SendStMinModeSendStMinModeint -
The mode for sending StMin.

---

# Page 385

Function: ConfigureNextSend_DisableTimeout
Description: 
Purpose: 
Configure disabling the timeout for the next send action. 
Example: 
*_ApiConfigureNextSend_DisableTimeout() 
Function: ConfigureNextSend_FirstConsecutiveDelay
Description: 
Purpose: 
Configure Castle first consecutive frame with a user defined delay time measured from the Ecu flow control signal. 
Example: 
*_ApiConfigureNextSend_FirstConsecutiveDelay(5) 
Parameters:
Name Type EncodedType Unit
CfDelayint uint8 ms
The consecutive frame delay (in
ms).
Function: ConfigureNextSend_FlowControlData
Description: 
Purpose: 
Configure Castle next flow control frame data : receive block size and receive StMin. 
Example: 
*_ApiConfigureNextSend_FlowControlData(8, 10) 
Parameters:
Name Type EncodedType Unit
FcRecvBlockSizeint uint8
The flow control receive block size.
FcRecvStMinint uint8 ms
The flow control receive StMin (in
ms).
Function: ConfigureNextSend_FlowControlDelay
Description: 
Purpose: 
Configure Castle flow control signal with a user defined delay time measured from the Ecu first frame. 
Example: 
*_ApiConfigureNextSend_FlowControlDelay(10) 
Parameters:
Name TypeEncodedTypeUnit
FcDelayint uint16 ms
The flow control delay (in
ms).
Function: ConfigureNextSend_Response
Description: 
Purpose: 
Configure what is expected as response. 
Example: 
*_ApiConfigureNextSend_Response(true, false, true) 
Parameters:
Name Type EncodedType
SuppressNegRspboolean bool
If true, negative responses will be
suppressed.
SuppressPosRspboolean bool
If true, positive responses will be suppressed.
AllowResponsePendingboolean bool
If true, response pending is allowed.

---

# Page 386

Function: ConfigureNextSend_Retries
Description: 
Purpose: 
Configure options for automatic retry in the case where "busy repeat" was the response from ECU. 
Example: 
*_ApiConfigureNextSend_Retries(3, 10) 
Parameters:
Name TypeEncodedTypeScaleUnit
Retriesint uint8
The number of retries to perform.
PauseTimeint uint16 0.2 ms
The pause time between retries (in
ms).
Function: ConfigureNextSend_Timeout
Description: 
Purpose: 
Configure next timeout for all send actions 
Example: 
*_ApiConfigureNextSend_Timeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureNextSend_Type
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiConfigureNextSend_Type(true) 
Parameters:
Name Type EncodedType
AsFunctionalboolean bool
If true, the request will be sent as a functional request. If false, it will be sent as a physical
request.
Function: ConfigureUnexpectedReceive
Description: 
Purpose: 
Configure disabling/enabling the unexpected receive if no send action was made. 
Example: 
*_ApiConfigureUnexpectedReceive(true) 
Parameters:
Name Type EncodedType
AllowUnexpectedReceiveWarningboolean bool
If true, unexpected receive warning is allowed.
Function: Configure_OnTestResponseFailedLogResponseAsError
Description: 
Purpose: 
When enabled, and TestResponse fails, the response will be logged as an error. 
Example: 
*_ApiConfigure_OnTestResponseFailedLogResponseAsError(true) 
Parameters:
NameType EncodedType

---

# Page 387

Enableboolean bool
Enable or disable logging the response as an error when TestResponse
fails.
Function: CopyRequestBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestBitsToProcUnitVariable(2, 4, 8, false, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request bits to.
StartBitint uint16
The starting bit position in the current request data from which to copy.
BitLengthint uint16
The number of bits to copy from the request data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyRequestLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestLengthToProcUnitVariable(2) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the current request length will be
copied.
Function: CopyRequestToProcUnitVariable
Description: 
Purpose: 
Copy a part of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestToProcUnitVariable(2, 1, 3, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request data to.
Offsetint uint8
The starting offset in the current request data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the request data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: CopyResponseBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseBitsToProcUnitVariable(1, 8, 16, true, false) 
Parameters:

---

# Page 388

Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response bits to.
StartBitint uint16
The starting bit position in the received response data from which to copy.
BitLengthint uint16
The number of bits to copy from the response data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyResponseLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseLengthToProcUnitVariable(1) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the response length will be
copied.
Function: CopyResponseToProcUnitVariable
Description: 
Purpose: 
Copy a part of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseToProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response data to.
Offsetint uint8
The starting offset in the received response data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the response data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: EnablePadding
Description: 
Purpose: 
Enable or disable padding for diagnostic messages. Padding is enabled by default. 
Example: 
*_ApiEnablePadding(false) 
Parameters:
NameType EncodedType
Enableboolean bool
If true, enables padding for diagnostic messages; if false, disables padding. Padding is enabled by
default.
Function: GetCyclicResponse
Description: 
Purpose: 
Gets the latest response received from a cyclically sent diagnostic request. 
Example: 
*_ApiGetCyclicResponse() 
Function: Prepare

---

# Page 389

Description: 
Purpose: 
Prepare the request to be send. 
Example: 
*_ApiPrepare([0x10, 0x03]) 
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
The data to prepare for
sending.
Function: PrepareFromResponse
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareFromResponse() 
Function: PrepareModify
Description: 
Purpose: 
Modify the prepared request by replacing a byte sequence. 
Example: 
*_ApiPrepareModify(2, [0x01, 0x02]) 
Parameters:
NameTypeEncodedType Format
Offsetint uint16
The offset where to replace the
data.
Dataint[] uint8 raw
The data to replace with.
Function: PrepareModifyBits
Description: 
Purpose: 
Modify the prepared repuest by replacing a bit sequence. 
Example: 
*_ApiPrepareModifyBits(0x1234, 8, 16, true, false) 
Parameters:
Name Type EncodedType
Valuelong int64
The value to set.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as
signed.
Function: PrepareModifyBitsProcUnitVariable
Description: 
Purpose: 
Modify the prepared request by replacing a bit sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyBitsProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
int uint8

---

# Page 390

VariableIndex The index of the variable in the proc
unit.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as signed.
Function: PrepareModifyFromResponsePart
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareModifyFromResponsePart(2, 4, 1) 
Parameters:
Name Type EncodedType
RspPartOffsetint uint16
The offset of the response part to use.
RspPartLengthint uint16
The length of the response part to use.
ReqOffsetint uint16
The offset in the request where to insert the response
part.
Function: PrepareModifyProcUnitVariable
Description: 
Purpose: 
Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc unit.
Offsetint uint16
The offset where to replace the data.
ByteLengthint uint8
The length of the byte sequence to
replace.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
Function: PrepareModifyWithMask
Description: 
Purpose: 
Modify the prepared repuest by replacing a masked byte sequence. 
Example: 
*_ApiPrepareModifyWithMask(2, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset where to replace the data.
Dataint[] uint8 raw
The data to replace with.
Maskint[] uint8 raw
The mask to apply during
replacement.
Function: ResetDiagRequest
Description: 
Purpose: 
Reset the diag request status to not block sending diag requests if there is no received response 

---

# Page 391

Example: 
- if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcResetDiagRequest(); 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: 
typically you can call this API before sending the next diag request to ensure the last diag response doesn't affect the next
diag request 
Function: ResetTcpConnection
Description: 
Purpose: 
Reset Doip tcp connection. 
WARNING: 
when castile act as doip server, you can't use this API because its wrong to reset tcp socket in listening state 
Example: 
if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcResetTcpConnection(); 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: 
should be called in cases where you can normally reset a tcp socket. so, for example you can't use it if castle act as a
server, waiting for client connections (listeneing state) 
Function: Send
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSend([0x10, 0x03]) 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be
sent.
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SendCyclicStartNoRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. No response is expected from the other part.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartNoRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
int uint32

---

# Page 392

MinTimeThe minimum time between cyclic sends.
Function: SendCyclicStartWithRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. The response can be "get" though the API GetCyclicResponse.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartWithRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStop
Description: 
Purpose: 
Stops the cyclically sent diagnostic request. 
Example: 
*_ApiSendCyclicStop() 
Function: SendPrepared
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSendPrepared() 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SetFunctionalDestinationAddress
Description: 
Purpose: 
- change functional destination address (for ECU) for diagnostic request/response. 
- This is part of preset doip configurations which typically set in config.appl/ file under doip options 
- This API allows the user to set it at runtime, before starting diag requests 
Example: 
if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' 
then you can call: 
- exu.mod.EthernetIPv4DoIP().afcSetFunctionalDestinationAddress(); 
- for example, if you want to set source address 0x1234, convert it first to decimal format '4660' 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: 
typically you can call this API before sending any diag request (including routing activation request) 
Parameters:
Name Type EncodedType
FuncDstAddressint uint16
functional destination address in decimal format (unsigned short int data
type)

---

# Page 393

Function: SetPadding
Description: 
Purpose: 
Set the padding byte used in the Tx Diagnostic Buffer. 
Example: 
*_ApiSetPadding(0x55) 
Parameters:
NameType EncodedType
Valueint uint8
The byte value to be used for padding in the transmit diagnostic
buffer.
Function: SetPhysicalDestinationAddress
Description: 
Purpose: 
Change physical destination address (for ECU) for diag request/response. 
This is part of preset doip configurations which typically set in config.appl/ file under doip options 
This API allows the user to set it at runtime, before starting diag requests 
Example: 
- if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcSetPhysicalDestinationAddress(); 
- for example, if you want to set destination address 0x1234, convert it first to decimal format '4660' 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: 
typically you can call this API before sending any diag request (including routing activation request) 
Parameters:
Name Type EncodedType
PhysDstAddressint uint16
physical destination address in decimal format (unsigned short int data
type)
Function: SetSourceAddress
Description: 
Purpose: 
Change source address (for castle) for diagnostic request/response. 
This is part of preset doip configurations which typically set in config.appl/ file under doip options 
This API allows the user to set it at runtime, before starting diag requests 
Example: 
- if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcSetSourceAddress(); 
- for example, if you want to set source address 0x1234, convert it first to decimal format '4660' 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: 
typically you can call this API before sending any diag request (including routing activation request) 
Parameters:
Name Type EncodedType
SrcAddressint uint16
source address in decimal format (unsigned short int data
type)
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex

---

# Page 394

Function: TestByteSequence
Description: 
Purpose: 
Test for a byte sequence in the response. 
Example: 
*_ApiTestByteSequence(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequence] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceDoesNotExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the
response.
Function: TestByteSequenceExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Function: TestByteSequenceNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match. 
Example: 
*_ApiTestByteSequenceNotMatching(2, [0x01, 0x02]) 

---

# Page 395

Return Messages: 
On Success: 
Logs [TestByteSequenceNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected to not be in the
response.
Response timeout: 0
Result Message: TestByteSequenceNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: 
Purpose: 
Test for a byte sequence in the response with a mask. 
Example: 
*_ApiTestByteSequenceWithMask(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMask] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMaskDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskDoesNotExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskExist
Description: 

---

# Page 396

Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match, with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskNotMatching(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMaskNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected to not be in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMaskNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is none of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueNoneOf(3, [0xCC, 0xDD]) 
Return Messages: 
On Success: 
Logs [TestByteValueNoneOf] if the response matches the expected response. 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset does not match any value in this
list.
Response timeout: 0
Result Message: ByteValueTestNoneOf 

---

# Page 397

Faults: 
Function: TestByteValueOneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is one of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueOneOf(3, [0xAA, 0xBB]) 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset matches any value in this
list.
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestResponse
Description: 
Purpose: 
Test if a response is stored. Then verify the response length is in range LengthMin .. LengthMax, inclusive. 
Example: 
*_ApiTestResponse(10, 20) 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
Name Type EncodedType
LengthMinint uint16
Minimal valid length of the response.
LengthMaxint uint16
Maximal valid length of the
response.
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestResponseNotReceived
Description: 
Purpose: 
Test if no response is stored. 
Example: 
*_ApiTestResponseNotReceived() 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestUdsDtcNotPresent
Description: 
Purpose: 

---

# Page 398

The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the absence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is NOT in the response, CASTLE generates 'TestUdsDtcPresence' information message with 0 byte index. 
If the DTC is in the list, CASTLE generates a 'TestUdsDtcPresence' error message with the byte index of the DTC in the
response. 
Example: 
*_ApiTestUdsDtcNotPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC not presenct as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
absence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the presence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response, CASTLE generates 'TestUdsDtcPresence' information message with the byte index of the
DTC in the response. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message with 0 byte index. 
Example: 
*_ApiTestUdsDtcPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC presence as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
presence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcStatus
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the status of a DTC. 
The response will be the following: 

---

# Page 399

[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response AND the expected status matches the masked status byte, CASTLE generates
'TestUdsDtcStatus' information message. 
If the DTC is in the response AND the expected status does not match the masked status byte, CASTLE generates
'TestUdsDtcStatus' error message. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message. 
Example: 
*_ApiTestUdsDtcStatus(0x123456, 0xFF, 0x01) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC status as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameType EncodedType Format
DtcIdint uint32 hex
The DTC ID to check for status.
Maskint uint8 hex
Only the masked bits will be tested in the status
byte.
Statusint uint8 hex
The expected status of the DTC.
Response timeout: 0
Result Message: TestUdsDtcStatus 
Faults: NoData 
Function: TestUdsDtcsPresentSubsetOf
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the existing DTCs are subset of a predefined list (DtcIdsAllowed). 
The received response must be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
It is not mandatory that the response contains all DTCs exist in the list (DtcIdsAllowed). 
If any DTC in the response is NOT exist in the list (DtcIdsAllowed), CASTLE generates a 'TestUdsDtcsPresentSubsetOf'
error message with all present DTCs and not exist in the list. 
Example: 
*_ApiTestUdsDtcsPresentSubsetOf([0x123456, 0xABCDEF]) 
Return Messages: 
On Success: 
Logs [TestUdsDtcsPresentSubsetOf] if the subset dtc list as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [InvalidResponse] error if the subset is not present in the response. 
Parameters:
Name Type EncodedType Format
DtcIdsAllowedint[] uint32 hex
Array of all allowed DTCs (without status
mask).
Response timeout: 0
Result Message: TestUdsDtcsPresentSubsetOf 
Faults: NoData InvalidResponse 
Function: TestValueBitSequenceInRange
Description: 
Purpose: 

---

# Page 400

Test for a numerical value range, where the number is interpreted as (un)signed value. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
start bit index in the data buffer the left
BitLengthint uint16
number of bits
IsLsbFirstboolean bool
true if the start bit is the least significant
AsSignedValueboolean bool
signed value or unsigned
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range. 
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit. 
 
1. Startbit 7, Length 8, Big Endian 
2. Startbit 8, Length 8, Little Endian 
3. Startbit 31, Length 9, Big Endian 
4. Startbit 48, Length 9, Little Endian 
If complete bytes shall be tested, see TestValueInRange. 
Example: 
*_ApiTestValueBitsInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 

---

# Page 401

Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
 
1: Startbit 7, Length 8, Big Endian 
2: Startbit 8, Length 8, Little Endian 
3: Startbit 31, Length 9, Big Endian 
4: Startbit 48, Length 9, Little Endian 
Example: 
*_ApiTestValueBitsOutOfRange(true, 2, 2, true -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueOutOfRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error

---

# Page 402

LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit. The byte
order can be configured. 
Example: 
*_ApiTestValueInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian.
Offsetint uint16
Offset in byte count.
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValueboolean bool
If true, interpret the value as signed.
LimitErrorMinlong int64
Minimum value that is not yet an error.
LimitWarnMinlong int64
Minimum value that is not yet a warning.
LimitWarnMaxlong int64
Maximum value that is not yet a warning.
LimitErrorMaxlong int64
Maximum value that is not yet an error.
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
int uint16

---

# Page 403

Offset in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TlsInit
Description: 
Purpose: 
- Initialize TLS(transport layer security) protocol. 
- TLS is a security protocol used widely to acheive authentication, encryption and integrity of the communicated data 
through network. 
- This API effectively allocates TLS connection and initialize it 
Example: 
- if your Doip object defined in the project config.appl/ is 'EthernetIPv4DoIP' then you can call:
exu.mod.EthernetIPv4DoIP().afcTlsInit(); 
- Note that 'ItfEthernetDoIP' and 'EnmBuffersEnum' are generated by Firmware so, if these names changed in a new
Firmware version, you will have to change them in your java code accordingly 
Dependency: 
You should call this API before sending any diag request in order to initialize TLS connection. It should also be called once
at the beginning of your test 
Parameters:
Name Type EncodedType Format
Certificateint[] uint8 ascii
If castle act as a client and is not required to send its certificate (no mutual authentication) then this argument will
be empty, if server request client certificate then this argument will represent the client certificate. In contrast, if
castle act as a server it will have to send its server certificate only to the client (in mutual authentication, it will
receive the client certificate too) so, this argument will represents the server certificate required in TLS
handshake process. You should not set this argument directly instead, you should use TLS library in stdlib and
give it the path of the certificate in order to read it and pass it to this argument
CertificateAuthorityint[] uint8 ascii
This is the certificate authority 'CA' certificate which may represents the root certificate authority or chain of
trusted issuers, typically required by the client to verify the server certificate in TLS handshake process You
should not set this argument directly instead, you should use TLS library in stdlib and give it the path of the
certificate in order to read it and pass it to this argument Note that certificate authority 'CA' may be very long in
size
PrivateKeyint[] uint8 ascii
In case castle is server, the server uses the private key to decrypt data sent by the client, specifically, the pre-
master secret key which is essential for generating the sessions's symmetric keys. In case castle is client and in
scenario requiring mutual authentication, the client also possesses a private key corresponding to its client
certificate. The client uses this private key to sign data, proving its identity to the server
PrivateKeyPasswordint[] uint8 ascii
A private key password encrypts the private key file, adding an extra layer of security. This ensures that even if
someone gains access to the private key file, they cannot use it without the password. Its optional to use by client
or server
back to interface definition
Messages
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf

---

# Page 404

Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: DoIPLog
Description: Received DoIP response
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
Recived Doip response. The message represents the response when using
EthernetDoip_Obj.afcSend()
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetCyclicResponse
Description: Returns the latest response received from the cyclic diag request.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: InvalidMasklength
Description: The used mask length doesn't match the data length.
Message: InvalidResponse
Description: The current response is not valid to apply this API 
Used only with response 59 02 xx .....
Message: InvalidSearchStep
Description: The used search step is invalid.
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: LogAdditionBytesWithMask
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Mask int[]uint8 raw
Message: LogAdditionBytesWithShortData
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat

---

# Page 405

Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
ShortData int[]uint8 raw
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.
Message: PreparedRequest
Description: The data send out. This is generated by SendPreparedRequest
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: Protocol
Description: Transport layer error.
Parameters:
NameTypeEncodedType
Codeint int32
Message: ResponsePending
Description: DUT returned response pending.
Message: ResponseTooShort
Description: The received response is too Short.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: SchedNotRunning
Description: LinMaster scheduling is not running.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
ShortData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceDoesNotExist
Description: Tests the absence of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceExist
Description: Tests the existance of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceNotMatching
Description: Test of a byte sequence

---

# Page 406

Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMaskNotMatching
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestResponse
Description: Test if response is received and its length.
Parameters:
Name Type EncodedType
ResponseReceivedbooleanbool
Length int uint16
Message: TestUdsDtcPresence
Parameters:
NameTypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
Message: TestUdsDtcStatus
Parameters:
Name TypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
ExpectedStatusint uint8 hex
Status int uint8 hex
Mask int uint8 hex
Message: TestUdsDtcsPresentSubsetOf
Description: List all DTCs which are not allowed to be present
Parameters:
Name TypeEncodedTypeFormat
NotAllowedDtcsint[]uint32 hex
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian

---

# Page 407

AsSignedValue booleanbool
LimitErrorMin long int64
LimitWarnMin long int64
Value long int64
LimitWarnMax long int64
LimitErrorMax long int64
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin long int64
LimitErrorMin long int64
Value long int64
LimitErrorMax long int64
LimitWarnMax long int64
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive
Description: Received a frame from the DUT when it was not expected.

---

# Page 408

back to interface definition
Events
Event: ResponseReceived
Event: CyclicActionCompleted
back to interface definition
Interface: EthernetHsfz  extends Diag _Object
Description: 
Purpose: 
- Defines the interface for the High-Speed Fahrzeug Zugang (HSFZ) protocol over Ethernet, primarily used for vehicle diagnostics
and communication with ECUs. 
- It allows selecting specific control messages, managing TCP connections, configuring diagnostic addresses, and handling
responses/errors from the ECU. 
Examples: 
- Select a diagnostic control message: 
`EthernetHsfz.SelectControlMsg(ControlMessage=ControlMsg.Diagnostics)` 
- Select a VIN message for cyclic sending: 
`EthernetHsfz.SelectControlMsgForCyclicSend(ControlMessage=ControlMsg.VIN)` 
- Reset the underlying TCP connection: 
`EthernetHsfz.ResetTcpConnection()` 
- Allow specific error codes (0x4X) to be treated as info: 
`EthernetHsfz.EnableErrorControlWords(Enable=true)` 
- Set the source address (tester/castle): 
`EthernetHsfz.SetSourceAddress(e.g SrcAddress=0xF1)` 
- Set the physical destination address (specific ECU): 
`EthernetHsfz.SetPhysicalDestinationAddress(e.g PhysDstAddress=0x10)` 
- Set the functional destination address (group of ECUs): 
`EthernetHsfz.SetFunctionalDestinationAddress(e.g FuncDstAddress=0x3F)` 
Enumerations
ControlMsg
Functions
CalculateAccessKey
ConfigureDefaultTimeout
ConfigureDiag
ConfigureFlowControlSendStMin
ConfigureNextSend_DisableTimeout
ConfigureNextSend_FirstConsecutiveDelay
ConfigureNextSend_FlowControlData
ConfigureNextSend_FlowControlDelay
ConfigureNextSend_Response
ConfigureNextSend_Retries
ConfigureNextSend_Timeout
ConfigureNextSend_Type
ConfigureUnexpectedReceive
Configure_OnTestResponseFailedLogResponseAsError
CopyRequestBitsToProcUnitVariable
CopyRequestLengthToProcUnitVariable
CopyRequestToProcUnitVariable
CopyResponseBitsToProcUnitVariable
CopyResponseLengthToProcUnitVariable
CopyResponseToProcUnitVariable
EnableErrorControlWords
EnablePadding
GetCyclicResponse
Prepare
PrepareFromResponse
PrepareModify
PrepareModifyBits
PrepareModifyBitsProcUnitVariable

---

# Page 409

PrepareModifyFromResponsePart
PrepareModifyProcUnitVariable
PrepareModifyWithMask
ResetTcpConnection
SelectControlMsg
SelectControlMsgForCyclicSend
Send
SendCyclicStartNoRespMinDelay
SendCyclicStartWithRespMinDelay
SendCyclicStop
SendPrepared
SetFunctionalDestinationAddress
SetPadding
SetPhysicalDestinationAddress
SetSourceAddress
SetUserTag
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskDoesNotExist
TestByteSequenceWithMaskExist
TestByteSequenceWithMaskNotMatching
TestByteValueNoneOf
TestByteValueOneOf
TestResponse
TestResponseNotReceived
TestUdsDtcNotPresent
TestUdsDtcPresent
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitSequenceInRange
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Messages
Ack
ByteValueTestNoneOf
ByteValueTestOneOf
DiagnosticApplicationNotReady
GeneralMessage
GetCyclicResponse
IncorrectControlWord
IncorrectDestinationAddress
IncorrectFormatError
IncorrectTesterAddress
IndexOutOfBounds
InvalidMasklength
InvalidResponse
InvalidSearchStep
Log
LogAdditionBytesWithMask
LogAdditionBytesWithShortData
MessageTooLarge
MsgTooLong
NoData
OutOfMemory
PreparedRequest
Protocol
ResponseLog
ResponsePending
ResponseTooShort
SchedNotRunning
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask

---

# Page 410

TestByteSequenceWithMaskNotMatching
TestResponse
TestUdsDtcPresence
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
Events
ResponseReceived
CyclicActionCompleted
Objects
Enumerations
Enum: ControlMsg
Value Description
Diagnostics Represents the standard diagnostics message type.
Kelmme15StatusRepresents the message type for Kl. 15 (Ignition) status.
VINRepresents the message type for Vehicle Identification
Number.
AliveCheck Represents the message type for an alive/heartbeat check.
StatusDataInquiryRepresents the message type for inquiring status data.
Functions
Function: CalculateAccessKey
Description: 
Purpose: 
Calculate a security access key based on a seed and other parameters. 
Example: 
*_ApiCalculateAccessKey(4, 4, 2, 2, 0x01, [0xDE, 0xAD, 0xBE, 0xEF]) 
Parameters:
Name Type EncodedType Default
SeedSizeint uint32
The seed size in bytes
KeySizeint uint32
The key size in bytes
SeedOffsetint uint32
The seed offset in diag response buffer
KeyOffsetint uint32
The key offset in diag request buffer
SecurityLevelint uint8
Security Level Number
StaticKeyint[] uint8 []
To Decrypt/Encrypt Seed/Key (e.g. In AES128 Algo). Leave it empty if not
needed
Function: ConfigureDefaultTimeout
Description: 
Purpose: 
Configure default timeout for all send actions. 
Example: 
*_ApiConfigureDefaultTimeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
int uint16 ms

---

# Page 411

PendingResponseTimeoutPendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureDiag
Description: 
Purpose: 
Configure Diag Module: Enable/Disable Tp. 
Example: 
*_ApiConfigureDiag(true) 
Parameters:
Name Type EncodedType
EnableTpboolean bool
If true, enables the Transport Protocol (TP) layer for diagnostics; if false, disables
it.
Function: ConfigureFlowControlSendStMin
Description: 
Purpose: 
Configure CASTLE to overwrite STMin value received from the ECU in Flow Control Frame 
Example: 
*_ApiConfigureFlowControlSendStMin(10, UserInput) 
Parameters:
Name Type EncodedTypeUnit
FcSendStMinint uint8 ms
The flow control send StMin (in ms).
SendStMinModeSendStMinModeint -
The mode for sending StMin.
Function: ConfigureNextSend_DisableTimeout
Description: 
Purpose: 
Configure disabling the timeout for the next send action. 
Example: 
*_ApiConfigureNextSend_DisableTimeout() 
Function: ConfigureNextSend_FirstConsecutiveDelay
Description: 
Purpose: 
Configure Castle first consecutive frame with a user defined delay time measured from the Ecu flow control signal. 
Example: 
*_ApiConfigureNextSend_FirstConsecutiveDelay(5) 
Parameters:
Name Type EncodedType Unit
CfDelayint uint8 ms
The consecutive frame delay (in
ms).
Function: ConfigureNextSend_FlowControlData
Description: 
Purpose: 
Configure Castle next flow control frame data : receive block size and receive StMin. 
Example: 
*_ApiConfigureNextSend_FlowControlData(8, 10) 
Parameters:
Name Type EncodedType Unit
FcRecvBlockSizeint uint8
The flow control receive block size.
FcRecvStMinint uint8 ms
The flow control receive StMin (in
ms).

---

# Page 412

Function: ConfigureNextSend_FlowControlDelay
Description: 
Purpose: 
Configure Castle flow control signal with a user defined delay time measured from the Ecu first frame. 
Example: 
*_ApiConfigureNextSend_FlowControlDelay(10) 
Parameters:
Name TypeEncodedTypeUnit
FcDelayint uint16 ms
The flow control delay (in
ms).
Function: ConfigureNextSend_Response
Description: 
Purpose: 
Configure what is expected as response. 
Example: 
*_ApiConfigureNextSend_Response(true, false, true) 
Parameters:
Name Type EncodedType
SuppressNegRspboolean bool
If true, negative responses will be
suppressed.
SuppressPosRspboolean bool
If true, positive responses will be suppressed.
AllowResponsePendingboolean bool
If true, response pending is allowed.
Function: ConfigureNextSend_Retries
Description: 
Purpose: 
Configure options for automatic retry in the case where "busy repeat" was the response from ECU. 
Example: 
*_ApiConfigureNextSend_Retries(3, 10) 
Parameters:
Name TypeEncodedTypeScaleUnit
Retriesint uint8
The number of retries to perform.
PauseTimeint uint16 0.2 ms
The pause time between retries (in
ms).
Function: ConfigureNextSend_Timeout
Description: 
Purpose: 
Configure next timeout for all send actions 
Example: 
*_ApiConfigureNextSend_Timeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureNextSend_Type
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 

---

# Page 413

Example: 
*_ApiConfigureNextSend_Type(true) 
Parameters:
Name Type EncodedType
AsFunctionalboolean bool
If true, the request will be sent as a functional request. If false, it will be sent as a physical
request.
Function: ConfigureUnexpectedReceive
Description: 
Purpose: 
Configure disabling/enabling the unexpected receive if no send action was made. 
Example: 
*_ApiConfigureUnexpectedReceive(true) 
Parameters:
Name Type EncodedType
AllowUnexpectedReceiveWarningboolean bool
If true, unexpected receive warning is allowed.
Function: Configure_OnTestResponseFailedLogResponseAsError
Description: 
Purpose: 
When enabled, and TestResponse fails, the response will be logged as an error. 
Example: 
*_ApiConfigure_OnTestResponseFailedLogResponseAsError(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable logging the response as an error when TestResponse
fails.
Function: CopyRequestBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestBitsToProcUnitVariable(2, 4, 8, false, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request bits to.
StartBitint uint16
The starting bit position in the current request data from which to copy.
BitLengthint uint16
The number of bits to copy from the request data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyRequestLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestLengthToProcUnitVariable(2) 
Parameters:
Name Type EncodedType
VariableIndexint uint8

---

# Page 414

The index of the proc unit variable where the current request length will be
copied.
Function: CopyRequestToProcUnitVariable
Description: 
Purpose: 
Copy a part of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestToProcUnitVariable(2, 1, 3, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request data to.
Offsetint uint8
The starting offset in the current request data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the request data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: CopyResponseBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseBitsToProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response bits to.
StartBitint uint16
The starting bit position in the received response data from which to copy.
BitLengthint uint16
The number of bits to copy from the response data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyResponseLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseLengthToProcUnitVariable(1) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the response length will be
copied.
Function: CopyResponseToProcUnitVariable
Description: 
Purpose: 
Copy a part of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseToProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8

---

# Page 415

The index of the proc unit variable to copy the response data to.
Offsetint uint8
The starting offset in the received response data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the response data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: EnableErrorControlWords
Description: 
Purpose: 
Configures the handling of HSFZ error control words starting with 0x4X. When enabled, these are reported as informational
messages rather than protocol errors. 
Example: 
`EthernetHsfz.EnableErrorControlWords(Enable=true)` 
Return Messages: 
On success message will be Ack. On failure, potential messages include IncorrectFormatError. 
Parameters:
NameType EncodedType
Enableboolean bool
Set to 'true' to enable reporting 0x4X control words as info, 'false' to report them as
errors. 
Hint: Use boolean true or false. 
Function: EnablePadding
Description: 
Purpose: 
Enable or disable padding for diagnostic messages. Padding is enabled by default. 
Example: 
*_ApiEnablePadding(false) 
Parameters:
NameType EncodedType
Enableboolean bool
If true, enables padding for diagnostic messages; if false, disables padding. Padding is enabled by
default.
Function: GetCyclicResponse
Description: 
Purpose: 
Gets the latest response received from a cyclically sent diagnostic request. 
Example: 
*_ApiGetCyclicResponse() 
Function: Prepare
Description: 
Purpose: 
Prepare the request to be send. 
Example: 
*_ApiPrepare([0x10, 0x03]) 
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
The data to prepare for
sending.
Function: PrepareFromResponse
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 

---

# Page 416

Example: 
*_ApiPrepareFromResponse() 
Function: PrepareModify
Description: 
Purpose: 
Modify the prepared request by replacing a byte sequence. 
Example: 
*_ApiPrepareModify(2, [0x01, 0x02]) 
Parameters:
NameTypeEncodedType Format
Offsetint uint16
The offset where to replace the
data.
Dataint[] uint8 raw
The data to replace with.
Function: PrepareModifyBits
Description: 
Purpose: 
Modify the prepared repuest by replacing a bit sequence. 
Example: 
*_ApiPrepareModifyBits(0x1234, 8, 16, true, false) 
Parameters:
Name Type EncodedType
Valuelong int64
The value to set.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as
signed.
Function: PrepareModifyBitsProcUnitVariable
Description: 
Purpose: 
Modify the prepared request by replacing a bit sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyBitsProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc
unit.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as signed.
Function: PrepareModifyFromResponsePart
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 

---

# Page 417

*_ApiPrepareModifyFromResponsePart(2, 4, 1) 
Parameters:
Name Type EncodedType
RspPartOffsetint uint16
The offset of the response part to use.
RspPartLengthint uint16
The length of the response part to use.
ReqOffsetint uint16
The offset in the request where to insert the response
part.
Function: PrepareModifyProcUnitVariable
Description: 
Purpose: 
Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc unit.
Offsetint uint16
The offset where to replace the data.
ByteLengthint uint8
The length of the byte sequence to
replace.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
Function: PrepareModifyWithMask
Description: 
Purpose: 
Modify the prepared repuest by replacing a masked byte sequence. 
Example: 
*_ApiPrepareModifyWithMask(2, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset where to replace the data.
Dataint[] uint8 raw
The data to replace with.
Maskint[] uint8 raw
The mask to apply during
replacement.
Function: ResetTcpConnection
Description: 
Purpose: 
Resets the underlying TCP connection used by the HSFZ protocol. This can be used to recover from connection errors. 
Example: 
`EthernetHsfz.ResetTcpConnection()` 
Return Messages: 
On success message will be Ack. Failure might result in timeout or connection-related errors (not explicitly listed as HSFZ
messages). 
Function: SelectControlMsg
Description: 
Purpose: 
Selects the type of control message to be used for subsequent communication requests. 
Example: 
`EthernetHsfz.SelectControlMsg(ControlMessage=ControlMsg.Diagnostics)` 

---

# Page 418

Return Messages: 
On success message will get Ack. On failure, potential messages include IncorrectControlWord, IncorrectFormatError,
DiagnosticApplicationNotReady. 
Parameters:
Name Type EncodedType
ControlMessageControlMsg int
Specifies the control message type to select. 
Hint: Use one of the values defined in the 'ControlMsg'
enumeration. 
Function: SelectControlMsgForCyclicSend
Description: 
Purpose: 
Selects the control message type specifically for cyclic transmission (e.g., periodic status updates). 
Example: 
`EthernetHsfz.SelectControlMsgForCyclicSend(ControlMessage=ControlMsg.AliveCheck)` 
Return Messages: 
On success message will be Ack. On failure, potential messages include IncorrectControlWord, IncorrectFormatError,
DiagnosticApplicationNotReady. 
Parameters:
Name Type EncodedType
ControlMessageControlMsg int
Specifies the control message type to be sent cyclically. 
Hint: Use one of the values defined in the 'ControlMsg'
enumeration. 
Function: Send
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSend([0x10, 0x03]) 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be
sent.
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SendCyclicStartNoRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. No response is expected from the other part.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartNoRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
int[] uint8 raw

---

# Page 419

Data The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStartWithRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. The response can be "get" though the API GetCyclicResponse.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartWithRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStop
Description: 
Purpose: 
Stops the cyclically sent diagnostic request. 
Example: 
*_ApiSendCyclicStop() 
Function: SendPrepared
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSendPrepared() 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SetFunctionalDestinationAddress
Description: 
Purpose: 
Sets the functional destination logical address (TA_func) used for broadcasting requests to a group of ECUs. 
Example: 
`EthernetHsfz.SetFunctionalDestinationAddress(FuncDstAddress=0x3F)` 
Return Messages: 
On success message will be Ack. On failure, potential messages include IncorrectDestinationAddress,
IncorrectFormatError. 
Dependency: 
Should ideally be set before initiating diagnostic communication targeting a functional group. 
Parameters:
Name Type EncodedType
int uint8

---

# Page 420

FuncDstAddressThe 8-bit functional destination address value. 
Hint: 
Provide an unsigned 8-bit integer representing the target functional group address (e.g.,
0x3F). 
Function: SetPadding
Description: 
Purpose: 
Set the padding byte used in the Tx Diagnostic Buffer. 
Example: 
*_ApiSetPadding(0x55) 
Parameters:
NameType EncodedType
Valueint uint8
The byte value to be used for padding in the transmit diagnostic
buffer.
Function: SetPhysicalDestinationAddress
Description: 
Purpose: 
Sets the physical destination logical address (TA_phys) used for direct communication with a specific ECU. 
Example: 
`EthernetHsfz.SetPhysicalDestinationAddress(PhysDstAddress=0x10)` 
Return Messages: 
On success message will be Ack. On failure, potential messages include IncorrectDestinationAddress,
IncorrectFormatError. 
Dependency: 
Should ideally be set before initiating diagnostic communication targeting a specific ECU physically. 
Parameters:
Name Type EncodedType
PhysDstAddressint uint8
The 8-bit physical destination address value. 
Hint: 
Provide an unsigned 8-bit integer representing the target ECU's physical address (e.g., 0x10).
Function: SetSourceAddress
Description: 
Purpose: 
Sets the source logical address (SA) used in HSFZ diagnostic requests and responses. This typically identifies the tester
(e.g., 'castle'). 
Example: 
`EthernetHsfz.SetSourceAddress(SrcAddress=0xF1)` 
Return Messages: 
On success message will be Ack. On failure, potential messages include IncorrectTesterAddress, IncorrectFormatError. 
Dependency: 
Should ideally be set before initiating diagnostic communication that requires specific source identification. 
Parameters:
Name Type EncodedType
SrcAddressint uint8
The 8-bit source address value. 
Hint: 
Provide an unsigned 8-bit integer, often represented in hexadecimal (e.g.,
0xF1).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define

---

# Page 421

the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: 
Purpose: 
Test for a byte sequence in the response. 
Example: 
*_ApiTestByteSequence(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequence] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceDoesNotExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the
response.
Function: TestByteSequenceExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Function: TestByteSequenceNotMatching

---

# Page 422

Description: 
Purpose: 
Test for a byte sequence in the response that should not match. 
Example: 
*_ApiTestByteSequenceNotMatching(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected to not be in the
response.
Response timeout: 0
Result Message: TestByteSequenceNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: 
Purpose: 
Test for a byte sequence in the response with a mask. 
Example: 
*_ApiTestByteSequenceWithMask(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMask] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMaskDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskDoesNotExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw

---

# Page 423

Raw data that is expected to be not in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match, with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskNotMatching(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMaskNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected to not be in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMaskNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is none of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueNoneOf(3, [0xCC, 0xDD]) 
Return Messages: 
On Success: 
Logs [TestByteValueNoneOf] if the response matches the expected response. 
Parameters:
Name Type EncodedType Format
int uint8

---

# Page 424

Offset The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset does not match any value in this
list.
Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is one of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueOneOf(3, [0xAA, 0xBB]) 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset matches any value in this
list.
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestResponse
Description: 
Purpose: 
Test if a response is stored. Then verify the response length is in range LengthMin .. LengthMax, inclusive. 
Example: 
*_ApiTestResponse(10, 20) 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
Name Type EncodedType
LengthMinint uint16
Minimal valid length of the response.
LengthMaxint uint16
Maximal valid length of the
response.
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestResponseNotReceived
Description: 
Purpose: 
Test if no response is stored. 
Example: 
*_ApiTestResponseNotReceived() 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Response timeout: 0

---

# Page 425

Result Message: TestResponse 
Faults: NoData 
Function: TestUdsDtcNotPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the absence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is NOT in the response, CASTLE generates 'TestUdsDtcPresence' information message with 0 byte index. 
If the DTC is in the list, CASTLE generates a 'TestUdsDtcPresence' error message with the byte index of the DTC in the
response. 
Example: 
*_ApiTestUdsDtcNotPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC not presenct as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
absence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the presence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response, CASTLE generates 'TestUdsDtcPresence' information message with the byte index of the
DTC in the response. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message with 0 byte index. 
Example: 
*_ApiTestUdsDtcPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC presence as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
presence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcStatus

---

# Page 426

Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the status of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response AND the expected status matches the masked status byte, CASTLE generates
'TestUdsDtcStatus' information message. 
If the DTC is in the response AND the expected status does not match the masked status byte, CASTLE generates
'TestUdsDtcStatus' error message. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message. 
Example: 
*_ApiTestUdsDtcStatus(0x123456, 0xFF, 0x01) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC status as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameType EncodedType Format
DtcIdint uint32 hex
The DTC ID to check for status.
Maskint uint8 hex
Only the masked bits will be tested in the status
byte.
Statusint uint8 hex
The expected status of the DTC.
Response timeout: 0
Result Message: TestUdsDtcStatus 
Faults: NoData 
Function: TestUdsDtcsPresentSubsetOf
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the existing DTCs are subset of a predefined list (DtcIdsAllowed). 
The received response must be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
It is not mandatory that the response contains all DTCs exist in the list (DtcIdsAllowed). 
If any DTC in the response is NOT exist in the list (DtcIdsAllowed), CASTLE generates a 'TestUdsDtcsPresentSubsetOf'
error message with all present DTCs and not exist in the list. 
Example: 
*_ApiTestUdsDtcsPresentSubsetOf([0x123456, 0xABCDEF]) 
Return Messages: 
On Success: 
Logs [TestUdsDtcsPresentSubsetOf] if the subset dtc list as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [InvalidResponse] error if the subset is not present in the response. 
Parameters:
Name Type EncodedType Format
DtcIdsAllowedint[] uint32 hex
Array of all allowed DTCs (without status
mask).
Response timeout: 0

---

# Page 427

Result Message: TestUdsDtcsPresentSubsetOf 
Faults: NoData InvalidResponse 
Function: TestValueBitSequenceInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
start bit index in the data buffer the left
BitLengthint uint16
number of bits
IsLsbFirstboolean bool
true if the start bit is the least significant
AsSignedValueboolean bool
signed value or unsigned
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range. 
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit. 
 
1. Startbit 7, Length 8, Big Endian 
2. Startbit 8, Length 8, Little Endian 
3. Startbit 31, Length 9, Big Endian 
4. Startbit 48, Length 9, Little Endian 
If complete bytes shall be tested, see TestValueInRange. 
Example: 
*_ApiTestValueBitsInRange(true, 2, 2, true, -100, -50, 50, 100) 

---

# Page 428

Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
 
1: Startbit 7, Length 8, Big Endian 
2: Startbit 8, Length 8, Little Endian 
3: Startbit 31, Length 9, Big Endian 
4: Startbit 48, Length 9, Little Endian 
Example: 
*_ApiTestValueBitsOutOfRange(true, 2, 2, true -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueOutOfRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian

---

# Page 429

BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit. The byte
order can be configured. 
Example: 
*_ApiTestValueInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian.
Offsetint uint16
Offset in byte count.
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValueboolean bool
If true, interpret the value as signed.
LimitErrorMinlong int64
Minimum value that is not yet an error.
LimitWarnMinlong int64
Minimum value that is not yet a warning.
LimitWarnMaxlong int64
Maximum value that is not yet a warning.
LimitErrorMaxlong int64
Maximum value that is not yet an error.
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 

---

# Page 430

- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint16
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
back to interface definition
Messages
Message: Ack
Description: The Ecu sent positive Ack. Indicates successful execution of the requested function or command by the ECU.
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: DiagnosticApplicationNotReady
Description: The Ecu sent diagnostic application not ready response. Indicates the ECU's diagnostic handler is currently
busy or not initialized to process the request.
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetCyclicResponse
Description: Returns the latest response received from the cyclic diag request.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: IncorrectControlWord
Description: The Ecu sent incorrect control word response. Indicates the control word (often related to the message type or
command) was invalid or not supported.
Message: IncorrectDestinationAddress
Description: The Ecu sent incorrect destination address response. Indicates the target address (physical or functional)

---

# Page 431

used in the request was not recognized or accepted.
Message: IncorrectFormatError
Description: The Ecu sent incorrect format error response. Indicates the received message structure or format was invalid
according to the HSFZ protocol.
Message: IncorrectTesterAddress
Description: The Ecu sent incorrect tester address response. Indicates the source address used in the request was not
recognized or accepted by the ECU.
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: InvalidMasklength
Description: The used mask length doesn't match the data length.
Message: InvalidResponse
Description: The current response is not valid to apply this API 
Used only with response 59 02 xx .....
Message: InvalidSearchStep
Description: The used search step is invalid.
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: LogAdditionBytesWithMask
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Mask int[]uint8 raw
Message: LogAdditionBytesWithShortData
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
ShortData int[]uint8 raw
Message: MessageTooLarge
Description: The Ecu sent message too large response. Indicates the request message exceeded the buffer capacity or
allowed size by the ECU.
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.
Message: OutOfMemory

---

# Page 432

Description: The Ecu sent out of memory response. Indicates the ECU lacked sufficient memory resources to process the
request.
Message: PreparedRequest
Description: The data send out. This is generated by SendPreparedRequest
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: Protocol
Description: Transport layer error.
Parameters:
NameTypeEncodedType
Codeint int32
Message: ResponseLog
Description: Received response. This message contains the raw data received from the ECU.
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The raw byte array containing the response data from the
ECU.
Message: ResponsePending
Description: DUT returned response pending.
Message: ResponseTooShort
Description: The received response is too Short.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: SchedNotRunning
Description: LinMaster scheduling is not running.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
ShortData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceDoesNotExist
Description: Tests the absence of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceExist
Description: Tests the existance of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceNotMatching
Description: Test of a byte sequence

---

# Page 433

Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMaskNotMatching
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestResponse
Description: Test if response is received and its length.
Parameters:
Name Type EncodedType
ResponseReceivedbooleanbool
Length int uint16
Message: TestUdsDtcPresence
Parameters:
NameTypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
Message: TestUdsDtcStatus
Parameters:
Name TypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
ExpectedStatusint uint8 hex
Status int uint8 hex
Mask int uint8 hex
Message: TestUdsDtcsPresentSubsetOf
Description: List all DTCs which are not allowed to be present
Parameters:
Name TypeEncodedTypeFormat
NotAllowedDtcsint[]uint32 hex
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
booleanbool

---

# Page 434

ByteOrderBigEndianBig or Little Endian
AsSignedValue booleanbool
LimitErrorMin long int64
LimitWarnMin long int64
Value long int64
LimitWarnMax long int64
LimitErrorMax long int64
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin long int64
LimitErrorMin long int64
Value long int64
LimitErrorMax long int64
LimitWarnMax long int64
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64
Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive

---

# Page 435

Description: Received a frame from the DUT when it was not expected.
back to interface definition
Events
Event: ResponseReceived
Event: CyclicActionCompleted
back to interface definition
Interface: LinDriver  extends _Object
Description: Generic Driver for Lin that holds either Lin Master or Lin Slave
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: LinGeneric  extends _Object
Description: Common Interface for LIN
Functions
SetUserTag
Messages
GeneralMessage
UnknownLinFrameReceived
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: UnknownLinFrameReceived

---

# Page 436

Description: Castle received a LIN frame that is not part of the LDF.
Parameters:
Name TypeEncodedTypeFormat
FrameIdint uint8 hex
back to interface definition
Interface: LinMaster  extends LinGeneric _Object
Description: LIN master for LIN spec2.1 There are two kind of frames. - Predefined Frames will be addressed with a identifier.
They have defined parameters which are used for manipulation. A change of each bit individually is not possible. - Custom
Frames are defined directly with their bit pattern. There, everything is defined in the script. For the receiving, the RX Baudrate can
be defined in two ways. After Reset or after the call to SetClkDividerRxUartFollow the Rx Baudrate is defined by the CkDivider of
every frame. After a call to SetClkDividerRxUartFix the baudrate is fixed to a defined value. The first on is useful, if the module
shall not follow the sync field, instead if uses a fix baudrate..
Enumerations
ScheduleEvent
Severity
Functions
AssignFrameId
ConfigureUserDefinedDiagnostics
DisableWakeupFromDUT
EnableFrameCrcCheck
EnableWakeupFromDUT
EventNoSlaveDataConfig
ReportAsError_DutUnexpectedChar
ReportAsError_DutWakeup
ReportAsError_DutWakeupUnexpected
ReportAsError_UartNoise
ResetFrameId
SendSleep
SendWakeup
SetClkDividerRxUartFix
SetClkDividerRxUartFollowFrame
SetCustomMsg
SetFirstFrameIdx
SetStartSchedulingDelay
SetTiming_Msg
SetTiming_Wakeup
SetUserTag
StartScheduling
StopScheduling
WakeupFromDUT
WakeupFromDUTAndSchedule
Messages
ChecksumIncorrect
CustomMsgErr
GeneralMessage
LinBusSleepEvent
LinBusUnexpectedWakeup
LinConflictingActivity
NoSlaveData
NoWakeupFromDut
RxResponseTooLate
ScheduleStartEvent
ScheduleStopEvent
ScheduleStopped
SleepInitiated
UartNoiseError
UartOverrunError
UnexpectedCharReceived
UnexpectedCharWhileIdle
UnexpectedFrameReceived
UnknownLinFrameReceived
WakeupFromDut
Events
LAST_MSG_IN_SCHED_TBL
WAKEUP_FROM_DUT_RECEIVED
MASTER_INITIATED_SLEEP
Objects

---

# Page 437

Enumerations
Enum: ScheduleEvent
Description: When shall the schedule event occur.
Value
NEXT_FRAME
NEXT_CYCLE
Enum: Severity
Value
ERROR
INFO
NO_MESSAGE
Functions
Function: AssignFrameId
Description: 
Purpose: 
- Assigns a frameID to a lin message. 
- At the next occurrence of that frame, the master will send the header out with the given id. 
- Only configurable frames can be assigned with new frame IDs. 
Example: 
*_ApiAssignFrameId(1, 2) 
Parameters:
Name Type EncodedType
MessageIdint uint16
MessageID of the lin message.
FrameIdint uint8
The new ID of the frame that will be used by the master to send out the
header.
Function: ConfigureUserDefinedDiagnostics
Description: 
Purpose: 
Discard The Lin Diag Module and Enable to Send Diagnostics from the Com Layer. 
Example: 
*_ApiConfigureUserDefinedDiagnostics(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable user-defined
diagnostics.
Function: DisableWakeupFromDUT
Description: 
Purpose: 
- Disables the LIN master from reacting to a wakeup signal sent by the DUT. This is the default behavior. 
- Two cases: 
If the LIN master is not running and it receives the wakeup signal, it will be ignored silently. If the user wants to see that
wakeup as an error, they should call ReportAsError_DutWakeupUnexpected(true).
If the LIN master is already running and it receives the wakeup signal, the user can control the ERROR/INFO message
in the log by calling the ReportAsError_DutWakeup function with a true/false parameter.
Example: 
*_ApiDisableWakeupFromDUT() 
Function: EnableFrameCrcCheck
Description: 

---

# Page 438

Purpose: 
Enable Lin frame CRC check (Enabled By default). 
Example: 
*_ApiEnableFrameCrcCheck(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable frame CRC
check.
Function: EnableWakeupFromDUT
Description: 
Purpose: 
- Enables the LIN master to start scheduling when it receives a wakeup signal from the DUT. By default, LinMaster does
not react to the wakeup signal. 
- Two cases: 
If the LIN master is not running and it receives the wakeup signal, it will start scheduling.
If the LIN master is already running and it receives the wakeup signal, it will continue scheduling. The user can decide
whether to log the DUT wakeup as an error or info by calling the ReportAsError_DutWakeup function with a true/false
parameter.
Example: 
*_ApiEnableWakeupFromDUT() 
Function: EventNoSlaveDataConfig
Description: 
Purpose: 
-This API can be used to: 
- Configure the severity of the message that will be generated on NoSlaveData event (MessageSeverity) 
NOTE: If Severity=NO_MESSAGE, no message will be generated. 
- Check that no LIN frame is coming from the slaves if and only if MakeError!=ERROR (CheckNoCom) 
Example: 
*_ApiEventNoSlaveDataConfig(Severity.ERROR, true) 
Parameters:
Name Type EncodedType
MessageSeveritySeverity int
Severity of the message generated on NoSlaveData
event.
CheckNoComboolean bool
Check for no communication from slaves.
Function: ReportAsError_DutUnexpectedChar
Description: 
Purpose: 
- If the master receives data on LIN when it is not expected, INFO/ERROR message is generated, depending on the given
parameter. 
- By default, receiving unexpected char causes an error. 
Example: 
*_ApiReportAsError_DutUnexpectedChar(true) 
Parameters:
Name Type EncodedType
AsErrorboolean bool
Boolean for Enabling/Disabling.
Function: ReportAsError_DutWakeup
Description: 
Purpose: 
Generates an ERROR/INFO message, if a wakeup signal is detected, but the LinMaster is already running. 

---

# Page 439

Example: 
*_ApiReportAsError_DutWakeup(true) 
Parameters:
Name Type EncodedType
AsErrorboolean bool
Boolean for Enabling/Disabling.
Function: ReportAsError_DutWakeupUnexpected
Description: 
Purpose: 
- If an unexpected wakeup signal is detected, nothing/ERROR message is generated, depending on the given parameter. 
- By default, receiving unexpected wakeup signal causes an error. 
Example: 
*_ApiReportAsError_DutWakeupUnexpected(true) 
Parameters:
Name Type EncodedType
AsErrorboolean bool
Boolean for Enabling/Disabling.
Function: ReportAsError_UartNoise
Description: 
Purpose: 
If an framing error on the bus is detected, this is by default reported as error. 
Example: 
*_ApiReportAsError_UartNoise(true) 
Parameters:
Name Type EncodedType
AsErrorboolean bool
Boolean for Enabling/Disabling.
Function: ResetFrameId
Description: 
Purpose: 
- Resets an Rx/Tx frame's id to the original value. 
- At the next occurrence of that frame, the master will send the header again with the original id. 
Example: 
*_ApiResetFrameId(1) 
Parameters:
Name Type EncodedType
MessageIdint uint16
MessageID of the lin
message.
Function: SendSleep
Description: 
Purpose: 
- Sends a sleep command on the LIN bus. 
- It can be used only when the schedule is not running. 
- If the schedule is running, the StopScheduling API function shall be used with the appropriate SendSleep parameter. 
Example: 
*_ApiSendSleep() 
Function: SendWakeup
Description: 
Purpose: 
- Sends a wakeup signal. 
- The Timer is programmed with the start of the next 5ms tick. 
- After the given offset, the generation is started. 
- Length of the wakeup pulse must be in [250, 5000] µs intervall. 
Example: 
*_ApiSendWakeup(250, false) 

---

# Page 440

Parameters:
Name Type EncodedType
Lengthint uint16
Length of the wakeup pulse in
microseconds.
ErrorOnConflictingActivityboolean bool
Generate Error on conflicting activity.
Function: SetClkDividerRxUartFix
Description: 
Purpose: 
For the receiver UART, the baudrate is set separately. ClkDivider = 50.000.000/Baudrate. The Rx baudrate is less accurate
and will be divided internally by 50. 
Example: 
*_ApiSetClkDividerRxUartFix(1000) 
Parameters:
Name Type EncodedType
ClkDividerint uint16
Clock divider for the receiver
UART.
Function: SetClkDividerRxUartFollowFrame
Description: 
Purpose: 
Set current Rx Baudrate to follow the frames sync field. 
Example: 
*_ApiSetClkDividerRxUartFollowFrame() 
Function: SetCustomMsg
Description: 
Purpose: 
- Configure a custom message. 
- The raw data for the generation. Each bit value gnerates a half bit on the bus. The generation starts with bit 0 in the first
byte. A 0 Bit creates a dominant bit on the bus. The count of bits is defined by the PatternLength. 
Example: 
*_ApiSetCustomMsg(1, 10, 100, 2, 1000, [0x00, 0xFF]) 
Parameters:
Name Type EncodedType Unit
MsgHandleint uint8
Message handle allowed values are C1 to C9..
PatternLengthint uint16 hb
Pattern length in half bits.
FrameLengthint uint16 µs
the whole frame length in µs. After this time a new frame is started.
SimulatedRxHandleint uint8
Simulated receive handle. The pattern shall be seen by the DUT as the given
handle
ClkDividerint uint16
Clock divider.
Function: SetFirstFrameIdx
Description: 
Purpose: 
- When the scheduling is started, the first frame id will be the one given in the parameter according to the schedule table. 
-The first frame in the schedule table has idx 0, so valid values are [0..length(schedule_table) - 1]. 
- By default, the scheduling starts with the first (0.) frame. Invalid values are ignored and the linmaster will use the default
value when scheduling is started. 
- Function is effective only if the scheduling is not running when it is called. 
Example: 
*_ApiSetFirstFrameIdx(1) 
Parameters:
Name TypeEncodedType

---

# Page 441

FirstFrameIdxint uint8
The First Frame
Index.
Function: SetStartSchedulingDelay
Description: 
Purpose: 
- After the ECU receives a wakeup signal, it needs time to run initialization, ready to receive frame headers and start
answering. 
- According to the LIN specification, the ECU must be ready within 100msec, but it can be bigger in some projects. 
- User can set this time between 1msec to 200msec. 
- By default, linmaster starts scheduling with a 100msec delay after it detected (or sent) the wakeup signal. 
Example: 
*_ApiSetStartSchedulingDelay(100) 
Parameters:
NameType EncodedType Unit
Delayint uint8 ms
Defines the delay between the wakeup and the start of the scheduling (beginning with the first frame's break field). Value must
be in [1..200]msec range. Setting the value outside this range will cause this parameter to get the minimum or maximum valid
value.
Function: SetTiming_Msg
Description: 
Purpose: 
- Sets timing parameters for a specific message. 
- The delays specify the pause between the end of the stop bit of the previous byte and the falling edge of the start bit of
the next byte in "number of half bits". 
- BreakLength: The break length for predefined frames. The length is in half-bits. The standard value is 26 half bits. As
stated in the LIN spec, a slave must recognize a break after 11 bit times (22 HBs). 
- ClkDivider: The basic period for the generators is set for each frame newly. It is generated by 50MHz/(ClkDivider+1) and
is the period per "half bit". For a baudrate of 19200, this value is 1301. 
- DelaySyncField: Pause between the rising edge of the break BREAK and the falling edge of the sync start bit in HBs. 
- FrameLength: The frame length in µs is the time between the start of the generation until the start of the next frame. This
time is the minimum. It can be longer, but must not be shorter. 
- MsgHandle: The message handle (see the Lookup) whose timing shall be changed. 
- RxMaxTime: Maximum response time for the message in microseconds. 
Example: 
*_ApiSetTiming_Msg(1, 1301, 13, [1,2,3], 2, 1000, 500) 
Parameters:
Name Type EncodedType Unit
MsgHandleint uint8
The message handle.
ClkDividerint uint16 counts
The clock divider value.
DelaySyncFieldint uint8 hb
Delay of the sync field in half bits.
DelayBytesint[] uint8 hb
Delays between bytes in half bits.
DelayChecksumint uint8 hb
Delay of the checksum in half bits.
FrameLengthint uint16 µs
The frame length in microseconds.
RxMaxTimeint uint16 µs
Maximum response time in
microseconds.
Function: SetTiming_Wakeup
Description: 
Purpose: 
- Sets timing parameters for the wakeup frame. 
- ClkDivider: The basic period for the generators is set for each frame newly. It is generated by 50MHz/(ClkDivider+1) and
is the period per "half bit". For a baudrate of 19200, this value is 1301. 
- FrameLength: If the wakeup is used in StartScheduleNextTick, this time defines when the first normal frame generation is
started. 
Example: 
*_ApiSetTiming_Wakeup(1301, 500) 

---

# Page 442

Parameters:
Name TypeEncodedType Unit
ClkDividerint uint16
The clock divider value.
FrameLengthint uint16 µs
The frame length in
microseconds.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartScheduling
Description: 
Purpose: 
- Starts the frame generation. 
- If SendWakeup is false, the scheduling starts immediately. 
- If SendWakeup is true, then first a wakeup signal is sent (250 µs long dominant signal). 
- The start of the scheduling is delayed with [1,200] msec (default is 100 msec). 
- This delay can be configured with the 'SetStartSchedulingDelay' function. 
Example: 
*_ApiStartScheduling(true) 
Parameters:
Name Type EncodedType
SendWakeupboolean bool
Enable to sendWakeup signal, Disable to start scheduling
immediately.
Function: StopScheduling
Description: 
Purpose: 
Linmaster stops the generation of frame headers. 
Example: 
*_ApiStopScheduling(ScheduleEvent.NEXT_FRAME, true) 
Parameters:
Name Type EncodedType
StopOnScheduleEvent int
Defines the time when the linmaster stops sending frame headers.
SendSleepboolean bool
If true, the linmaster sends a sleep command after the last frame
header.
Function: WakeupFromDUT
Description: 
Purpose: 
Await a WakeupFrame from DUT within the Timeout. Values in 5ms steps are allowed. 
Example: 
*_ApiWakeupFromDUT(100) 
Parameters:
Name TypeEncodedTypeScaleUnit
Timeoutint uint8 0.2 ms
Timeout in milliseconds.
Function: WakeupFromDUTAndSchedule
Description: 
Purpose: 
- Await a WakeupFrame from DUT within the Timeout. 
- Start the scheduling after received Wakeup and additional offset. 

---

# Page 443

- Values in 5ms steps are allowed. 
- On the default value of 0, begin scheduling as soon as possible. 
Example: 
*_ApiWakeupFromDUTAndSchedule(100, 5000) 
Parameters:
Name Type EncodedType Scale Unit
Timeoutint uint8 0.2 ms
Timeout for wakeup frame, in milliseconds.
OffsetTimeint uint16 us
Additional offset time after wakeup before scheduling starts, in
microseconds.
back to interface definition
Messages
Message: ChecksumIncorrect
Description: Rx frame has incorrect checksum.
Parameters:
Name TypeEncodedTypeFormat
FrameID int uint8
CalculatedCheckSumint uint8
ReceivedCheckSum int uint8
FrameData int[]uint8 raw
Message: CustomMsgErr
Description: A CustomMsg is not correct configured
Parameters:
Name TypeEncodedType
CustomMsgNumint uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: LinBusSleepEvent
Description: Lin Bus Sleep
Message: LinBusUnexpectedWakeup
Description: The LIN bus was woken unexpected
Message: LinConflictingActivity
Description: adsfasfasdfsfsfasf
Message: NoSlaveData
Description: The data block from the slave was not received
Parameters:
Name TypeEncodedTypeFormat
ProtectedIDint uint16 hex
ID int uint16 hex
Message: NoWakeupFromDut
Description: The DUT does not send the expected Wakeup.
Message: RxResponseTooLate
Description: Response of LIN-Slave out of allowed maximum time. (end of header until end of checksum)
Parameters:
Name TypeEncodedType
TimeLimit int uint16
TimeMeasuredint uint16
Message: ScheduleStartEvent

---

# Page 444

Description: Start of scheduling.
Message: ScheduleStopEvent
Description: Linmaster receives the stop request.
Message: ScheduleStopped
Description: Linmaster stops scheduling.
Message: SleepInitiated
Description: The message is generated when the linmaster starts sending the sleep command on the linbus
Message: UartNoiseError
Description: RX-UART has Noise Error.
Message: UartOverrunError
Description: RX-UART has Overrun Error.
Message: UnexpectedCharReceived
Description: After sending of a TX-Msg, data from the DUT was received.
Parameters:
NameTypeEncodedType
Valueint uint8
Message: UnexpectedCharWhileIdle
Description: Receive of data while bus idle.
Message: UnexpectedFrameReceived
Description: Appears when the user configured EventNoSlaveDataConfig to check that no communication from the slave is
wanted.
Parameters:
Name TypeEncodedTypeFormat
FrameIdint uint8 hex
Message: UnknownLinFrameReceived
Description: Castle received a LIN frame that is not part of the LDF.
Parameters:
Name TypeEncodedTypeFormat
FrameIdint uint8 hex
Message: WakeupFromDut
Description: The DUT has sent a wakeup frame
back to interface definition
Events
Event: LAST_MSG_IN_SCHED_TBL
Description: Event is raised when LinMaster sends out the last message in the current shcedule table.
Event: WAKEUP_FROM_DUT_RECEIVED
Description: Event is raised when wakeup signal is received from the DUT during BUS idle phase
Event: MASTER_INITIATED_SLEEP
Description: Event is raised just before the linmaster is sending the sleep command.
back to interface definition
Interface: LinDiag  extends Diag _Object
Description: Diagnostic interface for LIN.
Enumerations
DiagMode
ReportMode
Functions

---

# Page 445

CalculateAccessKey
ConfigureDefaultTimeout
ConfigureDefault_NAD
ConfigureDiag
ConfigureFlowControlSendStMin
ConfigureNextSend_DisableTimeout
ConfigureNextSend_FirstConsecutiveDelay
ConfigureNextSend_FlowControlData
ConfigureNextSend_FlowControlDelay
ConfigureNextSend_NAD
ConfigureNextSend_Response
ConfigureNextSend_Retries
ConfigureNextSend_Timeout
ConfigureNextSend_Type
ConfigureUnexpectedReceive
Configure_OnTestResponseFailedLogResponseAsError
CopyRequestBitsToProcUnitVariable
CopyRequestLengthToProcUnitVariable
CopyRequestToProcUnitVariable
CopyResponseBitsToProcUnitVariable
CopyResponseLengthToProcUnitVariable
CopyResponseToProcUnitVariable
EnablePadding
GetCyclicResponse
InternalTestBlockRxMsg
InternalTestBlockTxMsg
Prepare
PrepareFromResponse
PrepareModify
PrepareModifyBits
PrepareModifyBitsProcUnitVariable
PrepareModifyFromResponsePart
PrepareModifyProcUnitVariable
PrepareModifyWithMask
ReportNoSlaveDataOnDiagResponse
Send
SendCyclicStartNoRespMinDelay
SendCyclicStartWithRespMinDelay
SendCyclicStop
SendPrepared
SetDiagMode
SetPadding
SetResponsePendingTolerance
SetSlaveResponseTimeout
SetUserTag
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskDoesNotExist
TestByteSequenceWithMaskExist
TestByteSequenceWithMaskNotMatching
TestByteValueNoneOf
TestByteValueOneOf
TestResponse
TestResponseNotReceived
TestUdsDtcNotPresent
TestUdsDtcPresent
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitSequenceInRange
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Messages
ByteValueTestNoneOf
ByteValueTestOneOf
GeneralMessage

---

# Page 446

GetCyclicResponse
IndexOutOfBounds
InvalidMasklength
InvalidResponse
InvalidSearchStep
Log
LogAdditionBytesWithMask
LogAdditionBytesWithShortData
MsgTooLong
NoData
PreparedRequest
Protocol
RecvWrongNad
ResponsePending
ResponseTooShort
SchedNotRunning
TestByteSequence
TestByteSequenceDoesNotExist
TestByteSequenceExist
TestByteSequenceNotMatching
TestByteSequenceWithMask
TestByteSequenceWithMaskNotMatching
TestResponse
TestUdsDtcPresence
TestUdsDtcStatus
TestUdsDtcsPresentSubsetOf
TestValueBitsInRange
TestValueBitsOutOfRange
TestValueInRange
TestValueOutOfRange
Timeout
TpInternalError
TpUnknownError
TxConf
UnexpectedReceive
Events
ResponseReceived
CyclicActionCompleted
Objects
Enumerations
Enum: DiagMode
Description: Diagnostic communication mode. In Interleaved mode, the master executes normal schedule between
diagnostic schedules. In NON_INTERLEAVED mode there are no normal communication interleaved between the
diagnostic schedule tables.
Value
NON_INTERLEAVED
INTERLEAVED
Enum: ReportMode
Value
AsError
AsWarning
AsInfo
Ignore
Functions
Function: CalculateAccessKey
Description: 
Purpose: 
Calculate a security access key based on a seed and other parameters. 
Example: 
*_ApiCalculateAccessKey(4, 4, 2, 2, 0x01, [0xDE, 0xAD, 0xBE, 0xEF]) 
Parameters:
Name Type EncodedType Default

---

# Page 447

SeedSizeint uint32
The seed size in bytes
KeySizeint uint32
The key size in bytes
SeedOffsetint uint32
The seed offset in diag response buffer
KeyOffsetint uint32
The key offset in diag request buffer
SecurityLevelint uint8
Security Level Number
StaticKeyint[] uint8 []
To Decrypt/Encrypt Seed/Key (e.g. In AES128 Algo). Leave it empty if not
needed
Function: ConfigureDefaultTimeout
Description: 
Purpose: 
Configure default timeout for all send actions. 
Example: 
*_ApiConfigureDefaultTimeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureDefault_NAD
Description: 
Purpose: 
Sets the default Node Address identifier (NAD) for diagnostic requests. 
Example: 
*_ApiConfigureDefault_NAD(0x7E) 
Parameters:
NameType EncodedType
NADint uint16
The default NAD to use for diagnostic
requests.
Function: ConfigureDiag
Description: 
Purpose: 
Configure Diag Module: Enable/Disable Tp. 
Example: 
*_ApiConfigureDiag(true) 
Parameters:
Name Type EncodedType
EnableTpboolean bool
If true, enables the Transport Protocol (TP) layer for diagnostics; if false, disables
it.
Function: ConfigureFlowControlSendStMin
Description: 
Purpose: 
Configure CASTLE to overwrite STMin value received from the ECU in Flow Control Frame 
Example: 
*_ApiConfigureFlowControlSendStMin(10, UserInput) 
Parameters:
Name Type EncodedTypeUnit
FcSendStMinint uint8 ms
The flow control send StMin (in ms).

---

# Page 448

SendStMinModeSendStMinModeint -
The mode for sending StMin.
Function: ConfigureNextSend_DisableTimeout
Description: 
Purpose: 
Configure disabling the timeout for the next send action. 
Example: 
*_ApiConfigureNextSend_DisableTimeout() 
Function: ConfigureNextSend_FirstConsecutiveDelay
Description: 
Purpose: 
Configure Castle first consecutive frame with a user defined delay time measured from the Ecu flow control signal. 
Example: 
*_ApiConfigureNextSend_FirstConsecutiveDelay(5) 
Parameters:
Name Type EncodedType Unit
CfDelayint uint8 ms
The consecutive frame delay (in
ms).
Function: ConfigureNextSend_FlowControlData
Description: 
Purpose: 
Configure Castle next flow control frame data : receive block size and receive StMin. 
Example: 
*_ApiConfigureNextSend_FlowControlData(8, 10) 
Parameters:
Name Type EncodedType Unit
FcRecvBlockSizeint uint8
The flow control receive block size.
FcRecvStMinint uint8 ms
The flow control receive StMin (in
ms).
Function: ConfigureNextSend_FlowControlDelay
Description: 
Purpose: 
Configure Castle flow control signal with a user defined delay time measured from the Ecu first frame. 
Example: 
*_ApiConfigureNextSend_FlowControlDelay(10) 
Parameters:
Name TypeEncodedTypeUnit
FcDelayint uint16 ms
The flow control delay (in
ms).
Function: ConfigureNextSend_NAD
Description: 
Purpose: 
Sets the Node Address identifier (NAD) for the next diagnostic request. 
Example: 
*_ApiConfigureNextSend_NAD(0x7E) 
Parameters:
NameType EncodedType
NADint uint16
The NAD to use for the next diagnostic
request.
Function: ConfigureNextSend_Response

---

# Page 449

Description: 
Purpose: 
Configure what is expected as response. 
Example: 
*_ApiConfigureNextSend_Response(true, false, true) 
Parameters:
Name Type EncodedType
SuppressNegRspboolean bool
If true, negative responses will be
suppressed.
SuppressPosRspboolean bool
If true, positive responses will be suppressed.
AllowResponsePendingboolean bool
If true, response pending is allowed.
Function: ConfigureNextSend_Retries
Description: 
Purpose: 
Configure options for automatic retry in the case where "busy repeat" was the response from ECU. 
Example: 
*_ApiConfigureNextSend_Retries(3, 10) 
Parameters:
Name TypeEncodedTypeScaleUnit
Retriesint uint8
The number of retries to perform.
PauseTimeint uint16 0.2 ms
The pause time between retries (in
ms).
Function: ConfigureNextSend_Timeout
Description: 
Purpose: 
Configure next timeout for all send actions 
Example: 
*_ApiConfigureNextSend_Timeout(1000, 5000) 
Parameters:
Name Type EncodedType Unit
Timeoutint uint16 ms
Timeout --> P2server in ISO doc: the maximum time to wait between a diag request and any response
received after it i,e; positive , negative or, pending response.
PendingResponseTimeoutint uint16 ms
PendingResponseTimeout--> P2*server in ISO doc: the maximum time to wait between a pending
response and any response received after it i,e; positive , negative or, pending response
Function: ConfigureNextSend_Type
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiConfigureNextSend_Type(true) 
Parameters:
Name Type EncodedType
AsFunctionalboolean bool
If true, the request will be sent as a functional request. If false, it will be sent as a physical
request.
Function: ConfigureUnexpectedReceive
Description: 
Purpose: 
Configure disabling/enabling the unexpected receive if no send action was made. 
Example: 
*_ApiConfigureUnexpectedReceive(true) 

---

# Page 450

Parameters:
Name Type EncodedType
AllowUnexpectedReceiveWarningboolean bool
If true, unexpected receive warning is allowed.
Function: Configure_OnTestResponseFailedLogResponseAsError
Description: 
Purpose: 
When enabled, and TestResponse fails, the response will be logged as an error. 
Example: 
*_ApiConfigure_OnTestResponseFailedLogResponseAsError(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable or disable logging the response as an error when TestResponse
fails.
Function: CopyRequestBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestBitsToProcUnitVariable(2, 4, 8, false, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request bits to.
StartBitint uint16
The starting bit position in the current request data from which to copy.
BitLengthint uint16
The number of bits to copy from the request data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyRequestLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestLengthToProcUnitVariable(2) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the current request length will be
copied.
Function: CopyRequestToProcUnitVariable
Description: 
Purpose: 
Copy a part of the current request to a variable in the procunit. 
Example: 
*_ApiCopyRequestToProcUnitVariable(2, 1, 3, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the request data to.
Offsetint uint8
The starting offset in the current request data from which to copy.
int uint8

---

# Page 451

ByteLength The number of bytes to copy from the request data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: CopyResponseBitsToProcUnitVariable
Description: 
Purpose: 
Copy a bit sequence from the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseBitsToProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response bits to.
StartBitint uint16
The starting bit position in the received response data from which to copy.
BitLengthint uint16
The number of bits to copy from the response data.
ByteOrderBigEndianboolean bool
Specifies the byte order (true for big-endian, false for little-endian) for interpreting the bits.
AsSignedValueboolean bool
Specifies if the copied bits should be interpreted as a signed value (true) or unsigned
(false).
Function: CopyResponseLengthToProcUnitVariable
Description: 
Purpose: 
Copy the length of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseLengthToProcUnitVariable(1) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable where the response length will be
copied.
Function: CopyResponseToProcUnitVariable
Description: 
Purpose: 
Copy a part of the last received response to a variable in the procunit. 
Example: 
*_ApiCopyResponseToProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the proc unit variable to copy the response data to.
Offsetint uint8
The starting offset in the received response data from which to copy.
ByteLengthint uint8
The number of bytes to copy from the response data.
BigEndianboolean bool
Specifies if the copied data should be interpreted as big-endian (true) or little-endian
(false).
Function: EnablePadding
Description: 
Purpose: 
Enable or disable padding for diagnostic messages. Padding is enabled by default. 
Example: 
*_ApiEnablePadding(false) 
Parameters:
NameType EncodedType

---

# Page 452

Enableboolean bool
If true, enables padding for diagnostic messages; if false, disables padding. Padding is enabled by
default.
Function: GetCyclicResponse
Description: 
Purpose: 
Gets the latest response received from a cyclically sent diagnostic request. 
Example: 
*_ApiGetCyclicResponse() 
Function: InternalTestBlockRxMsg
Description: 
Purpose: 
- Blocks the reception of diagnostic responses for testing purposes. 
- The request is sent, but the response is blocked, so the CTE does not receive it even if the ECU answers the request. 
Example: 
*_ApiInternalTestBlockRxMsg(true) 
Parameters:
NameType EncodedType
blockboolean bool
Whether to block reception (true) or not
(false).
Function: InternalTestBlockTxMsg
Description: 
Purpose: 
Blocks the transmission of diagnostic requests for testing purposes, allowing for request timeout testing. 
Example: 
*_ApiInternalTestBlockTxMsg(true) 
Parameters:
NameType EncodedType
blockboolean bool
Whether to block transmission (true) or not
(false).
Function: Prepare
Description: 
Purpose: 
Prepare the request to be send. 
Example: 
*_ApiPrepare([0x10, 0x03]) 
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
The data to prepare for
sending.
Function: PrepareFromResponse
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareFromResponse() 
Function: PrepareModify
Description: 
Purpose: 
Modify the prepared request by replacing a byte sequence. 
Example: 

---

# Page 453

*_ApiPrepareModify(2, [0x01, 0x02]) 
Parameters:
NameTypeEncodedType Format
Offsetint uint16
The offset where to replace the
data.
Dataint[] uint8 raw
The data to replace with.
Function: PrepareModifyBits
Description: 
Purpose: 
Modify the prepared repuest by replacing a bit sequence. 
Example: 
*_ApiPrepareModifyBits(0x1234, 8, 16, true, false) 
Parameters:
Name Type EncodedType
Valuelong int64
The value to set.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as
signed.
Function: PrepareModifyBitsProcUnitVariable
Description: 
Purpose: 
Modify the prepared request by replacing a bit sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyBitsProcUnitVariable(1, 8, 16, true, false) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc
unit.
StartBitint uint16
The start bit position.
BitLengthint uint16
The length of the bit sequence.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
AsSignedValueboolean bool
If true, interpret the value as signed.
Function: PrepareModifyFromResponsePart
Description: 
Purpose: 
Prepare the request to be send from the previously received response. 
Example: 
*_ApiPrepareModifyFromResponsePart(2, 4, 1) 
Parameters:
Name Type EncodedType
RspPartOffsetint uint16
The offset of the response part to use.
RspPartLengthint uint16
The length of the response part to use.
int uint16

---

# Page 454

ReqOffset The offset in the request where to insert the response
part.
Function: PrepareModifyProcUnitVariable
Description: 
Purpose: 
Modify the prepared repuest by replacing a byte sequence from a variable in the proc unit. 
Example: 
*_ApiPrepareModifyProcUnitVariable(1, 2, 4, true) 
Parameters:
Name Type EncodedType
VariableIndexint uint8
The index of the variable in the proc unit.
Offsetint uint16
The offset where to replace the data.
ByteLengthint uint8
The length of the byte sequence to
replace.
ByteOrderBigEndianboolean bool
If true, use big-endian byte order.
Function: PrepareModifyWithMask
Description: 
Purpose: 
Modify the prepared repuest by replacing a masked byte sequence. 
Example: 
*_ApiPrepareModifyWithMask(2, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset where to replace the data.
Dataint[] uint8 raw
The data to replace with.
Maskint[] uint8 raw
The mask to apply during
replacement.
Function: ReportNoSlaveDataOnDiagResponse
Description: 
Purpose: 
Controls how a missing response on frame 0x3D is handled. By default, it is reported as an error. 
Example: 
*_ApiReportNoSlaveDataOnDiagResponse(ReportMode.SUPPRESS) 
Parameters:
Name Type EncodedType
SuppressModeReportMode int
The reporting mode (e.g., SUPPRESS,
REPORT).
Function: Send
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSend([0x10, 0x03]) 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 

---

# Page 455

Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be
sent.
Response timeout: 60000
Result Message: Log 
Faults: Protocol Timeout SchedNotRunning 
Function: SendCyclicStartNoRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. No response is expected from the other part.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartNoRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStartWithRespMinDelay
Description: 
Purpose: 
Sends a diagnostic request cyclically. The response can be "get" though the API GetCyclicResponse.
Implemented for CAN and Flexray. Not yet implemented for LIN. 
Example: 
*_ApiSendCyclicStartWithRespMinDelay([0x10, 0x03], 1000) 
Parameters:
Name Type EncodedType Format
Dataint[] uint8 raw
The diagnostic request data to be sent
cyclically.
MinTimeint uint32
The minimum time between cyclic sends.
Function: SendCyclicStop
Description: 
Purpose: 
Stops the cyclically sent diagnostic request. 
Example: 
*_ApiSendCyclicStop() 
Function: SendPrepared
Description: 
Purpose: 
Send a diagnostic request. If a response is received, store it in the internal buffer and generate a logging message 
Example: 
*_ApiSendPrepared() 
Return Messages: 
On Success: 
Logs [Log] if Send is successful 
On Failure: 
- Returns [Protocol] error if the transport protocol reported an error. 
- Returns [Timeout] error if the send didn't execute withing configured timeout. 
- Returns [SchedNotRunning] error if the scheduler is not running. 
Response timeout: 60000
Result Message: Log 

---

# Page 456

Faults: Protocol Timeout SchedNotRunning 
Function: SetDiagMode
Description: 
Purpose: 
Switches between diagnostic communication modes (interleaved/diag-only). 
Example: 
*_ApiSetDiagMode(DiagMode.INTERLEAVED) 
Parameters:
NameType EncodedType
ModeDiagModeint
The desired diagnostic
mode.
Function: SetPadding
Description: 
Purpose: 
Set the padding byte used in the Tx Diagnostic Buffer. 
Example: 
*_ApiSetPadding(0x55) 
Parameters:
NameType EncodedType
Valueint uint8
The byte value to be used for padding in the transmit diagnostic
buffer.
Function: SetResponsePendingTolerance
Description: 
Purpose: 
- Sets the maximum number of allowed NRC 0x78 (Response Pending) responses for a diagnostic request. 
- If the ECU doesn't provide a final (either positive or negative) response for a request, a diagnostic timeout message is
generated. 
- The default value is 20, and the maximum allowed value is 100. 
Example: 
*_ApiSetResponsePendingTolerance(30) 
Parameters:
Name Type EncodedType
NrOfAllowedRspPendingint uint16
The number of allowed Response Pending
responses.
Function: SetSlaveResponseTimeout
Description: 
Purpose: 
- Sets the slave response timeout for diagnostic requests. 
- This is the time between the reception of the last frame of a diagnostic request on the LIN bus and the slave node being
able to provide data for a response. 
- The maximum value defines the time after which a slave node must have received a slave response header before it
discards its response. 
- The default value is 50 ms. 
Example: 
*_ApiSetSlaveResponseTimeout(60) 
Parameters:
Name Type EncodedType
Timeoutint uint16
The timeout value in
milliseconds.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.

---

# Page 457

Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestByteSequence
Description: 
Purpose: 
Test for a byte sequence in the response. 
Example: 
*_ApiTestByteSequence(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequence] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Response timeout: 0
Result Message: TestByteSequence 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceDoesNotExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the
response.
Function: TestByteSequenceExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position. 
Example: 
*_ApiTestByteSequenceExist(2, 1, [0x01, 0x02]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the
response.
Function: TestByteSequenceNotMatching
Description: 

---

# Page 458

Purpose: 
Test for a byte sequence in the response that should not match. 
Example: 
*_ApiTestByteSequenceNotMatching(2, [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Dataint[] uint8 raw
Raw data that is expected to not be in the
response.
Response timeout: 0
Result Message: TestByteSequenceNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMask
Description: 
Purpose: 
Test for a byte sequence in the response with a mask. 
Example: 
*_ApiTestByteSequenceWithMask(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMask] if the response as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMask 
Faults: NoData IndexOutOfBounds 
Function: TestByteSequenceWithMaskDoesNotExist
Description: 
Purpose: 
Tests the absence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskDoesNotExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected to be not in the response.
int[] uint8 raw

---

# Page 459

Mask Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskExist
Description: 
Purpose: 
Tests the existence of a byte sequence in response starting from the "StartIndex" byte position with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskExist(2, 1, [0x01, 0x02], [0xFF, 0x0F]) 
Parameters:
Name Type EncodedType Format
StartIndexint uint8
The start index for the search.
SearchStepint uint8
The step size for the search.
Dataint[] uint8 raw
Raw data that is expected in the response.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Function: TestByteSequenceWithMaskNotMatching
Description: 
Purpose: 
Test for a byte sequence in the response that should not match, with a mask. 
Example: 
*_ApiTestByteSequenceWithMaskNotMatching(2, [0xFF, 0x0F], [0x01, 0x02]) 
Return Messages: 
On Success: 
Logs [TestByteSequenceWithMaskNotMatching] if the response not matching the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
NameType EncodedType Format
Offsetint uint16
The offset in byte count for the sequence.
Maskint[] uint8 raw
Mask for the bits to test. Only bits set to true are
tested.
Dataint[] uint8 raw
Raw data that is expected to not be in the response.
Response timeout: 0
Result Message: TestByteSequenceWithMaskNotMatching 
Faults: NoData IndexOutOfBounds 
Function: TestByteValueNoneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is none of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueNoneOf(3, [0xCC, 0xDD]) 
Return Messages: 
On Success: 
Logs [TestByteValueNoneOf] if the response matches the expected response. 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
int[] uint8 raw

---

# Page 460

TestValuesAn array of byte values. The test passes if the byte at the specified offset does not match any value in this
list.
Response timeout: 0
Result Message: ByteValueTestNoneOf 
Faults: 
Function: TestByteValueOneOf
Description: 
Purpose: 
Test that a byte in the Diag Response is one of some given list of values. 
Offset: Byte Position 
TestValues: Byte Array with needed list of values 
Example: 
*_ApiTestByteValueOneOf(3, [0xAA, 0xBB]) 
Parameters:
Name Type EncodedType Format
Offsetint uint8
The byte position (0-indexed offset) in the diagnostic response to test.
TestValuesint[] uint8 raw
An array of byte values. The test passes if the byte at the specified offset matches any value in this
list.
Response timeout: 0
Result Message: ByteValueTestOneOf 
Faults: 
Function: TestResponse
Description: 
Purpose: 
Test if a response is stored. Then verify the response length is in range LengthMin .. LengthMax, inclusive. 
Example: 
*_ApiTestResponse(10, 20) 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
Name Type EncodedType
LengthMinint uint16
Minimal valid length of the response.
LengthMaxint uint16
Maximal valid length of the
response.
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 
Function: TestResponseNotReceived
Description: 
Purpose: 
Test if no response is stored. 
Example: 
*_ApiTestResponseNotReceived() 
Return Messages: 
On Success: 
Logs [TestResponse] if the response is as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Response timeout: 0
Result Message: TestResponse 
Faults: NoData 

---

# Page 461

Function: TestUdsDtcNotPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the absence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is NOT in the response, CASTLE generates 'TestUdsDtcPresence' information message with 0 byte index. 
If the DTC is in the list, CASTLE generates a 'TestUdsDtcPresence' error message with the byte index of the DTC in the
response. 
Example: 
*_ApiTestUdsDtcNotPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC not presenct as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
absence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcPresent
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the presence of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response, CASTLE generates 'TestUdsDtcPresence' information message with the byte index of the
DTC in the response. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message with 0 byte index. 
Example: 
*_ApiTestUdsDtcPresent(0x123456) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC presence as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameTypeEncodedTypeFormat
DtcIdint uint32 hex
The DTC ID to check for
presence.
Response timeout: 0
Result Message: TestUdsDtcPresence 
Faults: NoData 
Function: TestUdsDtcStatus
Description: 
Purpose: 

---

# Page 462

The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the status of a DTC. 
The response will be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
If the DTC is in the response AND the expected status matches the masked status byte, CASTLE generates
'TestUdsDtcStatus' information message. 
If the DTC is in the response AND the expected status does not match the masked status byte, CASTLE generates
'TestUdsDtcStatus' error message. 
If the DTC is NOT in the list, CASTLE generates a 'TestUdsDtcPresence' error message. 
Example: 
*_ApiTestUdsDtcStatus(0x123456, 0xFF, 0x01) 
Return Messages: 
On Success: 
Logs [TestUdsDtcPresence] if the DTC status as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
Parameters:
NameType EncodedType Format
DtcIdint uint32 hex
The DTC ID to check for status.
Maskint uint8 hex
Only the masked bits will be tested in the status
byte.
Statusint uint8 hex
The expected status of the DTC.
Response timeout: 0
Result Message: TestUdsDtcStatus 
Faults: NoData 
Function: TestUdsDtcsPresentSubsetOf
Description: 
Purpose: 
The function can be used when the user sends 19 02 XX diagnostic request (Report DTC by Status mask) to the ECU and
wants to check the existing DTCs are subset of a predefined list (DtcIdsAllowed). 
The received response must be the following: 
[59 02 XX [DTC_1_HighByte DTC_1_MidByte DTC_1_LowByte DTC_1_Status] ... [DTC_n_HighByte DTC_n_MidByte
DTC_n_LowByte DTC_n_Status]]. 
It is not mandatory that the response contains all DTCs exist in the list (DtcIdsAllowed). 
If any DTC in the response is NOT exist in the list (DtcIdsAllowed), CASTLE generates a 'TestUdsDtcsPresentSubsetOf'
error message with all present DTCs and not exist in the list. 
Example: 
*_ApiTestUdsDtcsPresentSubsetOf([0x123456, 0xABCDEF]) 
Return Messages: 
On Success: 
Logs [TestUdsDtcsPresentSubsetOf] if the subset dtc list as expected. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [InvalidResponse] error if the subset is not present in the response. 
Parameters:
Name Type EncodedType Format
DtcIdsAllowedint[] uint32 hex
Array of all allowed DTCs (without status
mask).
Response timeout: 0
Result Message: TestUdsDtcsPresentSubsetOf 
Faults: NoData InvalidResponse 

---

# Page 463

Function: TestValueBitSequenceInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
start bit index in the data buffer the left
BitLengthint uint16
number of bits
IsLsbFirstboolean bool
true if the start bit is the least significant
AsSignedValueboolean bool
signed value or unsigned
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are inclusive, so if the value is equal to a boundary it counts as in range. 
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit. 
 
1. Startbit 7, Length 8, Big Endian 
2. Startbit 8, Length 8, Little Endian 
3. Startbit 31, Length 9, Big Endian 
4. Startbit 48, Length 9, Little Endian 
If complete bytes shall be tested, see TestValueInRange. 
Example: 
*_ApiTestValueBitsInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 

---

# Page 464

Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool
AsSignedValue boolean bool
LimitErrorMinlong int64
Minimum value that is not yet an error
LimitWarnMinlong int64
Minimum value that is not yet a warning
LimitWarnMaxlong int64
Maximum value that is not yet a
warning
LimitErrorMaxlong int64
Maximum value that is not yet an error
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueBitsOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range.
The startbit is in case of big endian (motorola) the most significant bit, in case of little endian (intel) it is the least significant
bit.
 
1: Startbit 7, Length 8, Big Endian 
2: Startbit 8, Length 8, Little Endian 
3: Startbit 31, Length 9, Big Endian 
4: Startbit 48, Length 9, Little Endian 
Example: 
*_ApiTestValueBitsOutOfRange(true, 2, 2, true -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueOutOfRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
StartBitint uint16
Big or Little Endian
BitLength int uint16
ByteOrderBigEndianboolean bool

---

# Page 465

AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a
warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueInRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as signed value or either 8, 16, 24 or 32 bit. The byte
order can be configured. 
Example: 
*_ApiTestValueInRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:
Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian.
Offsetint uint16
Offset in byte count.
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValueboolean bool
If true, interpret the value as signed.
LimitErrorMinlong int64
Minimum value that is not yet an error.
LimitWarnMinlong int64
Minimum value that is not yet a warning.
LimitWarnMaxlong int64
Maximum value that is not yet a warning.
LimitErrorMaxlong int64
Maximum value that is not yet an error.
Response timeout: 0
Result Message: TestValueInRange 
Faults: NoData IndexOutOfBounds 
Function: TestValueOutOfRange
Description: 
Purpose: 
Test for a numerical value range, where the number is interpreted as (un)signed value. 
The limits values are exclusive, so if the value is equal to a boundary it counts as out of range. 
Example: 
*_ApiTestValueOutOfRange(true, 2, 2, true, -100, -50, 50, 100) 
Return Messages: 
On Success: 
Logs [TestValueInRange] if the response matches the expected response. 
On Failure: 
- Returns [NoData] error if no response is stored. 
- Returns [IndexOutOfBounds] error if the expected response length more than the actuall response. 
Parameters:

---

# Page 466

Name Type EncodedType
ByteOrderBigEndianboolean bool
Big or Little Endian
Offsetint uint16
in byte count
BytesCountint uint8
The number of bytes to include in the value. Valid values are 1 ..
4.
AsSignedValue boolean bool
LimitWarnMinlong int64
Minimum value that is already a warning
LimitErrorMinlong int64
Minimum value that is already an error
LimitErrorMaxlong int64
Maximum value that is already an error
LimitWarnMaxlong int64
Maximum value that is already a warning
Response timeout: 0
Result Message: TestValueOutOfRange 
Faults: NoData IndexOutOfBounds 
back to interface definition
Messages
Message: ByteValueTestNoneOf
Description: Obtained byte value is none from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: ByteValueTestOneOf
Description: Obtained byte value is one from the given list
Parameters:
Name TypeEncodedTypeFormat
ObtainedByteValueint uint8 hex
ExpectedList int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetCyclicResponse
Description: Returns the latest response received from the cyclic diag request.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: IndexOutOfBounds
Description: A given offset or calculated offset value exceeds the length of the received response.
Parameters:
NameTypeEncodedType
Offsetint uint16
Lengthint uint16
Message: InvalidMasklength
Description: The used mask length doesn't match the data length.
Message: InvalidResponse
Description: The current response is not valid to apply this API 
Used only with response 59 02 xx .....

---

# Page 467

Message: InvalidSearchStep
Description: The used search step is invalid.
Message: Log
Description: Received response
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: LogAdditionBytesWithMask
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Mask int[]uint8 raw
Message: LogAdditionBytesWithShortData
Description: Log response addition bytes with offset "Index"
Parameters:
Name TypeEncodedTypeFormat
Index int uint16
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
ShortData int[]uint8 raw
Message: MsgTooLong
Description: The received response is too large for the internal buffer.
Message: NoData
Description: Data is not yet received.
Message: PreparedRequest
Description: The data send out. This is generated by SendPreparedRequest
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: Protocol
Description: Transport layer error.
Parameters:
NameTypeEncodedType
Codeint int32
Message: RecvWrongNad
Description: Received NAD != Transmitted NAD
Parameters:
NameTypeEncodedType
TxNadint uint8
RxNadint uint8
Message: ResponsePending
Description: DUT returned response pending.
Message: ResponseTooShort
Description: The received response is too Short.
Parameters:
NameTypeEncodedTypeFormat

---

# Page 468

Data int[]uint8 raw
Message: SchedNotRunning
Description: LinMaster scheduling is not running.
Message: TestByteSequence
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
ShortData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceDoesNotExist
Description: Tests the absence of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceExist
Description: Tests the existance of a byte sequnece in diag response.
Parameters:
Name TypeEncodedTypeFormat
ExpectedDataint[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceNotMatching
Description: Test of a byte sequence
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMask
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestByteSequenceWithMaskNotMatching
Description: Patterntest schlug fehl
Parameters:
Name TypeEncodedTypeFormat
OffsetInResponseint uint16
FailIdxInData int uint16
Mask int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestResponse
Description: Test if response is received and its length.
Parameters:
Name Type EncodedType

---

# Page 469

ResponseReceivedbooleanbool
Length int uint16
Message: TestUdsDtcPresence
Parameters:
NameTypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
Message: TestUdsDtcStatus
Parameters:
Name TypeEncodedTypeFormat
Dtc int uint32 hex
Idx int uint8
ExpectedStatusint uint8 hex
Status int uint8 hex
Mask int uint8 hex
Message: TestUdsDtcsPresentSubsetOf
Description: List all DTCs which are not allowed to be present
Parameters:
Name TypeEncodedTypeFormat
NotAllowedDtcsint[]uint32 hex
Message: TestValueBitsInRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitErrorMin long int64
LimitWarnMin long int64
Value long int64
LimitWarnMax long int64
LimitErrorMax long int64
Message: TestValueBitsOutOfRange
Description: Result of the range test
Parameters:
Name Type EncodedType
StartBit int uint16
BitLength int uint16
ByteOrderBigEndianbooleanbool
Big or Little Endian
AsSignedValue booleanbool
LimitWarnMin long int64
LimitErrorMin long int64
Value long int64
LimitErrorMax long int64
LimitWarnMax long int64
Message: TestValueInRange
Description: Result of the in range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitErrorMinlongint64
LimitWarnMinlongint64
Value longint64
LimitWarnMaxlongint64
LimitErrorMaxlongint64

---

# Page 470

Message: TestValueOutOfRange
Description: Result of the out of range test
Parameters:
Name TypeEncodedType
Offset int uint16
LimitWarnMinlongint64
LimitErrorMinlongint64
Value longint64
LimitErrorMaxlongint64
LimitWarnMaxlongint64
Message: Timeout
Description: Timeout while waiting for the DUT.
Message: TpInternalError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TpUnknownError
Description: A error condition in the TP implementation occurred.
Parameters:
NameTypeEncodedType
Codeint int32
Message: TxConf
Description: Tx Confirmation
Message: UnexpectedReceive
Description: Received a frame from the DUT when it was not expected.
back to interface definition
Events
Event: ResponseReceived
Event: CyclicActionCompleted
back to interface definition
Interface: LinSlave  extends LinGeneric _Object
Description: Interface for LIN Slave
Enumerations
Severity
Functions
DisableLinSlave
EnableLinSlave
ReportUartNoise
SetUserTag
Messages
ChecksumIncorrect
GeneralMessage
NoSlaveData
RxResponseTooLate
UartNoiseError
UnknownLinFrameReceived
Enumerations
Enum: Severity
Value
NOTHING
INFO
WARN

---

# Page 471

ERROR
Functions
Function: DisableLinSlave
Description: 
Purpose: 
Deactivates the LIN slave. 
Example: 
*_ApiDisableLinSlave() 
Function: EnableLinSlave
Description: 
Purpose:. 
Activates the LIN slave. 
Example: 
*_ApiEnableLinSlave() 
Function: ReportUartNoise
Description: 
Purpose: 
Configures the severity level for UART noise error reporting. 
Example: 
*_ApiReportUartNoise(Severity.ERROR) 
Parameters:
Name Type EncodedType
SeveritySeverity int
The desired severity level (e.g., ERROR, WARNING,
INFO).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: ChecksumIncorrect
Description: Rx frame has incorrect checksum.
Parameters:
Name TypeEncodedTypeFormat
FrameID int uint8
CalculatedCheckSumint uint8
ReceivedCheckSum int uint8
FrameData int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NoSlaveData
Description: The data block from the slave was not received
Parameters:
Name TypeEncodedTypeFormat
ProtectedIDint uint16 hex
ID int uint16 hex

---

# Page 472

Message: RxResponseTooLate
Description: Response of LIN-Slave out of allowed maximum time. (end of header until end of checksum)
Parameters:
Name TypeEncodedType
TimeLimit int uint16
TimeMeasuredint uint16
Message: UartNoiseError
Description: RX-UART has Noise Error.
Message: UnknownLinFrameReceived
Description: Castle received a LIN frame that is not part of the LDF.
Parameters:
Name TypeEncodedTypeFormat
FrameIdint uint8 hex
back to interface definition
Interface: Switches  extends BaseSensors Switches_i _Object
Enumerations
e_DACPin
e_F_CX_level
e_Pwmled
e_SpeedSource
e_SpiResponse
e_current_sink
e_led
e_switch
e_typeF_CX
Functions
Anhaenger
BusLinesShortcutTo
Can0
Can1
CheckSensorGndSts
Diag
DiagSel
DisplayFront
DisplayRear
EnableHssCurrentSink
EnableLINMasterSensorResistorForAllChannels
EnableLINMasterSensorResistorForChannel
LedBsd
LedInputVoltageAlertL
LedInputVoltageAlertR
LedInputVoltageStateL
LedInputVoltageStateR
LedPsm
LedReadVoltage
LedSimBsd
LedSimPsm
LedSimTm
LedSimUpa
LedTm
LedUpa
Reserve2
Reserviert_0
RueckwaertsGang
SelectBsdPwmLed
SensorError
SensorVoltage17
SensorVoltageFront
SensorVoltageRear
SetLedLoad
SetSensorsLoad_Front
SetSensorsLoad_Rear
SetSpeedToConstant

---

# Page 473

SetSwitchLoad
SetUserTag
SetVoltageDAC
ShortcutDirection
ShortcutVoltage
SimSpeakerFront_80R
SimSpeakerRear_80R
SwCan
TasterBsd
TasterPsm
TasterTm
TasterUpa
TestInputVoltage
TestState_F_CX
Ton_Hm
Ton_Hp12V
Ton_Vm
Ton_Vp12V
TrenneRueckeinspeisung
Messages
GeneralMessage
GndStatus
InputVoltage
LedVoltage
LineState
SPIResponse
Enumerations
Enum: e_DACPin
Value
DA_A
DA_B
DA_E
DA_F
Enum: e_F_CX_level
Value
LOW
HIGH
Enum: e_Pwmled
Value
BSD_ALERT_L
BSD_ALERT_R
BSD_STATE_L
BSD_STATE_R
Enum: e_SpeedSource
Value
High
Low
Floating
Enum: e_SpiResponse
Value
NoResponse
Ack
HighImpedance
TransError
Enum: e_current_sink
Value
BSD_ALERT_L
BSD_STATE_L
BSD_ALERT_R
BSD_STATE_R
FRONT_SENSORS
REAR_SENSORS

---

# Page 474

SENSOR_17_24
TMP
DISPLAY_FRONT_VCC
DISPLAY_REAR_VCC
SOUNDER_FRONT_VCC
SOUNDER_REAR_VCC
SOUNDER_FRONT_GND
SOUNDER_REAR_GND
Enum: e_led
Value
BSD_ALERT_L
BSD_ALERT_R
BSD_STATE_L
BSD_STATE_R
UPA
BSD
PSM
TM
Enum: e_switch
Value
UpaSwitch
PsmSwitch
BsdSwitch
TmSwitch
RESERVE
RESERVE2
ANHAENGER
RUECKWAERTS
C_PWM1
C_PWM5
Enum: e_typeF_CX
ValueDescription
F_C0F_C0 is located at Pin#0 in GPIO Channel
1
F_C1F_C3 is located at Pin#1 in GPIO channel 1
F_C2F_C5 is located at Pin#2 in GPIO channel 1
F_C3F_C4 is located at Pin#3 in GPIO channel 1
F_C4F_C1 is located at Pin#4 in GPIO channel 1
F_C5F_C2 is located at Pin#5 in GPIO channel 1
Functions
Function: Anhaenger
Description: 
Purpose: 
- Sets KS_ANH to VCC or GND. 
Example: 
*_ApiAnhaenger(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: BusLinesShortcutTo
Description: 
Purpose: 
- Selects ShortCut to ( ex. VCC or GND ). 
Example: 
*_ApiBusLinesShortcutTo(Type)
Parameters:
NameTypeEncodedType
Typee_klint
Function: Can0

---

# Page 475

Description: 
Purpose: 
- Creates Failures on CAN0. 
Example: 
*_ApiCan0(ConnectLowHigh, Low, High)
Parameters:
Name Type EncodedType
ConnectLowHighboolean bool
Low e_open_shortint
High e_open_shortint
Function: Can1
Description: 
Purpose: 
- Creates Failures on CAN1. 
Example: 
*_ApiCan1(ConnectLowHigh, Low, High)
Parameters:
Name Type EncodedType
ConnectLowHighboolean bool
Low e_open_shortint
High e_open_shortint
Function: CheckSensorGndSts
Description: 
Purpose: 
- Reads Sensor Supply Ground Lines. 
Example: 
*_ApiCheckSensorGndSts()
Function: Diag
Description: 
Purpose: 
- This API is for Diag functionality. 
Example: 
*_ApiDiag(Type)
Parameters:
NameType EncodedType
Typee_open_shortint
Function: DiagSel
Description: 
Purpose: 
- This API is for DiagSel functionality. 
Example: 
*_ApiDiagSel(Type)
Parameters:
NameType EncodedType
Typee_diag_typeint
Function: DisplayFront
Description: 
Purpose: 
- Switches errors on Display Front. 
Example: 
*_ApiDisplayFront(Type)
Parameters:
NameType EncodedType

---

# Page 476

Typee_displayint
Function: DisplayRear
Description: 
Purpose: 
- Switches errors on Display Rear. 
Example: 
*_ApiDisplayRear(Type)
Parameters:
NameType EncodedType
Typee_displayint
Function: EnableHssCurrentSink
Description: 
Purpose: 
Enable HSS Current Sink feature at PIP 3.7 or higher 
Example: 
*_ApiEnableHssCurrentSink(BSD_ALERT_L, true, 100) 
Parameters:
NameType EncodedType
Selecte_current_sink int
Select the HSS Current Sink channel.
Enableboolean bool
Enable or disable the HSS Current Sink.
currentint uint16
The desired current value for the HSS Current
Sink.
Function: EnableLINMasterSensorResistorForAllChannels
Description: 
Purpose: 
- This API enables 1k Resistor Pull-up in every Sensor LIN line on the PIP. 
- Use this API with PIP version 3.6 
Example: 
*_ApiEnableLINMasterSensorResistorForAllChannels(Enable)
Parameters:
NameType EncodedType
Enablebooleanbool
Function: EnableLINMasterSensorResistorForChannel
Description: 
Purpose: 
Enable 1k Resistor Pull-up in every Sensor LIN line on the PIP, Use this API with PIP version 3.7 or higher 
Example: 
*_ApiEnableLINMasterSensorResistorForChannel(FRONT_SENSORS, true) 
Parameters:
NameType EncodedType
Sensore_sensor int
Select the Sensor LIN line channel.
Enableboolean bool
Enable or disable the 1k resistor pull-
up.
Function: LedBsd
Description: 
Purpose: 
Set the failure type for the Led BSD. 
Example: 
*_ApiLedBsd(Enme_type_LED.SC_TO_GND) 
Parameters:

---

# Page 477

NameType EncodedType
Typee_type_LED int
Select the failure type for the Led
BSD
Function: LedInputVoltageAlertL
Description: 
Purpose: 
check LedInputVoltage, only available starting with PIP 3.7 
Example: 
*_ApiLedInputVoltageAlertL(4.0, 5.0) 
Parameters:
Name Type EncodedType Scale Unit
MinVoltageint uint16 0.001 V
Minimum voltage to check for the LED input (in Volts).
MaxVoltageint uint16 0.001 V
Maximum voltage to check for the LED input (in
Volts).
Function: LedInputVoltageAlertR
Description: 
Purpose: 
check LedInputVoltage, only available starting with PIP 3.7 
Example: 
*_ApiLedInputVoltageAlertR(4.0, 5.0) 
Parameters:
Name Type EncodedType Scale Unit
MinVoltageint uint16 0.001 V
Minimum voltage to check for the LED input (in Volts).
MaxVoltageint uint16 0.001 V
Maximum voltage to check for the LED input (in
Volts).
Function: LedInputVoltageStateL
Description: 
Purpose: 
check LedInputVoltage, only available starting with PIP 3.7 
Example: 
*_ApiLedInputVoltageStateL(4.0, 5.0) 
Parameters:
Name Type EncodedType Scale Unit
MinVoltageint uint16 0.001 V
Minimum voltage to check for the LED input (in Volts).
MaxVoltageint uint16 0.001 V
Maximum voltage to check for the LED input (in
Volts).
Function: LedInputVoltageStateR
Description: 
Purpose: 
check LedInputVoltage, only available starting with PIP 3.7 
Example: 
*_ApiLedInputVoltageStateR(4.0, 5.0) 
Parameters:
Name Type EncodedType Scale Unit
MinVoltageint uint16 0.001 V
Minimum voltage to check for the LED input (in Volts).
MaxVoltageint uint16 0.001 V
Maximum voltage to check for the LED input (in
Volts).
Function: LedPsm
Description: 

---

# Page 478

Purpose: 
- This API controls the LedPsm. 
- Open only available starting with PIP 3.5 
Example: 
*_ApiLedPsm(Type)
Parameters:
NameType EncodedType
Typee_type_LEDint
Function: LedReadVoltage
Description: 
Purpose: 
Read the voltage on one of the following leds to be output on the FPGA pin F_BSD_PWM: 
BSD_ALERT_L , BSD_ALERT_R , BSD_STATE_L , BSD_STATE_R 
Example: 
*_ApiLedReadVoltage() 
Return Messages: 
Logs "[LedVoltage]" 
Response timeout: 1000
Result Message: LedVoltage 
Faults: 
Function: LedSimBsd
Description: 
Purpose: 
Simulate a failure on the BSD Led. 
Example: 
*_ApiLedSimBsd(SC_TO_GND) 
Parameters:
NameType EncodedType
Typee_type int
Select the failure type to simulate on the BSD
Led.
Function: LedSimPsm
Description: 
Purpose: 
- Switches 1k Resistor on LED to GND, LOAD or open to simulate load. 
Example: 
*_ApiLedSimPsm(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: LedSimTm
Description: 
Purpose: 
Simulate a failure on the TM Led. 
Example: 
*_ApiLedSimTm(SC_TO_VOLTAGE) 
Parameters:
NameType EncodedType
Typee_type int
Select the failure type to simulate on the TM
Led.
Function: LedSimUpa
Description: 
Purpose: 

---

# Page 479

- Switches 1k Resistor on LED to GND, LOAD or open to simulate load. 
Example: 
*_ApiLedSimUpa(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: LedTm
Description: 
Purpose: 
Set the failure type for the Led Tm. 
Example: 
*_ApiLedTm(SC_TO_GND) 
Parameters:
NameType EncodedType
Typee_type_LED int
Select the failure type for the Led
Tm
Function: LedUpa
Description: 
Purpose: 
- This API controls the LedUpa. 
- Open only available starting with PIP 3.5 
Example: 
*_ApiLedUpa(Type)
Parameters:
NameType EncodedType
Typee_type_LEDint
Function: Reserve2
Description: 
Purpose: 
This function is reserved for future use. 
Example: 
*_ApiReserve2(RESERVE) 
Parameters:
NameType EncodedType
Typee_type int
Select the type of reservation. it should be one of RESERVE or
RESERVE2
Function: Reserviert_0
Description: 
Purpose: 
- Sets KS_RES to VCC or GND. 
Example: 
*_ApiReserviert_0(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: RueckwaertsGang
Description: 
Purpose: 
- Sets KS_RUE to VCC or GND. 
Example: 
*_ApiRueckwaertsGang(Type)

---

# Page 480

Parameters:
NameType EncodedType
Typee_typeint
Function: SelectBsdPwmLed
Description: 
Purpose: 
Selects one of the following leds to be output on the FPGA pin F_BSD_PWM: 
BSD_ALERT_L , BSD_ALERT_R , BSD_STATE_L , BSD_STATE_R 
Example: 
*_ApiSelectBsdPwmLed(BSD_ALERT_L) 
Parameters:
NameType EncodedType
_Lede_Pwmled int
Select the Led to be output on the F_BSD_PWM
pin.
Function: SensorError
Description: 
Purpose: 
- Creates Sensor SW failures. 
Example: 
*_ApiSensorError(Sensor, Type)
Parameters:
NameType EncodedType
Sensore_sensor int
Type e_sensor_errorsint
Function: SensorVoltage17
Description: 
Purpose: 
- This API is for SensorVoltage17 functionality. 
- SC to 12V or plus, implemented with PIP 3.7 or higher, 
- voltage level for plus must be selected using ShortcutVoltage, 
- possible is T15 or T30, different voltage level must be realized 
- with external power sup 
Example: 
*_ApiSensorVoltage17(Type)
Parameters:
NameType EncodedType
Typee_SC_TO_GND_VCC_UB12Vint
Function: SensorVoltageFront
Description: 
Purpose: 
- This API is for SensorVoltageFront functionality. 
- SC to plus or interruption (UB), implemented with PIP 3.5 or higher, 
- voltage level for plus must be selected using ShortcutVoltage, 
- possible is T15 or T30, different voltage level must be realized 
- with external power sup 
Example: 
*_ApiSensorVoltageFront(Type)
Parameters:
NameType EncodedType
Typee_SC_TO_GND_VCC_UB12Vint
Function: SensorVoltageRear
Description: 
Purpose: 
- This API is for SensorVoltageRear functionality. 
- SC to plus or interruption (UB), implemented with PIP 3.5 or higher, 

---

# Page 481

- voltage level for plus must be selected using ShortcutVoltage, 
- possible is T15 or T30, different voltage level must be realized 
- with external power sup 
Example: 
*_ApiSensorVoltageRear(Type)
Parameters:
NameType EncodedType
Typee_SC_TO_GND_VCC_UB12Vint
Function: SetLedLoad
Description: 
Purpose: 
Set Variable Led Load at PIP 3.7 or higher. Maximum simulated load is 600mA 
Example: 
*_ApiSetLedLoad(BSD, 500) 
Parameters:
NameType EncodedType Unit
Selecte_led int -
Select the Led to set it's load
Loadint uint16 mA
The desired load value for the selected Led (in
mA).
Function: SetSensorsLoad_Front
Description: 
Purpose: 
Selects the number of sensors on Piggy board, accordingly a resistance and capacitance is selected 
Example: 
*_ApiSetSensorsLoad_Front(4, 2) 
Parameters:
Name Type EncodedType
Nbr_of_HPSensorsint uint8
Number of High Performance sensors on the Front Piggy
board.
Nbr_of_AKSensorsint uint8
Number of AK sensors on the Front Piggy board.
Function: SetSensorsLoad_Rear
Description: 
Purpose: 
Selects the number of sensors on Piggy board, accordingly a resistance and capacitance is selected 
Example: 
*_ApiSetSensorsLoad_Rear(5, 3) 
Parameters:
Name Type EncodedType
Nbr_of_HPSensorsint uint8
Number of High Performance sensors on the Rear Piggy
board.
Nbr_of_AKSensorsint uint8
Number of AK sensors on the Rear Piggy board.
Function: SetSpeedToConstant
Description: 
Purpose: 
Set the Speed output Pin to a constant High value when setting C_PWM_1 to '1' or set it to constant Low when seeting
C_PWM_5 to '1' in PIP 3.7 
argument => PwmSource: Low means set C_PWM_5 , High means set C_PWM_1 , Floating means set both to 0 
Example: 
*_ApiSetSpeedToConstant(High) 
Parameters:

---

# Page 482

Name Type EncodedType
PwmSourcee_SpeedSource int
Select the Pwm Source to set speed to
constant.
Function: SetSwitchLoad
Description: 
Purpose: 
Set Variable Switch Load at PIP 3.7 or higher. Maximum simulated load is 600mA 
Example: 
*_ApiSetSwitchLoad(TmSwitch, true, 400) 
Parameters:
NameType EncodedType Unit
Selecte_switch int -
Select the switch to set its load.
Enableboolean bool
Enable or disable the load for the selected switch.
Loadint uint16 mA
The desired load value for the selected switch (in
mA).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetVoltageDAC
Description: 
Purpose: 
Set voltage to pins connected to DAC AD5328BRU in PIP 3.7 or higher 
Example: 
*_ApiSetVoltageDAC(DA_A, 2.5) 
Parameters:
Name Type EncodedType Scale Unit
Selecte_DACPin int - -
Select the DAC pin to set its voltage.
Voltageint uint16 0.001 V
The desired voltage for the selected DAC pin (in
Volts).
Function: ShortcutDirection
Description: 
Purpose: 
- Selects ShortCut Direction. 
Example: 
*_ApiShortcutDirection(Type)
Parameters:
NameType EncodedType
Typee_ks_dirint
Function: ShortcutVoltage
Description: 
Purpose: 
- Switches the shortcutvoltage VCC either Terminal 15 or 30 
- useful to simulate other VCC error voltages than Terminal 15 
Example: 
*_ApiShortcutVoltage(Type)
Parameters:

---

# Page 483

NameTypeEncodedType
Typee_klint
Function: SimSpeakerFront_80R
Description: 
Purpose: 
- Sets R80_TON_H , 80 Ohm Speaker Load Resistance for Front. 
Example: 
*_ApiSimSpeakerFront_80R(Type)
Parameters:
NameType EncodedType
Typebooleanbool
Function: SimSpeakerRear_80R
Description: 
Purpose: 
- Sets R80_TON_H , 80 Ohm Speaker Load Resistance for Rear. 
Example: 
*_ApiSimSpeakerRear_80R(Type)
Parameters:
NameType EncodedType
Typebooleanbool
Function: SwCan
Description: 
Purpose: 
- This API is for SwCan functionality. 
Example: 
*_ApiSwCan(Type)
Parameters:
NameType EncodedType
Typee_open_shortint
Function: TasterBsd
Description: 
Purpose: 
Create failures on Taster BSD. 
Example: 
*_ApiTasterBsd(Enme_type.SC_TO_VOLTAGE) 
Parameters:
NameType EncodedType
Typee_type int
Select the failure type for the Taster
BSD
Function: TasterPsm
Description: 
Purpose: 
- Sets KS_PSM to VCC or GND. 
Example: 
*_ApiTasterPsm(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: TasterTm
Description: 
Purpose: 
Create failures on Taster Tm. 

---

# Page 484

Example: 
*_ApiTasterTm(Enme_type.SC_TO_GND) 
Parameters:
NameType EncodedType
Typee_type int
Select the failure type for the Taster
Tm
Function: TasterUpa
Description: 
Purpose: 
- Sets KS_UPA to VCC or GND. 
Example: 
*_ApiTasterUpa(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: TestInputVoltage
Description: 
Purpose: 
- This API gets Input Voltage from ADC pins in PIP. 
Example: 
*_ApiTestInputVoltage(InputPin, MinVoltage, MaxVoltage)
Parameters:
Name Type EncodedTypeScaleUnit
InputPin e_type_ADCint - -
MinVoltageint uint16 0.001V
MaxVoltageint uint16 0.001V
Function: TestState_F_CX
Description: 
Purpose: 
Get state from pins F_C0 ~ F_C5 (LOW -> 0V), (HIGH -> 5V) 
Example: 
*_ApiTestState_F_CX(Enme_typeF_CX.F_C0, Enme_F_CX_level.HIGH) 
Parameters:
Name Type EncodedType
InputPine_typeF_CX int
Selects one of the pins F_C0 ~ F_C5
ExpectedStatee_F_CX_level int
Selects the expected state of the selected Pin, can be HIGH or
LOW
Function: Ton_Hm
Description: 
Purpose: 
- Switches error on Sounder Rear line to Gnd or open or VCC. 
Example: 
*_ApiTon_Hm(Type)
Parameters:
NameType EncodedType
Typee_gnd_vcc_openint
Function: Ton_Hp12V
Description: 
Purpose: 
- Switches error on Sounder Rear line to Gnd or open. 
Example: 
*_ApiTon_Hp12V(Type)

---

# Page 485

Parameters:
NameType EncodedType
Typee_gnd_openint
Function: Ton_Vm
Description: 
Purpose: 
- Switches error on Sounder Front line to Gnd or open or VCC 
Example: 
*_ApiTon_Vm(Type)
Parameters:
NameType EncodedType
Typee_gnd_vcc_openint
Function: Ton_Vp12V
Description: 
Purpose: 
- Switches error on Sounder Front line to Gnd or open. 
Example: 
*_ApiTon_Vp12V(Type)
Parameters:
NameType EncodedType
Typee_gnd_open_loadint
Function: TrenneRueckeinspeisung
Description: 
Purpose: 
- This API is for TrenneRueckeinspeisung functionality. 
Example: 
*_ApiTrenneRueckeinspeisung(Wert)
Parameters:
NameType EncodedType
Wertbooleanbool
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GndStatus
Description: Status of Sensors Gnd Line
Parameters:
Name Type EncodedType
Reasone_gnd_stateint
Message: InputVoltage
Description: Report Info/Error based on min and max voltage values
Parameters:
Name TypeEncodedTypeScaleUnit
MinVoltage int uint16 0.001V
MeasuredVoltageint uint16 0.001V
MaxVoltage int uint16 0.001V
Message: LedVoltage
Description: Received response
Parameters:
Name TypeEncodedTypeUnit

---

# Page 486

Voltagefloatfloat32 v
Message: LineState
Description: LineState
Parameters:
Name Type EncodedType
ExpectedStatee_F_CX_levelint
CurrentState e_F_CX_levelint
Message: SPIResponse
Description: SPI Response for Switches command
Parameters:
Name Type EncodedType
SpiResponsee_SpiResponseint
back to interface definition
Interface: Leds  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: LED_UPA
Name Interface
LED_UPALed
Object: LED_PSM
Name Interface
LED_PSMLed
Object: LED_BSD
Name Interface
LED_BSDLed
Object: LED_TM
Name Interface
LED_TMLed
Object: LED_BSD_ALERT_L
Name Interface
LED_BSD_ALERT_LLed
Object: LED_BSD_STATE_L
Name Interface

---

# Page 487

LED_BSD_STATE_LLed
Object: LED_BSD_STATE_R
Name Interface
LED_BSD_STATE_RLed
Object: LED_BSD_ALERT_R
Name Interface
LED_BSD_ALERT_RLed
Object: LedBsdPwm_Alert_L
Name Interface
LedBsdPwm_Alert_LLed
Object: LedBsdPwm_Alert_R
Name Interface
LedBsdPwm_Alert_RLed
Object: LedBsdPwm_State_L
Name Interface
LedBsdPwm_State_LLed
Object: LedBsdPwm_State_R
Name Interface
LedBsdPwm_State_RLed
back to interface definition
Interface: SpeakerAndMic  extends Speaker _Object
Functions
PrintAllSequence
ResetDataFront
ResetDataRear
ResetSequence
SetUserTag
TestCurrentMicValues
TestCurrentValueFront
TestCurrentValueRear
TestSequence
Messages
FrontData
GeneralMessage
MicData
RearData
SequencePrint
SequenceTest
Functions
Function: PrintAllSequence
Description: 
Purpose: 
- Print up to 9 item at time of the saved buffer if the number of items requested is greater than 9 Negative response will be
generated. 
Example: 
*_ApiPrintAllSequence(FirstItemNr,LastItemNr)
Parameters:
Name Type EncodedType
Side TonSideint
FirstItemNrint uint8
LastItemNrint uint8
Function: ResetDataFront
Description: 
Purpose: 
- Reset the running measurement on front speaker. 
Example: 

---

# Page 488

*_ApiResetDataFront()
Function: ResetDataRear
Description: 
Purpose: 
- Reset the running measurement on rear speaker. 
Example: 
*_ApiResetDataRear()
Function: ResetSequence
Parameters:
NameType EncodedType
Side TonSideint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestCurrentMicValues
Description: 
Purpose: 
This function tests the current values of the microphone within a specified range. 
Example: 
*_ApiTestCurrentMicValues(100, 1000, 10, 50, 20, 60) 
Parameters:
Name TypeEncodedType OffsetScaleUnit
Fminint uint16 0 1.0 Hz
The minimum frequency value to be checked (in Hz).
Fmaxint uint16 0 1.0 Hz
The maximum frequency value to be checked (in
Hz).
PulseMinint uint16 0 5.0 ms
The minimum pulse duration to be checked (in ms).
PulseMaxint uint16 0 5.0 ms
The maximum pulse duration to be checked (in ms).
PauseMinint uint16 0 5.0 ms
The minimum pause duration to be checked (in ms).
PauseMaxint uint16 0 5.0 ms
The maximum pause duration to be checked (in ms).
Function: TestCurrentValueFront
Description: 
Purpose: 
- Tests an incoming pulse's Value , frequency , duty and pulse width if it is in rage of the given arguments. 
- THIS Operates on the front speaker. 
Example: 
*_ApiTestCurrentValueFront(Value,Fmin,Fmax,PulseMin,PulseMax,PauseMin,PauseMax,VolumeMin,VolumeMax)
Parameters:
Name TypeEncodedTypeOffsetScale Unit
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
PulseMin int uint16 0 5.0 ms
PulseMax int uint16 0 5.0 ms
PauseMin int uint16 0 5.0 ms
PauseMaxint uint16 0 5.0 ms
VolumeMinint uint8 0 0.392156862745Prozent
VolumeMaxint uint8 0 0.392156862745Prozent

---

# Page 489

Function: TestCurrentValueRear
Description: 
Purpose: 
- Tests an incoming pulse's Value , frequency , duty and pulse width if it is in rage of the given arguments. 
- THIS Operates on the rear speaker. 
Example: 
*_ApiTestCurrentValueRear(Value,Fmin,Fmax,PulseMin,PulseMax,PauseMin,PauseMax,VolumeMin,VolumeMax)
Parameters:
Name TypeEncodedTypeOffsetScale Unit
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
PulseMin int uint16 0 5.0 ms
PulseMax int uint16 0 5.0 ms
PauseMin int uint16 0 5.0 ms
PauseMaxint uint16 0 5.0 ms
VolumeMinint uint8 0 0.392156862745Prozent
VolumeMaxint uint8 0 0.392156862745Prozent
Function: TestSequence
Description: 
Purpose: 
- Tests an incoming pulse's duty cycle , frequency and pulse width if it is in rage of the given arguments. 
Example: 
*_ApiTestSequence(Side,Type,SqItemNr,Fmin,Fmax,TMin,TMax,do_reset,BackwardTest)
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Side TonSide int - - -
Type PulseTypeint - - -
SqItemNr int uint8
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
TMin int uint16 0 5.0 ms
TMax int uint16 0 5.0 ms
do_reset boolean bool
BackwardTestboolean bool
back to interface definition
Messages
Message: FrontData
Description: Data of the front sounder
Parameters:
Name Type EncodedTypeOffsetScale Unit
Reason e_reasonint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Pulse int uint16 0 5 ms
PulseMin int uint16 0 5 ms
PulseMax int uint16 0 5 ms
Pause int uint16 0 5 ms
PauseMin int uint16 0 5 ms
PauseMaxint uint16 0 5 ms
Volume int uint8 0 0.3921568627450980392156862745098Prozent
VolumeMinint uint8 0 0.3921568627450980392156862745098Prozent
VolumeMaxint uint8 0 0.3921568627450980392156862745098Prozent
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: MicData

---

# Page 490

Description: Data of the Mic
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Reason e_reasonint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Pulse int uint16 0 5 ms
PulseMin int uint16 0 5 ms
PulseMaxint uint16 0 5 ms
Pause int uint16 0 5 ms
PauseMinint uint16 0 5 ms
PauseMaxint uint16 0 5 ms
Message: RearData
Description: Data of the rear sounder
Parameters:
Name Type EncodedTypeOffsetScale Unit
Reason e_reasonint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Pulse int uint16 0 5 ms
PulseMin int uint16 0 5 ms
PulseMax int uint16 0 5 ms
Pause int uint16 0 5 ms
PauseMin int uint16 0 5 ms
PauseMaxint uint16 0 5 ms
Volume int uint8 0 0.3921568627450980392156862745098Prozent
VolumeMinint uint8 0 0.3921568627450980392156862745098Prozent
VolumeMaxint uint8 0 0.3921568627450980392156862745098Prozent
Message: SequencePrint
Description: SequencePrint
Parameters:
Name Type EncodedTypeOffsetScaleUnit
SqItemNr int uint8
ReturnedTypePulseTypeint - - -
Time int uint16 0 5 ms
Message: SequenceTest
Description: SequenceTest
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Reason seq_reasonint - - -
SqItemNr int uint8
Side TonSide int - - -
ExpectedTypePulseTypeint - - -
ReturnedTypePulseTypeint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Time int uint16 0 5 ms
T_Min int uint16 0 5 ms
T_Max int uint16 0 5 ms
back to interface definition
Interface: BaseSensors  extends _Object
Enumerations
e_sensor
e_signalway
Functions
SetUserTag
Messages
GeneralMessage

---

# Page 491

Enumerations
Enum: e_sensor
Value Description
SENSOR_RCLHRES1
SENSOR_RSLHSL
SENSOR_ROLHAL
SENSOR_RIL HML
SENSOR_RIR HMR
SENSOR_RORHAR
SENSOR_RSRHSR
SENSOR_RCRHRES2
SENSOR_FCLVRES1
SENSOR_FSLVSL
SENSOR_FOLVAL
SENSOR_FIL VML
SENSOR_FIR VMR
SENSOR_FORVAR
SENSOR_FSRVSR
SENSOR_FCRVRES2
SENSOR_C17
SENSOR_C18
SENSOR_C19
SENSOR_C20
SENSOR_C21
SENSOR_C22
SENSOR_C23
SENSOR_C24
Enum: e_signalway
Description: Sensor IDs are assigned clockwise, then Signalways follow the same order signalway naming convention is :
first sensor is beaming and second one is receiving. for example, signalway "FOL_FSL" : means FOL is beaming and FSL
is receiving
Value
FSL_FSL
FOL_FSL
FSL_FOL
FOL_FOL
FIL_FOL
FOL_FIL
FIL_FIL
FIR_FIL
FIL_FIR
FIR_FIR
FOR_FIR
FIR_FOR
FOR_FOR
FSR_FOR
FOR_FSR
FSR_FSR
RSR_RSR
ROR_RSR
RSR_ROR
ROR_ROR
RIR_ROR
ROR_RIR
RIR_RIR
RIL_RIR
RIR_RIL
RIL_RIL
ROL_RIL
RIL_ROL
ROL_ROL
RSL_ROL
ROL_RSL
RSL_RSL
FCR_FCR
FCR_FSR

---

# Page 492

FSR_FCR
FCL_FCL
FCL_FSL
FSL_FCL
RCR_RCR
RCR_RSR
RSR_RCR
RCL_RCL
RCL_RSL
RSL_RCL
LRE_LRE
LRM_LRE
LRE_LRM
LRM_LRM
LRC_LRM
LRM_LRC
LRC_LRC
LFC_LRC
LRC_LFC
LFC_LFC
LFM_LFC
LFC_LFM
LFM_LFM
LFE_LFM
LFM_LFE
LFE_LFE
RFE_RFE
RFM_RFE
RFE_RFM
RFM_RFM
RFC_RFM
RFM_RFC
RFC_RFC
RRC_RFC
RFC_RRC
RRC_RRC
RRM_RRC
RRC_RRM
RRM_RRM
RRE_RRM
RRM_RRE
RRE_RRE
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: AkSensors  extends BaseSensors _Object
Enumerations
CustomSwFailure
EventType
e_mode

---

# Page 493

e_response
e_sensor_select
e_state
Functions
CheckRam
Config
ConfigChannel
ConfigChannel_i
ConfigRangeMode
ConfigureSensorReprogramming
CustomizeFailureTimings
Echo
EchoByIndex
EchoMM
EchoMMDefault
EventReset
EventTestAndReset
FrontTxSequence
FrontTxSequenceErrors
LogRamProgramming
RearTxSequence
RearTxSequenceErrors
SensorSelect
SetRamDesiredValues
SetUserTag
Messages
CheckRam
Data
EventTest
FrontSequenceMismatch
GeneralMessage
RearSequenceMismatch
Enumerations
Enum: CustomSwFailure
Value Description
ATTENUATION_FAILUREAttenuation failure: Attenuation/Decay is less than threshold
ICE_FAILURE Ice failure: Attenuation/Decay is more than threshold
HEAVYNOISE_FAILUREHeavy Noise failure: Transmission delay is less than
threshold
Enum: EventType
Value
TX
RX
PROG
STATUS
Enum: e_mode
Value Description
DefaultSet the field (delay and decay) to its default value which is hardcoded in
castle
UserInputSet the field by the value provided by the user
Enum: e_response
Value
LAST_PROG_NOT_OK__DEFAULT_THRESHOLD_ACTIVE
LAST_PROG_NOT_OK__LAST_VALID_THRESHOLD_ACTIVE
LAST_PROG_OK__EXTENDED_RANGE
LAST_PROG_OK__NORMAL_RANGE
Enum: e_sensor_select
Value Description
SENSOR_AK AK Sensor
SENSOR_BRICBric Sensor
Enum: e_state
Value
NOTHING

---

# Page 494

OK
ERRCRC
COMPLETE_ERRCRC
ERRTIMING
ERRCRC_TIMING
COMPLETE_ERRTIMING
COMPLETE_ERRCRCTIMING
Functions
Function: CheckRam
Description: 
Purpose: 
- Checks whether a specific channel has been configured. It only tests whether the complete flag was set. Error-free
configuration must be ensured using the default values.. 
Example: 
*_ApiCheckRam(Channels_Channel_00, Channels_Channel_01, Channels_Channel_02, Channels_Channel_03,
Channels_Channel_04, Channels_Channel_05, Channels_Channel_06, Channels_Channel_07, Channels_Channel_08,
Channels_Channel_09, Channels_Channel_10, Channels_Channel_11, Channels_Channel_12, Channels_Channel_13,
Channels_Channel_14, Channels_Channel_15);
Parameters:
Name Type EncodedType
Channels_Channel_00booleanbool
Channels_Channel_01booleanbool
Channels_Channel_02booleanbool
Channels_Channel_03booleanbool
Channels_Channel_04booleanbool
Channels_Channel_05booleanbool
Channels_Channel_06booleanbool
Channels_Channel_07booleanbool
Channels_Channel_08booleanbool
Channels_Channel_09booleanbool
Channels_Channel_10booleanbool
Channels_Channel_11booleanbool
Channels_Channel_12booleanbool
Channels_Channel_13booleanbool
Channels_Channel_14booleanbool
Channels_Channel_15booleanbool
Function: Config
Description: 
Purpose: 
- Configures the global properties of the sensors. Delay is the transmission delay, Decay is the reverberation time. Two
configurations are available. For each sensor, you can choose which one to use. The '0' or '1' values. 
Example: 
*_ApiConfig(Delay0, Delay1, Decay0, Decay1);
Parameters:
Name TypeEncodedTypeOffsetScaleUnit
Delay0int uint16 0 4.0 us
Delay1int uint16 0 4.0 us
Decay0int uint16 0 4.0 us
Decay1int uint16 0 4.0 us
Function: ConfigChannel
Description: 
Purpose: 
- Sets the channel-specific configuration. All channels are specified at once. ConfigSel = 0 selects Delay0 and Decay0,
ConfigSel = 1 selects Delay1 and Decay1. See Config. ProgSim = 1 causes the simulation to respond with a NOK if
programming was not successful. If ProgSim = 0, the 'Response' is always answered. Response specifies the status word
with which the sensor should respond to a status request. 
Example: 
*_ApiConfigChannel(Channel00_ConfigSel, Channel00_ProgSim, Channel00_Response, Channel01_ConfigSel,
Channel01_ProgSim, Channel01_Response, Channel02_ConfigSel, Channel02_ProgSim, Channel02_Response,
Channel03_ConfigSel, Channel03_ProgSim, Channel03_Response, Channel04_ConfigSel, Channel04_ProgSim,
Channel04_Response, Channel05_ConfigSel, Channel05_ProgSim, Channel05_Response, Channel06_ConfigSel,

---

# Page 495

Channel06_ProgSim, Channel06_Response, Channel07_ConfigSel, Channel07_ProgSim, Channel07_Response,
Channel08_ConfigSel, Channel08_ProgSim, Channel08_Response, Channel09_ConfigSel, Channel09_ProgSim,
Channel09_Response, Channel10_ConfigSel, Channel10_ProgSim, Channel10_Response, Channel11_ConfigSel,
Channel11_ProgSim, Channel11_Response, Channel12_ConfigSel, Channel12_ProgSim, Channel12_Response,
Channel13_ConfigSel, Channel13_ProgSim, Channel13_Response, Channel14_ConfigSel, Channel14_ProgSim,
Channel14_Response, Channel15_ConfigSel, Channel15_ProgSim, Channel15_Response);
Parameters:
Name Type EncodedType
Channel00_ConfigSelboolean bool
Channel00_ProgSim boolean bool
Channel00_Responsee_responseint
Channel01_ConfigSelboolean bool
Channel01_ProgSim boolean bool
Channel01_Responsee_responseint
Channel02_ConfigSelboolean bool
Channel02_ProgSim boolean bool
Channel02_Responsee_responseint
Channel03_ConfigSelboolean bool
Channel03_ProgSim boolean bool
Channel03_Responsee_responseint
Channel04_ConfigSelboolean bool
Channel04_ProgSim boolean bool
Channel04_Responsee_responseint
Channel05_ConfigSelboolean bool
Channel05_ProgSim boolean bool
Channel05_Responsee_responseint
Channel06_ConfigSelboolean bool
Channel06_ProgSim boolean bool
Channel06_Responsee_responseint
Channel07_ConfigSelboolean bool
Channel07_ProgSim boolean bool
Channel07_Responsee_responseint
Channel08_ConfigSelboolean bool
Channel08_ProgSim boolean bool
Channel08_Responsee_responseint
Channel09_ConfigSelboolean bool
Channel09_ProgSim boolean bool
Channel09_Responsee_responseint
Channel10_ConfigSelboolean bool
Channel10_ProgSim boolean bool
Channel10_Responsee_responseint
Channel11_ConfigSelboolean bool
Channel11_ProgSim boolean bool
Channel11_Responsee_responseint
Channel12_ConfigSelboolean bool
Channel12_ProgSim boolean bool
Channel12_Responsee_responseint
Channel13_ConfigSelboolean bool
Channel13_ProgSim boolean bool
Channel13_Responsee_responseint
Channel14_ConfigSelboolean bool
Channel14_ProgSim boolean bool
Channel14_Responsee_responseint
Channel15_ConfigSelboolean bool
Channel15_ProgSim boolean bool
Channel15_Responsee_responseint
Function: ConfigChannel_i
Description: 
Purpose: 
- Sets the Channel specific configuration, all channels must be configured at once. 
- ProgSim=1 means that the simulation sends OK response, in combination with ConfigRangeMode=true it sends extended
range response when requested. 
- ProgSim=0 means simulation sends always 'Response'. Response means the verify response. 
- For Ak Sensor: 0 = CRC not ok, default values active, 1 = CRC not ok last values active, 2 = CRC ok, extended range, 3
= CRC ok, normal range 
- For Bric Sensor: 0 = No Noise detected and last threshold incorrect, 1 = Noise is detected and last threshold incorrect, 2
= No Noise detected and last threshold correct, 3 = Noise detected and last threshold correct 

---

# Page 496

Example: 
*_ApiConfigChannel_i(Channel00_ProgSim, Channel00_Response, Channel01_ProgSim, Channel01_Response,
Channel02_ProgSim, Channel02_Response, Channel03_ProgSim, Channel03_Response, Channel04_ProgSim,
Channel04_Response, Channel05_ProgSim, Channel05_Response, Channel06_ProgSim, Channel06_Response,
Channel07_ProgSim, Channel07_Response, Channel08_ProgSim, Channel08_Response, Channel09_ProgSim,
Channel09_Response, Channel10_ProgSim, Channel10_Response, Channel11_ProgSim, Channel11_Response,
Channel12_ProgSim, Channel12_Response, Channel13_ProgSim, Channel13_Response, Channel14_ProgSim,
Channel14_Response, Channel15_ProgSim, Channel15_Response);
Parameters:
Name Type EncodedType
Channel00_ProgSim boolean bool
Channel00_Responsee_responseint
Channel01_ProgSim boolean bool
Channel01_Responsee_responseint
Channel02_ProgSim boolean bool
Channel02_Responsee_responseint
Channel03_ProgSim boolean bool
Channel03_Responsee_responseint
Channel04_ProgSim boolean bool
Channel04_Responsee_responseint
Channel05_ProgSim boolean bool
Channel05_Responsee_responseint
Channel06_ProgSim boolean bool
Channel06_Responsee_responseint
Channel07_ProgSim boolean bool
Channel07_Responsee_responseint
Channel08_ProgSim boolean bool
Channel08_Responsee_responseint
Channel09_ProgSim boolean bool
Channel09_Responsee_responseint
Channel10_ProgSim boolean bool
Channel10_Responsee_responseint
Channel11_ProgSim boolean bool
Channel11_Responsee_responseint
Channel12_ProgSim boolean bool
Channel12_Responsee_responseint
Channel13_ProgSim boolean bool
Channel13_Responsee_responseint
Channel14_ProgSim boolean bool
Channel14_Responsee_responseint
Channel15_ProgSim boolean bool
Channel15_Responsee_responseint
Function: ConfigRangeMode
Description: 
Purpose: 
- Configures the measurement duration for each sensor. 0 = fixed measurement duration (13 msec) -> default 1 = variable
measurement duration (26 msec). 
Example: 
*_ApiConfigRangeMode(Channels_Channel_00, Channels_Channel_01, Channels_Channel_02, Channels_Channel_03,
Channels_Channel_04, Channels_Channel_05, Channels_Channel_06, Channels_Channel_07, Channels_Channel_08,
Channels_Channel_09, Channels_Channel_10, Channels_Channel_11, Channels_Channel_12, Channels_Channel_13,
Channels_Channel_14, Channels_Channel_15);
Parameters:
Name Type EncodedType
Channels_Channel_00booleanbool
Channels_Channel_01booleanbool
Channels_Channel_02booleanbool
Channels_Channel_03booleanbool
Channels_Channel_04booleanbool
Channels_Channel_05booleanbool
Channels_Channel_06booleanbool
Channels_Channel_07booleanbool
Channels_Channel_08booleanbool
Channels_Channel_09booleanbool
Channels_Channel_10booleanbool
Channels_Channel_11booleanbool

---

# Page 497

Channels_Channel_12booleanbool
Channels_Channel_13booleanbool
Channels_Channel_14booleanbool
Channels_Channel_15booleanbool
Function: ConfigureSensorReprogramming
Description: 
Purpose: 
- To configure the BSD sensors to be not reprogrammed after ECU's power up. Default = enabled 
Example: 
*_ApiConfigureSensorReprogramming(Address, Enable);
Parameters:
Name Type EncodedType
Addresse_sensorint
Enablebooleanbool
Function: CustomizeFailureTimings
Description: 
Purpose: 
- To configure special timings of the decay time for Attenuation and ICE failures, delay time for heavy noise failure 
Example: 
*_ApiCustomizeFailureTimings(Error, mode, customizedTime);
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Error CustomSwFailureint - - -
mode e_mode int - - -
customizedTimeint uint16 0 4.0 us
Function: Echo
Description: 
Purpose: 
- Activates or deactivates the echoes that a specific channel receives. Up to 4 direct and 2 indirect echoes each can be
configured. The times are specified absolutely, starting with the end of the transmission pulse, in us. The default values
deactivate an echo. 
Example: 
*_ApiEcho(Address, Center_Start_0, Center_Stop_0, Center_Start_1, Center_Stop_1, Center_Start_2, Center_Stop_2,
Center_Start_3, Center_Stop_3, Left_Start_0, Left_Stop_0, Left_Start_1, Left_Stop_1, Right_Start_0, Right_Stop_0,
Right_Start_1, Right_Stop_1);
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Address e_sensorint - - -
Center_Start_0int uint16 0 8.0 us
Center_Stop_0int uint16 0 8.0 us
Center_Start_1int uint16 0 8.0 us
Center_Stop_1int uint16 0 8.0 us
Center_Start_2int uint16 0 8.0 us
Center_Stop_2int uint16 0 8.0 us
Center_Start_3int uint16 0 8.0 us
Center_Stop_3int uint16 0 8.0 us
Left_Start_0 int uint16 0 8.0 us
Left_Stop_0 int uint16 0 8.0 us
Left_Start_1 int uint16 0 8.0 us
Left_Stop_1 int uint16 0 8.0 us
Right_Start_0 int uint16 0 8.0 us
Right_Stop_0 int uint16 0 8.0 us
Right_Start_1 int uint16 0 8.0 us
Right_Stop_1 int uint16 0 8.0 us
Function: EchoByIndex
Description: 
Purpose: 
- Configures or deactivates the echoes a specific channel receives as a result of a specific sender channel. It is possible to
define up to 4 echoes. 

---

# Page 498

- TxChannel is the channel sending, TxChannel is the channel this call is configuring the echoes for. Both, TxChannel and
RxChannel, must be channels from the same bank. 
- That means, they must be either both from front or they must be both from rear. A mix is not allowed. The times are given
in absolute time, starting at the end of the TX request. 
- The default values of the echo parameters are deactivating the echo. 
Example: 
*_ApiEchoByIndex(ChannelTx, ChannelRx, Start_0, Stop_0, Start_1, Stop_1, Start_2, Stop_2, Start_3, Stop_3);
Parameters:
Name Type EncodedTypeOffsetScaleUnit
ChannelTxe_sensorint - - -
ChannelRxe_sensorint - - -
Start_0 int uint16 0 8.0 us
Stop_0 int uint16 0 8.0 us
Start_1 int uint16 0 8.0 us
Stop_1 int uint16 0 8.0 us
Start_2 int uint16 0 8.0 us
Stop_2 int uint16 0 8.0 us
Start_3 int uint16 0 8.0 us
Stop_3 int uint16 0 8.0 us
Function: EchoMM
Description: 
Purpose: 
- Just like Echo, only the values are scaled to mm. The scaling factor of Echo is multiplied by 1000/343. 
Example: 
*_ApiEchoMM(Address, Center_Start_0, Center_Stop_0, Center_Start_1, Center_Stop_1, Center_Start_2, Center_Stop_2,
Center_Start_3, Center_Stop_3, Left_Start_0, Left_Stop_0, Left_Start_1, Left_Stop_1, Right_Start_0, Right_Stop_0,
Right_Start_1, Right_Stop_1);
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Address e_sensorint - - -
Center_Start_0int uint16 -50 2.744mm
Center_Stop_0int uint16 0 2.744mm
Center_Start_1int uint16 0 2.744mm
Center_Stop_1int uint16 0 2.744mm
Center_Start_2int uint16 0 2.744mm
Center_Stop_2int uint16 0 2.744mm
Center_Start_3int uint16 0 2.744mm
Center_Stop_3int uint16 0 2.744mm
Left_Start_0 int uint16 0 2.744mm
Left_Stop_0 int uint16 0 2.744mm
Left_Start_1 int uint16 0 2.744mm
Left_Stop_1 int uint16 0 2.744mm
Right_Start_0 int uint16 0 2.744mm
Right_Stop_0 int uint16 0 2.744mm
Right_Start_1 int uint16 0 2.744mm
Right_Stop_1 int uint16 0 2.744mm
Function: EchoMMDefault
Description: 
Purpose: 
- The Same Like EchoMM but it uses only (2Direct Echos)Center 0,1, and Right 0 , and Left0 , to decrease the bus load
This service should be the default for the testers because most of the test cases don't use more than 2 Direct Echos Only
Start value sent by the tester and the stop value will always be assumed to be 0 
Example: 
*_ApiEchoMMDefault(Address, Center_Start_0, Center_Start_1, Left_Start_0, Right_Start_0);
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Address e_sensorint - - -
Center_Start_0int uint16 -50 2.744mm
Center_Start_1int uint16 0 2.744mm
Left_Start_0 int uint16 0 2.744mm
Right_Start_0 int uint16 0 2.744mm

---

# Page 499

Function: EventReset
Description: 
Purpose: 
- Creates RESET Event. 
Example: 
*_ApiEventReset(Channel, EventType);
Parameters:
Name Type EncodedType
Channel e_sensorint
EventTypeEventTypeint
Function: EventTestAndReset
Description: 
Purpose: 
- Creates custom even and resets. 
Example: 
*_ApiEventTestAndReset(ResetMeasurment, Channel, EventType, DeltaLimitMin, DeltaLimitMax, SampleCountLimitMin,
SampleCountLimitMax);
Parameters:
Name Type EncodedTypeScaleUnit
ResetMeasurment boolean bool
Channel e_sensorint - -
EventType EventTypeint - -
DeltaLimitMin int uint16 8 us
DeltaLimitMax int uint16 8 us
SampleCountLimitMinint uint16
SampleCountLimitMaxint uint16
Function: FrontTxSequence
Description: 
Purpose: 
- The sequence of TX requesting channels. With setting the sequence, errors are deactivated. Use the
FrontTxSequenceError function to activate the errors after the synchronization duration. 
Example: 
*_ApiFrontTxSequence(Seq0, Seq1, Seq2, Seq3, Seq4, Seq5, Seq6, Seq7, Seq8, Seq9);
Parameters:
NameType EncodedType
Seq0e_sensorint
Seq1e_sensorint
Seq2e_sensorint
Seq3e_sensorint
Seq4e_sensorint
Seq5e_sensorint
Seq6e_sensorint
Seq7e_sensorint
Seq8e_sensorint
Seq9e_sensorint
Function: FrontTxSequenceErrors
Description: 
Purpose: 
- Activates errors after synchronization duration. 
Example: 
*_ApiFrontTxSequenceErrors(ActivateErrors);
Parameters:
Name Type EncodedType
ActivateErrorsbooleanbool
Function: LogRamProgramming

---

# Page 500

Description: 
Purpose: 
- This allows you to enable or disable log output during RAM programming. Log output is enabled after a reset. Even if log
output is disabled, errors may still occur. 
Example: 
*_ApiLogRamProgramming(DoLogging);
Parameters:
Name Type EncodedType
DoLoggingbooleanbool
Function: RearTxSequence
Description: 
Purpose: 
- The sequence of TX requesting channels. With setting the sequence, errors are deactivated. Use the
RearTxSequenceError function to activate the errors after the synchronization duration. 
Example: 
*_ApiRearTxSequence(Seq0, Seq1, Seq2, Seq3, Seq4, Seq5, Seq6, Seq7, Seq8, Seq9);
Parameters:
NameType EncodedType
Seq0e_sensorint
Seq1e_sensorint
Seq2e_sensorint
Seq3e_sensorint
Seq4e_sensorint
Seq5e_sensorint
Seq6e_sensorint
Seq7e_sensorint
Seq8e_sensorint
Seq9e_sensorint
Function: RearTxSequenceErrors
Description: 
Purpose: 
- Activates errors after synchronization duration. 
Example: 
*_ApiRearTxSequenceErrors(ActivateErrors);
Parameters:
Name Type EncodedType
ActivateErrorsbooleanbool
Function: SensorSelect
Description: 
Purpose: 
- Selects one of the mux connected sensors 
Example: 
*_ApiSensorSelect(sensor_sel);
Parameters:
Name Type EncodedType
sensor_sele_sensor_selectint
Function: SetRamDesiredValues
Description: 
Purpose: 
- Sets the expected sensor programming data. Every mismatch with received programming data causes error log. State: 0:
confic complete, 1: CRC error, 2: Timing error, 3-7: not used. 
Example: 
*_ApiSetRamDesiredValues(Channel, State, Data);
Parameters:
Name Type EncodedTypeFormat

---

# Page 501

Channele_sensorint -
State e_state int -
Data int[] uint8 raw
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: CheckRam
Description: CheckRam
Parameters:
Name Type EncodedType
ChannelsCompletedExpected_Channel_00booleanbool
ChannelsCompletedExpected_Channel_01booleanbool
ChannelsCompletedExpected_Channel_02booleanbool
ChannelsCompletedExpected_Channel_03booleanbool
ChannelsCompletedExpected_Channel_04booleanbool
ChannelsCompletedExpected_Channel_05booleanbool
ChannelsCompletedExpected_Channel_06booleanbool
ChannelsCompletedExpected_Channel_07booleanbool
ChannelsCompletedExpected_Channel_08booleanbool
ChannelsCompletedExpected_Channel_09booleanbool
ChannelsCompletedExpected_Channel_10booleanbool
ChannelsCompletedExpected_Channel_11booleanbool
ChannelsCompletedExpected_Channel_12booleanbool
ChannelsCompletedExpected_Channel_13booleanbool
ChannelsCompletedExpected_Channel_14booleanbool
ChannelsCompletedExpected_Channel_15booleanbool
ChannelsCompletedCurrent_Channel_00 booleanbool
ChannelsCompletedCurrent_Channel_01 booleanbool
ChannelsCompletedCurrent_Channel_02 booleanbool
ChannelsCompletedCurrent_Channel_03 booleanbool
ChannelsCompletedCurrent_Channel_04 booleanbool
ChannelsCompletedCurrent_Channel_05 booleanbool
ChannelsCompletedCurrent_Channel_06 booleanbool
ChannelsCompletedCurrent_Channel_07 booleanbool
ChannelsCompletedCurrent_Channel_08 booleanbool
ChannelsCompletedCurrent_Channel_09 booleanbool
ChannelsCompletedCurrent_Channel_10 booleanbool
ChannelsCompletedCurrent_Channel_11 booleanbool
ChannelsCompletedCurrent_Channel_12 booleanbool
ChannelsCompletedCurrent_Channel_13 booleanbool
ChannelsCompletedCurrent_Channel_14 booleanbool
ChannelsCompletedCurrent_Channel_15 booleanbool
Message: Data
Description: Daten der Schwellenprogrammieren, bei Fehler Abweichung von Vorgaben
Parameters:
Name Type EncodedTypeFormat
Channele_sensorint -
Status e_state int -
Data int[] uint8 raw
Message: EventTest
Description: EventTest
Parameters:
Name Type EncodedTypeScaleUnit
Channel e_sensorint - -

---

# Page 502

EventType EventTypeint - -
DeltaLimitMin int uint16 8 us
DeltaMin int uint16 8 us
DeltaAvg int uint16 8 us
DeltaMax int uint16 8 us
DeltaLimitMax int uint16 8 us
SampleCountLimitMinint uint16
SampleCount int uint16
SampleCountLimitMaxint uint16
Message: FrontSequenceMismatch
Description: Front TX Sequence mismatch
Parameters:
Name Type EncodedType
SequenceIndex int uint8
CurrentTxChannele_sensorint
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: RearSequenceMismatch
Description: Rear TX Sequence mismatch
Parameters:
Name Type EncodedType
SequenceIndex int uint8
CurrentTxChannele_sensorint
back to interface definition
Interface: UpaPcCanCom  extends _Object
Functions
DisableCouplingVS6SecondDirectEcho
EnableVs6SupportForCI
SetUserTag
Messages
GeneralMessage
Functions
Function: DisableCouplingVS6SecondDirectEcho
Description: 
Purpose: 
- Enables or disables coupling the second direct echo from VS6. Default is enabled 
Example: 
*_ApiDisableCouplingVS6SecondDirectEcho(Disable);
Parameters:
Name Type EncodedType
Disablebooleanbool
Function: EnableVs6SupportForCI
Description: 
Purpose: 
- Enables or disables VS6 support on any Castle PIM / RACK 
Example: 
*_ApiEnableVs6SupportForCI(Enable);
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user

---

# Page 503

tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: HpSensors  extends BaseSensors _Object
Enumerations
PID_Number
e_byte_index
e_mode
e_type
e_write_byte_index
Functions
ConfigureGetPid
Echo
EchoMM
GetCfgMemIdx
GetCfgMemIdxAndTest
GetPidValue
InitConfigMemory
SWError
SetCfgMemIdx
SetCfgMemIdxBits
SetConfidenceLevel
SetFieldNoise
SetFieldNoiseSingleSensor
SetMagnitude
SetReverberationPeriod
SetReverberationPeriodSingleSensor
SetReverberationTime
SetReverberationTimeSingleSensor
SetSyncDuration
SetSyncDurationSingleSensor
SetTemperature
SetTemperatureSingleSensor
SetUserTag
StartMeasurementSequence
TestAPI
Messages
ConfigMemTest
GeneralMessage
GetPidValue
MeasurementSequence
Enumerations
Enum: PID_Number
Value
PID_0
PID_1
PID_2
PID_3
PID_4
PID_5
PID_6
PID_7
PID_8

---

# Page 504

PID_9
PID_10
PID_11
PID_12
PID_13
PID_14
PID_15
Diag_Request
Diag_Response
Enum: e_byte_index
Description:
Value
cmd0
cmd1
cmd2
cmd3
cmd4
cmd5
Enum: e_mode
Value Description
DefaultSet the field (sync_duration, temp,...) to its default value which is hardcoded in
castle
UserInputSet the field by the value provided by the user
Enum: e_type
Description: Implemented failures for HpSensors are listed in this sheet " https://goo.gl/W6Dq7W "
Value Description
NORMAL Remove all failures and restore default values
MEMBRANEsensor does not vibrate as expected. i.e. if 'Reverberation time' is less than 100µs and
'Reverberation period' is 25ns
CRCThe CRC value returned by the sensor during sensor diagnostic is different from the CRC
calculated by ECU, in PID(4), Page: 81 "HP sensor spec.pdf"
RX_DIAG_DONEReset value of RX_DIAG_DONE flag shall be zero. Flag shall be set to one when self
diagnostic of ultrasonic receiver is finished, Page: 82 "HP sensor spec.pdf"
RX_DIAG_ERRORReset value of RX_DIAG_ERROR flag shall be zero. Flag shall be set to one at the end of
ultrasonic receiver self diagnostic if self diagnostic failed, Page: 82 "HP sensor spec.pdf"
RX_DIAG_NOISEReset value of RX_DIAG_NOISE flag shall be zero. Flag shall be set to one if pulse or
permanent noise is detected during ultrasonic receiver self diagnostic, Page: 82 "HP sensor
spec.pdf"
RX_DIAG_DAMPReset value of RX_DIAG_DAMP flag shall be set zero. Flag shall be set to one if failure on
resistor DRV1RA or DRV1RB is detected during ultrasonic receiver self diagnostic, Page: 82
"HP sensor spec.pdf"
SENSOR_STATUS_RST_FLAGRST_FLAG in SENSOR_STATUS register shall be set to one in RESET_MODE of reset
generator, Page: 82 "HP sensor spec.pdf"
SENSOR_STATUS_LIN_ERRORReset value of LIN_ERROR shall be zero. LIN_ERROR flag in SENSOR_STATUS register
shall be set, if LIN response error is detected, Page: 82 "HP sensor spec.pdf"
SENSOR_STATUS_VSUP_UV_OVReset value of VSUP_UV flag shall be zero. If LOW_POWER_MODE of reset generator is
entered, the VSUP_UV flag shall be set to one, Reset value of VSUP_OV flag shall be zero. If
VSUP over voltage is detected during TX ultrasonic transmission, for more than 3.6us, the
VSUP_OV flag shall be set to one, Page: 82 "HP sensor spec.pdf"
SENSOR_STATUS_TX_DIAG_ERRORReset value of TX_DIAG_ERROR shall be zero. If self diagnostic of ultrasonic transmitter
failed TX_DIAG_ERROR flag inSENSOR_STATUS register shall be set to one, but ultrasonic
measurement is not stopped, Page: 82 "HP sensor spec.pdf"
SENSOR_STATUS_THS_FLAGReset value of THS_FLAG shall be zero. THS_FLAG shall be set to one in THS_MODE of
reset generator, Page: 82 "HP sensor spec.pdf"
PI_ZONEThe reset value of PI_ZONE shall be zero. Flag shall be set to one if obstacle is detected in
proximity indication zone, Page: 84 "HP sensor spec.pdf"
NOISE_FLAGThe reset value of NOISE_FLAG shall be zero. Flag is set to one if measured field noise level
(FIELD_NOISE) is above NOISE_FLAG_TH, Page: 85 "HP sensor spec.pdf"
LIN_MSG_CRC The flag set the crc of the lin messages sent to the ecu with inverted value
LIN_Frame_CNT Stop LIN Frame Counter
OTP_Lock_2 Stop LIN Frame Counter
Resonator_DriftIf LIN signal Sync_Duration deviates more than +/-100 from the normal (1041) for debounce
time from ECU > 6min!, after that time the ECU will detect a resonator drift error, the hard
coded value for this error is 500
Enum: e_write_byte_index
Description:
Value
cmd0_1

---

# Page 505

cmd2_3
cmd4_5
cmd0_5
Functions
Function: ConfigureGetPid
Description: 
Purpose: 
- Get the content of the the last occurrence of a PID on a specific sensor number 
Example: 
*_ApiConfigureGetPid(Address, PID);
Parameters:
Name Type EncodedType
Addresse_sensor int
PID PID_Numberint
Function: Echo
Description: 
Purpose: 
- Enables or disables the echo, which receives a certain channel. 
- Up to 5 direct and 5 indirect echoes in left and right are configured. 
- The times are absolute, starting with the specified end of the transmission pulse in us. 
- The default values disable an echo. 
Example: 
*_ApiEcho(Address, Direct_TOF_1, Direct_TOF_2, Direct_TOF_3, Direct_TOF_4, Direct_TOF_5, Left_TOF_1,
Left_TOF_2, Left_TOF_3, Left_TOF_4, Left_TOF_5, Right_TOF_1, Right_TOF_2, Right_TOF_3, Right_TOF_4,
Right_TOF_5);
Parameters:
Name Type EncodedTypeUnit
Address e_sensorint -
Direct_TOF_1int uint16 TOF
Direct_TOF_2int uint16 TOF
Direct_TOF_3int uint16 TOF
Direct_TOF_4int uint16 TOF
Direct_TOF_5int uint16 TOF
Left_TOF_1 int uint16 TOF
Left_TOF_2 int uint16 TOF
Left_TOF_3 int uint16 TOF
Left_TOF_4 int uint16 TOF
Left_TOF_5 int uint16 TOF
Right_TOF_1int uint16 TOF
Right_TOF_2int uint16 TOF
Right_TOF_3int uint16 TOF
Right_TOF_4int uint16 TOF
Right_TOF_5int uint16 TOF
Function: EchoMM
Description: 
Purpose: 
- Just like echo, only the values are scaled to mm. 
- echo description:- 
- Enables or disables the echo receiving a specific channel. 
- Up to 4 direct echos and 4 indirect echoes (2 left indirect and 2 right indirect echos) are configured. 
- The passed parameters are sent over LIN bus directly. 
- The default values disable an echo. 
- This function takes TOF values (Time Of Flight) from scripts, and save them into the Echos register 
- There are 5 direct TOFs, 5 right TOFs and 5 left TOFs 
- Parameters: 
- Address : sensor name 
- Direct_TOF_1 : is the 1st direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_TOF_2 : is the 2nd direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_TOF_3 : is the 3rd direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_TOF_4 : is the 4th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_TOF_5 : is the 5th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_TOF_1 : is the 1st indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 

---

# Page 506

- Left_TOF_2 : is the 2nd indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_TOF_3 : is the 3rd indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_TOF_4 : is the 4th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_TOF_5 : is the 5th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Right_TOF_1 : is the 1st indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_TOF_2 : is the 2nd indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_TOF_3 : is the 3rd indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_TOF_4 : is the 4th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_TOF_5 : is the 5th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
Example: 
*_ApiEchoMM(Address, Direct_TOF_1, Direct_TOF_2, Direct_TOF_3, Direct_TOF_4, Direct_TOF_5, Left_TOF_1,
Left_TOF_2, Left_TOF_3, Left_TOF_4, Left_TOF_5, Right_TOF_1, Right_TOF_2, Right_TOF_3, Right_TOF_4,
Right_TOF_5);
Parameters:
Name Type EncodedTypeScaleUnit
Address e_sensorint - -
Direct_TOF_1int uint16 2.744mm
Direct_TOF_2int uint16 2.744mm
Direct_TOF_3int uint16 2.744mm
Direct_TOF_4int uint16 2.744mm
Direct_TOF_5int uint16 2.744mm
Left_TOF_1 int uint16 2.744mm
Left_TOF_2 int uint16 2.744mm
Left_TOF_3 int uint16 2.744mm
Left_TOF_4 int uint16 2.744mm
Left_TOF_5 int uint16 2.744mm
Right_TOF_1int uint16 2.744mm
Right_TOF_2int uint16 2.744mm
Right_TOF_3int uint16 2.744mm
Right_TOF_4int uint16 2.744mm
Right_TOF_5int uint16 2.744mm
Function: GetCfgMemIdx
Description: 
Purpose: 
- Get Config Memory location, MEM_Ondex from 0 to 21, cmd0-5 represent each byte in the Config Memory location 
Example: 
*_ApiGetCfgMemIdx(Address, MEM_Index, Byte_Index);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Indexint uint8
Byte_Indexe_byte_indexint
Function: GetCfgMemIdxAndTest
Description: 
Purpose: 
- MEM_Index from 0 to 21, cmd0-5 represent each byte in the Config Memory location, 
- NumberOfBits to be tested from 0 to 7, Offset: form 0 to 7 
Example: 
*_ApiGetCfgMemIdxAndTest(Address, MEM_Index, Byte_Index, Offset, NumberOfBits, ExpectedValue);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Index int uint8
Byte_Index e_byte_indexint
Offset int uint8
NumberOfBitsint uint8
ExpectedValueint uint8

---

# Page 507

Function: GetPidValue
Description: 
Purpose: 
- Used for Debugging. 
Example: 
*_ApiGetPidValue();
Function: InitConfigMemory
Description: 
Purpose: 
- Used to initialize the Config Memory with its initial default values, 
- User must switch the ECU off while initializing Config Memory, if castle detects 
- that the ECU was active during the initilization it will break the execution 
Example: 
*_ApiInitConfigMemory();
Function: SWError
Description: Purpose: - Implemented failures for HpSensors are listed in this sheet " https://goo.gl/W6Dq7W " Example:
*_ApiSWError(Address, Type);
Parameters:
Name Type EncodedType
Addresse_sensorint
Type e_type int
Function: SetCfgMemIdx
Description: 
Purpose: 
- Write in a specific location in Config Memory, MEM_Index from 0 to 21, Byte_Index from 0 to 3, Data is a raw value Max
length = 5 
Example: 
*_ApiSetCfgMemIdx(Address, MEM_Index, Byte_Index, Data);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Indexint uint8
Byte_Indexe_write_byte_indexint
Data long uint64
Function: SetCfgMemIdxBits
Description: 
Purpose: 
- Write in a specific bits in a specific location in Config Memory. 
- Note: data will be truncated if its value will not fit in the number of bits provided 
Example: 
*_ApiSetCfgMemIdxBits(Address, MEM_Index, Byte_Index, Offset, NumberOfBits, Data);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Index int uint8
Byte_Index e_byte_indexint
Offset int uint8
NumberOfBitsint uint8
Data int uint8
Function: SetConfidenceLevel
Description: 
Purpose: 
- Set Confidence Level, All Sensor, Default on bus = 9 
Example: 
*_ApiSetConfidenceLevel(CL, Mode);

---

# Page 508

Parameters:
NameType EncodedType
CL int uint8
Modee_modeint
Function: SetFieldNoise
Description: 
Purpose: 
- Set FIELD_NOISE in PID(6) for all sensors, Page:86 
Example: 
*_ApiSetFieldNoise(FIELD_NOISE, Mode);
Parameters:
Name Type EncodedType
FIELD_NOISEint uint8
Mode e_modeint
Function: SetFieldNoiseSingleSensor
Description: 
Purpose: 
- Set FIELD_NOISE in PID(6) for signle sensor, Page:86 
Example: 
*_ApiSetFieldNoiseSingleSensor(Address, FIELD_NOISE, Mode);
Parameters:
Name Type EncodedType
Address e_sensorint
FIELD_NOISEint uint8
Mode e_modeint
Function: SetMagnitude
Description: 
Purpose: 
- Set Magnitude, All Sensors, Default = 9 
Example: 
*_ApiSetMagnitude(MAG, Mode);
Parameters:
NameType EncodedType
MAG int uint8
Modee_modeint
Function: SetReverberationPeriod
Description: 
Purpose: 
- Set Reverberaion Period (REVERB_PER), Scale = 25, All Sensors, Default value on bus = 779 
Example: 
*_ApiSetReverberationPeriod(REVERB_PER, Mode);
Parameters:
Name Type EncodedTypeScale
REVERB_PERint uint16 25
Mode e_modeint -
Function: SetReverberationPeriodSingleSensor
Description: 
Purpose: 
- Set Reverberaion Period (REVERB_PER), Scale = 25, Single Sensor, Default value on bus = 779 
Example: 
*_ApiSetReverberationPeriodSingleSensor(REVERB_PER, Mode, Address);
Parameters:
Name Type EncodedTypeScale
REVERB_PERint uint16 25

---

# Page 509

Mode e_modeint -
Address e_sensorint -
Function: SetReverberationTime
Description: 
Purpose: 
- Set Reverberaion Time (REVERB_TIME), Scale: 51.2, All Sensors, Default value on bus = 10 
Example: 
*_ApiSetReverberationTime(REVERB_TIME, Mode);
Parameters:
Name Type EncodedTypeScale
REVERB_TIMEint uint8 51.2
Mode e_modeint -
Function: SetReverberationTimeSingleSensor
Description: 
Purpose: 
- Set Reverberaion Time (REVERB_TIME), Scale: 51.2, Single Sensor, Default value on bus = 10 
Example: 
*_ApiSetReverberationTimeSingleSensor(REVERB_TIME, Mode, Address);
Parameters:
Name Type EncodedTypeScale
REVERB_TIMEint uint8 51.2
Mode e_modeint -
Address e_sensorint -
Function: SetSyncDuration
Description: 
Purpose: 
- Set Sync duration per all sensors, All Sensors, Default on bus = 1041 
Example: 
*_ApiSetSyncDuration(SYNC_DURATION, Mode);
Parameters:
Name Type EncodedType
SYNC_DURATIONint uint16
Mode e_modeint
Function: SetSyncDurationSingleSensor
Description: 
Purpose: 
- Set Sync duration for single sensor only, Default on bus = 1041 
Example: 
*_ApiSetSyncDurationSingleSensor(SYNC_DURATION, Mode, Address);
Parameters:
Name Type EncodedType
SYNC_DURATIONint uint16
Mode e_modeint
Address e_sensorint
Function: SetTemperature
Description: 
Purpose: 
- Set Temperature, Offset = -65, Factor = 0.921569, Temperature field in PID_4 is 1 Byte, All Sensors, Default = 0 
Example: 
*_ApiSetTemperature(TEMP, Mode);
Parameters:
NameType EncodedTypeOffsetScale Unit
TEMPint uint8 -65 0.921569degree
Modee_modeint - - -

---

# Page 510

Function: SetTemperatureSingleSensor
Description: 
Purpose: 
- Set Temperature, Offset = -65, Factor = 0.921569, Temperature field in PID_4 is 1 Byte, Single Sensor, Default = 0 
Example: 
*_ApiSetTemperatureSingleSensor(TEMP, Mode, Address);
Parameters:
Name Type EncodedTypeOffsetScale Unit
TEMP int uint8 -65 0.921569degree
Mode e_modeint - - -
Addresse_sensorint - - -
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartMeasurementSequence
Description: 
Purpose: 
- Used for Debugging. 
Example: 
*_ApiStartMeasurementSequence(Address);
Parameters:
Name Type EncodedType
Addresse_sensorint
Function: TestAPI
Description: 
Purpose: 
- Used for Debugging. 
Example: 
*_ApiTestAPI();
back to interface definition
Messages
Message: ConfigMemTest
Parameters:
Name Type EncodedType
Sensor_No e_sensorint
CMD int uint8
Expected_Valueint uint8
Actual_Value int uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: GetPidValue
Parameters:
Name TypeEncodedTypeFormat
TimeStamplonguint64
PidContentint[]uint8 raw

---

# Page 511

Message: MeasurementSequence
Parameters:
Name TypeEncodedType
TimeStamplonguint64
PID int uint8
ErrFlag int uint8
back to interface definition
Interface: HpGeneric  extends BaseSensors _Object
Enumerations
e_byte_index
e_channel
e_mode
e_sensor_type
e_type
Functions
ConfigureTypeAllSensors
Echo
EchoMM
GetCfgMemIdx
GetCfgMemIdxAndTest
InitConfigMemory
InitConfigMemory_RAM_Only
RecoverError
ResetPID20Fields
SWError
SetCfgMemIdx
SetCfgMemIdxBits
SetConfidenceLevelAllSensors
SetFieldNoiseAllSensors
SetFieldNoiseSingleSensor
SetMagnitude
SetReverberationPeriodAllSensors
SetReverberationPeriodSingleSensor
SetReverberationPeriodSingleSensorPerChannel
SetReverberationTimeAllSensors
SetReverberationTimeSingleSensor
SetReverberationTimeSingleSensorPerChannel
SetRstFlag
SetSyncDurationAllSensors
SetSyncDurationSingleSensor
SetTemperatureAllSensors
SetTemperatureSingleSensor
SetUserTag
SetWidth
Messages
ConfigMemGet
ConfigMemTest
GeneralMessage
NotSupportedInTheseSensorsConfiguration
SensorIDNotSupportedByHW
Enumerations
Enum: e_byte_index
Description:
Value
cmd0
cmd1
cmd2
cmd3
cmd4
cmd5
Enum: e_channel
Value Description
CHANNEL_F1Selects First Channel

---

# Page 512

CHANNEL_F2Selects Second
Channel
Enum: e_mode
Value Description
DefaultSet the field (sync_duration, temp,...) to its default value which is hardcoded in
castle
UserInputSet the field by the value provided by the user
Enum: e_sensor_type
Value Description
FaceliftSelect the sensor to be Facelift
configuration
ShrinkSelect the sensor to be Shrink configuration
HP Select the sensor to be HP configuration
Enum: e_type
Description: Implemented failures for HpSensors are listed in this sheet " https://goo.gl/W6Dq7W "
Value Description
NORMAL Remove all failures and restore default values
MEMBRANEsensor does not vibrate as expected. i.e. if 'Reverberation time' is less than 307.3µs and
'Reverberation period' is 25ns
CRCThe CRC value returned by the sensor during sensor diagnostic is different from the CRC
calculated by ECU, in PID(4), Page: 81 "HP sensor spec.pdf"
DIAG_DONEcauses the Diag Done Flag(RX_DIAG_DONE or ULS_DIAG_DONE) to not be raised when a
self diagnostic request is received PID(0)
ULS_DIAG_TRANSFReset value of ULS_DIAG_TRANSF flag shall be zero. Flag shall be set to one if
disconnection of external transformer primer side is detected during ultrasonic self diagnostic,
Page: 69 "HP sensor spec.pdf"
ULS_DIAG_DAMPReset value of ULS_DIAG_DAMP flag shall be set zero.Flag shall be set to one if failure on
resistor DRV1RA or DRV1RB is detected during ultrasonic self diagnostic, Page: 69 "HP
sensor spec.pdf"
RX_DIAG_ERRORReset value of RX_DIAG_ERROR flag shall be zero. Flag shall be set to one at the end of
ultrasonic receiver self diagnostic if self diagnostic failed, Page: 82 "HP sensor spec.pdf"
RX_DIAG_NOISEReset value of RX_DIAG_NOISE flag shall be zero. Flag shall be set to one if pulse or
permanent noise is detected during ultrasonic receiver self diagnostic, Page: 82 "HP sensor
spec.pdf"
RX_DIAG_DAMPReset value of RX_DIAG_DAMP flag shall be set zero. Flag shall be set to one if failure on
resistor DRV1RA or DRV1RB is detected during ultrasonic receiver self diagnostic, Page: 82
"HP sensor spec.pdf"
EE_CRC_FLAGReset value of EE_CRC_FLAG flag shall be set zero. Flag shall be set to one if failure on
resistor DRV1RA or DRV1RB is detected during ultrasonic receiver self diagnostic, Page: 82
"HP sensor spec.pdf"
SENSOR_STATUS_RST_FLAGRST_FLAG in SENSOR_STATUS register shall be set to one in RESET_MODE of reset
generator, Page: 69 "HP sensor spec.pdf"
SENSOR_STATUS_LIN_ERRORReset value of LIN_ERROR shall be zero. LIN_ERROR flag in SENSOR_STATUS register
shall be set, if LIN response error is detected, Page: 69 "HP sensor spec.pdf"
SENSOR_STATUS_VSUP_OVReset value of VSUP_OV flag shall be zero. If VSUP over voltage is detected during TX
ultrasonic transmission, for more than 3.6us, the VSUP_OV flag shall be set to one., Page: 69
"HP sensor spec.pdf"
SENSOR_STATUS_VSUP_UVReset value of VSUP_UV flag shall be zero. If LOW_POWER_MODE of reset generator is
entered (see section 8.1.2 for more details), the VSUP_UV flag shall be set to one, Page: 69
"HP sensor spec.pdf"
SENSOR_STATUS_VSUP_UV_OVReset value of VSUP_UV flag shall be zero. If LOW_POWER_MODE of reset generator is
entered (see section 8.1.2 for more details), the VSUP_UV flag shall be set to one, Page: 69
"HP sensor spec.pdf"
SENSOR_STATUS_TX_DIAG_ERRORReset value of TX_DIAG_ERROR shall be zero. If self diagnostic of ultrasonic transmitter
failed TX_DIAG_ERROR flag inSENSOR_STATUS register shall be set to one, but ultrasonic
measurement is not stopped, Page: 82 "HP sensor spec.pdf"
SENSOR_STATUS_THS_FLAGReset value of THS_FLAG shall be zero. THS_FLAG shall be set to one in THS_MODE of
reset generator, Page: 69 "HP sensor spec.pdf"
LIN_MSG_CRC The flag set the crc of the lin messages sent to the ecu with inverted value
LIN_Frame_CNT Stop LIN Frame Counter
LIN_SYNC_CNT Stop LIN Sync Counter
NOISE_INDICATOR_TRUEAs per P2 requirements: TOF,Magnitude and Echo width values are set to zero. Response to
PID 20 contains one or more bytes with values higher than 15
NOISE_INDICATOR_FALSEAs per P2 requirements: TOF,Magnitude and Echo width values are set to zero. Response to
PID 20 contains all bytes values zero.
SENSOR_MISMATCHSets the value of SYNC_CNT to 0xFF to simulate the physical connection of a sensor other
than Hp Facelift.
HP_SENSOR_MISMATCH Sets the value of CMD0 - any read and write location - in 0x1F memory index to 0xFF.
SHRINK_SENSOR_MISMATCHSets the value of CMD0 - any read and write location - in 0x1F memory index to any value
other than 0xFF to simulate the physical connection of Shrink sensor.
FACELIFT_SENSOR_MISMATCHFor Shrink sensor only, Sets the value of CMD0 - any read and write location - in 0x1F
memory index to 0xFF to simulate the physical connection of Facelift sensor."

---

# Page 513

RESONATOR_DRIFTIf LIN signal Sync_Duration deviates more than +/-100 from the normal (1041) for debounce
time from ECU > 6min!, after that time the ECU will detect a resonator drift error, the hard
coded value for this error is 500
PI_ZONEThe reset value of PI_ZONE shall be zero. Flag shall be set to one if obstacle is detected in
proximity indication zone, Page: 84 "HP sensor spec.pdf"
NOISE_FLAGThe reset value of NOISE_FLAG shall be zero. Flag is set to one if measured field noise level
(FIELD_NOISE) is above NOISE_FLAG_TH, Page: 85 "HP sensor spec.pdf"
OTP_Lock_2 Stop LIN Frame Counter
Functions
Function: ConfigureTypeAllSensors
Description: 
Purpose: 
- Configures the type for all 12 sensors (e.g., Facelift, Shrink, HP). 
Example: 
*_ApiConfigureTypeAllSensors(Type=e_sensor_type.FACELIFT);
Parameters:
NameType EncodedType
Typee_sensor_typeint
Function: Echo
Description: 
Purpose: 
- Enables or disables the echo, which receives a certain channel. 
- The first simulated Echo is the FreeSpace echo. 
- Up to 10 direct and 10 indirect echoes in left and right are configured. 
- The times are absolute, starting with the specified end of the transmission pulse in us. 
- The default values disable an echo. 
Example: 
*_ApiEcho(Address, Direct_FreeSpace_Echo, Direct_Echo1, Direct_Echo2, Direct_Echo3, Direct_Echo4, Direct_Echo5,
Direct_Echo6, Direct_Echo7, Direct_Echo8, Direct_Echo9, Left_FreeSpace_Echo, Left_Echo1, Left_Echo2, Left_Echo3,
Left_Echo4, Left_Echo5, Left_Echo6, Left_Echo7, Left_Echo8, Left_Echo9, Right_FreeSpace_Echo, Right_Echo1,
Right_Echo2, Right_Echo3, Right_Echo4, Right_Echo5, Right_Echo6, Right_Echo7, Right_Echo8, Right_Echo9);
Parameters:
Name Type EncodedTypeUnit
Address e_sensorint -
Direct_FreeSpace_Echoint uint16 TOF
Direct_Echo1 int uint16 TOF
Direct_Echo2 int uint16 TOF
Direct_Echo3 int uint16 TOF
Direct_Echo4 int uint16 TOF
Direct_Echo5 int uint16 TOF
Direct_Echo6 int uint16 TOF
Direct_Echo7 int uint16 TOF
Direct_Echo8 int uint16 TOF
Direct_Echo9 int uint16 TOF
Left_FreeSpace_Echo int uint16 TOF
Left_Echo1 int uint16 TOF
Left_Echo2 int uint16 TOF
Left_Echo3 int uint16 TOF
Left_Echo4 int uint16 TOF
Left_Echo5 int uint16 TOF
Left_Echo6 int uint16 TOF
Left_Echo7 int uint16 TOF
Left_Echo8 int uint16 TOF
Left_Echo9 int uint16 TOF
Right_FreeSpace_Echoint uint16 TOF
Right_Echo1 int uint16 TOF
Right_Echo2 int uint16 TOF
Right_Echo3 int uint16 TOF
Right_Echo4 int uint16 TOF
Right_Echo5 int uint16 TOF
Right_Echo6 int uint16 TOF
Right_Echo7 int uint16 TOF
Right_Echo8 int uint16 TOF
Right_Echo9 int uint16 TOF

---

# Page 514

Function: EchoMM
Description: 
Purpose: 
- Just like echo, only the values are scaled to mm (Single Channel Mode). 
- echo description:- 
- Enables or disables the echo receiving a specific channel. 
- The passed parameters are sent over LIN bus directly. 
- The default values disable an echo. 
- This function takes TOF values (Time Of Flight) from scripts, and save them into the Echos register 
- There are 10 direct TOFs, 10 right TOFs and 10 left TOFs; where the first echo is the FreeSpace echo, mapped to
TOF_1. 
- TOFs(1->3) in PID(5), TOFs(4->6) in PID(6), TOFs(7,8) in PID(21) and TODs(9,10) in PID(22) 
- Parameters: 
- Address : sensor name 
- Direct_FreeSpace_Echo : is the Free Space echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Direct_Echo1 : is the 1st direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo2 : is the 2nd direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo3 : is the 3rd direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo4 : is the 4th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo5 : is the 5th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo6 : is the 6th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo7 : is the 7th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo8 : is the 8th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Direct_Echo9 : is the 9th direct echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_FreeSpace_Echo : is the indirect left Free Space echo on this sensor, the parameter you specify here are sent on
the LIN bus directly. 
- Left_Echo1 : is the 1st indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo2 : is the 2nd indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo3 : is the 3rd indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo4 : is the 4th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo5 : is the 5th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo6 : is the 6th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo7 : is the 7th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo8 : is the 8th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Left_Echo9 : is the 9th indirect left echo on this sensor, the parameter you specify here are sent on the LIN bus directly. 
- Right_FreeSpace_Echo : is the indirect right Free Space echo on this sensor, the parameter you specify here are sent on
the LIN bus directly. 
- Right_Echo1 : is the 1st indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo2 : is the 2nd indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo3 : is the 3rd indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo4 : is the 4th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo5 : is the 5th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo6 : is the 6th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo7 : is the 7th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo8 : is the 8th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
- Right_Echo9 : is the 9th indirect right echo on this sensor, the parameter you specify here are sent on the LIN bus
directly. 
Example: 
*_ApiEchoMM(Address, Direct_FreeSpace_Echo, Direct_Echo1, Direct_Echo2, Direct_Echo3, Direct_Echo4,
Direct_Echo5, Direct_Echo6, Direct_Echo7, Direct_Echo8, Direct_Echo9, Left_FreeSpace_Echo, Left_Echo1, Left_Echo2,
Left_Echo3, Left_Echo4, Left_Echo5, Left_Echo6, Left_Echo7, Left_Echo8, Left_Echo9, Right_FreeSpace_Echo,
Right_Echo1, Right_Echo2, Right_Echo3, Right_Echo4, Right_Echo5, Right_Echo6, Right_Echo7, Right_Echo8,
Right_Echo9);
Parameters:
Name Type EncodedTypeScaleUnit
Address e_sensorint - -
Direct_FreeSpace_Echoint uint16 2.744mm
Direct_Echo1 int uint16 2.744mm

---

# Page 515

Direct_Echo2 int uint16 2.744mm
Direct_Echo3 int uint16 2.744mm
Direct_Echo4 int uint16 2.744mm
Direct_Echo5 int uint16 2.744mm
Direct_Echo6 int uint16 2.744mm
Direct_Echo7 int uint16 2.744mm
Direct_Echo8 int uint16 2.744mm
Direct_Echo9 int uint16 2.744mm
Left_FreeSpace_Echo int uint16 2.744mm
Left_Echo1 int uint16 2.744mm
Left_Echo2 int uint16 2.744mm
Left_Echo3 int uint16 2.744mm
Left_Echo4 int uint16 2.744mm
Left_Echo5 int uint16 2.744mm
Left_Echo6 int uint16 2.744mm
Left_Echo7 int uint16 2.744mm
Left_Echo8 int uint16 2.744mm
Left_Echo9 int uint16 2.744mm
Right_FreeSpace_Echoint uint16 2.744mm
Right_Echo1 int uint16 2.744mm
Right_Echo2 int uint16 2.744mm
Right_Echo3 int uint16 2.744mm
Right_Echo4 int uint16 2.744mm
Right_Echo5 int uint16 2.744mm
Right_Echo6 int uint16 2.744mm
Right_Echo7 int uint16 2.744mm
Right_Echo8 int uint16 2.744mm
Right_Echo9 int uint16 2.744mm
Function: GetCfgMemIdx
Description: 
Purpose: 
- Gets the value from a specific location in configuration memory. MEM_Index ranges from 0 to 25 (from 0 to 0x18, then
directly to 0x1F). cmd0-5 represent each byte in the config memory location. 
Example: 
*_ApiGetCfgMemIdx(Address=e_sensor.SENSOR_1, MEM_Index=10, Byte_Index=e_byte_index.BYTE_0);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Indexint uint8
Byte_Indexe_byte_indexint
Function: GetCfgMemIdxAndTest
Description: 
Purpose: 
- Gets a value from configuration memory and tests specific bits against an expected value. MEM_Index ranges from 0 to
24. cmd0-5 represent each byte. NumberOfBits and Offset range from 0 to 7. 
Example: 
*_ApiGetCfgMemIdxAndTest(Address=e_sensor.SENSOR_1, MEM_Index=10, Byte_Index=e_byte_index.BYTE_0,
Offset=2, NumberOfBits=4, ExpectedValue=0xA);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Index int uint8
Byte_Index e_byte_indexint
Offset int uint8
NumberOfBitsint uint8
ExpectedValueint uint8
Function: InitConfigMemory
Description: 
Purpose: 
- Initializes the configuration memory with its initial default values. 
Example: 
*_ApiInitConfigMemory(Type=e_sensor_type.FACELIFT);

---

# Page 516

Parameters:
NameType EncodedType
Typee_sensor_typeint
Function: InitConfigMemory_RAM_Only
Description: 
Purpose: 
- Initializes the RAM regions of the configuration memory with their initial default values. 
Example: 
*_ApiInitConfigMemory_RAM_Only(Type=e_sensor_type.FACELIFT);
Parameters:
NameType EncodedType
Typee_sensor_typeint
Function: RecoverError
Description: 
Purpose: 
- Recovers a specific sensor from a failure. 
Example: 
*_ApiRecoverError(Address=e_sensor.SENSOR_1, Type=e_type.ERROR_TYPE_1);
Parameters:
Name Type EncodedType
Addresse_sensorint
Type e_type int
Function: ResetPID20Fields
Description: 
Purpose: 
- API to Reset all fields in PID20 
Example: 
*_ApiResetPID20Fields(Address);
Parameters:
Name Type EncodedType
Addresse_sensorint
Function: SWError
Description: 
Purpose: 
- Implemented failures for HpSensors are listed in this sheet " https://goo.gl/W6Dq7W " 
- When MEMBRANE error is simulated, TOF, MAG and Width values will be set to zero as per P2 requirements. 
Example: 
*_ApiSWError(Address, Type);
Parameters:
Name Type EncodedType
Addresse_sensorint
Type e_type int
Function: SetCfgMemIdx
Description: 
Purpose: 
- Writes data to a specific location in configuration memory. MEM_Index ranges from 0 to 25 (from 0 to 0x18, then directly
to 0x1F). cmd0-5 represent each byte in the config memory location. 
Example: 
*_ApiSetCfgMemIdx(Address=e_sensor.SENSOR_1, MEM_Index=10, Byte_Index=e_byte_index.BYTE_0,
Data=0x1234567890ABCDEF);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Indexint uint8

---

# Page 517

Byte_Indexe_byte_indexint
Data long uint64
Function: SetCfgMemIdxBits
Description: 
Purpose: 
- Writes data to specific bits in a specific location in configuration memory. Note: Data will be truncated if its value does not
fit in the specified number of bits. 
Example: 
*_ApiSetCfgMemIdxBits(Address=e_sensor.SENSOR_1, MEM_Index=10, Byte_Index=e_byte_index.BYTE_0, Offset=2,
NumberOfBits=4, Data=0xA);
Parameters:
Name Type EncodedType
Address e_sensor int
MEM_Index int uint8
Byte_Index e_byte_indexint
Offset int uint8
NumberOfBitsint uint8
Data int uint8
Function: SetConfidenceLevelAllSensors
Description: 
Purpose: 
- Sets the confidence level for all sensors. Default on bus = 9. 
Example: 
*_ApiSetConfidenceLevelAllSensors(CL=8, Mode=e_mode.DEFAULT_MODE);
Parameters:
NameType EncodedType
CL int uint8
Modee_modeint
Function: SetFieldNoiseAllSensors
Description: 
Purpose: 
- Sets the field noise for all sensors (PID 6, Page 86). 
Example: 
*_ApiSetFieldNoiseAllSensors(FIELD_NOISE=5, Mode=e_mode.DEFAULT_MODE);
Parameters:
Name Type EncodedType
FIELD_NOISEint uint8
Mode e_modeint
Function: SetFieldNoiseSingleSensor
Description: 
Purpose: 
- Sets the field noise for a single sensor (PID 6, Page 86). 
Example: 
*_ApiSetFieldNoiseSingleSensor(Address=e_sensor.SENSOR_1, FIELD_NOISE=5, Mode=e_mode.DEFAULT_MODE);
Parameters:
Name Type EncodedType
Address e_sensorint
FIELD_NOISEint uint8
Mode e_modeint
Function: SetMagnitude
Description: 
Purpose: 
- Sets the direct, indirect left, and indirect right magnitudes for a specific sensor. 
Example: 
*_ApiSetMagnitude(Address=e_sensor.SENSOR_1, Direct_FreeSpace_MAG=10, Direct_MAG_1=11, ... other MAG

---

# Page 518

values, Right_MAG_9=20);
Parameters:
Name Type EncodedTypeUnit
Address e_sensorint -
Direct_FreeSpace_MAGint uint8 MAG
Direct_MAG_1 int uint8 MAG
Direct_MAG_2 int uint8 MAG
Direct_MAG_3 int uint8 MAG
Direct_MAG_4 int uint8 MAG
Direct_MAG_5 int uint8 MAG
Direct_MAG_6 int uint8 MAG
Direct_MAG_7 int uint8 MAG
Direct_MAG_8 int uint8 MAG
Direct_MAG_9 int uint8 MAG
Left_FreeSpace_MAG int uint8 MAG
Left_MAG_1 int uint8 MAG
Left_MAG_2 int uint8 MAG
Left_MAG_3 int uint8 MAG
Left_MAG_4 int uint8 MAG
Left_MAG_5 int uint8 MAG
Left_MAG_6 int uint8 MAG
Left_MAG_7 int uint8 MAG
Left_MAG_8 int uint8 MAG
Left_MAG_9 int uint8 MAG
Right_FreeSpace_MAGint uint8 MAG
Right_MAG_1 int uint8 MAG
Right_MAG_2 int uint8 MAG
Right_MAG_3 int uint8 MAG
Right_MAG_4 int uint8 MAG
Right_MAG_5 int uint8 MAG
Right_MAG_6 int uint8 MAG
Right_MAG_7 int uint8 MAG
Right_MAG_8 int uint8 MAG
Right_MAG_9 int uint8 MAG
Function: SetReverberationPeriodAllSensors
Description: 
Purpose: 
- Set Reverberaion Period (REVERB_PER), Scale = 25, All Sensors, Default value on bus = 779 
Example: 
*_ApiSetReverberationPeriodAllSensors(REVERB_PER, Mode);
Parameters:
Name Type EncodedTypeScale
REVERB_PERint uint16 25
Mode e_modeint -
Function: SetReverberationPeriodSingleSensor
Description: 
Purpose: 
- Set Reverberaion Period (REVERB_PER), Scale = 25, Single Sensor, Default value on bus = 779 
Example: 
*_ApiSetReverberationPeriodSingleSensor(REVERB_PER, Mode, Address);
Parameters:
Name Type EncodedTypeScale
REVERB_PERint uint16 25
Mode e_modeint -
Address e_sensorint -
Function: SetReverberationPeriodSingleSensorPerChannel
Description: 
Purpose: 
- Set Reverberaion Period (REVERB_PER), Scale = 25, Single Sensor, Channel Selective , Default value on bus = 779 
Example: 
*_ApiSetReverberationPeriodSingleSensorPerChannel(REVERB_PER, Mode, Channel, Address);

---

# Page 519

Parameters:
Name Type EncodedTypeScale
REVERB_PERint uint16 25
Mode e_mode int -
Channel e_channelint -
Address e_sensorint -
Function: SetReverberationTimeAllSensors
Description: 
Purpose: 
- Sets the reverberation time for all sensors. Scale: 51.2. Default value on bus = 10. 
Example: 
*_ApiSetReverberationTimeAllSensors(REVERB_TIME=10, Mode=e_mode.DEFAULT_MODE);
Parameters:
Name Type EncodedTypeScale
REVERB_TIMEint uint8 51.2
Mode e_modeint -
Function: SetReverberationTimeSingleSensor
Description: 
Purpose: 
- Sets the reverberation time for a single sensor. Scale: 51.2. Default value on bus = 10. 
Example: 
*_ApiSetReverberationTimeSingleSensor(REVERB_TIME=10, Mode=e_mode.DEFAULT_MODE,
Address=e_sensor.SENSOR_1);
Parameters:
Name Type EncodedTypeScale
REVERB_TIMEint uint8 51.2
Mode e_modeint -
Address e_sensorint -
Function: SetReverberationTimeSingleSensorPerChannel
Description: 
Purpose: 
- Sets the reverberation time for a single sensor per channel. Scale: 51.2. Default value on bus = 10. 
Example: 
*_ApiSetReverberationTimeSingleSensorPerChannel(REVERB_TIME=10, Mode=e_mode.DEFAULT_MODE,
Channel=e_channel.CHANNEL_1, Address=e_sensor.SENSOR_1);
Parameters:
Name Type EncodedTypeScale
REVERB_TIMEint uint8 51.2
Mode e_mode int -
Channel e_channelint -
Address e_sensorint -
Function: SetRstFlag
Description: 
Purpose: 
- Sets Reset Flag of the sensor to simulate a POR event 
Example: 
*_ApiSetRstFlag(Address);
Parameters:
Name Type EncodedType
Addresse_sensorint
Function: SetSyncDurationAllSensors
Description: 
Purpose: 
- Sets the synchronization duration for all sensors. Default on bus = 1041. 
Example: 

---

# Page 520

*_ApiSetSyncDurationAllSensors(SYNC_DURATION=1041, Mode=e_mode.DEFAULT_MODE);
Parameters:
Name Type EncodedType
SYNC_DURATIONint uint16
Mode e_modeint
Function: SetSyncDurationSingleSensor
Description: 
Purpose: 
- Sets the synchronization duration for a single sensor. Default on bus = 1041. 
Example: 
*_ApiSetSyncDurationSingleSensor(SYNC_DURATION=1041, Mode=e_mode.DEFAULT_MODE,
Address=e_sensor.SENSOR_1);
Parameters:
Name Type EncodedType
SYNC_DURATIONint uint16
Mode e_modeint
Address e_sensorint
Function: SetTemperatureAllSensors
Description: 
Purpose: 
- Sets the temperature for all sensors. Offset = -65, Factor = 0.921569. Temperature field in PID_4 is 1 byte. Default = 0. 
Example: 
*_ApiSetTemperatureAllSensors(TEMP=25, Mode=e_mode.DEFAULT_MODE);
Parameters:
NameType EncodedTypeOffsetScale Unit
TEMPint uint8 -65 0.921569degree
Modee_modeint - - -
Function: SetTemperatureSingleSensor
Description: 
Purpose: 
- Sets the temperature for a single sensor. Offset = -65, Factor = 0.921569. Temperature field in PID_4 is 1 byte. Default =
0. 
Example: 
*_ApiSetTemperatureSingleSensor(TEMP=25, Mode=e_mode.DEFAULT_MODE, Address=e_sensor.SENSOR_1);
Parameters:
Name Type EncodedTypeOffsetScale Unit
TEMP int uint8 -65 0.921569degree
Mode e_modeint - - -
Addresse_sensorint - - -
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetWidth
Description: 
Purpose: 
- Sets the direct, indirect left, and indirect right widths for a specific sensor. 
Example: 
*_ApiSetWidth(Address=e_sensor.SENSOR_1, Direct_FreeSpace_Width=10, Direct_Width_1=11, ... other Width values ,
Right_Width_9=20);
Parameters:

---

# Page 521

Name Type EncodedTypeUnit
Address e_sensorint -
Direct_FreeSpace_Widthint uint8 Width
Direct_Width_1 int uint8 Width
Direct_Width_2 int uint8 Width
Direct_Width_3 int uint8 Width
Direct_Width_4 int uint8 Width
Direct_Width_5 int uint8 Width
Direct_Width_6 int uint8 Width
Direct_Width_7 int uint8 Width
Direct_Width_8 int uint8 Width
Direct_Width_9 int uint8 Width
Left_FreeSpace_Width int uint8 Width
Left_Width_1 int uint8 Width
Left_Width_2 int uint8 Width
Left_Width_3 int uint8 Width
Left_Width_4 int uint8 Width
Left_Width_5 int uint8 Width
Left_Width_6 int uint8 Width
Left_Width_7 int uint8 Width
Left_Width_8 int uint8 Width
Left_Width_9 int uint8 Width
Right_FreeSpace_Widthint uint8 Width
Right_Width_1 int uint8 Width
Right_Width_2 int uint8 Width
Right_Width_3 int uint8 Width
Right_Width_4 int uint8 Width
Right_Width_5 int uint8 Width
Right_Width_6 int uint8 Width
Right_Width_7 int uint8 Width
Right_Width_8 int uint8 Width
Right_Width_9 int uint8 Width
back to interface definition
Messages
Message: ConfigMemGet
Parameters:
Name Type EncodedType
Sensor_Noe_sensorint
CMD int uint8
Value int uint8
Message: ConfigMemTest
Parameters:
Name Type EncodedType
Sensor_No e_sensorint
CMD int uint8
Expected_Valueint uint8
Actual_Value int uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: NotSupportedInTheseSensorsConfiguration
Parameters:
NameType EncodedType
Typee_sensor_typeint
Message: SensorIDNotSupportedByHW
Parameters:
Name Type EncodedType
Sensor_IDe_sensorint
back to interface definition

---

# Page 522

Interface: Switches_i  extends BaseSensors _Object
Enumerations
e_SC_TO_GND_VCC_UB12V
e_can_type
e_diag_type
e_display
e_gnd_open
e_gnd_open_load
e_gnd_state
e_gnd_vcc_open
e_kl
e_ks_dir
e_open_short
e_sensor_errors
e_swcan_type
e_to_gnd
e_type
e_type_ADC
e_type_LED
Functions
Anhaenger
BusLinesShortcutTo
Can0
Can1
CheckSensorGndSts
Diag
DiagSel
DisplayFront
DisplayRear
EnableLINMasterSensorResistorForAllChannels
LedPsm
LedSimPsm
LedSimUpa
LedUpa
Reserviert_0
RueckwaertsGang
SensorError
SensorVoltage17
SensorVoltageFront
SensorVoltageRear
SetUserTag
ShortcutDirection
ShortcutVoltage
SimSpeakerFront_80R
SimSpeakerRear_80R
SwCan
TasterPsm
TasterUpa
TestInputVoltage
Ton_Hm
Ton_Hp12V
Ton_Vm
Ton_Vp12V
TrenneRueckeinspeisung
Messages
GeneralMessage
GndStatus
InputVoltage
Enumerations
Enum: e_SC_TO_GND_VCC_UB12V
Value
NORMAL
SC_TO_GND
SC_TO_VCC
SC_TO_UB12V
Enum: e_can_type

---

# Page 523

Value
NO_SC
BETWEEN
SC_CAN_H
SC_CAN_L
OPEN_CAN_H
OPEN_CAN_L
Enum: e_diag_type
Value
LIN
KLine
Enum: e_display
Value
NORMAL
SC_TO_GND
STAT_TO_GND
Enum: e_gnd_open
Value
NORMAL
SC_TO_GND
OPEN
Enum: e_gnd_open_load
Value
NORMAL
SC_TO_GND
OPEN
LOAD
Enum: e_gnd_state
Value
GND_REAR_AND_FRONT_OK
GND_REAR_AND_FRONT_OPEN
GND_REAR_OPEN
GND_FRONT_OPEN
Enum: e_gnd_vcc_open
Value
NORMAL
SC_TO_GND
SC_TO_VCC
OPEN
Enum: e_kl
Value
KLEMME_15
KLEMME_30
Enum: e_ks_dir
Value
GND
VCC
Enum: e_open_short
Value
NORMAL
OPEN
SHORTCUT
Enum: e_sensor_errors
Value Description
NORMAL
SC_TO_GND Short circuit to GND of sensor signal line, constant low level
SC_TO_VCC Short circuit to VCC of sensor signal line, constant high level
OPENSensor no response, sensor internal failure, interruption of sensor GND
line

---

# Page 524

OPEN_CIRCUIT Interruption of signal line
ATTENUATION_TIMEshort attenuation time
RECEIVE_PATH open receive path error, no attenuation time seen
VERIFY Verify (wrong CRC) error
ICE Ice/mud, method "long attenuation time"
HEAVY_NOISE Heavy disturbance noise method "short sending delay"
Enum: e_swcan_type
Value
NORMAL
OPEN
SHORT
Enum: e_to_gnd
Value
NORMAL
SC_TO_GND
Enum: e_type
Value
NORMAL
SC_TO_GND
SC_TO_VOLTAGE
OPEN
Enum: e_type_ADC
Value
AD0
AD1
AD2
AD3
TON_V_12V
S_V_12V
TON_H_12V
S_H_12V
S_V_GND
S_H_GND
D_V_GND
D_H_GND
S_17_12V
S_17_GND
KL31
T_GND
D_V_VCC
D_H_VCC
Enum: e_type_LED
Value
NORMAL
SC_TO_GND
SC_TO_VOLTAGE
OPEN
Functions
Function: Anhaenger
Description: 
Purpose: 
- Sets KS_ANH to VCC or GND. 
Example: 
*_ApiAnhaenger(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: BusLinesShortcutTo
Description: 
Purpose: 

---

# Page 525

- Selects ShortCut to ( ex. VCC or GND ). 
Example: 
*_ApiBusLinesShortcutTo(Type)
Parameters:
NameTypeEncodedType
Typee_klint
Function: Can0
Description: 
Purpose: 
- Creates Failures on CAN0. 
Example: 
*_ApiCan0(ConnectLowHigh, Low, High)
Parameters:
Name Type EncodedType
ConnectLowHighboolean bool
Low e_open_shortint
High e_open_shortint
Function: Can1
Description: 
Purpose: 
- Creates Failures on CAN1. 
Example: 
*_ApiCan1(ConnectLowHigh, Low, High)
Parameters:
Name Type EncodedType
ConnectLowHighboolean bool
Low e_open_shortint
High e_open_shortint
Function: CheckSensorGndSts
Description: 
Purpose: 
- Reads Sensor Supply Ground Lines. 
Example: 
*_ApiCheckSensorGndSts()
Function: Diag
Description: 
Purpose: 
- This API is for Diag functionality. 
Example: 
*_ApiDiag(Type)
Parameters:
NameType EncodedType
Typee_open_shortint
Function: DiagSel
Description: 
Purpose: 
- This API is for DiagSel functionality. 
Example: 
*_ApiDiagSel(Type)
Parameters:
NameType EncodedType
Typee_diag_typeint
Function: DisplayFront

---

# Page 526

Description: 
Purpose: 
- Switches errors on Display Front. 
Example: 
*_ApiDisplayFront(Type)
Parameters:
NameType EncodedType
Typee_displayint
Function: DisplayRear
Description: 
Purpose: 
- Switches errors on Display Rear. 
Example: 
*_ApiDisplayRear(Type)
Parameters:
NameType EncodedType
Typee_displayint
Function: EnableLINMasterSensorResistorForAllChannels
Description: 
Purpose: 
- This API enables 1k Resistor Pull-up in every Sensor LIN line on the PIP. 
- Use this API with PIP version 3.6 
Example: 
*_ApiEnableLINMasterSensorResistorForAllChannels(Enable)
Parameters:
NameType EncodedType
Enablebooleanbool
Function: LedPsm
Description: 
Purpose: 
- This API controls the LedPsm. 
- Open only available starting with PIP 3.5 
Example: 
*_ApiLedPsm(Type)
Parameters:
NameType EncodedType
Typee_type_LEDint
Function: LedSimPsm
Description: 
Purpose: 
- Switches 1k Resistor on LED to GND, LOAD or open to simulate load. 
Example: 
*_ApiLedSimPsm(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: LedSimUpa
Description: 
Purpose: 
- Switches 1k Resistor on LED to GND, LOAD or open to simulate load. 
Example: 
*_ApiLedSimUpa(Type)
Parameters:

---

# Page 527

NameType EncodedType
Typee_typeint
Function: LedUpa
Description: 
Purpose: 
- This API controls the LedUpa. 
- Open only available starting with PIP 3.5 
Example: 
*_ApiLedUpa(Type)
Parameters:
NameType EncodedType
Typee_type_LEDint
Function: Reserviert_0
Description: 
Purpose: 
- Sets KS_RES to VCC or GND. 
Example: 
*_ApiReserviert_0(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: RueckwaertsGang
Description: 
Purpose: 
- Sets KS_RUE to VCC or GND. 
Example: 
*_ApiRueckwaertsGang(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: SensorError
Description: 
Purpose: 
- Creates Sensor SW failures. 
Example: 
*_ApiSensorError(Sensor, Type)
Parameters:
NameType EncodedType
Sensore_sensor int
Type e_sensor_errorsint
Function: SensorVoltage17
Description: 
Purpose: 
- This API is for SensorVoltage17 functionality. 
- SC to 12V or plus, implemented with PIP 3.7 or higher, 
- voltage level for plus must be selected using ShortcutVoltage, 
- possible is T15 or T30, different voltage level must be realized 
- with external power sup 
Example: 
*_ApiSensorVoltage17(Type)
Parameters:
NameType EncodedType
Typee_SC_TO_GND_VCC_UB12Vint
Function: SensorVoltageFront

---

# Page 528

Description: 
Purpose: 
- This API is for SensorVoltageFront functionality. 
- SC to plus or interruption (UB), implemented with PIP 3.5 or higher, 
- voltage level for plus must be selected using ShortcutVoltage, 
- possible is T15 or T30, different voltage level must be realized 
- with external power sup 
Example: 
*_ApiSensorVoltageFront(Type)
Parameters:
NameType EncodedType
Typee_SC_TO_GND_VCC_UB12Vint
Function: SensorVoltageRear
Description: 
Purpose: 
- This API is for SensorVoltageRear functionality. 
- SC to plus or interruption (UB), implemented with PIP 3.5 or higher, 
- voltage level for plus must be selected using ShortcutVoltage, 
- possible is T15 or T30, different voltage level must be realized 
- with external power sup 
Example: 
*_ApiSensorVoltageRear(Type)
Parameters:
NameType EncodedType
Typee_SC_TO_GND_VCC_UB12Vint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: ShortcutDirection
Description: 
Purpose: 
- Selects ShortCut Direction. 
Example: 
*_ApiShortcutDirection(Type)
Parameters:
NameType EncodedType
Typee_ks_dirint
Function: ShortcutVoltage
Description: 
Purpose: 
- Switches the shortcutvoltage VCC either Terminal 15 or 30 
- useful to simulate other VCC error voltages than Terminal 15 
Example: 
*_ApiShortcutVoltage(Type)
Parameters:
NameTypeEncodedType
Typee_klint
Function: SimSpeakerFront_80R
Description: 
Purpose: 

---

# Page 529

- Sets R80_TON_H , 80 Ohm Speaker Load Resistance for Front. 
Example: 
*_ApiSimSpeakerFront_80R(Type)
Parameters:
NameType EncodedType
Typebooleanbool
Function: SimSpeakerRear_80R
Description: 
Purpose: 
- Sets R80_TON_H , 80 Ohm Speaker Load Resistance for Rear. 
Example: 
*_ApiSimSpeakerRear_80R(Type)
Parameters:
NameType EncodedType
Typebooleanbool
Function: SwCan
Description: 
Purpose: 
- This API is for SwCan functionality. 
Example: 
*_ApiSwCan(Type)
Parameters:
NameType EncodedType
Typee_open_shortint
Function: TasterPsm
Description: 
Purpose: 
- Sets KS_PSM to VCC or GND. 
Example: 
*_ApiTasterPsm(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: TasterUpa
Description: 
Purpose: 
- Sets KS_UPA to VCC or GND. 
Example: 
*_ApiTasterUpa(Type)
Parameters:
NameType EncodedType
Typee_typeint
Function: TestInputVoltage
Description: 
Purpose: 
- This API gets Input Voltage from ADC pins in PIP. 
Example: 
*_ApiTestInputVoltage(InputPin, MinVoltage, MaxVoltage)
Parameters:
Name Type EncodedTypeScaleUnit
InputPin e_type_ADCint - -
MinVoltageint uint16 0.001V

---

# Page 530

MaxVoltageint uint16 0.001V
Function: Ton_Hm
Description: 
Purpose: 
- Switches error on Sounder Rear line to Gnd or open or VCC. 
Example: 
*_ApiTon_Hm(Type)
Parameters:
NameType EncodedType
Typee_gnd_vcc_openint
Function: Ton_Hp12V
Description: 
Purpose: 
- Switches error on Sounder Rear line to Gnd or open. 
Example: 
*_ApiTon_Hp12V(Type)
Parameters:
NameType EncodedType
Typee_gnd_openint
Function: Ton_Vm
Description: 
Purpose: 
- Switches error on Sounder Front line to Gnd or open or VCC 
Example: 
*_ApiTon_Vm(Type)
Parameters:
NameType EncodedType
Typee_gnd_vcc_openint
Function: Ton_Vp12V
Description: 
Purpose: 
- Switches error on Sounder Front line to Gnd or open. 
Example: 
*_ApiTon_Vp12V(Type)
Parameters:
NameType EncodedType
Typee_gnd_open_loadint
Function: TrenneRueckeinspeisung
Description: 
Purpose: 
- This API is for TrenneRueckeinspeisung functionality. 
Example: 
*_ApiTrenneRueckeinspeisung(Wert)
Parameters:
NameType EncodedType
Wertbooleanbool
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8

---

# Page 531

Message: GndStatus
Description: Status of Sensors Gnd Line
Parameters:
Name Type EncodedType
Reasone_gnd_stateint
Message: InputVoltage
Description: Report Info/Error based on min and max voltage values
Parameters:
Name TypeEncodedTypeScaleUnit
MinVoltage int uint16 0.001V
MeasuredVoltageint uint16 0.001V
MaxVoltage int uint16 0.001V
back to interface definition
Interface: Led  extends _Object
Description: An Object created for each led in the project
Enumerations
Led_State
PulseType
e_bool
e_level
e_reason
seq_reason
Functions
PrintAllSequence
ResetData
ResetSequence
SetUserTag
TestCurrentValue
TestLineState
TestSequence
Messages
GeneralMessage
LedData
LineState
SequencePrint
SequenceTest
Enumerations
Enum: Led_State
Value
Off
On
Dimming
Blinking
Enum: PulseType
Value
None
Pulse
Pause
Enum: e_bool
Value
LOW
HIGH
Enum: e_level
Value
LOW
HIGH
Enum: e_reason

---

# Page 532

Value
NOTHING
FREQUENCE
PULSE_TIME
PAUSE_TIME
DUTY_CYCLE
NO_DATA_FREQ
NO_DATA_PULSE
NO_DATA_PAUSE
NO_DATA_DUTY
Enum: seq_reason
Value
NOTHING
FREQUENCE
TIME
PulseType
Functions
Function: PrintAllSequence
Description: 
Purpose: 
- Print up to 9 item at time of the saved buffer if the number of items requested is greater than 9 Negative response will be
generated. 
Example: 
*_ApiPrintAllSequence(FirstItemNr,LastItemNr)
Parameters:
Name TypeEncodedType
FirstItemNrint uint8
LastItemNrint uint8
Function: ResetData
Description: 
Purpose: 
- Reset the running measurement. 
Example: 
*_ApiResetData()
Function: ResetSequence
Description: 
Purpose: 
- Resets the Current Sequence. 
Example: 
*_ApiResetSequence()
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestCurrentValue
Description: 
Purpose: 
- Tests an incoming pulse's Value , frequency , duty and pulse width if it is in rage of the given arguments. 
Example: 
*_ApiTestCurrentValue(Value,Fmin,Fmax,PulseMin,PulseMax,PauseMin,PauseMax,DutyMin,DutyMax)
Parameters:

---

# Page 533

Name Type EncodedTypeOffsetScaleUnit
Value Led_Stateint - - -
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
PulseMin int uint16 0 5.0 ms
PulseMaxint uint16 0 5.0 ms
PauseMinint uint16 0 5.0 ms
PauseMaxint uint16 0 5.0 ms
DutyMin int uint32 %
DutyMax int uint32 %
Function: TestLineState
Description: 
Purpose: 
- testfunction, checks whether the led is at Highlevel or Lowlevel at the moment of function call 
- message is generated in each case, type error when outside limits,otherwise type notify 
- MakeMsg_LineState() 
Example: 
*_ApiTestLineState(Value)
Parameters:
NameType EncodedType
Valuee_levelint
Function: TestSequence
Description: 
Purpose: 
- Tests an incoming pulse's duty cycle , frequency and pulse width if it is in rage of the given arguments. 
Example: 
*_ApiTestSequence(Type,SqItemNr,Fmin,Fmax,TMin,TMax,DutyMin,DutyMax,do_reset,BackwardTest)
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Type PulseTypeint - - -
SqItemNr int uint8
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
TMin int uint16 0 5.0 ms
TMax int uint16 0 5.0 ms
DutyMin int uint16 %
DutyMax int uint16 %
do_reset int uint8
BackwardTestint uint8
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: LedData
Description: Data of the Led
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Reason e_reasonint - - -
ExpectedStateLed_Stateint - - -
CurrentState Led_Stateint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Pulse int uint16 0 5 ms
PulseMin int uint16 0 5 ms
PulseMax int uint16 0 5 ms
Pause int uint16 0 5 ms

---

# Page 534

PauseMin int uint16 0 5 ms
PauseMax int uint16 0 5 ms
Duty int uint16 %
DutyMin int uint32 %
DutyMax int uint32 %
Message: LineState
Description: LedLineState
Parameters:
Name Type EncodedType
ExpectedStatee_levelint
CurrentState e_levelint
Message: SequencePrint
Description: SequencePrint
Parameters:
Name Type EncodedTypeOffsetScaleUnit
SqItemNr int uint8
ReturnedTypePulseTypeint - - -
Frequency int uint16 0 1 Hz
Time int uint16 0 5 ms
Duty int uint16 %
Message: SequenceTest
Description: SequenceTest
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Reason seq_reasonint - - -
SqItemNr int uint8
ExpectedTypePulseTypeint - - -
ReturnedTypePulseTypeint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Time int uint16 0 5 ms
T_Min int uint16 0 5 ms
T_Max int uint16 0 5 ms
Duty int uint16 %
DutyMin int uint32 %
DutyMax int uint32 %
back to interface definition
Interface: Speaker  extends _Object
Enumerations
PulseType
TonSide
e_reason
seq_reason
Functions
PrintAllSequence
ResetDataFront
ResetDataRear
ResetSequence
SetUserTag
TestCurrentValueFront
TestCurrentValueRear
TestSequence
Messages
FrontData
GeneralMessage
RearData
SequencePrint
SequenceTest
Enumerations

---

# Page 535

Enum: PulseType
Value
None
Pulse
Pause
Enum: TonSide
Value
Rear
Front
Enum: e_reason
Value
NOTHING
FREQUENCE
PULSE_TIME
PAUSE_TIME
VOLUME
NO_DATA_FREQ
NO_DATA_PULSE
NO_DATA_PAUSE
NO_DATA_VOLUME
Enum: seq_reason
Value
NOTHING
FREQUENCE
TIME
PulseType
Functions
Function: PrintAllSequence
Description: 
Purpose: 
- Print up to 9 item at time of the saved buffer if the number of items requested is greater than 9 Negative response will be
generated. 
Example: 
*_ApiPrintAllSequence(FirstItemNr,LastItemNr)
Parameters:
Name Type EncodedType
Side TonSideint
FirstItemNrint uint8
LastItemNrint uint8
Function: ResetDataFront
Description: 
Purpose: 
- Reset the running measurement on front speaker. 
Example: 
*_ApiResetDataFront()
Function: ResetDataRear
Description: 
Purpose: 
- Reset the running measurement on rear speaker. 
Example: 
*_ApiResetDataRear()
Function: ResetSequence
Parameters:
NameType EncodedType
Side TonSideint

---

# Page 536

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestCurrentValueFront
Description: 
Purpose: 
- Tests an incoming pulse's Value , frequency , duty and pulse width if it is in rage of the given arguments. 
- THIS Operates on the front speaker. 
Example: 
*_ApiTestCurrentValueFront(Value,Fmin,Fmax,PulseMin,PulseMax,PauseMin,PauseMax,VolumeMin,VolumeMax)
Parameters:
Name TypeEncodedTypeOffsetScale Unit
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
PulseMin int uint16 0 5.0 ms
PulseMax int uint16 0 5.0 ms
PauseMin int uint16 0 5.0 ms
PauseMaxint uint16 0 5.0 ms
VolumeMinint uint8 0 0.392156862745Prozent
VolumeMaxint uint8 0 0.392156862745Prozent
Function: TestCurrentValueRear
Description: 
Purpose: 
- Tests an incoming pulse's Value , frequency , duty and pulse width if it is in rage of the given arguments. 
- THIS Operates on the rear speaker. 
Example: 
*_ApiTestCurrentValueRear(Value,Fmin,Fmax,PulseMin,PulseMax,PauseMin,PauseMax,VolumeMin,VolumeMax)
Parameters:
Name TypeEncodedTypeOffsetScale Unit
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
PulseMin int uint16 0 5.0 ms
PulseMax int uint16 0 5.0 ms
PauseMin int uint16 0 5.0 ms
PauseMaxint uint16 0 5.0 ms
VolumeMinint uint8 0 0.392156862745Prozent
VolumeMaxint uint8 0 0.392156862745Prozent
Function: TestSequence
Description: 
Purpose: 
- Tests an incoming pulse's duty cycle , frequency and pulse width if it is in rage of the given arguments. 
Example: 
*_ApiTestSequence(Side,Type,SqItemNr,Fmin,Fmax,TMin,TMax,do_reset,BackwardTest)
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Side TonSide int - - -
Type PulseTypeint - - -
SqItemNr int uint8
Fmin int uint16 0 1.0 Hz
Fmax int uint16 0 1.0 Hz
TMin int uint16 0 5.0 ms
TMax int uint16 0 5.0 ms
do_reset boolean bool
BackwardTestboolean bool

---

# Page 537

back to interface definition
Messages
Message: FrontData
Description: Data of the front sounder
Parameters:
Name Type EncodedTypeOffsetScale Unit
Reason e_reasonint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Pulse int uint16 0 5 ms
PulseMin int uint16 0 5 ms
PulseMax int uint16 0 5 ms
Pause int uint16 0 5 ms
PauseMin int uint16 0 5 ms
PauseMaxint uint16 0 5 ms
Volume int uint8 0 0.3921568627450980392156862745098Prozent
VolumeMinint uint8 0 0.3921568627450980392156862745098Prozent
VolumeMaxint uint8 0 0.3921568627450980392156862745098Prozent
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: RearData
Description: Data of the rear sounder
Parameters:
Name Type EncodedTypeOffsetScale Unit
Reason e_reasonint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz
Pulse int uint16 0 5 ms
PulseMin int uint16 0 5 ms
PulseMax int uint16 0 5 ms
Pause int uint16 0 5 ms
PauseMin int uint16 0 5 ms
PauseMaxint uint16 0 5 ms
Volume int uint8 0 0.3921568627450980392156862745098Prozent
VolumeMinint uint8 0 0.3921568627450980392156862745098Prozent
VolumeMaxint uint8 0 0.3921568627450980392156862745098Prozent
Message: SequencePrint
Description: SequencePrint
Parameters:
Name Type EncodedTypeOffsetScaleUnit
SqItemNr int uint8
ReturnedTypePulseTypeint - - -
Time int uint16 0 5 ms
Message: SequenceTest
Description: SequenceTest
Parameters:
Name Type EncodedTypeOffsetScaleUnit
Reason seq_reasonint - - -
SqItemNr int uint8
Side TonSide int - - -
ExpectedTypePulseTypeint - - -
ReturnedTypePulseTypeint - - -
F int uint16 0 1 Hz
Fmin int uint16 0 1 Hz
Fmax int uint16 0 1 Hz

---

# Page 538

Time int uint16 0 5 ms
T_Min int uint16 0 5 ms
T_Max int uint16 0 5 ms
back to interface definition
Interface: WheelTicks  extends _Object
Enumerations
WheelSpeedUnit
Functions
ConfigureWheelSpeed
ConfigureWheelTicks
ConfigureWheelsInc
SetUserTag
SetWheelSpeedUnit
StartWheelCalculations
StopWheelCalculations
Messages
GeneralMessage
Enumerations
Enum: WheelSpeedUnit
Value
RPM
MPS
KPH
Functions
Function: ConfigureWheelSpeed
Description: Configure Wheel Speed Signals
Parameters:
Name TypeEncodedType
SignalSpeedTicksFRint _Signal
SignalSpeedTicksFLint _Signal
SignalSpeedTicksRRint _Signal
SignalSpeedTicksRLint _Signal
Function: ConfigureWheelTicks
Description: Configure Wheel Ticks Signals
Parameters:
Name TypeEncodedType
SignalWheelTicksFRint _Signal
SignalWheelTicksFLint _Signal
SignalWheelTicksRRint _Signal
SignalWheelTicksRLint _Signal
Function: ConfigureWheelsInc
Description: Configures which wheel will be updated, all wheels are enabled by default
Parameters:
Name Type EncodedType
FrontLeftWhlbooleanbool
FrontRightWhlbooleanbool
RearLeftWhlbooleanbool
RearRightWhlbooleanbool
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SetWheelSpeedUnit

---

# Page 539

Description: Set Wheel Speed Unit
Parameters:
Name Type EncodedType
WheelSpeedWheelSpeedUnitint
Function: StartWheelCalculations
Description: Starts the wheel ticks calculation (if exist), and Wheel speed calculation (if exist), all inputs should be extracted
from car configuration document
Parameters:
Name Type EncodedType Offset Scale Unit
SteeringWheelAngle int _Signal
Speed int _Signal
ModelCycleTime int uint32 ms
distanceBetweenFrontWheelsint uint32 mm
Distance between Front wheels axes
distanceBetweenFrontWheelAndRearWheelint uint32 mm
Distance between Front and Rear wheels axes
tireCircumferenceint uint32 mm
Tire circumference for any wheel
ticksPerRevolutionint uint32
Number of ticks for compelete wheel revolution
maxTickValueint uint32
Maximum value to be reached through wheel ticks increment
StrWhl2WhlRatioint uint32 0 1e-6
Average Ratio between Steering Angle and Wheel Angle
posWhlAngleClockwiseDirectionboolean bool
= (true) if positive value for Steering Wheel Angle is Clock Wise, = (false)
otherwise
isStrWhlAngleUnsignedboolean bool
= (true) if the steering wheel angle signal is unsigned, = (false) otherwise
Function: StopWheelCalculations
Description: Stops the wheel ticks calculation (if exist), and Wheel speed calculation (if exist)
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: MIPC  extends _Object
Enumerations
HostModes
Pin
adc_channel
challengeResponseOptions
check
dac_channel
dac_chip
e_input
resetType
spi_clk_phase
spi_clk_polarity
Functions
Activate_Spi_Lines
ClearMespReceiveBuffer
ConfigureSpiMode
CorruptSpiSequenceNumber
CorruptSpiTxCRC
Deactivate_Spi_Lines
DisableIpResetInterrupt
DisableRetransmission
EnableChallengeResponseMechanism

---

# Page 540

EnableIpResetInterrupt
EnableRetransmission
InitRx
ResetEyeQ
ResetSequenceNumber
SendDataById
SendDataByIdV2
SendMESPResponse
SetEyeQPin
SetSqcNum
SetUserTag
StartCheckIpResetSignal
StopCheckIpResetSignal
TestCrcForInitParameters
TestMespRequestParameters
hostModeCheck
Messages
GeneralMessage
InputPinState
InputVoltage
IpResetRequested
MespRequest
TestCrcInitParams
Events
MESP_Request_Received
IP_Reset_Requested
Objects
IpResetSignal
RxRawFrameContent
TxRawFrameContent
Enumerations
Enum: HostModes
Value
NormalMode
IPStageResetMode
ShutdownMode
HWResetMode
Enum: Pin
Value
ERROR_OUT
GPIO_Core_dump
GPIO_EQ4
GPIO_EQ3
GPIO_EQ2
GPIO_EQ1
Enum: adc_channel
Value
Channel_0
Channel_1
Channel_2
Channel_3
Channel_4
Channel_5
Channel_6
Channel_7
Enum: challengeResponseOptions
Value
Deactivate
Activate
DisableResponse1
DisableResponse2
DisableResponse3
DisableResponse4
Enum: check

---

# Page 541

Value
Start
Stop
Enum: dac_channel
Value
Channel_0
Channel_1
Channel_2
Channel_3
All_Channels
Enum: dac_chip
Value
DAC_0
DAC_1
DAC_2
DAC_3
Enum: e_input
Value
Pin_0
Pin_1
Pin_2
Pin_3
Pin_4
Pin_5
Pin_6
Pin_7
Pin_8
Pin_9
Pin_10
Pin_11
Enum: resetType
Value
HARD
SOFT
Enum: spi_clk_phase
Value Description
leading_edgesample data on the leading
edge
trailing_edgesample data on the trailing edge
Enum: spi_clk_polarity
Value Description
active_highclock idle low , active
high
active_lowclock idle high , active
low
Functions
Function: Activate_Spi_Lines
Function: ClearMespReceiveBuffer
Description: reset Mesp Receive Buffer To Zero
Function: ConfigureSpiMode
Parameters:
NameType EncodedType
polarityspi_clk_polarityint
phasespi_clk_phaseint
Function: CorruptSpiSequenceNumber
Parameters:
NameType EncodedTypeFormat
int[] uint8 raw

---

# Page 542

Id Frame Id
enablebooleanbool
Function: CorruptSpiTxCRC
Parameters:
NameType EncodedType
Idint uint16
Frame Id
enablebooleanbool
Function: Deactivate_Spi_Lines
Function: DisableIpResetInterrupt
Function: DisableRetransmission
Function: EnableChallengeResponseMechanism
Parameters:
NameType EncodedType
OptionchallengeResponseOptionsint
Function: EnableIpResetInterrupt
Parameters:
Name Type EncodedType
DeactivateSpiOnResetReqboolean bool
if set to true castle will atuomatically deactivate Spi lines when receiving the reset signal, otherwise the
user has to do it
Function: EnableRetransmission
Function: InitRx
Description: Initialize Rx and Enable Interrupts
Function: ResetEyeQ
Description: provides a way to perform a timely-synced reset,can be used as a workaround in some scenarios when the
actual ECU's reset request pin is not accessible
Parameters:
NameTypeEncodedTypeUnit
Delayint uint32 ms
time untill reset
Function: ResetSequenceNumber
Description: Reset MIPC SPI Frame Sequence Number
Parameters:
NameType EncodedType
ResetresetTypeint
Function: SendDataById
Description: To Send Data
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
Raw data that will be sent
Idint[]uint8 raw
Frame Id
Sizeint[]uint8 raw
Data Size
Function: SendDataByIdV2
Description: To Send Data
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
Raw data that will be sent

---

# Page 543

Idint uint32
Frame Id
Function: SendMESPResponse
Description: To Send MESP Response
Parameters:
Name TypeEncodedTypeFormat
Protocol int[]uint8 raw
ServiceIdint[]uint8 raw
FunctionIdint[]uint8 raw
Data int[]uint8 raw
Function: SetEyeQPin
Parameters:
NameTypeEncodedType
Valueint uint32
Pin Pin int
Function: SetSqcNum
Parameters:
Name TypeEncodedType
SqcNumint uint16
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartCheckIpResetSignal
Parameters:
Name TypeEncodedType
CheckPeriodlonguint64
Function: StopCheckIpResetSignal
Function: TestCrcForInitParameters
Description: Test CRC field in MESP of received init parameters
Function: TestMespRequestParameters
Description: To Test MESP Request Parameters, if Received = TRUE it tests that this request was received, if Received =
FALSE it tests that this request was not received
Parameters:
Name Type EncodedTypeFormat
Received booleanbool
Protocol int[] uint8 raw
ServiceId int[] uint8 raw
FunctionId int[] uint8 raw
FrameContentint[] uint8 raw
Offset int uint16
Function: hostModeCheck
Parameters:
Name Type EncodedType
CheckPeriodlong uint64
Mode HostModesint
Check check int
back to interface definition
Messages

---

# Page 544

Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: InputPinState
Description: Input Pin State
Parameters:
Name Type EncodedType
ExpectedStatebooleanbool
CurrentState booleanbool
Message: InputVoltage
Description: Input Voltage
Parameters:
Name TypeEncodedTypeScaleUnit
MinVoltage int uint8
MeasuredVoltageint uint16 0.001V
MaxVoltage int uint8
Message: IpResetRequested
Message: MespRequest
Description: RequestTestState
Parameters:
Name TypeEncodedTypeFormat
ExpectedProtocol int[]uint8 raw
Protocol int[]uint8 raw
ExpectedServiceIdint[]uint8 raw
ServiceId int[]uint8 raw
ExpectedFunctionIdint[]uint8 raw
FunctionId int[]uint8 raw
ExpectedData int[]uint8 raw
Data int[]uint8 raw
Message: TestCrcInitParams
Parameters:
Name TypeEncodedTypeFormat
Calculated_CRCint[]uint8 raw
Received_CRC int[]uint8 raw
back to interface definition
Events
Event: MESP_Request_Received
Event: IP_Reset_Requested
back to interface definition
Objects
Object: IpResetSignal
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
IpResetSignal_SignalSignalboolean 0 1 1 false false
Object: RxRawFrameContent
Description: The data bytes of the last received raw frame
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
RxRawFrameContent_SignalSignalbyte 0 1 raw 128 true false
Object: TxRawFrameContent
Description: The data bytes of the last sent raw frame
Name InterfaceTypeEncodedTypeOffsetScaleFormatBytecountElasticLengthMutable
TxRawFrameContent_SignalSignalbyte 0 1 raw 128 true false

---

# Page 545

back to interface definition
Interface:
FcPipAnalogOutChannel  extends _Object
Functions
GndShortCircuitFault
OpenCircuitFault
PowerDown
PowerUp
SetUserTag
VbatShortCircuitFault
Messages
GeneralMessage
Functions
Function: GndShortCircuitFault
Parameters:
NameType EncodedType
Enablebooleanbool
Function: OpenCircuitFault
Parameters:
NameType EncodedType
Enablebooleanbool
Function: PowerDown
Function: PowerUp
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: VbatShortCircuitFault
Parameters:
NameType EncodedType
Enablebooleanbool
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Sig_AnalogOut
Description: Analog Output
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
Sig_AnalogOut_SignalSignalint 0 1 mV2 false false
back to interface definition
Interface:
FcPipAnalogInChannel  extends _Object
Enumerations
InternalVinRange

---

# Page 546

Functions
CalibrateZeroError
ConfigureInternalInputRange
Read
SetUserTag
StartCyclicRead
StopCyclicRead
Messages
GeneralMessage
Enumerations
Enum: InternalVinRange
Value
NoChange
BiPolar_Neg_Pos_3v
UniPolar_Negative_6v
UniPolar_Positive_6v
BiPolar_Neg_Pos_6v
UniPolar_Negative_12v
UniPolar_Positive_12v
BiPolar_Neg_Pos_12v
Functions
Function: CalibrateZeroError
Function: ConfigureInternalInputRange
Parameters:
Name Type EncodedType
ChannelVinRangeInternalVinRangeint
Function: Read
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartCyclicRead
Parameters:
Name TypeEncodedTypeUnit
CyclicTimeint uint32 ms
Function: StopCyclicRead
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Sig_AnalogIn
Description: Analog Input
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
Sig_AnalogIn_SignalSignalint 0 1 mV2 false false
back to interface definition

---

# Page 547

Interface:
FcPipDigitalInputChannel  extends _Object
Functions
Read
SetUserTag
StartCyclicRead
StopCyclicRead
Messages
GeneralMessage
Functions
Function: Read
Description: Updates signal value once when called
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartCyclicRead
Description: auto Updates signal value Cycliclly
Parameters:
Name TypeEncodedTypeUnit
CyclicTimeint uint32 ms
Function: StopCyclicRead
Description: stops auto Update of signal value
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Sig_Din
Description: Digital Input signal
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Sig_Din_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: FcPipAnalogOuts  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 548

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: AnalogOut_PAI1
Description: Analog Ouput
Name Interface
AnalogOut_PAI1FcPipAnalogOutChannel
Object: AnalogOut_PAI2
Description: Analog Ouput
Name Interface
AnalogOut_PAI2FcPipAnalogOutChannel
Object: AnalogOut_PAI3
Description: Analog Ouput
Name Interface
AnalogOut_PAI3FcPipAnalogOutChannel
Object: AnalogOut_PAI4
Description: Analog Ouput
Name Interface
AnalogOut_PAI4FcPipAnalogOutChannel
Object: AnalogOut_PAI5
Description: Analog Ouput
Name Interface
AnalogOut_PAI5FcPipAnalogOutChannel
Object: AnalogOut_PAI6
Description: Analog Ouput
Name Interface
AnalogOut_PAI6FcPipAnalogOutChannel
Object: AnalogOut_PAI7
Description: Analog Ouput
Name Interface
AnalogOut_PAI7FcPipAnalogOutChannel
Object: AnalogOut_PAI8
Description: Analog Ouput
Name Interface
AnalogOut_PAI8FcPipAnalogOutChannel
back to interface definition
Interface: FcPipAnalogInputs  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions

---

# Page 549

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: AnalogInputs
Description: Analog Inputs
Name Interface
AnalogInputsFcPipAnalogInChannel
back to interface definition
Interface: FcPipDigitalOuts  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PDI
Description: Digital output
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PDI _SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: FcPipDigitalInputs  extends _Object
Functions
SetUserTag
Messages

---

# Page 550

GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PDO
Description: Digital Inputs
NameInterface
PDO FcPipDigitalInputChannel
back to interface definition
Interface: FcPipIo  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: AnalogOuts
Description: Analog Outputs
Name Interface
AnalogOutsFcPipAnalogOuts
Object: AnalogInputs
Description: Analog Inputs

---

# Page 551

Name Interface
AnalogInputsFcPipAnalogInputs
Object: DigitalOuts
Description: Digital Outputs , PDI7 is not avaliable since it's occupied by PwmGenerator
Name Interface
DigitalOutsFcPipDigitalOuts
Object: DigitalInputs
Description: Digital Inputs , PDO09 is not avaliable since it's occupied by IpResetPin
Name Interface
DigitalInputsFcPipDigitalInputs
Object: MEU
Description: MobileEye Communication Over Uart
NameInterface
MEU MEU
back to interface definition
Interface: MEU  extends _Object
Enumerations
ProtocolErrors
Functions
SendAckFrame
SendDataById
SendRawPacket
SetDefaultTimeOut
SetUserTag
Messages
AckTimeOut
EmptyFrameReceived
GeneralMessage
InvalidAppIdReceived
NegAckReceived
NewFrameReceived
ReportReceiveError
StrayByteReceived
TxConfirm
TxFailed
Events
AppId_Recived
Objects
Enumerations
Enum: ProtocolErrors
Description: Ack frame Codes as defined in the Document
Value
tp_err_PositiveAck
dl_err_RxOverRun
dl_err_OutOfMru
dl_err_FCSfailure
tp_err_UnrecognizedProtcol
tp_err_UnrecognizedAppId
tp_err_InvalifNFN
tp_err_MultiFrameTimeout
tp_err_Processing
tp_err_InvalidData
Functions
Function: SendAckFrame
Description: To Send Ack frame with Speccific AppId and Ack Value , for testing
Parameters:
Name Type EncodedType
ProtocolErrorsint

---

# Page 552

AckValuedata to be sent
AckAppIdint uint8
appId
Function: SendDataById
Description: To Send Data Packet with Speccific AppId
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
data to be sent
AppIdint uint8
appId
Function: SendRawPacket
Description: Send Data without processing for testing purposes and Error injection
Parameters:
NameTypeEncodedTypeFormat
Dataint[]uint8 raw
Raw data to be sent
Function: SetDefaultTimeOut
Description: Set default Data Frame Ack Timeout
Parameters:
NameTypeEncodedTypeUnit
Timeint uint32 ms
Ack Timeout in milliseconds
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: AckTimeOut
Description: a data frame has been sent and no Ack frame received back
Parameters:
NameTypeEncodedType
AppIdint uint8
Message: EmptyFrameReceived
Description: two consecutive flag sequence char has been received without any data inbetween
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: InvalidAppIdReceived
Description: data frame received with UnRecognized AppId field
Parameters:
NameTypeEncodedType
AppIdint uint8
Message: NegAckReceived
Description: negative Ack frame received for a given AppId

---

# Page 553

Parameters:
Name Type EncodedType
NegAckReasonProtocolErrorsint
AppId int uint8
Message: NewFrameReceived
Description: New Data Frame Received
Parameters:
NameTypeEncodedType
Lenthint uint16
AppIdint uint8
Message: ReportReceiveError
Description: Error during receivng new data layer frame
Parameters:
NameType EncodedType
ErrorProtocolErrorsint
Message: StrayByteReceived
Description: Byte Received and Start_of_frame State is not active
Parameters:
NameTypeEncodedType
Byte int uint8
Message: TxConfirm
Parameters:
NameTypeEncodedType
AppIdint uint8
Message: TxFailed
Parameters:
NameTypeEncodedType
AppIdint uint8
back to interface definition
Events
Event: AppId_Recived
back to interface definition
Interface:
VlsPipAnalogOutChannel  extends _Object
Enumerations
MuxSelection
Functions
MuxSelect
PowerDown
PowerUp
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: MuxSelection
Value
RealSensor
ChannelOutput
Functions
Function: MuxSelect
Description: Selects the source of the output on this channel , the source is either from the DAC , or from real sensor
connected to the PIP , valid for channels [13 ~16] only

---

# Page 554

Parameters:
Name Type EncodedType
MuxSelectionMuxSelectionint
Function: PowerDown
Description: Disable this DAC channel , Channel Value will be cleared from the DAC register
Function: PowerUp
Description: Enable this DAC channel
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Sig_AnalogOut
Description: Analog Output , out range [ 0 ~ 12000 ]millivolt
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
Sig_AnalogOut_SignalSignalint 0 1 mV2 false false
back to interface definition
Interface:
VlsPipDigitalInputChannel  extends _Object
Functions
Read
SetUserTag
StartCyclicRead
StopCyclicRead
Messages
GeneralMessage
Functions
Function: Read
Description: Updates signal value once when called
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartCyclicRead
Description: auto Updates signal value Cycliclly
Parameters:

---

# Page 555

Name TypeEncodedTypeUnit
CyclicTimeint uint32 ms
Function: StopCyclicRead
Description: stops auto Update of signal value
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Sig_Din
Description: Digital Input signal
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Sig_Din_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: VlsPipLoadLine  extends _Object
Description: load line is a fault insertion cell consistts of : ECU terminals A-B , load terminals A-B and fault relays
Functions
OpenCircuit
SetUserTag
ShortLoadTerminals
ShortToGnd
ShortToNextLoadLine
ShortToVcc
Messages
GeneralMessage
Functions
Function: OpenCircuit
Description: open the path between ECU Terminal-A and load Terminal-A
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: ShortLoadTerminals
Description: Shorts load terminal-A to terminal-B
Parameters:
NameType EncodedType
Enablebooleanbool
Function: ShortToGnd
Description: Shorts load terminal-A and ECU terminal-A to GND
Parameters:
NameType EncodedType
Enablebooleanbool

---

# Page 556

Function: ShortToNextLoadLine
Description: Shorts load terminal-A to next load terminal-A
Parameters:
NameType EncodedType
Enablebooleanbool
Function: ShortToVcc
Description: Shorts load terminal-A and ECU terminal-A to VCC
Parameters:
NameType EncodedType
Enablebooleanbool
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface:
VlsPipPowerSupplyOut  extends _Object
Enumerations
POWER_SOURCE_SEL
Functions
InputPowerSourceSel
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: POWER_SOURCE_SEL
Value Description
PWR_CH1External Power supply input
1
PWR_CH2External Power supply input
2
Functions
Function: InputPowerSourceSel
Parameters:
Name Type EncodedType
PowerSourcePOWER_SOURCE_SELint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 557

Objects
Object: PwmGenerator
Name Interface
PwmGeneratorPwmGenerator
back to interface definition
Interface: VlsPipAnalogOuts  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PAI01
Description: Analog Output 1
NameInterface
PAI01VlsPipAnalogOutChannel
Object: PAI02
Description: Analog Output 2
NameInterface
PAI02VlsPipAnalogOutChannel
Object: PAI03
Description: Analog Output 3
NameInterface
PAI03VlsPipAnalogOutChannel
Object: PAI04
Description: Analog Output 4
NameInterface
PAI04VlsPipAnalogOutChannel
Object: PAI05
Description: Analog Output 5
NameInterface
PAI05VlsPipAnalogOutChannel
Object: PAI06
Description: Analog Output 6
NameInterface

---

# Page 558

PAI06VlsPipAnalogOutChannel
Object: PAI07
Description: Analog Output 7
NameInterface
PAI07VlsPipAnalogOutChannel
Object: PAI08
Description: Analog Output 8
NameInterface
PAI08VlsPipAnalogOutChannel
Object: PAI09
Description: Analog Output 9
NameInterface
PAI09VlsPipAnalogOutChannel
Object: PAI10
Description: Analog Output 10
NameInterface
PAI10VlsPipAnalogOutChannel
Object: PAI11
Description: Analog Output 11
NameInterface
PAI11VlsPipAnalogOutChannel
Object: PAI12
Description: Analog Output 12
NameInterface
PAI12VlsPipAnalogOutChannel
Object: PAI13
Description: Analog Output 13
NameInterface
PAI13VlsPipAnalogOutChannel
Object: PAI14
Description: Analog Output 14
NameInterface
PAI14VlsPipAnalogOutChannel
Object: PAI15
Description: Analog Output 15
NameInterface
PAI15VlsPipAnalogOutChannel
Object: PAI16
Description: Analog Output 16
NameInterface
PAI16VlsPipAnalogOutChannel
back to interface definition
Interface: VlsPipDigitalOuts  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user

---

# Page 559

tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PP3I
Description: Digital output fixed 3.3v
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PP3I_SignalSignalboolean 0 1 1 false false
Object: PP5I
Description: Digital output fixed 5v
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PP5I_SignalSignalboolean 0 1 1 false false
Object: PDI
Description: Configurable Digital output , output range from 2.5 to 15 v
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PDI _SignalSignalboolean 0 1 1 false false
Object: PDI1_to_PDI6_Enable
Description: PDI1 to PDI6 Out Enable signal
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PDI1_to_PDI6_Enable_SignalSignalboolean 0 1 1 false false
Object: PDI7_to_PDI12_Enable
Description: PDI7 to PDI12 Out Enable signal
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PDI7_to_PDI12_Enable_SignalSignalboolean 0 1 1 false false
Object: PDI1_to_PDI6_OutVoltage
Description: PDI1 to PDI6 High volage setting [2.5v ~ 15v]
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
PDI1_to_PDI6_OutVoltage_SignalSignalfloat 0 1 V 4 false false
Object: PDI7_to_PDI12_OutVoltage
Description: PDI7 to PDI12 High volage setting [2.5v ~ 15v]
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
PDI7_to_PDI12_OutVoltage_SignalSignalfloat 0 1 V 4 false false
back to interface definition
Interface: VlsPipDigitalInputs  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user

---

# Page 560

tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PDO
Description: Digital Inputs
NameInterface
PDO VlsPipDigitalInputChannel
back to interface definition
Interface: VlsPipLoadLines  extends _Object
Enumerations
VCC_SOURCE_SEL
Functions
FaultVccSource
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: VCC_SOURCE_SEL
Value
PWR_CH1
PWR_CH2
Functions
Function: FaultVccSource
Description: selects the source of the VCC for Vcc short fault
Parameters:
Name Type EncodedType
VccSourceVCC_SOURCE_SELint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 561

Objects
Object: Load_A1_B1
Description: Load A1-B1
Name Interface
Load_A1_B1VlsPipLoadLine
Object: Load_A2_B2
Description: Load A2-B2
Name Interface
Load_A2_B2VlsPipLoadLine
Object: Load_A3_B3
Description: Load A3-B3
Name Interface
Load_A3_B3VlsPipLoadLine
Object: Load_A4_B4
Description: Load A4-B4
Name Interface
Load_A4_B4VlsPipLoadLine
Object: Load_A5_B5
Description: Load A5-B5
Name Interface
Load_A5_B5VlsPipLoadLine
Object: Load_A6_B6
Description: Load A6-B6
Name Interface
Load_A6_B6VlsPipLoadLine
back to interface definition
Interface: VlsPowerSupplyOuts  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PWR1
Description: Power Supply out 1

---

# Page 562

NameInterface
PWR1VlsPipPowerSupplyOut
Object: PWR2
Description: Power Supply out 2
NameInterface
PWR2VlsPipPowerSupplyOut
Object: PWR3
Description: Power Supply out 3
NameInterface
PWR3VlsPipPowerSupplyOut
Object: PWR4
Description: Power Supply out 4
NameInterface
PWR4VlsPipPowerSupplyOut
Object: PWR5
Description: Power Supply out 5
NameInterface
PWR5VlsPipPowerSupplyOut
Object: PWR6
Description: Power Supply out 6
NameInterface
PWR6VlsPipPowerSupplyOut
Object: PWR7
Description: Power Supply out 7
NameInterface
PWR7VlsPipPowerSupplyOut
back to interface definition
Interface: VlsPipIo  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DigitalOuts
Description: Digital Outputs

---

# Page 563

Name Interface
DigitalOutsVlsPipDigitalOuts
Object: DigitalInputs
Description: Digital Inputs
Name Interface
DigitalInputsVlsPipDigitalInputs
Object: AnalogOuts
Description: Analog Outputs
Name Interface
AnalogOutsVlsPipAnalogOuts
Object: LoadLines
Description: LoadLines
Name Interface
LoadLinesVlsPipLoadLines
Object: PowerSupplyOuts
Description: Power Supply OutPuts
Name Interface
PowerSupplyOutsVlsPowerSupplyOuts
back to interface definition
Interface: PwmGenerator  extends _Object
Description: Module for generating PWM signal with the desired Frequency and Duty Cycle
Functions
SetUserTag
StartPwm
StopPwm
_Init
Messages
BadConfiguration
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartPwm
Description: 
Purpose: 
Configures and starts PWM signal generation with the specified frequency, frequency divisor, duty cycle, and duty cycle
divisor. 
Example: 
*_ApiStartPwm(1000, 1, 50, 1); 
Parameters:
Name Type EncodedType Unit
Frequencyint uint32 Hz
The desired PWM signal frequency in Hertz.
FrequencyDivisorint uint32
Divisor to achieve a fractional frequency. A value of 1 corresponds to no
division.
DutyCycleint uint32 %
The PWM duty cycle as a percentage (0-100).
int uint32

---

# Page 564

DutyDivisor Divisor to achieve a fractional duty cycle. A value of 1 corresponds to no
division.
Function: StopPwm
Description: 
Purpose: 
Stops PWM signal generation. 
Example: 
*_ApiStopPwm(); 
Function: _Init
Parameters:
Name TypeEncodedTypeFormat
PwmCoreNameint[]uint8 raw
back to interface definition
Messages
Message: BadConfiguration
Description: This Message will return when the desired PWM Frequency or Period cannot be set by Firmware [If Frequency
is greater than 160 MHZ , or Period is less than 6.25 nsec] .
Parameters:
Name Type EncodedTypeUnit
DutyCycledoublefloat64 %
Frequencydoublefloat64 Hz
Period doublefloat64 ms
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: ZcDInPwm  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DIn
Description: Digital Input measurement for this channel
NameInterface

---

# Page 565

DIn PipIo_DIn
Object: PwmMeasurement
Description: pwm measurement for this channel
Name Interface
PwmMeasurementPWM
back to interface definition
Interface: ZC_DIO_OC_PU_CH  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DIn
Description: Digital Input measurement for this channel
NameInterface
DIn PipIo_DIn
Object: OpenCollector
Description: this signal controles a transistor that can Pull the line voltage to zero
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
OpenCollector_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: ZcAnalogInChannel  extends _Object
Functions
Read
SetUserTag
StartCyclicRead
StopCyclicRead
Messages
GeneralMessage
Functions
Function: Read
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 566

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartCyclicRead
Parameters:
Name TypeEncodedTypeUnit
CyclicTimeint uint32 ms
Function: StopCyclicRead
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Sig_AnalogIn
Description: Analog Input
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
Sig_AnalogIn_SignalSignalint 0 1 mV2 false false
back to interface definition
Interface: SMOSLoadSwitch  extends _Object
Functions
LoadRelay
SetUserTag
ShortToGnd
ShortToVbat
Messages
GeneralMessage
Functions
Function: LoadRelay
Parameters:
Name Type EncodedType
Activatebooleanbool
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: ShortToGnd
Parameters:
Name Type EncodedType
Activatebooleanbool
Function: ShortToVbat
Parameters:
Name Type EncodedType
Activatebooleanbool
back to interface definition
Messages

---

# Page 567

Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: ZcLoadSwitchs  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: MOS20
Description: 20 SMOS 20A
Name Interface
MOS20SMOSLoadSwitch
Object: MOS40
Description: 15 SMOS 40A
Name Interface
MOS40SMOSLoadSwitch
Object: MOS70
Description: 5 SMOS 70A
Name Interface
MOS70SMOSLoadSwitch
back to interface definition
Interface: ZcAnalogOuts  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 568

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: AoVbat
Description: Analog outs , max Vout equals Vbat
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
AoVbat_SignalSignalfloat 0 1 4 false false
Object: Ao5v
Description: Analog outs , max Vout equals 5v
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Ao5v_SignalSignalfloat 0 1 4 false false
Object: Vbat
Description: to notify the software about the Current supplied Vbat
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Vbat_SignalSignalfloat 0 1 4 false false
back to interface definition
Interface: ZcAnalogInputs  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: AI_HB
Description: Analog Inputs , used to check the status of the
NameInterface
AI_HBZcAnalogInChannel
back to interface definition

---

# Page 569

Interface: ZcDigitalOuts  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: OpenCollector_PU
Description: this signal contrroles a transistor that can sink current when turned on
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
OpenCollector_PU_SignalSignalboolean 0 1 1 false false
Object: DO_HS
Description: Digital out , logical one equals Vbat
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
DO_HS_SignalSignalboolean 0 1 1 false false
Object: PowerSupplyRelay
Description: Controls two relays
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PowerSupplyRelay_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: ZcPipDigitalInputs  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages

---

# Page 570

Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DI_HS
Description: DigitalInput-PWM measurement channel
NameInterface
DI_HSZcDInPwm
Object: DI_PU
Description: DigitalInput-PWM measurement channel
NameInterface
DI_PUZcDInPwm
Object: DI_LED
Description: DigitalInput-PWM measurement channel
Name Interface
DI_LEDZcDInPwm
back to interface definition
Interface:
Zc_DIO_OC_PU_CHS  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DIO_OC_PU
Description: DigitalInput-OpenCollector output channels
Name Interface
DIO_OC_PUZC_DIO_OC_PU_CH
back to interface definition
Interface: ZcPipIo  extends _Object
Functions
SetUserTag
Messages
GeneralMessage

---

# Page 571

Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DigitalInputs
Description: Digital Inputs
Name Interface
DigitalInputsZcPipDigitalInputs
Object: AnalogOuts
Description: Analog outs
Name Interface
AnalogOutsZcAnalogOuts
Object: AnalogIns
Description: Analog Inputs
Name Interface
AnalogInsZcAnalogInputs
Object: DigitalOuts
Description: Digital outs
Name Interface
DigitalOutsZcDigitalOuts
Object: DigitalIOs
Description: dual function Digital Inputs/OpenCollector out
Name Interface
DigitalIOsZc_DIO_OC_PU_CHS
Object: LoadSwitchs
Name Interface
LoadSwitchsZcLoadSwitchs
back to interface definition
Interface: PWM  extends _Object
Description: Pulse width modulation - PWM.
Signal definition:
How reading is updating the results:

---

# Page 572

See also -> C5 Detail Doc - PWM
Functions
ReadInterval
ReadIntervalOff
ReadNow
ReadValuesMessageEnable
ResetCounters
SetUserTag
Messages
GeneralMessage
ReadValues
Functions
Function: ReadInterval
Description: 
Purpose: 
Set the interval to read out the FPGA module. Valid range: 30ms .. 10.000ms. See interface description for more details 
Example: 
*_ApiReadInterval(100, true); 
Parameters:
Name Type EncodedType Unit
Intervalint int32 ms
Read Interval persion in milli seconds
ResetCounterboolean bool
If true, the counters for period and pulse ticks will be reset with each read
cycle.
Function: ReadIntervalOff
Description: 
Purpose: 
Disables periodic reading of the FPGA module. This stops the automatic retrieval of PWM data at the interval previously
set by ReadInterval. See the interface description for more details. 
Example: 
*_ApiReadIntervalOff(); 
Function: ReadNow
Description: 
Purpose: 
Performs a single, immediate read of the PWM values. If periodic reading is enabled (via ReadInterval), the read interval
timer is restarted after this immediate read. See the interface description for more details. 
Example: 
*_ApiReadNow(true) 
Logging Messages: 
- On Success: 
Returns "ReadValues" if the function executes successfully. 
Parameters:
Name Type EncodedType
ResetCounterboolean bool
If true, the counters for period and pulse width measurements are reset *after* this read
operation.
Response timeout: 1

---

# Page 573

Result Message: ReadValues 
Faults: 
Function: ReadValuesMessageEnable
Description: 
Purpose: 
Controls whether the ReadValues message is generated during normal periodic reading (configured by ReadInterval). This
allows you to enable or disable the message transmission without affecting the underlying data collection. 
Example: 
*_ApiReadValuesMessageEnable(false); // Disables the ReadValues message 
Parameters:
Name Type EncodedType
EnableMessageboolean bool
If true, enables the ReadValues message. If false, disables the
message.
Function: ResetCounters
Description: 
Purpose: 
Resets the internal counters used for PWM period and pulse width estimation. 
Example: 
*_ApiResetCounters() 
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: ReadValues
Parameters:
Name TypeEncodedTypeScaleUnit
PeriodTickslongint64 µs
PulseTicks longint64 µs
Ratio int uint32 0.0001%
PeriodCountint uint32
PeriodMin int uint32 µs
PeriodMax int uint32 µs
PulseMin int uint32 µs
PulseMax int uint32 µs
back to interface definition
Objects
Object: PeriodWidthMin
Description: The minimum width since the last read event. See PWM interface description for more details.
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
PeriodWidthMin_SignalSignalint 0 1 µs 4 false false
Object: PeriodWidthMax
Description: The maximum width since the last read event. See PWM interface description for more details.
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable

---

# Page 574

PeriodWidthMax_SignalSignalint 0 1 µs 4 false false
Object: PulseWidthMin
Description: The minimum width since the last read event. See PWM interface description for more details.
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
PulseWidthMin_SignalSignalint 0 1 µs 4 false false
Object: PulseWidthMax
Description: The maximum width since the last read event. See PWM interface description for more details.
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
PulseWidthMax_SignalSignalint 0 1 µs 4 false false
Object: PeriodTicks
Description: The count of sample ticks (1µs) since the last counters reset. This is amount of µs since the counter reset.
Updated by a read action. See PWM interface description for more details.
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
PeriodTicks_SignalSignallong 0 1 µs 8 false false
Object: PulseTicks
Description: The count of pulse ticks (1µs) since the last counters reset. This is the amount of high samples since the reset.
Updated by a read action. See PWM interface description for more details.
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
PulseTicks_SignalSignallong 0 1 µs 8 false false
Object: PeriodCount
Description: The count of rising edges seen since the last read event. See PWM interface description for more details.
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
PeriodCount_SignalSignalint 0 1 4 false false
Object: Ratio
Description: The ratio between PulseTicks and PeriodTicks in percent. See PWM interface description for more details.
NameInterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
Ratio_SignalSignalint 0 0.0001% 4 false false
back to interface definition
Interface: PipIo_DIn  extends _Object
Functions
Read
SetUserTag
StartCyclicRead
StopCyclicRead
Messages
GeneralMessage
Functions
Function: Read
Description: Updates signal value once when called
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartCyclicRead
Description: auto Updates signal value Cycliclly
Parameters:
Name TypeEncodedTypeUnit
CyclicTimeint uint32 ms

---

# Page 575

Function: StopCyclicRead
Description: stops auto Update of signal value
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DInSig
Description: Digital Input signal
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
DInSig_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: UsvBaseSensors  extends _Object
Enumerations
e_bus_usv
e_sensor_usv
e_slot_usv
Functions
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: e_bus_usv
Description:
Value Description
BUS_FRONTFRONT
BUMPER
BUS_REAR REAR BUMPER
BUS_LEFT LEFT BUMPER
BUS_RIGHTRIGHT BUMPER
Enum: e_sensor_usv
Description: please refer to the following google sheet for more details anout the sensor setup in car bumpers:
Sensors mapping
Value Description
SENSOR_FSLVSL
SENSOR_FOLVAL
SENSOR_FIL VML
SENSOR_FIR VMR
SENSOR_FORVAR
SENSOR_FSRVSR
SENSOR_RSRHSR
SENSOR_RORHAR
SENSOR_RIR HMR
SENSOR_RIL HML
SENSOR_ROLHAL
SENSOR_RSLHSL
SENSOR_LRELeftRearEdge
SENSOR_LRMLeftRearMiddle
SENSOR_LRCLeftRearCenter
SENSOR_LFCLeftFrontCenter
SENSOR_LFMLeftFrontMiddle
SENSOR_LFELeftFrontEdge
SENSOR_RFERightFrontEdge
SENSOR_RFMRightFrontMiddle
SENSOR_RFCRightFrontCenter

---

# Page 576

SENSOR_RRCRightRearCenter
SENSOR_RRMRightRearMiddle
SENSOR_RRERightRearEdge
Enum: e_slot_usv
Description:
Value Description
SLOT_1BRC SLOT 1
SLOT_2BRC SLOT 2
SLOT_3BRC SLOT 3
SLOT_4BRC SLOT 4
SLOT_5BRC SLOT 5
SLOT_6BRC SLOT 6
SLOT_7BRC SLOT 7
SLOT_8BRC SLOT 8
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: USV10  extends BaseSensors UsvBaseSensors _Object
Enumerations
e_asic_compatability
e_cfgMem_page
e_diagword_num
e_echo_demo
e_filter_ena
e_nvm_version
e_otc_mode
e_slot_error
e_sw_error
e_tape_out
e_topology
physical_configuration
Functions
ConfigureDiagWord2
DumpCommandsMemory
EchosDemoMode
ReadCfgMemIdx
ReadCfgMemIdxAndTest
ReadDiagWord
SelectPhysicalConfiguration
Select_NVMVersion
Select_TapeOut
Select_Topology
SendDetailedSignalWay
SendSignalWay
SendSignalWays
SetDsi3Parameters
SetEventLogging
SetReverberationDuration
SetReverberationDurationSingleSensor

---

# Page 577

SetReverberationPeriod
SetReverberationPeriodSingleSensor
SetSensorBeaming
SetSensorBeamingSingleSensor
SetSensorSwError
SetSensorTemperature
SetSensorTemperatureSingleSensor
SetSlotError
SetUserTag
Update_OTC_Measurement_Data
WriteCfgMemIdx
WriteCfgMemIdxBits
WriteNearRangeParameters
Messages
ConfigMemRead
ConfigMemTest
GeneralMessage
SensorsPoweredOff
SensorsPoweredOn
Enumerations
Enum: e_asic_compatability
Description: DSI3 Encoding Selection , USV10.3 Only
Value Description
ONSEMI_ASICSelects ONSEMI ASIC DSI3 Symbol
Encoding
VALEO_ASIC Selects VALEO ASIC DSI3 Symbol Encoding
Enum: e_cfgMem_page
Description: Configuration Memory Page Selection.
Value Description
Page_0Selects Page 0 of sensor configuration
memory.
Page_1Selects Page 1 of sensor configuration
memory.
Enum: e_diagword_num
Description: Selects Diagnostic Word
Value Description
DiagWord_0Selects Diagnostic Word
0
DiagWord_1Selects Diagnostic Word
1
DiagWord_2Selects Diagnostic Word
2
Enum: e_echo_demo
Value
Stop
Start
Enum: e_filter_ena
Description: Selects TX Filter Configuration.
ValueDescription
EMI_0EMI 0 Configuration.
EMI_1EMI 1 Configuration.
Enum: e_nvm_version
Description: Sensor NVM Version Selection.
Value
v1
v2
v3
v4
Enum: e_otc_mode

---

# Page 578

Description: OTC Curve Selection.
Value Description
NORMAL Simulates the NORMAL values OTC Curve during OTC Measurement Cycle.
DEFECTSimulates the DEFECT values OTC Curve during OTC Measurement Cycle.These Curve Values are Detected by
DUT and Interpreted as DEFECT Failure.
MISUSESimulates the MISUSE values OTC Curve during OTC Measurement Cycle.These Curve Values are Detected by
DUT and Interpreted as MISUSE Failure.
TEMP_BLOCKAGESimulates the TEMP_BLOCKAGE values OTC Curve during OTC Measurement Cycle.These Curve Values areDetected by DUT and Interpreted as TEMP_BLOCKAGE Failure.
Enum: e_slot_error
Description: BRC Slot Error Selection.
Value Description
NORMAL Removes BRC Slot Errors.
PDCM_CRC_OSHOTSelects PDCM CRC Error on a selected slot , only once.
PDCM_CRC_CONT Selects PDCM CRC Error on a selected slot , simulated continously until
cleared.
Enum: e_sw_error
Description: Selection of Sensor Failures.
Value Description
NORMAL
SAFETY_FLAGStatusCodeRegister (bit-0)
Set if one or more safety flag active (ORing of safety flags stored in sensor
memory map at address : page 1 index 0x1C and 0x1E)
DSI3_CONFIG_CRCStatusCodeRegister (bit-1)
Set if the CRC-check over the 16-bit DSI3 Configuration word at address 0x120
performed always by "Start Measurement" command does not match with the 8-
bit CRC value stored at address 0x122
DSI3_COMM_CRCStatusCodeRegister (bit-2)Set if CRC8 counted over a command received from DSI3 master does not
match with the CRC8 value included in this command (frame with wrong CRC
received)
INV_COMMANDStatusCodeRegister (bit-3)
Set if previously received (command/sensor address) sent by master could not
be identified
ELRStatusCodeRegister (bit-4)
Early or Late Read Error
Set if the current PDCM packet does not contain valid measurement data or
there is no more measurement data to be transferred to ECU
Early Read : means Sensor DSP didn't finish data processing and ECU request
readLate Read : means Sensor DSP fill all sensor memory page and overwite it again
without ECU read
DIAG_CONT_WAVE_NOISE_LDiagnostic Word #0 (bits 3:0)
Set Continuous wave noise for channel L, correlator full range /8 (during
monitoring)
DIAG_CONT_WAVE_NOISE_HDiagnostic Word #0 (bits 7:4)
Set Continuous wave noise for channel H, correlator full range /8 (during
monitoring)
DIAG_TX_OV_UVDiagnostic Word #0 (bit-8)
Set Tx Overvoltage/Undervoltage current reduction
DIAG_SAFETY_FLAGDiagnostic Word #0 (bit-10)
Set if one or more safety flag active (ORing of safety flags stored in sensor
memory map at address : page 1 index 0x1C and 0x1E)
DIAG_WIDE_BAND_NOISE_THDiagnostic Word #0 (bit-11)
Set Wide band Noise Flag threshold reached
DIAG_MODE_CRC_ERRDiagnostic Word #0 (bit-12)Set Measurement Mode settings CRC Error
DIAG_THERMAL_WARNINGDiagnostic Word #0 (bit-13)
Set Thermal Flag warning - ASIC Temperature Threshold reached
MEMBRANE_ERRDiagnostic Word #1 (bits 15:0)
Set invalid sensor reverberation period and time, Set Reverb_per = 10
(121.2Khz) and Reverb_dur = 4 (204.8us)
REVERB_DURDiagnostic Word #1 (bits 5:0)
Set invalid sensor reverberation duration, (6 bits, 1 LSB = 51.2 us)
REVERB_PERDiagnostic Word #1 (bits 15:6)
Set invalid sensor reverberation period, (10 bits, 1 LSB = 25 ns)
PDCM_KAC Set invalid Keep-Alive-Counter over PDCM packet for slave response
PDCM_CRC_ERR Set invalid CRC over PDCM packet for slave response
CRM_CRC_ERR Set invalid CRC over CRM frame for slave response
MISMATCH_ERRIncompatible Sensor HW, Update (Page 0, Index 0x20) in sensor MemoryMap
with wrong TO version
NO_RESPONSE Set all Zeroes data for any slave response
OTC_NormalSimulate normal membrane behavior during sensor beaming, reported only in
OTC-Measurement-Mode (Membrane_Diagnostics)

---

# Page 579

OTC_DefectSimulate defect membrane during sensor beaming, reported only in OTC-
Measurement-Mode (Membrane_Diagnostics)
OTC_MisuseSimulate misuse of membrane during sensor beaming, reported only in OTC-
Measurement-Mode (Membrane_Diagnostics)
OTC_Temp_Blockage Simulate temporary membrane blockage during sensor beaming, reported only
in OTC-Measurement-Mode (Membrane_Diagnostics)
SYMBOL_ERRSimulate an invalid DSI response symbol (three chips that can't be decoded per
chip table 1-1-1)
RX_TO_ERRSimulate invalid DSI sequence where more than 4 same chips in a row are sent
in response
NO_RESPONSE_CRM Set all Zeroes data for any slave response
NO_RESPONSE_PDCM Set all Zeroes data for any slave response
WB_Noise_Mag Simulate Wide Band Noise(WBN) Magnitude Error.
NO_RESPONSE_DC Set all Zeroes data for any slave response with the daisy chain order.
NO_RESPONSE_DC_RevSet all Zeroes data for any slave response with the daisy chain order on a
reverted mapping bumper.
NORMAL_RESPONSE_DC Clear no response data for any slave response with the daisy chain order.
NORMAL_RESPONSE_DC_RevClear no response data for any slave response with the daisy chain order on a
reverted mapping bumper.
DSI3_CHANNEL_ID Inverts the reported DSI3_CHANNEL_ID than the value from the NVM.
SF_V3_3_SUP_OV Safety_Flags_0[bit 0] for USV10.1 and USV10.2
SF_V1_8_SUP_OV Safety_Flags_0[bit 1] for USV10.1 and USV10.2
SF_DIG_RESET Safety_Flags_0[bit 2] for USV10.1 and USV10.2
SF_LPM Safety_Flags_0[bit 3] for USV10.1 and USV10.2
SF_THS Safety_Flags_0[bit 4] for USV10.1 and USV10.2
SF_DRVC_FAILDET Safety_Flags_0[bit 5] for USV10.1 and USV10.2
SF_TX_NDMOS_FAILDET Safety_Flags_0[bit 6] for USV10.1 and USV10.2
SF_TX_CURR_FAILDET Safety_Flags_0[bit 7] for USV10.1 and USV10.2
SF_TX_NO_CURR_FAILDET Safety_Flags_0[bit 8] for USV10.1 and USV10.2
SF_RXN_INP_FAILDET Safety_Flags_0[bit 9] for USV10.1 and USV10.2
SF_RXP_INP_FAILDET Safety_Flags_0[bit 10] for USV10.1 and USV10.2
SF_RX_CMMO_FAILDET Safety_Flags_0[bit 11] for USV10.1 and USV10.2
SF_DSP_LBIST_FAILDET Safety_Flags_0[bit 12] for USV10.1 and USV10.2
SF_MODE_CONFIG_CRC Safety_Flags_0[bit 13] for USV10.1 and USV10.2
SF_ONSEMI_EEPROM_CRC Safety_Flags_0[bit 14] for USV10.1 and USV10.2
SF_VALEO_EEPROM_CRC Safety_Flags_0[bit 15] for USV10.1 and USV10.2
SF_EEPROM_PROG_FAIL Safety_Flags_1[bit 0] for USV10.1 and USV10.2
SF_IREG_FAIL Safety_Flags_1[bit 1] for USV10.2
SF_CLP5V_IOC_FAILDET Safety_Flags_1[bit 2] for USV10.2
SF_CTANK_NOK Safety_Flags_1[bit 3] for USV10.2
SF_DIG_RESET_POR_3V3 Safety_Flags_1[bit 4] for USV10.2
SF_DIG_RESET_POR_1V8 Safety_Flags_1[bit 5] for USV10.2
SF_DIG_RESET_VBG_OK Safety_Flags_1[bit 6] for USV10.2
SF_DIG_RESET_GND_LOST Safety_Flags_1[bit 7] for USV10.2
BODY_NOISE_EN Enables Structure Borne Noise Generation for USV10.2 Hidden Sensors
EARLYSets the ELR Flag and sets all PDCM data sent by the sensor to zeroes to
emulate early data condition.
LATE Sets the ELR Flag and sets all PDCM data sent by the sensor to ones toemulate late data condition
SF_2V5_SUP_OV Safety_Flags_0[bit 0] for USV10.1 UPAE-005 Variant.
SF_1V2_SUP_OV Safety_Flags_0[bit 1] for USV10.1 UPAE-005 Variant.
SF_ONSEMI_OTP_CRC Safety_Flags_0[bit 14] for USV10.1 UPAE-005 Variant.
SF_VALEO_OTP_CRC Safety_Flags_0[bit 15] for USV10.1 UPAE-005 Variant.
SF_OTP_PROG_FAIL Safety_Flags_1[bit 0] for USV10.1 UPAE-005 Variant.
SF_OTP_SECTION_UNLOCKED Safety_Flags_1[bit 13] for USV10.1 UPAE-005 Variant.
SF_OTP_ONSEMI_SECTION_UNLOCKED Safety_Flags_1[bit 14] for USV10.1 UPAE-005 Variant.
SF_OTP_VALEO_SECTION_UNLOCKED Safety_Flags_1[bit 15] for USV10.1 UPAE-005 Variant.
SF_10_3_SM_DSP_UNCORRECTABLE_ECC_ERRSafety_Flags_0[bit 0] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_OVER_VDD15 Safety_Flags_0[bit 1] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_DIG_RESET Safety_Flags_0[bit 2] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_ST_POR_LPM_EN Safety_Flags_0[bit 3] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_SHUTDOWN_TX Safety_Flags_0[bit 4] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_TXDRVC_DIAG_ST Safety_Flags_0[bit 5] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_TX_CLIMIT_ST Safety_Flags_0[bit 6] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_TXLD_DIAG_ST Safety_Flags_0[bit 7] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_POR_MBIST_FAIL Safety_Flags_0[bit 8] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_IN_FAIL_ST1 Safety_Flags_0[bit 9] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_IN_FAIL_ST2 Safety_Flags_0[bit 10] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_RX_CM_FAIL_ST Safety_Flags_0[bit 11] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_DSP_LBIST_FAILURE Safety_Flags_0[bit 12] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_MODE_CONFIG_CRC_ERR Safety_Flags_0[bit 13]for USV10.3 ( Valeo ASIC ) Sensors.

---

# Page 580

SF_10_3_SM_FLASH_NVM_CRC_ERR Safety_Flags_0[bit 14] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_VICTORY1_NVM_CRC_ERR Safety_Flags_0[bit 15] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_NVM_PROG_FAIL Safety_Flags_1[bit 0] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_VICTORY2_NVM_CRC_ERR Safety_Flags_1[bit 1] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_ST_POR_VSUP_RX Safety_Flags_1[bit 2] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_ST_POR_VSUP_TX Safety_Flags_1[bit 3] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_ST_POR_REG_LPM Safety_Flags_1[bit 4] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_POR_VDD15 Safety_Flags_1[bit 5] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_BG_OK Safety_Flags_1[bit 6] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_ST_POR_GND_LOST Safety_Flags_1[bit 7] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_UNCORRECTABLE_ECC_ERR Safety_Flags_1[bit 8] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_CRC_ERR_MEM Safety_Flags_1[bit 9] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_DSP_NOT_READY Safety_Flags_1[bit 10] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_ST_VSUP_RX_FAIL Safety_Flags_1[bit 11] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_TXPIN_DIAG_ST1 Safety_Flags_1[bit 12] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_TXPIN_DIAG_ST2 Safety_Flags_1[bit 13] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_COMPR_MODE_UNKNOWN Safety_Flags_1[bit 14] for USV10.3 ( Valeo ASIC ) Sensors.
SF_10_3_SM_CRC_DSI_CONFIG Safety_Flags_1[bit 15] for USV10.3 ( Valeo ASIC ) Sensors.
Enum: e_tape_out
Description: Sensor Version and Tapeout Selection.
Value Description
USV10_1_UPAEv1_TO2 Selects the sensor version USV10.1 Tapeout 2 Variant
USV10_1_UPAEv1_TO3 Selects the sensor version USV10.1 Tapeout 3 Variant , this is the most common version for USV10.1
USV10_1_UPAEv1_TO3_MT Selects the sensor version USV10.1 Tapeout 3 MT Variant
USV10_1_UPAEv005_TO1_MTSelects the sensor version USV10.1.5 Tapeout 1 MT Variant , these have different tapeout value vs
the old USV10.1 and have different safety flag implementations.
USV10_1_UPAEv005_TO2Selects the sensor version USV10.1.5 Tapeout 2 Variant , these have different tapeout value vs the
old USV10.1 and have different safety flag implementations.
USV10_2_PCTO1 Selects USV10.2 Tapeout 1 , this tapeout version is generally deprecated.
USV10_2_PCTO2 Selects USV10.2 Tapeout 2 , this is the most common version for USV10.2
USV10_3_PCTO1Selects USV10.3 Tapeout 1 , this is Valeo ASIC version of the USV10.2 which has many differences
compared to the original USV10.2
Enum: e_topology
Description: Bus Topology Selection.
Value Description
STARSelects the STAR Bus Topology for the selected sensor version , in this toplogy , each sensor has a dedicated data
line , power line and ground line. so each sensor is seperate from the other sensors.
DAISY_CHAINSelects the Daisy Chain Bus Topology for the selected sensor version , in this topology , sensors use power line for
both power and data , and a ground line the data/power line propagates from one sensor to the other , so the sensors
are in a daisy chain.
Enum: physical_configuration
Description: Sensor Arrangement Selection.
Value Description
c6_6 Selects 12 Sensor Configuration 6(FSL to FSR) Front Sensors + 6( RSL to RSR ) Rear Sensors.
c4_4 Selects 8 Sensor Configuration 4(FOL to FOR) Front Sensors + 4( ROL to ROR ) Rear Sensors.
c6_6_2_2Selects 16 Sensor Configuration 6(FSL to FSR) Front Sensors + 2( LFC + LRC )Left Front/Rear Center + 6( RSL to RSR )
Rear Sensors + 2 ( RFC + RRC ) Right Front/Rear Center.
c6_6_4_4Selects 20 Sensor Configuration 6(FSL to FSR) Front Sensors + 4( LFC + LRC + LFM + LRM ) Left Front/Rear Center and
Middle + 6( RSL to RSR ) Rear Sensors + 4( RFC + RRC + RFM + RRM ) Right Front/Rear Center and Middle.
c6_6_5_5Selects 22 Sensor Configuration 6(FSL to FSR) Front Sensors + 5( LRE + LFC + LRC + LFM + LRM ) Left Front/Rear
Center , Edge and Middle + 6( RSL to RSR ) Rear Sensors + 5( RFE + RFC + RRC + RFM + RRM ) Right Front/Rear
Center , Edge and Middle.
Functions
Function: ConfigureDiagWord2
Description: 
Purpose: 
Writes diagnostics word 2 for all Sensors. 
Example: 
ApiConfigureDiagWord2(ConfigureDiagWord2); 
Parameters:
Name Type EncodedType
ConfigureDiagWord2int uint16
16 bit value to be written into diagnostic word 2 for all
sensors.

---

# Page 581

Function: DumpCommandsMemory
Description: 
Purpose: 
Test API to dump the commands memory for debugging 
Example: 
ApiDumpCommandsMemory(); 
Function: EchosDemoMode
Description: 
Purpose: 
- Runs and Stops the echos demo mode. The firmware internally sends predefined echo set for testing purposes. 
- Make sure no other tools (ex. Vosstrex) is sending data to USV PIP from Ethernet while this demo is running. 
- Echo values are copied from this https://docs.google.com/spreadsheets/d/1-RocAhn6R7u3wkflOZacz-
LdaH9zcZYJ4ADPctsGwSk/edit#gid=2021868094 
Example: 
ApiEchosDemoMode(type); 
Parameters:
NameType EncodedType
Typee_echo_demoint
Function: ReadCfgMemIdx
Description: 
Purpose: 
Read Config Memory location (2 bytes per index). Index from 0x00 to 0xFE (for each page) accessed by even index ONLY.
MemoryMap screenshot: doc-files/USV10_MemMap.jpg 
Example: 
ApiReadCfgMemIdx(Address, Page, Index); 
Parameters:
Name Type EncodedType Format
Addresse_sensor_usv int -
Sensor Selection.
Pagee_cfgMem_page int -
Configuration Memory Number Page Selection.
Indexint uint8 hex
Word Index Selection, can be 0x00 to 0xFE, since each Words is 2 bytes and each page has 128 xWord.
Function: ReadCfgMemIdxAndTest
Description: 
Purpose: 
- Read Config Memory location and test (2 bytes per index). Index from 0x00 to 0xFE (for each page) accessed by even
index ONLY. 
- NumberOfBits to be tested from 0 to 15. Offset: form 0 to 15. MemoryMap screenshot: doc-files/USV10_MemMap.jpg 
Example: 
ApiReadCfgMemIdxAndTest(Address, Page, Index, Offset, NumberOfBits, ExpectedValue); 
Parameters:
Name Type EncodedType Format
Addresse_sensor_usv int -
Sensor Selection.
Pagee_cfgMem_page int -
Configuration Memory Number Page Selection.
Indexint uint8 hex
Word Index Selection, can be 0x00 to 0xFE, since each Words is 2 bytes and each page has 128 x Word.
Offsetint uint8
can be 0 to 15, selects the bit offset from which bit comparison is started.
NumberOfBitsint uint8
can be 0 to 15, selects the number of bits to compare starting from the offset given.
ExpectedValueint uint16 hex
16 bit value that will be equality compared to the value read from memory which was offset and masked by the above
params.
Function: ReadDiagWord

---

# Page 582

Description: 
Purpose: 
Read Diagnostic Word Data 
Example: 
ApiReadDiagWord(Address, DiagWord); 
Parameters:
Name Type EncodedType
Addresse_sensor_usv int
Sensor Selection.
DiagWorde_diagword_numint
Selects the diagnostic word to
read.
Function: SelectPhysicalConfiguration
Description: 
Purpose: 
- Select the simulated physical sensors configuration which selects number of sensors and their arrangement. 
- This is only valid for daisy chain bus topology. 
- For STAR bus topology all 24 Sensors will be simulated by default and the DUT will choose how many sensors it will be
addressing. 
Example: 
ApiSelectPhysicalConfiguration(Configuration); 
Parameters:
Name Type EncodedType
Configurationphysical_configurationint
Selects the Physical Configuration.
Function: Select_NVMVersion
Description: 
Purpose: 
Switch between different NVM versions(1, 2, 3, 4). Default : 3 
Example: 
ApiSelect_NVMVersion(NVM_Version); 
Parameters:
Name Type EncodedType
NVM_Versione_nvm_versionint
NVM Version.
Function: Select_TapeOut
Description: 
Purpose: 
Switch between different Tape-Out versions(TO2, TO3). Default : TO2 
Example: 
ApiSelect_TapeOut(TapeOut_Version); 
Parameters:
Name Type EncodedType
TapeOut_Versione_tape_outint
tapeout version.
Function: Select_Topology
Description: 
Purpose: 
Selects Between TWO Bus topologies, STAR/DAISY_CHAIN 
Example: 
ApiSelect_Topology(topology); 
Parameters:
Name Type EncodedType
topologye_topologyint
Topology Selection.

---

# Page 583

Function: SendDetailedSignalWay
Description: 
Purpose: 
- Send Signalways instead of simulation tool (ex. Vosstrex). Make sure no other tools (ex. Vosstrex) is sending data to USV
PIP from Ethernet while this API is calling. 
- Signalway content is doc-files/Signalway.png. Echo represents distance in TOF unit, 1 TOF equals 51.2us. Amplitude
represents echo magnitude in dB (max physical value is 127.998dB). 
- Amplitude format is [xxxxxxx.yyyyyyyyy] 7-bits (integer) 9-bits (fraction). max integer part is all 7-bit ones = 127, max
fraction part is all 9-bits ones = 511 which equals to 511/(2^9) = 0.998. 
- replaced width with distinct amplitude for low/high channels , this API exposes this distinction and the original API is kept
for backward compatability, Reflection_Type and Object_Id are not used till now. 
Example: 
ApiSendDetailedSignalWay(Signalway, Echo_0_Distance, Echo_0_H_Amplitude, Echo_0_L_Amplitude, Echo_1_Distance,
Echo_1_H_Amplitude, Echo_1_L_Amplitude, Echo_2_Distance, Echo_2_H_Amplitude, Echo_2_L_Amplitude,
Echo_3_Distance, Echo_3_H_Amplitude, Echo_3_L_Amplitude, Echo_4_Distance, Echo_4_H_Amplitude,
Echo_4_L_Amplitude); 
Parameters:
Name Type EncodedTypeUnit
Signalway e_signalwayint -
Echo_0_Distance int uint16 TOF
Echo_0_H_Amplitudefloat float32 dB
Echo_0_L_Amplitudefloat float32 dB
Echo_1_Distance int uint16 TOF
Echo_1_H_Amplitudefloat float32 dB
Echo_1_L_Amplitudefloat float32 dB
Echo_2_Distance int uint16 TOF
Echo_2_H_Amplitudefloat float32 dB
Echo_2_L_Amplitudefloat float32 dB
Echo_3_Distance int uint16 TOF
Echo_3_H_Amplitudefloat float32 dB
Echo_3_L_Amplitudefloat float32 dB
Echo_4_Distance int uint16 TOF
Echo_4_H_Amplitudefloat float32 dB
Echo_4_L_Amplitudefloat float32 dB
Function: SendSignalWay
Description: 
Purpose: 
- Send Signalways instead of simulation tool (ex. Vosstrex). Make sure no other tools (ex. Vosstrex) is sending data to USV
PIP from Ethernet while this API is calling. 
- Signalway content is doc-files/Signalway.png. Echo represents distance in TOF unit, 1 TOF equals 51.2us. Amplitude
represents echo magnitude in dB (max physical value is 127.998dB). 
- Amplitude format is [xxxxxxx.yyyyyyyyy] 7-bits (integer) 9-bits (fraction). max integer part is all 7-bit ones = 127, max
fraction part is all 9-bits ones = 511 which equals to 511/(2^9) = 0.998. Width, Reflection_Type and Object_Id are not used
till now. 
Example: 
ApiSendSignalWay(Signalway, Echo_0_Distance, Echo_0_Amplitude, Echo_1_Distance, Echo_1_Amplitude,
Echo_2_Distance, Echo_2_Amplitude, Echo_3_Distance, Echo_3_Amplitude, Echo_4_Distance, Echo_4_Amplitude); 
Parameters:
Name Type EncodedTypeUnit
Signalway e_signalwayint -
Echo_0_Distanceint uint16 TOF
Echo_0_Amplitudefloat float32 dB
Echo_1_Distanceint uint16 TOF
Echo_1_Amplitudefloat float32 dB
Echo_2_Distanceint uint16 TOF
Echo_2_Amplitudefloat float32 dB
Echo_3_Distanceint uint16 TOF
Echo_3_Amplitudefloat float32 dB
Echo_4_Distanceint uint16 TOF
Echo_4_Amplitudefloat float32 dB
Function: SendSignalWays
Parameters:

---

# Page 584

NameTypeEncodedType
data int[]uint8
Function: SetDsi3Parameters
Description: 
Purpose: 
Sets DSI3 Parameters like EncoderCompatability , TX Filter Paramers , MiddleVoltage. 
Example: 
ApiSetDsi3Parameters(asicv,txFilter,middleVoltage); 
Parameters:
Name Type EncodedType
asicve_asic_compatability int
Selects the encoding.
txFiltere_filter_ena int
Selects the TxFilter curve.
retransmissionEnableboolean bool
Enables or Disables Retransmission feature.
frontMiddleVoltageint uint16
Selects the middle point for front bus , upon which the logic values are
determined.
RearMiddleVoltageint uint16
Selects the middle point for rear bus , upon which the logic values are
determined.
Function: SetEventLogging
Description: 
Purpose: 
Enables/Disables DSI3 Bus Event Logging CTE Messages. 
Example: 
ApiSetEventLogging(Enable); 
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SetReverberationDuration
Description: 
Purpose: 
Set Reverberaion Duration (REVERB_DUR). Parameter size = 6-bit. 1LSB = 51.2us, maximum value 63 which equals to
3225.6us 
Example: 
ApiSetReverberationDuration(REVERB_DUR); 
Parameters:
Name Type EncodedType
REVERB_DURint uint8
8 Bit Reverbration Duration, 1LSB is equivalent to
51.2us
Function: SetReverberationDurationSingleSensor
Description: 
Purpose: 
Set Reverberaion Duration (REVERB_DUR). Parameter size = 6-bit. 1LSB = 51.2us, maximum value 63 which equals to
3225.6us 
Example: 
ApiSetReverberationDurationSingleSensor(Address, REVERB_DUR); 
Parameters:
Name Type EncodedType
Addresse_sensor_usv int
Sensor Selection.
REVERB_DURint uint8
8 Bit Reverbration Duration, 1LSB is equivalent to
51.2us

---

# Page 585

Function: SetReverberationPeriod
Description: 
Purpose: 
Set Reverberaion Period (REVERB_PER). Parameter size = 10-bit. 1LSB = 25ns, maximum value 1023 which equals to
25.575us 
Example: 
ApiSetReverberationPeriod(REVERB_PER); 
Parameters:
Name Type EncodedType
REVERB_PERint uint16
10 Bit Reverbration Period, 1LSB is equivalent to 25
ns
Function: SetReverberationPeriodSingleSensor
Description: 
Purpose: 
Set Reverberaion Period (REVERB_PER). Parameter size = 10-bit. 1LSB = 25ns, maximum value 1023 which equals to
25.575us 
Example: 
ApiSetReverberationPeriodSingleSensor(Address, REVERB_PER); 
Parameters:
Name Type EncodedType
Addresse_sensor_usv int
Sensor Selection.
REVERB_PERint uint16
10 Bit Reverbration Period, 1LSB is equivalent to 25
ns
Function: SetSensorBeaming
Description: 
Purpose: 
Enable or disable castle simulation of sensor beaming 
Example: 
ApiSetSensorBeaming(Bus_Id, Beaming_Enabled); 
Parameters:
Name Type EncodedType
Bus_Idint uint8
Bus Selection.
Beaming_Enabledboolean bool
Enables or Disables
Beaming.
Function: SetSensorBeamingSingleSensor
Description: 
Purpose: 
Enable or disable castle simulation of sensor beaming 
Example: 
ApiSetSensorBeamingSingleSensor(Address, Beaming_Enabled); 
Parameters:
Name Type EncodedType
Addresse_sensor_usvint
Sensor Selection.
Beaming_Enabledboolean bool
Enables or Disables Beaming.
Function: SetSensorSwError
Description: 
Purpose: 
Implemented software failures for USV10 are listed in this sheet " https://goo.gl/W6Dq7W" 
Example: 

---

# Page 586

ApiSetSensorSwError(Address, Err_Type); 
Parameters:
Name Type EncodedType
Addresse_sensor_usvint
Sensor Selection.
Err_Typee_sw_error int
Failure Type.
Function: SetSensorTemperature
Description: 
Purpose: 
Set ASIC temperature for all sensors 
Example: 
ApiSetSensorTemperature(Temperature); 
Parameters:
Name Type EncodedType
Temperatureint uint16
8 bit Temperature value, it has the following offset, a written value of 0 gives -55 degree celsius, so the full range is -55 to
200 degree celsius
Function: SetSensorTemperatureSingleSensor
Description: 
Purpose: 
Set ASIC temperature for a single sensor 
Example: 
ApiSetSensorTemperatureSingleSensor(Address, Temperature); 
Parameters:
Name Type EncodedType
Addresse_sensor_usv int
Sensor Selection.
Temperatureint uint16
8 bit Temperature value, it has the following offset, a written value of 0 gives -55 degree celsius, so the full range is -55 to
200 degree celsius
Function: SetSlotError
Description: 
Purpose: 
- This API is used to test retransmission feature for USV10.2 Sensors. It creates a communication failure on a specific BRC
slot. 
- After which the DUT will issue a retransmission request based on which slot has failed. Castle will then send the correct
slot data. 
- Castle can also be configured to send faulty slot data during retransmission. This API Applies for USV10.2 Only. 
Example: 
ApiSetSlotError(busID, slotID, errType, retransmissionCount); 
Parameters:
Name Type EncodedType
busIDe_bus_usv int
Bus Selection.
slotIDe_slot_usv int
Slot to apply the failure on.
errTypee_slot_error int
Failure to be Applied on the selected slot.
retransmissionCountint uint8
Number of faulty retransmissions simulated by castle before the correct slot data is
sent.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat

---

# Page 587

Maskint uint32 hex
Valueint uint32 hex
Function: Update_OTC_Measurement_Data
Description: 
Purpose: 
Overwrite the default uncompressed stored data for each mode, reported only in OTC-Measurement-Mode
(Membrane_Diagnostics) 
Example: 
ApiUpdate_OTC_Measurement_Data(OTC_Mode, OTC_Data, Address); 
Parameters:
Name Type EncodedType Format
OTC_Modee_otc_mode int -
Selects the OTC Curve to update.
OTC_Dataint[] uint8 raw
an array of 40 bytes, that has the new OTC curve
data.
Addresse_sensor_usv int -
Sensor Selection.
Function: WriteCfgMemIdx
Description: 
Purpose: 
Write in a specific Config Memory location (2 bytes per index). Index from 0x00 to 0xFE (for each page) accessed by even
index ONLY. 
MemoryMap screenshot: doc-files/USV10_MemMap.jpg 
Example: 
ApiWriteCfgMemIdx(Address, Page, Index, Data); 
Parameters:
Name Type EncodedType Format
Addresse_sensor_usv int -
Sensor Selection.
Pagee_cfgMem_page int -
Configuration Memory Number Page Selection.
Indexint uint8 hex
Word Index Selection, can be 0x00 to 0xFE, since each Words is 2 bytes and each page has 128 x
Word.
Dataint uint16 hex
16 bit value to write into the given index and page.
Function: WriteCfgMemIdxBits
Description: 
Purpose: 
- Write in a specific bits inside Config Memory location. Index from 0x00 to 0xFE (for each page) accessed by even index
ONLY. 
- Note: data will be truncated if its value will not fit in the number of bits provided. MemoryMap screenshot: doc-
files/USV10_MemMap.jpg 
Example: 
ApiWriteCfgMemIdxBits(Address, Page, Index, Offset, NumberOfBits, Data); 
Parameters:
Name Type EncodedType Format
Addresse_sensor_usv int -
Sensor Selection.
Pagee_cfgMem_page int -
Configuration Memory Number Page Selection.
Indexint uint8 hex
Word Index Selection, can be 0x00 to 0xFE, since each Words is 2 bytes and each page has 128 x Word.
Offsetint uint8
can be 0 to 15, selects the bit offset from which the new value will be written.
NumberOfBitsint uint8
can be 0 to 15, selects the number of bits to write starting from the offset given.
Dataint uint16 hex
16 bit value, that will be written into the given index and page, after being offset and masked with given number of
bits.

---

# Page 588

Function: WriteNearRangeParameters
Description: 
Purpose: 
Test API to check Near range correct formula [Y(x) = Slope(X+OffsetX) + OffsetY] 
Example: 
ApiWriteNearRangeParameters(Slope, OffsetX, OffsetY); 
Parameters:
Name TypeEncodedType
Slope int uint16
OffsetXint int8
OffsetYint int8
back to interface definition
Messages
Message: ConfigMemRead
Parameters:
Name Type EncodedTypeFormat
Address e_sensor_usv int -
Page e_cfgMem_pageint -
MEM_Indexint uint8 hex
Value int uint16 hex
Message: ConfigMemTest
Parameters:
Name Type EncodedTypeFormat
Address e_sensor_usv int -
Page e_cfgMem_pageint -
MEM_Index int uint8 hex
Expected_Valueint uint16 hex
Actual_Value int uint16 hex
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: SensorsPoweredOff
Description: ECU Chain_Power line off is detected, sensors default startup configuration will be set for next power cycle
Message: SensorsPoweredOn
Description: ECU Chain_Power line on is detected
back to interface definition
Objects
Object: SensorsVoltage_mv
Description: Signal contains the usv sensors power line voltage reading in milli-volts
Name InterfaceTypeEncodedTypeOffsetScaleUnitBytecountElasticLengthMutable
SensorsVoltage_mv_SignalSignalint 0 1 mv2 false false
back to interface definition
Interface: USV10_Switches  extends BaseSensors UsvBaseSensors _Object
Enumerations
e_Bus_Line_Select
e_Bus_Topology_Select
e_Channel_Select
e_DAC_Reference_Input
e_DAC_Select
e_DIOs_Group
e_DIOs_Source
e_VoltageVariants
e_hw_error

---

# Page 589

e_type
e_type_LED
Functions
BusTopologySelect
ButtonBSD
ButtonPSM
ButtonTM
ButtonUPA
Config10p2PwrLine
ConnectDigitalIO
DebugVoltageconfig
EnableGeneralPurposeDACs
LedBSD
LedBSD_Alert_L
LedBSD_Alert_R
LedBSD_State_L
LedBSD_State_R
LedPSM
LedTM
LedUPA
ReadBusLevelADC
SensorMonitoredCurrent
SensorPowerLineScToGnd
SensorSimulatedCurrent
SetDSIMiddleVoltage
SetIRsComparatorThreshold
SetRxComparatorThreshold
SetSensorHwError
SetUserTag
WriteDACValue
Messages
GeneralMessage
MonitoredCurrent
VoltageLevel
Enumerations
Enum: e_Bus_Line_Select
Description: Selects Between DATA and PWR lines
ValueDescription
BUS Data Line.
PWRPWR Line.
Enum: e_Bus_Topology_Select
Description: Selects Bus Topology , this is deprecated.
Value Description
Common_Bus Selects STAR Topology.
Daisy_Chain Selects Daisy Chain Topology.
Daisy_Chain_With_CommonBus_ConnectSelects Daisy Chain Topology wih data/power pins shorted , this is selected for
USV10.2
Enum: e_Channel_Select
Description: Selects Bus Selection.
ValueDescription
BUS0BUS0.
BUS1BUS1
BUS2BUS2.
BUS3BUS3.
Enum: e_DAC_Reference_Input
Description: DAC Reference Voltage Selection
Value Description
REF_INT_5VDAC Reference to 5V.
REF_EXT_LDAC Reference to
KL15.
REF_EXT_HDAC Reference toKL30.

---

# Page 590

Enum: e_DAC_Select
Description: DAC Selection.
ValueDescription
DAC0DAC0.
DAC1DAC1.
DAC2DAC2.
DAC3DAC3.
Enum: e_DIOs_Group
Description: Selects DIO Group.
Value Description
DIO0_DIO1DIO0 and DIO1
Group.
DIO2_DIO3DIO2 and DIO3
Group.
Enum: e_DIOs_Source
Description: Selects DIO Voltage Source.
Value Description
DIO_VDDSelect external input “DIO_VDD_A” as supply for DIO0 or DIO1Or select external input “DIO_VDD_B” as supply for DIO2 or DIO3
V_EXTSelect “V_EXT15” as supply for DIO0 or DIO1
Or select “V_EXT30” as supply for DIO2 or DIO3
V_5volt Select “5V” as supply for DIO0 or DIO1 or DIO2 or DIO3
V3_3voltSelect “3.3V” as supply for DIO0 or DIO1 or DIO2 or DIO3
GNDSelect “GND” to disable all supply sources for DIO0 or DIO1 or DIO2 or
DIO3
OFF Disable all sources (Supply or GND) and Use DIO as an input
Enum: e_VoltageVariants
Value Description
Variant_0DSI MiddleVoltage equals to 4, and ECU commands in range 4(+/-)2
Variant_1DSI MiddleVoltage equals to 4, and ECU commands in range 4(+/-)3
Variant_2DSI MiddleVoltage equals to Vsup/2, and ECU commands in range Vsup(+/-)2, Vsup typically equals to
13V
Variant_3DSI MiddleVoltage equals to Vsup/2, and ECU commands in range Vsup(+/-)3, Vsup typically equals to
13V
Enum: e_hw_error
Description: Selects Sensor HW Errors.
Value Description
NORMAL Removes All HW Failures.
DataLine_DISCONNECTEDDisconnects sensor data line, Castle stops the sensor to master
communication
DataLine_SC_TO_VBAT Connects sensor data line to Battery (VCC)
DataLine_SC_TO_GND Connects sensor data line to GND
Enum: e_type
Description: Selects Button States.
Value Description
NORMALSame as OPEN , Pin is left
floating.
SC_TO_GND Pulls the PIN to ground.
SC_TO_VOLTAGEPulls the PIN to VCC.
OPEN Pin is left floating.
Enum: e_type_LED
Description: Selects LED States.
Value Description
NORMALSame as OPEN , Pin is left
floating.
SC_TO_GND Pulls the PIN to ground.
SC_TO_VOLTAGEPulls the PIN to VCC.
OPEN Pin is left floating.
Functions
Function: BusTopologySelect

---

# Page 591

Description: 
Purpose: 
Switch between Common bus topology or Daisy-chain topology. This API is deprecated and shouldn't be used. 
Example: 
ApiBusTopologySelect(busTopology); 
Parameters:
Name Type EncodedType
busTopologye_Bus_Topology_Selectint
Topology Select.
Function: ButtonBSD
Description: 
Purpose: 
Sets State of PIN ButtonBSD 
Example: 
ApiButtonBSD(Type); 
Parameters:
NameType EncodedType
Typee_typeint
Button State Selection.
Function: ButtonPSM
Description: 
Purpose: 
Sets State of PIN ButtonPSM 
Example: 
ApiButtonPSM(Type); 
Parameters:
NameType EncodedType
Typee_typeint
Button State Selection.
Function: ButtonTM
Description: 
Purpose: 
Sets State of PIN ButtonTM 
Example: 
ApiButtonTM(Type); 
Parameters:
NameType EncodedType
Typee_typeint
Button State Selection.
Function: ButtonUPA
Description: 
Purpose: 
Sets State of PIN ButtonUPA 
Example: 
ApiButtonUPA(Type); 
Parameters:
NameType EncodedType
Typee_typeint
Button State Selection.
Function: Config10p2PwrLine
Description: 
Purpose: 
Config 10p2 Pwr Line 

---

# Page 592

Example: 
ApiConfig10p2PwrLine(PWR_START, PWR_END); 
Parameters:
Name TypeEncodedTypeUnit
PWR_STARTint uint16 mV
Power Cycle Start Threshold.
PWR_ENDint uint16 mV
Power Cycle End Threshold.
Function: ConnectDigitalIO
Description: 
Purpose: 
- The DIOs can be used as inputs or push-pull outputs. Connect General Purpose DIOs pins (DIO0, DIO1, DIO2, DIO3) to
different supplies or External Input. 
- Possible combinations : Connect group 0 (DIO0 & DIO1) to (DIO_VDD_A, V_EXT15, 5V, 3.3V, GND) and Connect group
1 (DIO2 & DIO3) to (DIO_VDD_B, V_EXT30, 5V, 3.3v, GND). 
- Only one source (DIO_VDD, V_EXT, 5V, 3.3V) must be enabled at any time for each group : 0 -> (DIO0, DIO1) and 1 ->
(DIO2, DIO3). 
For more details : Schematics of DIO0 & DIO1 doc-files/DigitalIOs.png 
Example: 
ApiConnectDigitalIO(Group, FirstDIO, SecondDIO); 
Parameters:
Name Type EncodedType
Groupe_DIOs_Groupint
Bus Line Selection.
FirstDIOe_DIOs_Sourceint
Bus Line Selection.
SecondDIOe_DIOs_Sourceint
Bus Line Selection.
Function: DebugVoltageconfig
Description: 
Purpose: 
DebugVoltageconfig 
Example: 
ApiDebugVoltageconfig(MiddleVolt_Front, MiddleVolt_Rear, DebugEnable); 
Parameters:
Name Type EncodedTypeUnit
MiddleVolt_Frontint uint16 mV
Front Bus Middle Voltage.
MiddleVolt_Rearint uint16 mV
Rear Bus Middle Voltage.
DebugEnablebooleanbool
Debug Enable Selectio.
Function: EnableGeneralPurposeDACs
Description: 
Purpose: 
Enable General Purpose DACs (DAC0, DAC1, DAC2, DAC3) and select Vref for each group (first group: DAC0 & DAC1,
second group: DAC2 & DAC3). 
Available options: 
1) Use Internal Vref : 5V (default value) 
2) Use External Vref : a) DAC_R_E_L (Operating range: 2V .. 5V), DUT Interface pin 66 b) DAC_R_E_H (Operating range:
8V .. 20V), DUT Interface pin 49 
Example: 
ApiEnableGeneralPurposeDACs(DAC_Enable, DAC_Vref); 
Parameters:
Name Type EncodedType
DAC_Enablee_DAC_Select int
DAC Selection.
DAC_Vrefe_DAC_Reference_Inputint
DAC Reference Voltage Selection.

---

# Page 593

Function: LedBSD
Description: 
Purpose: 
Sets State of PIN LedBSD 
Example: 
ApiLedBSD(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: LedBSD_Alert_L
Description: 
Purpose: 
Sets State of PIN LedBSD_Alert_L 
Example: 
ApiLedBSD_Alert_L(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: LedBSD_Alert_R
Description: 
Purpose: 
Sets State of PIN LedBSD_Alert_R 
Example: 
ApiLedBSD_Alert_R(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: LedBSD_State_L
Description: 
Purpose: 
Sets State of PIN LedBSD_State_L 
Example: 
ApiLedBSD_State_L(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: LedBSD_State_R
Description: 
Purpose: 
Sets State of PIN LedBSD_State_R 
Example: 
ApiLedBSD_State_R(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: LedPSM
Description: 

---

# Page 594

Purpose: 
Sets State of PIN LedUPSM 
Example: 
ApiLedPSM(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: LedTM
Description: 
Purpose: 
Sets State of PIN LedTM 
Example: 
ApiLedTM(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: LedUPA
Description: 
Purpose: 
Sets State of PIN LedUPA 
Example: 
ApiLedUPA(Type); 
Parameters:
NameType EncodedType
Typee_type_LEDint
LED State Selection.
Function: ReadBusLevelADC
Description: 
Purpose: 
- Bus level ADC will measure power supply voltage (in case of ADC_BL_Select connected to PWR) and will measure
communication bus voltage 
- to set Vth2 for RX Comp (in case of ADC_BL_Select connected to BUS). It could be applied for all 4 channels(segments).
Example: 
ApiReadBusLevelADC(channel, busType); 
Parameters:
Name Type EncodedType
channele_Channel_Selectint
ADC Channel Selection
busTypee_Bus_Line_Selectint
Bus line selection.
Function: SensorMonitoredCurrent
Description: 
Purpose: 
- Monitor sensor current for I-Load (power line) & I-Response (communication line). 
- For I-Load : monitor the current on CHAIN_POWER lines using busType "PWR". For I-Response : monitor the current on
Bus lines using busType "BUS". 
Example: 
ApiSensorMonitoredCurrent(channel, busType); 
Parameters:
Name Type EncodedType
channele_Channel_Selectint
Channel Selection.
busTypee_Bus_Line_Selectint
Bus Line Selection.

---

# Page 595

Function: SensorPowerLineScToGnd
Description: 
Purpose: 
- Sensors power line SC to gnd failure injection. A current of 1091 mA is drawn from the selected sensor channel power
line for 400ms. 
- Then it will be set back to normal for 7 secs to cool down the USV PIP circuit. 
Example: 
ApiSensorPowerLineScToGnd(channel); 
Parameters:
Name Type EncodedType
channele_Channel_Selectint
Function: SensorSimulatedCurrent
Description: 
Purpose: 
- Simulate current sink on sensors power lines (I-Load). simulatedCurrent in mAmpere, and valid range is (0 .. 600mA)
simulated per DSI3 bus. 
- We have 4 power lines for 4 DSI3 buses (Max 6 sensors per bus). Connected to DUT Interface pins
(S_CHAIN_POWER0, S_CHAIN_POWER1, S_CHAIN_POWER2, S_CHAIN_POWER3): pins 8, 7, 6, 5 respectively 
Example: 
ApiSensorSimulatedCurrent(channel, simulatedCurrent); 
Parameters:
Name Type EncodedTypeUnit
channele_Channel_Selectint -
Channel Selection.
simulatedCurrentint uint16 mA
Simulated Current in milli amps.
Function: SetDSIMiddleVoltage
Description: 
Purpose: 
Set the middle voltage for DSI3 commands to be decoded correctly. For more details: Different provided variants doc-
files/USV10_DataDriverVariants.png 
Example: 
ApiSetDSIMiddleVoltage(Variant); 
Parameters:
NameType EncodedType
Variante_VoltageVariants int
Sets the middle voltage configuration for the DSI3
bus.
Function: SetIRsComparatorThreshold
Description: 
Purpose: 
Set the threshold of the IRs-Comparator. ThresholdVoltage in mVolt, and valid range is (0 .. 5000mv). For example,
thresholdVoltage 660 will set Vth = 0.66 volt (default value). 
Example: 
ApiSetIRsComparatorThreshold(thresholdVoltage); 
Parameters:
Name Type EncodedType Unit
thresholdVoltageint uint16 mVolt
Threshold voltage in millivolt, range is 0 to
5000mV
Function: SetRxComparatorThreshold
Description: 
Purpose: 
Set the threshold of the RX-Comparator. ThresholdVoltage in mVolt, and valid range is (0 .. 8000mv). For example,
thresholdVoltage 2000 will set Vth = 2 volt (default value). 
Example: 

---

# Page 596

ApiSetRxComparatorThreshold(thresholdVoltage); 
Parameters:
Name Type EncodedType Unit
thresholdVoltageint uint16 mVolt
Threshold voltage in millivolt, range is 0 to
8000mV
Function: SetSensorHwError
Description: 
Purpose: 
Sets Hardware Errors on the selected Sensors. Note that SC_GND/SC_VBAT are bus level failures only due to hardware
constraints. 
Example: 
ApiSetSensorHwError(Address, Err_Type); 
Parameters:
Name Type EncodedType
Addresse_sensor_usvint
Sensor Selection.
Err_Typee_hw_error int
Failure Type.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: WriteDACValue
Description: 
Purpose: 
Write voltage value to be output on general purpose DACs (DAC0, DAC1, DAC2, DAC3). DUT Interface pins (USV10_PIP
ST10 Front Connector, 78pins): 67, 50, 47, 48 respectively 
Example: 
ApiWriteDACValue(DAC_Select, DAC_Value); 
Parameters:
Name Type EncodedTypeUnit
DAC_Selecte_DAC_Selectint -
DAC Selection.
DAC_Valueint uint16 mV
DAC Value to be written in milli volts.
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: MonitoredCurrent
Description: Read monitored current for I-Load "PWR" or I-Response "BUS mA unit
Parameters:
Name TypeEncodedTypeUnit
MonitoredCurrentint uint16 mA
Message: VoltageLevel
Description: Read PWR/BUS voltage level in mV unit
Parameters:

---

# Page 597

Name TypeEncodedType
VoltageLevelint uint16
back to interface definition
Interface: TCU_DAC  extends _Object
Enumerations
e_DAC_Groups
e_DAC_Reference_Input
e_DAC_Select
Functions
SetDacPercentage
SetDacState
SetDacVref
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: e_DAC_Groups
Value
DAC0_1
DAC2_3
Enum: e_DAC_Reference_Input
Value
REF_INT_5V
REF_EXT_L
REF_EXT_H
Enum: e_DAC_Select
Value
DAC0
DAC1
DAC2
DAC3
Functions
Function: SetDacPercentage
Description: 
Purpose: 
Write voltage value to be output on general purpose DACs (DAC0, DAC1, DAC2, DAC3). DUT Interface pins (USV10_PIP
ST10 Front Connector, 78pins): 67, 50, 47, 48 respectively. 
Example: 
*_ApiSetDacPercentage(ItfTCU_DAC.Enme_DAC_Select.DAC0, 50); 
Parameters:
Name Type EncodedType Unit
DAC_Selecte_DAC_Select int -
Selects the DAC channel.
OutPercentageint uint16 %
Set Dac output voltage on selected channel with a value equals: Percentage * Vref * Gain E.g. OutPercentage = 50%,
Vref = 5V (internal default), Gain = 4 (fixed cct gain) output voltage = 10V
Function: SetDacState
Description: 
Purpose: 
Enable (connect) / Disable (disconnect) the Dac output to the outer interface. 
Example: 
*_ApiSetDacVref(ItfTCU_DAC.Enme_DAC_Groups.DAC0_1, ItfTCU_DAC.Enme_DAC_Reference_Input.REF_INT_5V); 
*_ApiSetDacPercentage(ItfTCU_DAC.Enme_DAC_Select.DAC0, 50); 
*_ApiSetDacState(ItfTCU_DAC.Enme_DAC_Select.DAC0, true); 
Parameters:
Name Type EncodedType
DAC_Selecte_DAC_Select int

---

# Page 598

Selects the DAC channel.
Enableboolean bool
True to enable the DAC output, False to
disable.
Function: SetDacVref
Description: 
Purpose: 
Enable General Purpose DACs (DAC0, DAC1, DAC2, DAC3) and select Vref for each group (first group: DAC0 & DAC1,
second group: DAC2 & DAC3). Available options: 
1) Use Internal Vref : 5V (default value) 
2) Use External Vref : a) DAC_R_E_L (Operating range: 2V .. 5V), DUT Interface pin 66 
b) DAC_R_E_H (Operating range: 8V .. 20V), DUT Interface pin 49 
Example: 
*_ApiSetDacVref(ItfTCU_DAC.Enme_DAC_Groups.DAC0_1, ItfTCU_DAC.Enme_DAC_Reference_Input.REF_INT_5V); 
Parameters:
Name Type EncodedType
DAC_Enablee_DAC_Groups int
Selects the DAC group to enable.
DAC_Vrefe_DAC_Reference_Input int
Selects the voltage reference for the DAC
group.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: TCU_PG  extends _Object
Enumerations
e_PG
e_PG_Measurements
e_PG_Voltage_Reference
Functions
GetPulseGenMeasurments
SetPGPercentage
SetPgState
SetPgVref
SetUserTag
Messages
GeneralMessage
InputVoltage
Measurements
VoltageLevel
Enumerations
Enum: e_PG
Value
PG0
PG1
PG2

---

# Page 599

Enum: e_PG_Measurements
Value
PG_V_ADC
PG_I_ADC
Enum: e_PG_Voltage_Reference
Value Description
PG_VR_INT A fixed voltage of 2.5V that can supply an output voltage from 0 to 20.056V
PG_VR_DUT_HA variable voltage from 3.2V to 8V that can supply an output voltage from 0 ... 3.2V to 0 ....
8V
PG_VR_DUT_LA variable voltage from 8V to 20V that can supply an output voltage from 0 ... 8V to 0 .... 20V
Functions
Function: GetPulseGenMeasurments
Description: 
Purpose: 
Reads the pulse generator measurements (PG_V_ADCx and PG_I_ADCx). 
Example: 
*_ApiGetPulseGenMeasurments(ItfTCU_PG.Enme_PG.PG2, ItfTCU_PG.Enme_PG_MeasurementsPG_V_ADC); 
Parameters:
Name Type EncodedType
PGe_PG int
Selects the pulse generator.
InputPine_PG_Measurements int
Selects the measurement type (voltage orcurrent).
Function: SetPGPercentage
Description: 
Purpose: 
Sets the output voltage of the pulse generator as a percentage of the reference voltage. 
Example: 
*_ApiSetPgVref(ItfTCU_PG.Enme_PG_Voltage_Reference.PG_VR_INT); 
*_ApiSetPgState(ItfTCU_PG.Enme_PG.PG0, true); 
*_ApiSetPGPercentage(ItfTCU_PG.Enme_PG.PG0, 50); 
Parameters:
Name Type EncodedType Unit
PGe_PG int -
Selects the pulse generator.
OutPercentageint uint16 %
Set Dac output voltage on selected channel with a value equals: Percentage * Vref * Gain E.g. OutPercentage = 50%,
Vref = 5V (internal default), Gain = 4 (fixed cct gain) output voltage = 10V
Function: SetPgState
Description: 
Purpose: 
Enables or disables the pulse generator. 
Example: 
*_ApiSetPgState(ItfTCU_PG.Enme_PG.PG0, true); 
Parameters:
NameType EncodedType
PGe_PG int
Selects the pulse generator.
Enableboolean bool
True to enable the pulse generator, False to
disable.
Function: SetPgVref
Description: 
Purpose: 
Selects the voltage reference for the pulse generator. 

---

# Page 600

Example: 
*_ApiSetPgVref(ItfTCU_PG.Enme_PG_Voltage_Reference.PG_VR_INT); 
Parameters:
Name Type EncodedType
VoltageSourcee_PG_Voltage_Reference int
Selects the voltage reference for the pulse
generator.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: InputVoltage
Description: Report Info/Error based on min and max voltage values
Parameters:
Name TypeEncodedTypeScaleUnit
MinVoltageint uint16 0.001V
Minimum voltage value.
MeasuredVoltageint uint16 0.001V
The measured voltage value.
MaxVoltageint uint16 0.001V
Maximum voltage value.
Message: Measurements
Description: Report Info of supply or PG ..... measurements
Parameters:
Name TypeEncodedTypeScaleUnit
ADCValueint uint16 0.001V
The measured ADC value.
Message: VoltageLevel
Description: Read ADCs voltage level in mV
Parameters:
Name Type EncodedType
VoltageLevelint uint16
The measured voltage
level.
back to interface definition
Interface: TCU_SUP  extends _Object
Enumerations
e_SUP
e_SUP_Mode
e_Supply_Measurements
e_type
Functions
SetSUPPercentage
SetSupMode
SetUserTag
Messages
GeneralMessage

---

# Page 601

InputVoltage
Measurements
VoltageLevel
Enumerations
Enum: e_SUP
Value
SUP0
SUP1
Enum: e_SUP_Mode
Value
Off
Sink
Source
SelfTest
Enum: e_Supply_Measurements
Value
SUP_IS_ADC
SUP_V_ADC
SUP_IMSR_ADC
Enum: e_type
Value
NORMAL
SC_TO_GND
SC_TO_VOLTAGE
OPEN
Functions
Function: SetSUPPercentage
Description: 
Purpose: 
Sets the output voltage of the specified supply as a percentage of the reference voltage. 
Example: 
*_ApiSetSUPPercentage(ItfTCU_SUP.Enme_SUP.SUP1, 50); 
Parameters:
Name Type EncodedType Unit
Supplye_SUP int -
Selects the supply.
OutPercentageint uint16 %
Set Dac output voltage on selected channel with a value equals: Percentage * Vref * Gain E.g. OutPercentage = 50%,Vref = 5V (internal default), Gain = 4 (fixed cct gain) output voltage = 10V
Function: SetSupMode
Description: 
Purpose: 
Sets the mode of the specified supply. 
Example: 
*_ApiSetSupMode(ItfTCU_SUP.Enme_SUP.SUP0, ItfTCU_SUP.Enme_SUP_Mode.Source); 
Parameters:
NameType EncodedType
Supplye_SUP int
Selects the supply.
Modee_SUP_Modeint
Selects the supply mode.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 602

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: InputVoltage
Description: Report Info/Error based on min and max voltage values
Parameters:
Name TypeEncodedTypeScaleUnit
MinVoltageint uint16 0.001V
Minimum voltage value.
MeasuredVoltageint uint16 0.001V
The measured voltage value.
MaxVoltageint uint16 0.001V
Maximum voltage value.
Message: Measurements
Description: Report Info of supply or PG ..... measurements
Parameters:
Name TypeEncodedTypeScaleUnit
ADCValueint uint16 0.001V
The measured ADC value.
Message: VoltageLevel
Description: Read ADCs voltage level in mV
Parameters:
Name Type EncodedType
VoltageLevelint uint16
The measured voltage
level.
back to interface definition
Interface: TCU_DIO  extends _Object
Enumerations
e_DIO_State
e_DIOs
e_DIOs_Group
e_DIOs_Source
Functions
ReadDio
SetDio
SetDioGroupSource
SetUserTag
TestDio
Messages
GeneralMessage
InputVoltage
Measurements
VoltageLevel
Enumerations
Enum: e_DIO_State
Value
Low
High
High_Impedence
Self_Test

---

# Page 603

Enum: e_DIOs
Value
DIO0
DIO1
DIO2
DIO3
DIO4
DIO5
DIO6
DIO7
Enum: e_DIOs_Group
Value Description
DIO0_DIO1_DIO2_DIO3Group 1 contains 4 DIOs (DIO0, DIO1, DIO2 and
DIO3)
DIO4_DIO5_DIO6_DIO7Group 2 contains 4 DIOs (DIO4, DIO5, DIO6 and
DIO7)
Enum: e_DIOs_Source
Value Description
V_EXT15Select “V_EXT15” as supply for DIO0 or ....... or
DIO7
V_EXT30Select “V_EXT30” as supply for DIO0 or ....... or
DIO7
V_12volt Select “12v” as supply for DIO0 or ....... or DIO7
V_5volt Select “5v” as supply for DIO0 or ....... or DIO7
V_SelfTestSelect self test supply (5v) for DIO0 or ....... or DIO7
Functions
Function: ReadDio
Description: 
Purpose: 
Reads the state of the selected DIO. 
Example: 
*_ApiReadDio(ItfTCU_DIO.Enme_DIOs.DIO1); 
Parameters:
Name Type EncodedType
DIO_sele_DIOsint
Selects the DIO to read.
Function: SetDio
Description: 
Purpose: 
- The DIOs can be used as inputs or push- pull outputs. 
- Connect General Purpose DIOs pins (DIO0, DIO1, DIO2, DIO3) to different supplies or External Input. 
- Possible combinations : 
- Connect group 0 (DIO0 & DIO1) to (DIO_VDD_A, V_EXT15, 5V, 3.3V, GND) and Connect group 1 (DIO2 & DIO3) to
(DIO_VDD_B, V_EXT30, 5V, 3.3v, GND). 
- Only one source (DIO_VDD, V_EXT, 5V, 3.3V) must be enabled at any time for each group : 0 -> (DIO0, DIO1) and 1 ->
(DIO2, DIO3). 
- For more details : Schematics of DIO0 & DIO1 

---

# Page 604

 
Example: 
*_ApiSetDio(ItfTCU_DIO.Enme_DIOs.DIO0, ItfTCU_DIO.Enme_DIO_State.High); 
Parameters:
Name Type EncodedType
Dio_Sele_DIOs int
Selects the DIO.
Statee_DIO_State int
Sets the state of the selectedDIO.
Function: SetDioGroupSource
Description: 
Purpose: 
- The DIOs can be used as inputs or push- pull outputs. 
- Connect General Purpose DIOs pins (DIO0, DIO1, DIO2, DIO3) to different supplies or External Input. 
- Possible combinations : 
- Connect group 0 (DIO0 & DIO1) to (DIO_VDD_A, V_EXT15, 5V, 3.3V, GND) and Connect group 1 (DIO2 & DIO3) to
(DIO_VDD_B, V_EXT30, 5V, 3.3v, GND). 
- Only one source (DIO_VDD, V_EXT, 5V, 3.3V) must be enabled at any time for each group : 0 -> (DIO0, DIO1) and 1 ->
(DIO2, DIO3). 
- For more details : Schematics of DIO0 & DIO1 
 
Example: 
*_ApiSetDioGroupSource(ItfTCU_DIO.Enme_DIOs_Group.DIO0_DIO1_DIO2_DIO3,
ItfTCU_DIO.Enme_DIOs_Source.V_EXT15); 
Parameters:

---

# Page 605

NameType EncodedType
Groupe_DIOs_Group int
Selects the DIO group.
Sourcee_DIOs_Source int
Selects the source for the DIO
group.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestDio
Description: 
Purpose: 
Tests the selected DIO by applying the specified state and potentially verifying the output. 
Example: 
*_ApiTestDio(ItfTCU_DIO.Enme_DIOs.DIO2, ItfTCU_DIO.Enme_DIO_State.Low); 
Parameters:
Name Type EncodedType
DIO_sele_DIOs int
Selects the DIO to test.
Statee_DIO_State int
The desired state for testing the
DIO.
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: InputVoltage
Description: Report Info/Error based on min and max voltage values
Parameters:
Name TypeEncodedTypeScaleUnit
MinVoltage int uint16 0.001V
MeasuredVoltageint uint16 0.001V
MaxVoltage int uint16 0.001V
Message: Measurements
Description: Report Info of supply or PG ..... measurements
Parameters:
Name TypeEncodedTypeScaleUnit
ADCValueint uint16 0.001V
Message: VoltageLevel
Description: Read ADCs voltage level in mV
Parameters:
Name TypeEncodedType
VoltageLevelint uint16
back to interface definition
Objects
Object: ADC_DIO0
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used

---

# Page 606

Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO0_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO1
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO1_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO2
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO2_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO3
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO3_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO4
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO4_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO5
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO5_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO6
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO6_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO7
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO7_SignalSignalint 0 0.0000039102V 4 false false
back to interface definition
Interface: TCU_UART  extends _Object
Enumerations
e_uart_rs232_devices
Functions
EnableDisableUartCom
SetUserTag
Messages
ComUartReceivedBuffer
GeneralMessage
Enumerations
Enum: e_uart_rs232_devices
Value
uart_rs232_0
uart_rs232_1
uart_rs232_2
uart_rs232_3

---

# Page 607

Functions
Function: EnableDisableUartCom
Description: 
Purpose: 
Enables or disables UART communication for the specified device. 
Example: 
*_ApiEnableDisableUartCom(uart_rs232_1, true); 
Parameters:
Name Type EncodedType
DeviceIndexe_uart_rs232_devices int
Selects the UART device index.
Enable_Uartboolean bool
True to enable UART communication, False to
disable.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: ComUartReceivedBuffer
Description: Logging all received UART data on last issued transaction.
Parameters:
NameTypeEncodedTypeFormat
Deviceint uint8
Data int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: TCU_MIC  extends _Object
Enumerations
e_MicState
Functions
SetMicState
SetUserTag
WaveGeneratorStart
WaveGeneratorStop
Messages
GeneralMessage
Enumerations
Enum: e_MicState
Value
NormalMode
TriState
VoltageMeasurement
IshortMeasurement
Functions
Function: SetMicState

---

# Page 608

Description: 
Purpose: 
Sets Mic Connection State. 
Example: 
*_ApiSetMicState(NormalMode); 
Parameters:
Name Type EncodedType
MicStatee_MicState int
The desired state of the
microphone.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: WaveGeneratorStart
Description: 
Purpose: 
Starts Generation of a sine wave based on provided DAC Values and Tick Period. 
Example: 
*_ApiWaveGeneratorStart({0x00, 0xFF}, 1000); 
Parameters:
NameType EncodedType Format
Dataint[] uint8 raw
The DAC values for generating the sine
wave.
Ticksint uint32
The tick period for the sine wave generation.
Function: WaveGeneratorStop
Description: 
Purpose: 
Stops the Wave Generation. 
Example: 
*_ApiWaveGeneratorStop(); 
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: TCU_SPK  extends _Object
Enumerations
e_SpkState
Functions
SetSpkState
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: e_SpkState

---

# Page 609

Value
NormalMode
TriState
Functions
Function: SetSpkState
Description: 
Purpose: 
Sets Mic Connection State. 
Example: 
*_ApiSetSpkState(NormalMode); 
Parameters:
Name Type EncodedType
SpkStatee_SpkStateint
The desired speaker state.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: SPK_Frequency
Name Interface
SPK_FrequencyPWM
back to interface definition
Interface: TCU_LIN  extends _Object
Enumerations
e_LIN
e_LIN_HW_Failure
e_Lin_Measurements
Functions
ApplyLinHwFailure
EnableLinPullUpResistance
GenerateBits
ReadBits
SetUserTag
Messages
GeneralMessage
LIN_RKE_RCV
Enumerations
Enum: e_LIN
Value
LIN0
LIN1
LIN2
Enum: e_LIN_HW_Failure

---

# Page 610

Value
OPEN
SC_TO_GND
SC_TO_VCC
NormalMode
Enum: e_Lin_Measurements
Value
LIN_V_ADC0
LIN_V_ADC1
LIN_V_ADC2
Functions
Function: ApplyLinHwFailure
Description: 
Purpose: 
Apply HW failures on LIN interfaces. 
Example: 
*_ApiApplyLinHwFailure(LIN1, OPEN); 
Parameters:
NameType EncodedType
LinBuse_LIN int
The LIN bus to apply the hardware failureto.
Failuree_LIN_HW_Failure int
The type of hardware failure to apply.
Function: EnableLinPullUpResistance
Description: 
Purpose: 
Enable or disable LIN bus pull up resistance - default is diabled. 
Example: 
*_ApiEnableLinPullUpResistance(LIN0, true); 
Parameters:
NameType EncodedType
LinBuse_LIN int
The LIN bus to enable/disable the pull-up resistance
for.
Enableboolean bool
True to enable the pull-up resistance, False to disable.
Function: GenerateBits
Description: 
Purpose: 
Generates Bits as given in the array with length equal to length of array , each LSB of BitTime = 20 ns. 
Example: 
*_ApiGenerateBits({0x01, 0x02, 0x03}, 500); 
Parameters:
Name Type EncodedType Format
BitArrayint[] uint8 raw
Array of bits to generate.
BitTimeint uint32
Time for each bit in the array (LSB =20ns).
Function: ReadBits
Description: 
Purpose: 
Reads Bits given a starting condition of a dominant bit transition , each LSB of BitTime = 20 ns. 
Example: 
*_ApiReadBits(10, 500); 
Parameters:

---

# Page 611

Name Type EncodedType
BitNumint uint32
Number of bits to read.
BitTimeint uint32
Time for each bit (LSB =
20ns).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: LIN_RKE_RCV
Description: Logging of all bits received
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
back to interface definition
Interface: TCU_SPE  extends _Object
Description: Controls IOs specific to the single pair ethernet module , mainly for failure creation , hard reset , etc.
Enumerations
e_SPE_HW_Failure
e_SPE_Select
Functions
SetHWFailure
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: e_SPE_HW_Failure
Value
MDIP_SC_VCC
MDIP_SC_GND
MDIN_SC_VCC
MDIN_SC_GND
PHY_RESET
NORMAL
Enum: e_SPE_Select
Value
SPE_0
SPE_1
Functions
Function: SetHWFailure
Description: 
Purpose: 
Sets Single Pair Ethernet Hardware Failures. 
Example: 

---

# Page 612

*_ApiSetHWFailure(SPE_0, MDIP_SC_VCC); 
Parameters:
Name Type EncodedType
SPE_Selecte_SPE_Select int
Selects the SPE interface.
SPE_Failuree_SPE_HW_Failureint
The hardware failure to apply.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: TCU_ADC  extends _Object
Enumerations
e_HighSpeed_ADC_Select
Functions
SetUserTag
Messages
ComUartReceivedBuffer
GeneralMessage
InputVoltage
Measurements
VoltageLevel
Enumerations
Enum: e_HighSpeed_ADC_Select
Value
ADC0
ADC1
ADC2
ADC3
ADC_SPK
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: ComUartReceivedBuffer
Description: Logging all received UART data on last issued transaction.
Parameters:

---

# Page 613

NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: InputVoltage
Description: Report Info/Error based on min and max voltage values
Parameters:
Name TypeEncodedTypeScaleUnit
MinVoltage int uint16 0.001V
MeasuredVoltageint uint16 0.001V
MaxVoltage int uint16 0.001V
Message: Measurements
Description: Report Info of supply or PG ..... measurements
Parameters:
Name TypeEncodedTypeScaleUnit
ADCValueint uint16 0.001V
Message: VoltageLevel
Description: Read ADCs voltage level in mV
Parameters:
Name TypeEncodedType
VoltageLevelint uint16
back to interface definition
Objects
Object: ADC0
Description: ADC0 Voltage , (1.74/(1.74+6.8)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC0_SignalSignalint 0 0.00122708638V 4 false false
Object: ADC1
Description: ADC1 Voltage , (1.74/(1.74+6.8)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC1_SignalSignalint 0 0.00122708638V 4 false false
Object: ADC2
Description: ADC2 DIO0 Voltage , (1.74/(1.74+6.8)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC2_SignalSignalint 0 0.00122708638V 4 false false
Object: ADC3
Description: ADC3 Voltage , (1.74/(1.74+6.8)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC3_SignalSignalint 0 0.00122708638V 4 false false
Object: ADC_SPK
Description: ADC_SPK Voltage , VREF = 4.096v , Resolution = 14 bits
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_SPK_SignalSignalint 0 0.00025001525V 4 false false
back to interface definition
Interface:
TCU_ADC_LowSpeed  extends _Object
Enumerations
_LowSpeed_ADC_Select
Functions
SetUserTag

---

# Page 614

Messages
GeneralMessage
Enumerations
Enum: _LowSpeed_ADC_Select
Value
ADC_GND0
ADC_GND1
ADC_GND2
ADC_GND3
ADC_GND4
LIN_V_ADC0
LIN_V_ADC1
LIN_V_ADC2
MIC_P_V_ADC
MIC_N_V_ADC
MIC_I_ADC
SPK_V_AMPL_ADC
SUP_IS_ADC0
SUP_V_ADC0
SUP_IMSR_ADC0
SUP_IS_ADC1
SUP_V_ADC1
SUP_IMSR_ADC1
PG_V_ADC0
PG_I_ADC0
PG_V_ADC1
PG_I_ADC1
PG_V_ADC2
PG_I_ADC2
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: ADC_GND0
Description: ADC GND0 Voltage , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_GND0_SignalSignalint 0 0.00061050061V 4 false false
Object: ADC_GND1
Description: ADC GND1 Voltage , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_GND1_SignalSignalint 0 0.00061050061V 4 false false
Object: ADC_GND2
Description: ADC GND2 Voltage , VREF = 2.5V , ADC_RESOLUTION = 12 BITS

---

# Page 615

Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_GND2_SignalSignalint 0 0.00061050061V 4 false false
Object: ADC_GND3
Description: ADC GND3 Voltage , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_GND3_SignalSignalint 0 0.00061050061V 4 false false
Object: ADC_GND4
Description: ADC GND4 Voltage , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_GND4_SignalSignalint 0 0.00061050061V 4 false false
Object: LIN_V_ADC0
Description: ADC LIN0 Voltage R1/(R1+R2) Voltage Divider R1 = 866 /(6.12K + 866) *** HW PATCH Assuming ADC Input
Impedance Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
LIN_V_ADC0_SignalSignalint 0 0.00492489291V 4 false false
Object: LIN_V_ADC1
Description: ADC LIN1 Voltage R1/(R1+R2) Voltage Divider R1 = 866 /(6.12K + 866)*** HW PATCH Assuming ADC Input
Impedance Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
LIN_V_ADC1_SignalSignalint 0 0.00492489291V 4 false false
Object: LIN_V_ADC2
Description: ADC LIN2 Voltage R1/(R1+R2) Voltage Divider R1 = 866 /(6.12K + 866)*** HW PATCH Assuming ADC Input
Impedance Sufficiently High, VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
LIN_V_ADC2_SignalSignalint 0 0.00492489291V 4 false false
Object: MIC_P_V_ADC
Description: ADC MIC +P Voltage R1/(R1+R2) Voltage Divider R1 = 1.21K /(1.21k + 4.12k) Assuming ADC Input
Impedance Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
MIC_P_V_ADC_SignalSignalint 0 0.00268922995V 4 false false
Object: MIC_N_V_ADC
Description: ADC MID -N Voltage R1/(R1+R2) Voltage Divider R1 = 1.21K /(1.21k + 4.12k) Assuming ADC Input
Impedance Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
MIC_N_V_ADC_SignalSignalint 0 0.00268922995V 4 false false
Object: MIC_I_ADC
Description: ADC MIC Current R = 0.82 Ohms Current Sense Amplifier Gain = 25V/V with 1.25V offset , VREF = 2.5V,
ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffset Scale UnitBytecountElasticLengthMutable
MIC_I_ADC_SignalSignalint -0.060960719490.00002978051A 4 false false
Object: SPK_V_AMPL_ADC
Description: ADC SPK AMPL Voltage , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
SPK_V_AMPL_ADC_SignalSignalint 0 0.00061050061V 4 false false
Object: SUP_IS_ADC0
Description: ADC SUP0 IS Current R = 0.665 Ohms Direct Shunt Measurement , VREF = 2.5V , ADC_RESOLUTION = 12
BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
SUP_IS_ADC0_SignalSignalint 0 0.00091804603A 4 false false
Object: SUP_V_ADC0
Description: ADC SUP0 Voltage R1/(R1+R2) Voltage Divider R1 = 866 /(6.12K + 866)*** HW PATCH Assuming ADC Input
Impedance Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS

---

# Page 616

Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
SUP_V_ADC0_SignalSignalint 0 0.00492489291V 4 false false
Object: SUP_IMSR_ADC0
Description: ADC IMSR0 Current R = 0.05 Ohms Current Sense Amplifier Gain = 25V/V with 1.25V offset , VREF = 2.5V ,
ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffset Scale UnitBytecountElasticLengthMutable
SUP_IMSR_ADC0_SignalSignalint-
0.999755799750.00048840048A 4 false false
Object: SUP_IS_ADC1
Description: ADC SUP1 Current R = 2.20 Ohms Direct Shunt Measurement , VREF = 2.5V , ADC_RESOLUTION = 12
BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
SUP_IS_ADC1_SignalSignalint 0 0.00027750027A 4 false false
Object: SUP_V_ADC1
Description: ADC SUP1 Voltage R1/(R1+R2) Voltage Divider R1 = 866 /(6.12K + 866)*** HW PATCH Assuming ADC Input
Impedance Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
SUP_V_ADC1_SignalSignalint 0 0.00492489291V 4 false false
Object: SUP_IMSR_ADC1
Description: ADC IMSR1 Current R = 0.18 Ohms Current Sense Amplifier Gain = 25V/V with 1.25V offset , VREF = 2.5V ,
ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffset Scale UnitBytecountElasticLengthMutable
SUP_IMSR_ADC1_SignalSignalint-
0.277709944370.0001356668A 4 false false
Object: PG_V_ADC0
Description: ADC PG0 Voltage. R1/(R1+R2) Voltage Divider R1 = 1.24K /(1.24k + 8.66k) Assuming ADC Input Impedance
Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
PG_V_ADC0_SignalSignalint 0 0.00487415809V 4 false false
Object: PG_I_ADC0
Description: ADC PG0 Current R = 1.43 Ohms Current Sense Amplifier Gain = 25V/V with 1.25V offset , VREF = 2.5V ,
ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffset Scale UnitBytecountElasticLengthMutable
PG_I_ADC0_SignalSignalint -0.034956496490.00001707694A 4 false false
Object: PG_V_ADC1
Description: ADC PG1 Voltage R1/(R1+R2) Voltage Divider R1 = 1.24K /(1.24k + 8.66k) Assuming ADC Input Impedance
Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
PG_V_ADC1_SignalSignalint 0 0.00487415809V 4 false false
Object: PG_I_ADC1
Description: ADC PG1 Current R = 1.43 Ohms Current Sense Amplifier Gain = 25V/V with 1.25V offset , VREF = 2.5V ,
ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffset Scale UnitBytecountElasticLengthMutable
PG_I_ADC1_SignalSignalint -0.034956496490.00001707694A 4 false false
Object: PG_V_ADC2
Description: ADC PG2 Voltage R1/(R1+R2) Voltage Divider R1 = 1.24K /(1.24k + 8.66k) Assuming ADC Input Impedance
Sufficiently High , VREF = 2.5V , ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
PG_V_ADC2_SignalSignalint 0 0.00487415809V 4 false false
Object: PG_I_ADC2
Description: ADC PG2 Current R = 1.43 Ohms Current Sense Amplifier Gain = 25V/V with 1.25V offset , VREF = 2.5V ,
ADC_RESOLUTION = 12 BITS
Name InterfaceTypeEncodedTypeOffset Scale UnitBytecountElasticLengthMutable

---

# Page 617

PG_I_ADC2_SignalSignalint -0.034956496490.00001707694A 4 false false
back to interface definition
Interface: TCU_Switches  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DAC
NameInterface
DAC TCU_DAC
Object: PG
NameInterface
PG TCU_PG
Object: SUP
NameInterface
SUP TCU_SUP
Object: DIO
NameInterface
DIO TCU_DIO
Object: UART
NameInterface
UARTTCU_UART
Object: MIC
NameInterface
MIC TCU_MIC
Object: SPK
NameInterface
SPK TCU_SPK
Object: LIN
NameInterface
LIN TCU_LIN
Object: ADC
NameInterface
ADC TCU_ADC

---

# Page 618

Object: ADC_LowSpeed
Name Interface
ADC_LowSpeedTCU_ADC_LowSpeed
Object: SPE
NameInterface
SPE TCU_SPE
back to interface definition
Interface: PipRadIo  extends _Object
Description: Interface for HMI simulation and DUT addressing
Enumerations
busfaulttype
faulttype
ledtype
leveltype
Functions
BusInjectFault
DutAddressing
HmiInjectFault
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: busfaulttype
Value Description
OPENVEHICLEBUSopens the vehicle Bus on that
channel
OPENPRIVATEBUSopens the vehicle Bus on that
channel
Enum: faulttype
Value Description
OPENLOAD open load
SHORT2VBATshort to CL15 or
30
SHORT2GND short to GND
SHORT2EACHOTEHRshort status to
alert
Enum: ledtype
Value Description
ALERTLED Alert LED
STATUSLEDStatus LED
BOTHLED Both LEDs
Enum: leveltype
Value Description
OPENLOADopen load
VBAT CL15 or 30
GND GND
Functions
Function: BusInjectFault
Parameters:
Name Type EncodedType
FaultEnableboolean bool
FaultType busfaulttypeint
Function: DutAddressing
Description: Defines the level for the right and left address pins
Parameters:
NameType EncodedType
Pin1leveltypeint

---

# Page 619

Pin2 leveltypeint
Function: HmiInjectFault
Description: Creates this fault on the specified LED this interface can be instanciated twice for one PIP
Parameters:
Name Type EncodedType
FaultEnablebooleanbool
FaultType faulttypeint
LED ledtypeint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: AlertLed
Description: Instance of Pwm module
Name Interface
AlertLedPWM
Object: StatusLed
Description: Instance of Pwm module
Name Interface
StatusLedPWM
Object: AlertLedEnvelope
Description: Instance of Pwm module
Name Interface
AlertLedEnvelopePWM
Object: StatusLedEnvelope
Description: Instance of Pwm module
Name Interface
StatusLedEnvelopePWM
back to interface definition
Interface: PipRad  extends _Object
Description: Interface global PIP functionality
Enumerations
DutDevice
PipVersion
SelftestStates
bustype
e_baudrate
signalsourcetype
Functions
GetVersion
HmiExchangePort
HmiSimulation

---

# Page 620

RouteBus
RunSelftest
SetUserTag
TerminateBus
Messages
GeneralMessage
HMISimulation
SelftestStatus
SelftestSubdevices
Version
Enumerations
Enum: DutDevice
Description: Represents a DUT.
Value
DUT_Device0
DUT_Device1
Enum: PipVersion
Value
PIP_UNKNOWN
PIP_12
PIP_13
Enum: SelftestStates
Description: Depending on the self-test state, one or more of those messages can be returned.
Value Description
SELFTEST_OK Selftest was completly successful.
SELFTEST_PARTIAL Selftest was partially successful. Some components are not working.
SELFTEST_FAIL Selftest failed.
SELFTEST_ADC_OK Selftest for voltage changing/measurement was successful.
SELFTEST_ADC_FAIL_VBATSelftest for voltage changing/measurement failed while shorting with VBAT.
SELFTEST_ADC_FAIL_GNDSelftest for voltage changing/measurement failed while shorting with
ground.
Enum: bustype
Value Description
CAN CAN
FLEXRAYFLEXRAY
Enum: e_baudrate
Value
BR_1200
BR_2400
BR_4800
BR_9600
BR_19200
BR_38400
BR_57600
Enum: signalsourcetype
Value Description
HMILEVELdiscrete level on HMI
lines
PCAN private CAN signal
FLEXRAYFlexRay signal
NONE FlexRay signal
Functions
Function: GetVersion
Description: Get version of this PIP.
Response timeout: 1000
Result Message: Version 
Faults: Version 
Function: HmiExchangePort

---

# Page 621

Description: Exchanges the HMI attached to port1 with the one from port 2
Parameters:
Name Type EncodedType
Exchangebooleanbool
Function: HmiSimulation
Description: Defines the behavior of the LEDs equipped on the PIP
Parameters:
NameType EncodedType
Sourcesignalsourcetypeint
Function: RouteBus
Description: Which bus type shall be routed to the DUT port
Parameters:
Name Type EncodedType
VehicleBusbustypeint
PrivateBusbustypeint
Function: RunSelftest
Description: checks for the functionality of the relays and PWM circuit by measuring back the levels doing bulb prove out
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TerminateBus
Description: Enables or disables the bus termination of 100Ohm on PIP
Parameters:
Name Type EncodedType
VehicleBusTerminationbooleanbool
PrivateBusTerminationbooleanbool
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: HMISimulation
Description: Notification for HMI simulation behavior
Parameters:
NameType EncodedType
Sourcesignalsourcetype int
Tells the signal source that is at the moment used to drive the HMI
simulation
Message: SelftestStatus
Description: Notification for selftest status.
Parameters:
NameType EncodedType
StatusSelftestStatesint
Message: SelftestSubdevices
Description: Notification for selftest status for single device parts.

---

# Page 622

Parameters:
NameType EncodedType
StatusSelftestStatesint
DeviceDutDevice int
Message: Version
Description: PIP Version.
Parameters:
Name Type EncodedType
CurrentVersionPipVersionint
back to interface definition
Objects
Object: Rs232
Description: IOs on the PIP per DUT channel
NameInterface
Rs232Rs232
Object: PipRadIo
Name Interface
PipRadIoPipRadIo
Object: ToeDriver
Description: module to communicate with power supply
Name Interface
ToeDriverToeDriver
Object: AngleDataSync
Name Interface
AngleDataSyncAngleDataSync
Object: AdcControl
Description: Handles all logic and data capturing for a DUT and its respective ADCs.
Name Interface
AdcControlAdcControl
back to interface definition
Interface: AdcControl  extends _Object
Description: Manages all DUT objects which are able to access data from their respective ADC's. This node has four subnodes
which provide access to all four ADC's on Radar PIP Rev. 1.3. Subnodes are ordered in following order: Alert LED (#0) - Status
LED (#1) - Address 0 (#2) - Address 1 (#3).
Functions
ClearInterval
SetInterval
SetUserTag
Messages
GeneralMessage
Functions
Function: ClearInterval
Description: 
Purpose: Clears existing intervals for querying data from all ADC's. 
Example: *_ApiClearInterval() 
Function: SetInterval
Description: 
Purpose: Sets an interval for querying data from this ADC. 
Example: *_ApiSetInterval(true,10,10,10,10) 
Parameters:
Name Type EncodedTypeScaleUnit
setFirstIntervalForAllbooleanbool
Sets the first interval for all ADCs.

---

# Page 623

timeMsAlertLedint uint32 1.0 ms
Interval for Alert LED in milliseconds.
timeMsStatusLedint uint32 1.0 ms
Interval for Status LED in milliseconds.
timeMsPin1int uint32 1.0 ms
Interval for Pin 1 in milliseconds.
timeMsPin2int uint32 1.0 ms
Interval for Pin 2 in milliseconds.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: AdcAlertLed
Description: This signal is handling the Alarm LED voltage value for this DUT.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
AdcAlertLed_SignalSignalint -4478435.714285mV4 false false
Object: AdcStatusLed
Description: This signal is handling the Status LED voltage value for this DUT.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
AdcStatusLed_SignalSignalint -4478435.714285mV4 false false
Object: AdcPin1
Description: This signal is handling the Addressing [0] voltage value of the ADC chip.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
AdcPin1_SignalSignalint 250 5.141014mV4 false false
Object: AdcPin2
Description: This signal is handling the Addressing [1] voltage value of the ADC chip.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
AdcPin2_SignalSignalint 250 5.141014mV4 false false
back to interface definition
Interface: AngleDataSync  extends _Object
Description: Module used at EOLT,X9 and LLST Tester to synchronize the data of an attached angle encoder with data coming
from DUT in LLST protocol It implements a ring buffer for LLHT data blocks that are getting stamped with angle and timing
information. This module is working with relative encoders (A,B,Z,(Error)) and supports LLHT protocol check Details see:
CANFD- LLST
Enumerations
DL_FrameType
DirectionalComponent
errorinfotype
syncdatatype
syncsourcebus
syncsourcetype
synctype
Functions

---

# Page 624

CalibrateAllEncoders
CalibrateEncoder
CalibrateEncoders
ConfigureDataSync
InRangeCheckAngle
InRangeCheckComponent
LoggingAllComponentForceNow
LoggingAllComponentOnIntervallDisable
LoggingAllComponentOnIntervallEnable
LoggingAngleForceNow
LoggingAngleOnIntervallDisable
LoggingAngleOnIntervallEnable
LoggingComponentForceNow
LoggingComponentOnIntervallDisable
LoggingComponentOnIntervallEnable
SetBusTimingRegisterLlst
SetErrorLimit
SetUserTag
addDetectionListFrame
Messages
AngleInfo
AngleOutOfRange
AngleSyncDataLimiting
AngleSyncDataMessage
AngleSyncDataMessage_pipv6
ComponentsAngleInfo
DetectionListFrameInfo
GeneralMessage
Enumerations
Enum: DL_FrameType
Value
Header
Detection
Versions
Parameters
Enum: DirectionalComponent
Value Description
AZIMUTHconnected toEncoder0
ALTITUDEconnected to
Encoder1
DISTANCEconnected to
Encoder2
Enum: errorinfotype
Value Description
NOERROR no error for this synchronization item
DUTSIGNALSEQUENCEERRORwrong signal sequence received
DUTPROTOCOLERRORwrong signal length for this synchronization
item
DUTNODATATOSYNCERROR no data to sync available
ENCODERERROR error flag of the encoder is set
Enum: syncdatatype
Value Description
VIDEO video data of a selected Beam and MucVideoChirp (see set antenna switch control msg)
FFT2D fft data of a selected Beam and MucFftChirp (see set antenna switch control message)
FFT3DCMPLX complex fft data for 2 fft bins (bin 5 and 6) and for all x beams and x channels
FFT3DSPEC complex fft data for 2 fft bins (bin 5 and 6) and for all x beams and x channels
BEAMPATTERNcomplex fft data for one selected fft BINX BpBin (target distance) all x beams and x
channels
EIRPcomplex fft data for one selected fft BINX BpBin (target distance) all x beams and x
channels
EAGLEBBRXG LR 375MHz RXG LR 750MHz RXG SR 375MHz RXG SR 750MHz RXG SR1500MHz
EAGLETXcomplex fft data for one selected fft BINX BpBin (target distance) all x beams and x
channels

---

# Page 625

SILENTRFcomplex fft data for one selected fft BINX BpBin (target distance) all x beams and x
channels
SETRFCHIPREGSet eagle registers
GETRFCHIPREGGet eagle registers
UNKNOWN the arriving datatype is unknown
Enum: syncsourcebus
ValueDescription
CAN0llst core listens to CAN0
bus
CAN1llst core listens to CAN0
bus
Enum: syncsourcetype
Value Description
LEFTDUT synchronize data from left DUT at port 1
RIGHTDUTsynchronize data from right DUT at port
2
Enum: synctype
Value Description
DISABLED no data shall be forwarded
SINGLESEQUENCElast recorded item shall be forwarded
EVERY1S forward one item per second
CANTRIGGEREDforward the previous item if new synchronization item was opened CAN
triggered
Functions
Function: CalibrateAllEncoders
Description: Configure the encoder type (number of steps) and set the current seen angle - to be used as reference
Parameters:
Name Type EncodedType Scale Unit
ReferenceAngleAzimuthint int32 0.001 °
ReferenceAngle - adjustible to multiples of the 4th part of the encoder
resolusion
EncoderTicksScaleAzimuthint int32 0.25 Steps/360°
ReferenceAngleAltitudeint int32 0.001 °
ReferenceAngle - adjustible to multiples of the 4th part of the encoder
resolusion
EncoderTicksScaleAltitudeint int32 0.25 Steps/360°
ReferenceAngleDistanceint int32 0.001 °
ReferenceAngle - adjustible to multiples of the 4th part of the encoder
resolusion
EncoderTicksScaleDistanceint int32 0.25 Steps/360°
Function: CalibrateEncoder
Description: Configure the encoder type (number of steps) and set the current seen angle - to be used as reference
Parameters:
Name Type EncodedType Scale Unit
ReferenceAngleint int32 0.001 °
ReferenceAngle - adjustible to multiples of the 4th part of the encoder
resolusion
EncoderTicksScaleint int32 0.25 Steps/360°
Function: CalibrateEncoders
Description: Configure the encoder type (number of steps) and set the current seen angle - to be used as reference
Parameters:
Name Type EncodedType Scale Unit
ComponentDirectionalComponent int - -
Select the encoder to be configured
ReferenceAngleint int32 0.001 °
ReferenceAngle - adjustible to multiples of the 4th part of the encoder
resolusion
EncoderTicksScaleint int32 0.25 Steps/360°
Function: ConfigureDataSync
Description: Defines the settings for data angle synchronization

---

# Page 626

Parameters:
NameType EncodedType
Optionsynctype int
Configure the encoder type and set the current seen angle
DISABLED = Do not forward any angle synchronized data to the PC SINGLESEQUENCE = Forward the last complete and non
outdated angle-synchronized data block to the PC when the function gets called by script EVERY1S = Forward the last
complete and non outdated angle-synchronized data block to the PC once per second CANTRIGGERED = Forward each timethe last angle-synchronized data block to the PC when the next LLST header has was received on CAN
dutsyncsourcetype int
decides about which LLHT list to be used
srcBussyncsourcebus int
decides about which Can bus the LLHT will listen for
Function: InRangeCheckAngle
Description: Checks one time, that the current angle value (after applying the given scale) is within a given range.
Parameters:
NameTypeEncodedTypeScaleUnit
Min int int32 0.001°
Max int int32 0.001°
Function: InRangeCheckComponent
Description: Checks one time, that the current angle value (after applying the given scale) is within a given range.
Parameters:
Name Type EncodedTypeScaleUnit
ComponentDirectionalComponentint - -
Min int int32 0.001°
Max int int32 0.001°
Function: LoggingAllComponentForceNow
Description: Logs encoder0,1,2 data
Function: LoggingAllComponentOnIntervallDisable
Description: Disables the cyclic logging of encoder0,1,2 data.
Function: LoggingAllComponentOnIntervallEnable
Description: Enables the cyclic logging of encoder0,1,2 data.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: LoggingAngleForceNow
Description: Logs the angle data
Function: LoggingAngleOnIntervallDisable
Description: Disables the cyclic logging of angle data.
Function: LoggingAngleOnIntervallEnable
Description: Enables the cyclic logging of angle data.
Parameters:
Name TypeEncodedTypeUnit
IntervalTimeint uint32 ms
Function: LoggingComponentForceNow
Description: Logs the Component data
Parameters:
Name Type EncodedType
ComponentDirectionalComponentint
Select the Component to be logged
Function: LoggingComponentOnIntervallDisable
Description: Disables the cyclic logging of Component data.

---

# Page 627

Parameters:
Name Type EncodedType
ComponentDirectionalComponentint
Function: LoggingComponentOnIntervallEnable
Description: Enables the cyclic logging of component data.
Parameters:
Name Type EncodedTypeUnit
ComponentDirectionalComponentint -
Select the Component to be logged
IntervalTimeint uint32 ms
Function: SetBusTimingRegisterLlst
Parameters:
NameTypeEncodedType
Btr0 int uint8
Btr1 int uint8
Dtr0 int uint8
Dtr1 int uint8
Function: SetErrorLimit
Description: Configure the ProtocolErrorLimit while recording LLHT data to control the output(Warning or Error)
Parameters:
Name Type EncodedType
ProtocolErrorLimitint int32
ProtocolErrorLimit : - A negative number for "ProtocolErrorLimit" shall lead to only warnings - no matter how often
there is a problem - A zero for "ProtocolErrorLimit" shall cause imidiatelly an application error as soon as there is a
deviation detected - A positive number for "ProtocolErrorLimit" shall lead to warnings until the amount of errors is
>=ProtocolErrorLimit
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: addDetectionListFrame
Description: Record encoder0,1,2 when the CanFrame given as input arrives
Parameters:
Name Type EncodedType
Frame int _ComFrameCanRx
Frame_TypeDL_FrameTypeint
DetectionId int uint8
back to interface definition
Messages
Message: AngleInfo
Description: Angle measured by the mapped encoder
Parameters:
Name Type EncodedTypeScaleUnit
component DirectionalComponentint - -
Angle long int64 0.001°
EncoderTicksint int32 0.25
Message: AngleOutOfRange
Description: Angle measured by the mapped encoder is out of range
Parameters:
NameTypeEncodedTypeScaleUnit
Angleint int32 0.001°

---

# Page 628

Min int int32 0.001°
Max int int32 0.001°
Message: AngleSyncDataLimiting
Description: The maximum amout of data that can be angle synchronized per MCC was reached - skip the next plocks for
this MCC
Message: AngleSyncDataMessage
Description: Angle-synchronized data corresponding to one LLST block
Parameters:
Name Type EncodedType Scale Unit
StartTimestamplong uint64
Time stamp taken at the arrival of LLST header (in FPGA-by LLST IP core)
EndTimestamplong uint64
Time stamp taken at the arrival of the last payload frame for this block (in FPGA-by LLST IPcore)
EncoderTimestamplong uint64
Time stamp taken when LLST IP core raised an interrupt for the current block and angle isfetched
ErrorInformationerrorinfotype int - -
Detailed protocol and status information
Angleint int32 0.001 °
Angle corresponding to StartAndEncoderTimestamp
Modesyncdatatype int - -
Content description of the block
SubID0int uint8
Total amount of blocks in this transmission mode
Blocksint uint8
Content description of the block
MCCint uint32
DUT Major Cycle Counter
BlockCounterint uint8
Block counter
BlockLengthint uint32
Block length in byte
headerArrint[] uint8
the whole 64 bytes header array
Dataint[] uint8
Payload cut to the BlockLength or actual length if less data was received
Message: AngleSyncDataMessage_pipv6
Description: Angle-synchronized data corresponding to one LLST block
Parameters:
Name Type EncodedType Scale Unit
StartTimestamplong uint64
Time stamp taken at the arrival of LLST header (in FPGA-by LLST IP core)
EndTimestamplong uint64
Time stamp taken at the arrival of the last payload frame for this block (in FPGA-by LLST IP
core)
EncoderTimestamplong uint64
Time stamp taken when LLST IP core raised an interrupt for the current block and angle is
fetched
ErrorInformationerrorinfotype int - -
Detailed protocol and status information
Azimuthint int32 0.001 °
Angle corresponding to StartAndEncoderTimestamp
Elevationint int32 0.001 °
Angle corresponding to StartAndEncoderTimestamp
Distanceint int32 0.001 °
Angle corresponding to StartAndEncoderTimestamp
Modesyncdatatype int - -
Content description of the block
SubID0int uint8
Total amount of blocks in this transmission mode
Blocksint uint8
Content description of the block
MCCint uint32
DUT Major Cycle Counter

---

# Page 629

BlockCounterint uint8
Block counter
BlockLengthint uint32
Block length in byte
headerArrint[] uint8
the whole 64 bytes header array
Dataint[] uint8
Payload cut to the BlockLength or actual length if less data was received
Message: ComponentsAngleInfo
Description: Angles measured by the mapped encoder
Parameters:
Name TypeEncodedTypeScaleUnit
AZIMUTH_Angle longint64 0.001°
AZIMUTH_EncoderTicks int int32 0.25
ALTITUDE_Angle longint64 0.001°
ALTITUDE_EncoderTicksint int32 0.25
DISTANCE_Angle longint64 0.001°
DISTANCE_EncoderTicksint int32 0.25
Message: DetectionListFrameInfo
Description: Angles measured by the mapped encoder
Parameters:
Name Type EncodedTypeScaleUnit
AZIMUTH_Angle long int64 0.001°
ALTITUDE_Anglelong int64 0.001°
DISTANCE_Anglelong int64 0.001°
Frame_Content int[] uint8
TimeStampNs long uint64
Frame_Type DL_FrameTypeint - -
DetectionId int uint8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: RxDataPresent
Description: Signal is updated when LLHT receive Interrupt fires
Name InterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
RxDataPresent_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: RAD_CS  extends _Object
Enumerations
_Source
Functions
SetCSPercentage
SetCSSource
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: _Source
Value
DISABLED
AL
ST
CS0
CS1
DUT

---

# Page 630

Functions
Function: SetCSPercentage
Description: This Function Sets the Percentage of the Sinked Current Via Variation of Gate to Drain Voltage
Parameters:
Name Type EncodedType Unit
OutPercentageint uint16 %
Set Dac output voltage on selected channel with a value equals: Percentage * Vref * Gain Vref = 2.5V (internal default),
DAC IS LTC2641-12 bit Resolution Version
Function: SetCSSource
Description: To set the needed current to be sinked from the Select Source to Ground
Parameters:
NameType EncodedType
Source_Sourceint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: RAD_DAC  extends _Object
Enumerations
e_DAC_Groups
e_DAC_Reference_Input
e_DAC_Select
Functions
SetDacPercentage
SetDacState
SetDacVref
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: e_DAC_Groups
Value
DAC0_1
DAC2_3
Enum: e_DAC_Reference_Input
Value
REF_INT_5V
REF_EXT_L
REF_EXT_H
Enum: e_DAC_Select
Value
DAC0
DAC1

---

# Page 631

DAC2
DAC3
Functions
Function: SetDacPercentage
Description: Write voltage value to be output on general purpose DACs (DAC0, DAC1, DAC2, DAC3)
DUT Interface pins (USV10_PIP ST10 Front Connector, 78pins): 67, 50, 47, 48 respectively>
Parameters:
Name Type EncodedType Unit
DAC_Select e_DAC_Select int -
OutPercentageint uint16 %
Set Dac output voltage on selected channel with a value equals: Percentage * Vref * Gain E.g. OutPercentage = 50%,
Vref = 5V (internal default), Gain = 4 (fixed cct gain) output voltage = 10V
Function: SetDacState
Description: Enable (connect) / Disable (disconnect) the Dac output to the outer interface
Parameters:
Name Type EncodedType
DAC_Selecte_DAC_Selectint
Enable boolean bool
Function: SetDacVref
Description: Enable General Purpose DACs (DAC0, DAC1, DAC2, DAC3)
And select Vref for each group (first group: DAC0 & DAC1, second group: DAC2 & DAC3), available options : 1) Use
Internal Vref : 5V (default value) 2) Use External Vref : a) DAC_R_E_L (Operating range: 2V .. 5V), DUT Interface pin 66 b)
DAC_R_E_H (Operating range: 8V .. 20V), DUT Interface pin 49>
Parameters:
Name Type EncodedType
DAC_Enablee_DAC_Groups int
DAC_Vref e_DAC_Reference_Inputint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: RAD_DIO  extends _Object
Enumerations
e_DIO_State
e_DIOs
e_DIOs_Group
e_DIOs_Source
Functions
ReadDio
SetDio
SetDioGroupSource
SetUserTag
TestDio
Messages
GeneralMessage
VoltageLevel

---

# Page 632

Enumerations
Enum: e_DIO_State
Value
Low
High
High_Impedence
Self_Test
Enum: e_DIOs
Value
DIO0
DIO1
DIO2
DIO3
DIO4
DIO5
DIO6
DIO7
Enum: e_DIOs_Group
Value Description
DIO0_DIO1_DIO2_DIO3Group 1 contains 4 DIOs (DIO0, DIO1, DIO2 and
DIO3)
DIO4_DIO5_DIO6_DIO7Group 2 contains 4 DIOs (DIO4, DIO5, DIO6 andDIO7)
Enum: e_DIOs_Source
Value Description
V_EXT15Select “V_EXT15” as supply for DIO0 or ....... or
DIO7
V_EXT30Select “V_EXT30” as supply for DIO0 or ....... or
DIO7
V_12volt Select “12v” as supply for DIO0 or ....... or DIO7
V_5volt Select “5v” as supply for DIO0 or ....... or DIO7
V_SelfTestSelect self test supply (5v) for DIO0 or ....... or DIO7
Functions
Function: ReadDio
Parameters:
Name Type EncodedType
DIO_sele_DIOsint
Function: SetDio
Description: The DIOs can be used as inputs or push- pull outputs
Connect General Purpose DIOs pins (DIO0, DIO1, DIO2, DIO3) to different supplies or External Input
Possible combinations : Connect group 0 (DIO0 & DIO1) to (DIO_VDD_A, V_EXT15, 5V, 3.3V, GND) and Connect group 1
(DIO2 & DIO3) to (DIO_VDD_B, V_EXT30, 5V, 3.3v, GND)
Only one source (DIO_VDD, V_EXT, 5V, 3.3V) must be enabled at any time for each group : 0 -> (DIO0, DIO1) and 1 ->
(DIO2, DIO3)
For more details : Schematics of DIO0 & DIO1 

---

# Page 633

Parameters:
Name Type EncodedType
Dio_Sele_DIOs int
State e_DIO_Stateint
Function: SetDioGroupSource
Description: The DIOs can be used as inputs or push- pull outputs
Connect General Purpose DIOs pins (DIO0, DIO1, DIO2, DIO3) to different supplies or External Input
Possible combinations : Connect group 0 (DIO0 & DIO1) to (DIO_VDD_A, V_EXT15, 5V, 3.3V, GND) and Connect group 1
(DIO2 & DIO3) to (DIO_VDD_B, V_EXT30, 5V, 3.3v, GND)
Only one source (DIO_VDD, V_EXT, 5V, 3.3V) must be enabled at any time for each group : 0 -> (DIO0, DIO1) and 1 ->
(DIO2, DIO3)
For more details : Schematics of DIO0 & DIO1 
Parameters:
NameType EncodedType
Groupe_DIOs_Groupint
Sourcee_DIOs_Sourceint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex

---

# Page 634

Valueint uint32 hex
Function: TestDio
Parameters:
Name Type EncodedType
DIO_sele_DIOs int
State e_DIO_Stateint
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: VoltageLevel
Description: Read ADCs voltage level in mV
Parameters:
Name TypeEncodedType
VoltageLevelint uint16
back to interface definition
Interface: RAD_UART  extends _Object
Enumerations
e_uart_rs232_devices
Functions
Enable_Disable_UART_Com
SendUart
SetUserTag
Messages
ComUartReceivedBuffer
GeneralMessage
Events
Uart_Packet_Received
Objects
Enumerations
Enum: e_uart_rs232_devices
Value
uart_rs232_0
uart_rs232_1
uart_rs232_2
uart_rs232_3
Functions
Function: Enable_Disable_UART_Com
Parameters:
Name Type EncodedType
DeviceIndexe_uart_rs232_devicesint
Enable_Uartboolean bool
Function: SendUart
Parameters:
Name Type EncodedTypeFormat
DeviceIndexe_uart_rs232_devicesint -
Data int[] uint8 raw
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:

---

# Page 635

NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: ComUartReceivedBuffer
Description: Logging all received UART data on last issued transaction.
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 raw
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Events
Event: Uart_Packet_Received
back to interface definition
Interface: RAD_ADC  extends _Object
Enumerations
_ADC_Select
Functions
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: _ADC_Select
Value
ADC0
ADC1
ADC2
ADC3
ADC_CS
ADC_DUT_AL
ADC_DUT_ST
ADC_GND0
ADC_GND1
ADC_DIO0
ADC_DIO1
ADC_DIO2
ADC_DIO3
ADC_DIO4
ADC_DIO5
ADC_DIO6
ADC_DIO7
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages

---

# Page 636

Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: ADC0
Description: ADC0 Voltage , (2.74/(2.74+16)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC0_SignalSignalint 0 0.00170995831V 4 false false
Object: ADC1
Description: ADC1 Voltage , (1.74/(1.74+6.8)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC1_SignalSignalint 0 0.00170995831V 4 false false
Object: ADC2
Description: ADC2 DIO0 Voltage , (1.74/(1.74+6.8)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC2_SignalSignalint 0 0.00170995831V 4 false false
Object: ADC3
Description: ADC3 Voltage , (1.74/(1.74+6.8)) , VREF = 4.096v , Resolution = 14 bits
NameInterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC3_SignalSignalint 0 0.00170995831V 4 false false
Object: ADC_CS
Description: ADC_CURRENT SINK Direct Shunt Measurement , R 0.15 ohms , (1.74/(1.74+6.8)) , VREF = 2.500v ,
Resolution = 14 bits
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_CS_SignalSignalint 0 0.00101731466A 4 false false
Object: ADC_DUT_AL
Description: ADC DUT AL , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to 1 ,
VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DUT_AL_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DUT_ST
Description: ADC DUT ST Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain
fixed to 1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DUT_ST_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_GND0
Description: ADC GND 0 Voltage , Direct Voltage Measurement , ADC Gain fixed to 1 , VREF = 3.3 , VERY IMPORTANT
24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_GND0_SignalSignalint 0 0.000000393390702V 4 false false
Object: ADC_GND1
Description: ADC GND 1 Voltage , Direct Voltage Measurement , ADC Gain fixed to 1 , VREF = 3.3 , VERY IMPORTANT
24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_GND1_SignalSignalint 0 0.000000393390702V 4 false false
Object: ADC_DIO0
Description: ADC DIO0 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable

---

# Page 637

ADC_DIO0_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO1
Description: ADC DIO1 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO1_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO2
Description: ADC DIO2 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO2_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO3
Description: ADC DIO3 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO3_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO4
Description: ADC DIO4 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO4_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO5
Description: ADC DIO5 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO5_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO6
Description: ADC DIO6 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO6_SignalSignalint 0 0.0000039102V 4 false false
Object: ADC_DIO7
Description: ADC DIO7 Voltage , TWO buffered voltage dividers , (1.87/(1.87+4.32))*(35.7/(35.7+71.5)) , ADC Gain fixed to
1 , VREF = 3.3 , VERY IMPORTANT 24 bit ADC only 23 Used
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ADC_DIO7_SignalSignalint 0 0.0000039102V 4 false false
back to interface definition
Interface: RAD_HMI  extends _Object
Enumerations
_FailureType
Functions
ClearFailure
CreateFailure
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: _FailureType
Value
AL_SHORT_TO_VCC
AL_SHORT_TO_GND
AL_OPEN
ST_SHORT_TO_VCC
ST_SHORT_TO_GND

---

# Page 638

ST_OPEN
AL_SHORT_TO_ST
SWAP_HMI
Functions
Function: ClearFailure
Description: Cleares Failure on HMI
Function: CreateFailure
Description: Creates Failure on HMI
Parameters:
NameType EncodedType
Failure_FailureTypeint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PWM_AL
Name Interface
PWM_ALPWM
Object: PWM_H_AL
Name Interface
PWM_H_ALPWM
Object: PWM_ST
Name Interface
PWM_STPWM
Object: PWM_H_ST
Name Interface
PWM_H_STPWM
back to interface definition
Interface: RAD_CAN  extends _Object
Enumerations
_CanNumber
_FailureType
Functions
ClearFailure
CreateFailure
SetStandBy
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: _CanNumber

---

# Page 639

Value
PIP_CAN_0
PIP_CAN_1
Enum: _FailureType
Value
SHORT_CANL_GND
SHORT_CANL_VCC
SHORT_CANH_GND
SHORT_CANH_VCC
OPEN_CAN
Functions
Function: ClearFailure
Description: Cleares Failure on HMI
Parameters:
Name Type EncodedType
CanNum_CanNumberint
Function: CreateFailure
Description: Creates Failure on HMI
Parameters:
Name Type EncodedType
CanNum_CanNumberint
Failure _FailureTypeint
Function: SetStandBy
Description: Cleares Failure on HMI
Parameters:
Name Type EncodedType
CanNum_CanNumberint
Enable boolean bool
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: RAD_PSM  extends _Object
Enumerations
_PSM_ALERT_ON
_PSM_Select
Functions
SetAlert
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: _PSM_ALERT_ON

---

# Page 640

Value
VOLTAGE_OVER_LIMIT
VOLTAGE_UNDER_LIMIT
CURRENT_OVER_LIMIT
CURRENT_UNDER_LIMIT
POWER_OVER_LIMIT
NEVER_ALERT
Enum: _PSM_Select
Value
KL15
KL30
Functions
Function: SetAlert
Description: Note : VoltageLimit and CurrentLimit are ignored if Alert on Power_Over_Limit is Set Note : PowerLimit and
CurrentLimit are ignored if Alert on Voltage_Over_Limit is Set Note : PowerLimit and CurrentLimit are ignored if Alert on
Voltage_Under_Limit is Set Note : PowerLimit and VoltageLimit are ignored if Alert on Current_Over_Limit is Set Note :
PowerLimit and VoltageLimit are ignored if Alert on Current_Under_Limit is Set Note : PowerLimit and CurrentLimit and
VoltageLimit are ignored if NEVER_ALERT is Set
Parameters:
Name Type EncodedTypeScaleUnit
Select _PSM_Select int - -
AlertOn _PSM_ALERT_ONint - -
VoltageLimitint uint32 0.001V
CurrentLimitint uint32 0.001A
PowerLimitint uint32 0.001W
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: KL15_BusVoltage
Description: Bus Voltage , LSB = 0.00125
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL15_BusVoltage_SignalSignalint 0 0.00125V 4 false false
Object: KL15_ShuntVoltage
Description: Shunt Voltage , LSB = 0.0000025
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL15_ShuntVoltage_SignalSignalint 0 0.0000025V 4 false false
Object: KL15_Current
Description: Current , Max Current Hard Coded to 20A , giving LSB of = 0.00061035156
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL15_Current_SignalSignalint 0 0.00061035156A 4 false false
Object: KL15_Power

---

# Page 641

Description: Power , LSB = 25 * CURRENT_LSB
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL15_Power_SignalSignalint 0 0.015258789W 4 false false
Object: KL30_BusVoltage
Description: Bus Voltage , LSB = 0.00125
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL30_BusVoltage_SignalSignalint 0 0.00125V 4 false false
Object: KL30_ShuntVoltage
Description: Shunt Voltage , LSB = 0.0000025
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL30_ShuntVoltage_SignalSignalint 0 0.0000025V 4 false false
Object: KL30_Current
Description: Current , Max Current Hard Coded to 20A , giving LSB of = 0.00061035156
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL30_Current_SignalSignalint 0 0.00061035156A 4 false false
Object: KL30_Power
Description: Power , LSB = 25 * CURRENT_LSB
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
KL30_Power_SignalSignalint 0 0.015258789W 4 false false
back to interface definition
Interface: PipRadV6  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: DAC
NameInterface
DAC RAD_DAC
Object: ADC
NameInterface
ADC RAD_ADC
Object: CS
NameInterface
CS RAD_CS

---

# Page 642

Object: DIO
NameInterface
DIO RAD_DIO
Object: UART
NameInterface
UARTRAD_UART
Object: HMI
NameInterface
HMI RAD_HMI
Object: PSM
NameInterface
PSM RAD_PSM
Object: CAN
NameInterface
CAN RAD_CAN
Object: AngleDataSync
Name Interface
AngleDataSyncAngleDataSync
back to interface definition
Interface: Logic_Control  extends _Object
Enumerations
Logic_State
Functions
GetLogicControl
SetLogicState
SetUserTag
Messages
GeneralMessage
Logic_State
Enumerations
Enum: Logic_State
Value
Default_Logic
Custom_Logic
Functions
Function: GetLogicControl
Description: 
Purpose: 
Gets the current logic state (default or customized). 
Example: 
*_ApiGetLogicControl() 
Function: SetLogicState
Description: 
Purpose: 
- Sets the logic state to either default or customized. 
- Default logic represents the normal operation for each module. 
- Customized logic is implemented by the firmware development team based on specific project requirements and testing
needs, and may vary between projects. 
Example: 
*_ApiSetLogicState(Custom_Logic) <[Replace with a valid Logic_State value (Custom_Logic or Default_Logic]> 
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
The desired logic state.

---

# Page 643

Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Logic_State
Description: Current used Logic
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
back to interface definition
Interface:
TCM_Signals_Monitoring  extends _Object
Enumerations
Pin_Assignment
Functions
SetUserTag
SignalMonitoringConfig
Messages
GeneralMessage
Enumerations
Enum: Pin_Assignment
Value
SPI_0
SPI_1
SPI_2
SPI_3
SPI_4
SPI_5
SPI_6
SPI_7
SPI_8
SPI_9
SPI_10
SPI_11
SPI_12
SPI_13
SPI_14
SPI_15
SPI_16
SPI_17
SPI_18
SPI_19
DIO_0
DIO_1
DIO_2
DIO_3
DIO_4
DIO_5
DIO_6
DIO_7

---

# Page 644

DIO_8
DIO_9
DIO_10
DIO_11
DIO_12
DIO_13
DIO_14
DIO_15
DIO_16
DIO_17
DIO_18
DIO_19
DIO_20
DIO_21
DIO_22
DIO_23
DIO_24
DIO_25
DIO_26
DIO_27
DIO_28
DIO_29
DIO_30
DIO_31
DIO_32
DIO_33
DIO_34
DIO_35
DIO_36
DIO_37
DIO_38
DIO_39
DIO_40
DIO_41
DIO_42
DIO_43
DIO_44
DIO_45
DIO_46
DIO_47
DIO_48
DIO_49
DIO_50
DIO_51
DIO_52
DIO_53
DIO_54
DIO_55
DIO_56
DIO_57
DIO_58
DIO_59
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SignalMonitoringConfig
Description: 
Purpose: 
Configures signal monitoring by assigning pins for PWM and Edge_Trace_V2 modules. Both modules share the same pin

---

# Page 645

mapping. 
Example: 
*_ApiSignalMonitoringConfig(3, ENUM.Pin_Assignment_PIN_A) <[Replace with a valid Pin_Assignment value]> 
Dependency: 
For SPI (20-pin) and DIO (80-pin), ensure they are configured as inputs before applying the SignalMonitoringConfig API.
Failure to do so will prevent monitoring of the attached signal and the API will not work. 
Parameters:
Name Type EncodedType
Channel_Indexint uint8
The channel index
Pin_ValuePin_Assignment int
The pin assignment value (80 DIOs and 20
SPIs)
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PWM_Monitoring
Name Interface
PWM_MonitoringPWM
Object: EdgeTrace
Name Interface
EdgeTraceEdgeTrace
back to interface definition
Interface: TCM_Plug_Line  extends Logic_Control _Object
Enumerations
Pin_Mode
Functions
GetLogicControl
GetPinOutputState
SetLogicState
SetPinMode
SetPinOutputState
SetUserTag
Messages
GeneralMessage
Logic_State
PinOutputState
Enumerations
Enum: Pin_Mode
Value
Input
Output
Functions
Function: GetLogicControl
Description: 
Purpose: 
Gets the current logic state (default or customized). 
Example: 
*_ApiGetLogicControl() 

---

# Page 646

Function: GetPinOutputState
Description: 
Purpose: 
Gets the current output state of an SPI pin. 
Example: 
*_ApiGetPinOutputState(); 
Function: SetLogicState
Description: 
Purpose: 
- Sets the logic state to either default or customized. 
- Default logic represents the normal operation for each module. 
- Customized logic is implemented by the firmware development team based on specific project requirements and testing
needs, and may vary between projects. 
Example: 
*_ApiSetLogicState(Custom_Logic) <[Replace with a valid Logic_State value (Custom_Logic or Default_Logic]> 
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
The desired logic state.
Function: SetPinMode
Description: 
Purpose: 
Configures SPI pins to be either input or output. 
Example: 
*_ApiSetPinMode(Pin_Mode_INPUT); 
Parameters:
Name Type EncodedType
SPI_Pin_ModePin_Mode int
The desired pin mode (input or
output).
Function: SetPinOutputState
Description: 
Purpose: 
Sets the output state of an SPI pin. 
Example: 
*_ApiSetPinOutputState(true); 
Parameters:
Name Type EncodedType
SPI_Pin_Stateboolean bool
The desired pin state (true for high, false forlow).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat

---

# Page 647

Data int[]uint8 utf8
Message: Logic_State
Description: Current used Logic
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
Message: PinOutputState
Description: Current pin state
Parameters:
Name Type EncodedType
Pin_Statebooleanbool
back to interface definition
Interface: TCM_Plug_Lines  extends _Object
Description: These are "SPI Pins" on TCM_Epip
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: TCM_Plug_Line
Name Interface
TCM_Plug_LineTCM_Plug_Line
back to interface definition
Interface: TCM_LeverSim  extends Logic_Control _Object
Functions
EnableError
EnableOutput
GetLogicControl
SetLogicState
SetUserTag
Messages
GeneralMessage
Logic_State
Functions
Function: EnableError
Description: 
Purpose: 

---

# Page 648

Enables or disables the connection to an error voltage for a group of LeverSim. This overrides EnableOutput; the output is
disabled as long as the error is active. 
Example: 
*_ApiEnableError(true) 
Parameters:
NameType EncodedType
Enableboolean bool
True to enable the error voltage connection, false to
disable
Function: EnableOutput
Description: 
Purpose: 
Enables or disables the connection of the output to the output pin. By default, every output is floating. 
Example: 
*_ApiEnableOutput(true) 
Parameters:
NameType EncodedType
Enableboolean bool
True to enable the output connection, false todisable
Function: GetLogicControl
Description: 
Purpose: 
Gets the current logic state (default or customized). 
Example: 
*_ApiGetLogicControl() 
Function: SetLogicState
Description: 
Purpose: 
- Sets the logic state to either default or customized. 
- Default logic represents the normal operation for each module. 
- Customized logic is implemented by the firmware development team based on specific project requirements and testing
needs, and may vary between projects. 
Example: 
*_ApiSetLogicState(Custom_Logic) <[Replace with a valid Logic_State value (Custom_Logic or Default_Logic]> 
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
The desired logic state.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Logic_State

---

# Page 649

Description: Current used Logic
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
back to interface definition
Objects
Object: ValuePercent
Description: Valid values are 0..100%.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ValuePercent_SignalSignalint 0 0.00152590218966964217593% 2 false false
back to interface definition
Interface: TCM_LeverSimGroup  extends _Object
Description: 6 LeverSim channels together build a group. For each group, one error voltage can be set.
Enumerations
ErrorSelection
VRefSelection
Functions
ErrorSelection
SetUserTag
VRefSelection
Messages
GeneralMessage
Enumerations
Enum: ErrorSelection
Value
HIGH
LOW
GND
RESERVED
Enum: VRefSelection
Value
HighRange
LowRange
Internal
Functions
Function: ErrorSelection
Description: 
Purpose: 
Selects the error voltage that can be activated for each child lever sim. 
Example: 
*_ApiErrorSelection(ErrorSelection_VREF_1) <[Replace with a valid ErrorSelection value]> 
Parameters:
Name Type EncodedType
SelectionErrorSelection int
The desired error voltage
selection.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: VRefSelection

---

# Page 650

Description: 
Purpose: 
Selects the Vref voltage. 
Example: 
*_ApiVRefSelection(VRefSelection_VREF_2) <[Replace with a valid VRefSelection value]> 
Parameters:
Name Type EncodedType
SelectionVRefSelection int
The desired Vref voltage
selection.
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: ReadbackAdc
Name Interface
ReadbackAdcTCM_ReadbackAdc6
Object: TCM_LeverSim
Name Interface
TCM_LeverSimTCM_LeverSim
back to interface definition
Interface:
TCM_LeverSimGroups  extends _Object
Description: Thery are just normal DACs (18 DAC with 16-bit resolution)
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: TCM_LeverSimGroup
Name Interface
TCM_LeverSimGroupTCM_LeverSimGroup
back to interface definition

---

# Page 651

Interface: TCM_SasDac  extends Logic_Control _Object
Functions
EnableOutput
GetLogicControl
SetLogicState
SetUserTag
Messages
GeneralMessage
Logic_State
Functions
Function: EnableOutput
Description: 
Purpose: 
Enables or disables the connection of the output to the output pin. By default, every output is floating. 
Example: 
*_ApiEnableOutput(true) 
Parameters:
NameType EncodedType
Enableboolean bool
True to enable the output connection, false to
disable
Function: GetLogicControl
Description: 
Purpose: 
Gets the current logic state (default or customized). 
Example: 
*_ApiGetLogicControl() 
Function: SetLogicState
Description: 
Purpose: 
- Sets the logic state to either default or customized. 
- Default logic represents the normal operation for each module. 
- Customized logic is implemented by the firmware development team based on specific project requirements and testing
needs, and may vary between projects. 
Example: 
*_ApiSetLogicState(Custom_Logic) <[Replace with a valid Logic_State value (Custom_Logic or Default_Logic]> 
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
The desired logic state.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8

---

# Page 652

Message: Logic_State
Description: Current used Logic
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
back to interface definition
Objects
Object: ValuePercent
Description: Valid values are 0..100%.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ValuePercent_SignalSignalint 0 0.00152590218966964217593% 2 false false
back to interface definition
Interface: TCM_SasDacs  extends _Object
Description: 6 Sasdacs channels in addition to ReadbackAdc channel
Enumerations
ReferenceMode
Functions
SasDacReferenceMode
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: ReferenceMode
Value
Internal
External
Functions
Function: SasDacReferenceMode
Description: 
Purpose: 
Selects the voltage reference for the SAS DAC. 
Example: 
*_ApiSasDacReferenceMode(ReferenceMode_INTERNAL) <[Replace with a valid ReferenceMode value]> 
Parameters:
NameType EncodedType
ModeReferenceMode int
The desired voltage reference mode (e.g., internal or
external).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 653

Objects
Object: SasDacReadbackAdc
Name Interface
SasDacReadbackAdcTCM_ReadbackAdc6
Object: TCM_SasDac
Name Interface
TCM_SasDacTCM_SasDac
back to interface definition
Interface: TCM_GeneralDac  extends Logic_Control _Object
Functions
EnableOutput
GetLogicControl
SetLogicState
SetUserTag
Messages
GeneralMessage
Logic_State
Functions
Function: EnableOutput
Description: 
Purpose: 
Enables or disables the connection of the output to the output pin. By default, every output is floating. 
Example: 
*_ApiEnableOutput(true) 
Parameters:
NameType EncodedType
Enableboolean bool
True to enable the output connection, false to
disable
Function: GetLogicControl
Description: 
Purpose: 
Gets the current logic state (default or customized). 
Example: 
*_ApiGetLogicControl() 
Function: SetLogicState
Description: 
Purpose: 
- Sets the logic state to either default or customized. 
- Default logic represents the normal operation for each module. 
- Customized logic is implemented by the firmware development team based on specific project requirements and testing
needs, and may vary between projects. 
Example: 
*_ApiSetLogicState(Custom_Logic) <[Replace with a valid Logic_State value (Custom_Logic or Default_Logic]> 
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
The desired logic state.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat

---

# Page 654

Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Logic_State
Description: Current used Logic
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
back to interface definition
Objects
Object: ValuePercent
Description: Valid values are 0..100%. {this scale for 16-bit DACs}
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ValuePercent_SignalSignalint 0 0.00152590218966964217593% 2 false false
back to interface definition
Interface: TCM_GeneralDacs  extends _Object
Description: Thery are 12 DACs, DAC 0 to 3 (First 4 DACs are 16-bit resolution), DAC 4 to 11 (other DACs are 12-bit resolution)
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: TCM_GeneralDac
Name Interface
TCM_GeneralDacTCM_GeneralDac
back to interface definition
Interface: TCM_GeneralAdc  extends _Object
Functions
SetUserTag
Messages
GeneralMessage

---

# Page 655

Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: GeneralAdcSignal
Description: Valid values are 0..100%.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
GeneralAdcSignal_SignalSignalint 0 0.00152590218966964217594% 2 false false
back to interface definition
Interface: TCM_GeneralAdcs  extends _Object
Description: 8 ADCs with 12-bit resolution
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: TCM_GeneralAdc
Name Interface
TCM_GeneralAdcTCM_GeneralAdc
back to interface definition
Interface: TCM_ReadbackAdc6  extends _Object
Functions

---

# Page 656

Disable
SetChannel
SetUserTag
Messages
GeneralMessage
Functions
Function: Disable
Description: 
Purpose: 
Disables the PWM module. 
Example: 
*_ApiDisable() 
Function: SetChannel
Description: 
Purpose: 
Sets the PWM channel. 
Example: 
*_ApiSetChannel(3) 
Parameters:
Name Type EncodedType
Channelint uint8
The desired PWM channel (0-
5).
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: ValuePercent
Description: Valid values are 0..100%.
Name InterfaceTypeEncodedTypeOffsetScale UnitBytecountElasticLengthMutable
ValuePercent_SignalSignalint 0 0.00152590218966964217593% 2 false false
back to interface definition
Interface: TCM_Dio  extends Logic_Control _Object
Enumerations
OutputMode
Functions
GetLogicControl
SetLogicState
SetOutputMode
SetUserTag
Messages
GeneralMessage
Logic_State

---

# Page 657

Enumerations
Enum: OutputMode
Value Description
Input The output will always float and the assigned value is never driven.
PushPullThe output will actively drive to high and low.
ActiveLowWhen output is assigned '0' it will drive to LOW, when assigned '1' it will
float.
ActiveHighWhen output is assigned '0' it will float, when assigned '1' it will drive to
HIGH.
Functions
Function: GetLogicControl
Description: 
Purpose: 
Gets the current logic state (default or customized). 
Example: 
*_ApiGetLogicControl() 
Function: SetLogicState
Description: 
Purpose: 
- Sets the logic state to either default or customized. 
- Default logic represents the normal operation for each module. 
- Customized logic is implemented by the firmware development team based on specific project requirements and testing
needs, and may vary between projects. 
Example: 
*_ApiSetLogicState(Custom_Logic) <[Replace with a valid Logic_State value (Custom_Logic or Default_Logic]> 
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
The desired logic state.
Function: SetOutputMode
Description: 
Purpose: 
Sets the output mode of the PWM signal. The behavior of the output line varies depending on the selected mode: 
- Input: The output will always float, and the assigned value is never driven. 
- PushPull: The output will actively drive to both high and low states. 
- ActiveLow: When the output is assigned '0', it will drive to LOW; when assigned '1', it will float. 
- ActiveHigh: When the output is assigned '0', it will float; when assigned '1', it will drive to HIGH. 
Example: 
*_ApiSetOutputMode(OutputMode_PushPull) <[Replace with a valid OutputMode value]> 
Parameters:
NameType EncodedType
ModeOutputModeint
The desired output mode.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:

---

# Page 658

NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Logic_State
Description: Current used Logic
Parameters:
Name Type EncodedType
Logic_StateLogic_Stateint
back to interface definition
Objects
Object: Output
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Output_SignalSignalboolean 0 1 1 false false
Object: Input
NameInterfaceTypeEncodedTypeOffsetScaleBytecountElasticLengthMutable
Input_SignalSignalboolean 0 1 1 false false
back to interface definition
Interface: TCM_DioGroup  extends _Object
Functions
EnableInternalVdd5V
SetUserTag
Messages
GeneralMessage
Functions
Function: EnableInternalVdd5V
Description: 
Purpose: 
Enables or disables the internal 5V supply to the DIO_VDD for each group. 
Example: 
*_ApiEnableInternalVdd5V(true) 
Parameters:
NameType EncodedType
Enableboolean bool
True to enable the internal 5V supply, false to
disable.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: TCM_Dio
Name Interface

---

# Page 659

TCM_DioTCM_Dio
back to interface definition
Interface: TCM_DioGroups  extends _Object
Description: 60 DIOs (Divided into 10 Groups each has 6 DIOs with seperate voltage source supply)
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: TCM_DioGroup
Name Interface
TCM_DioGroupTCM_DioGroup
back to interface definition
Interface: TcmPip  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: Signals_Monitoring

---

# Page 660

Name Interface
Signals_MonitoringTCM_Signals_Monitoring
Object: Plug_Lines
Name Interface
Plug_LinesTCM_Plug_Lines
Object: DioGroups
Name Interface
DioGroupsTCM_DioGroups
Object: SasDacs
Name Interface
SasDacsTCM_SasDacs
Object: LeverSimGroups
Name Interface
LeverSimGroupsTCM_LeverSimGroups
Object: GeneralDacs
Name Interface
GeneralDacsTCM_GeneralDacs
Object: GeneralAdcs
Name Interface
GeneralAdcsTCM_GeneralAdcs
back to interface definition
Interface: EdgeTrace  extends _Object
Description: Edge Trace
Functions
Message_GetLength
Message_Log
Pwm_PeriodWidthsToSequenceNs
Pwm_PeriodWidthsToSequenceTicks
Pwm_PulseWidthsToSequenceNs
Pwm_PulseWidthsToSequenceTicks
Pwm_RatioPpmToSequence
Recording_CheckSampleCount
Recording_LogValues
Recording_SequenceDuration
Recording_Start
Recording_Stop
Sequence_CheckAllValuesInRange
Sequence_CheckLength
Sequence_CheckValueInRange
Sequence_GetLength
Sequence_Log
Sequence_LogAnalysis
Sequence_LogAnalysis_2
Sequence_RemoveElementsBiggerOrSmallerThan
Sequence_RemoveFirstElementsBiggerThan
Sequence_RemoveFirstElementsSmallerThan
Sequence_RemoveTail
SetUserTag
Messages
GeneralMessage
JobFinished
MessageLogInvalidIndex
Message_Length
RecordingInvalidIndex
Recording_NoData
Recording_SequenceDuration
Recording_Stopped
Recording_TraceValues
Sequence_IndexOutOfRange
Sequence_Length
Sequence_LogAnalysis

---

# Page 661

Sequence_RemovedElements
Sequence_ValueInRange
Sequence_Values
Events
JobFinished
Objects
Functions
Function: Message_GetLength
Description: 
Purpose: 
Returns the number of messages, where each message carries a specific number of values (typically 500). 
Example: 
*_ApiMessage_GetLength() //Returns the number of messages. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Return Messages : 
- On Success : 
this MakeMsg "Message_Length" Wil lbe returned 
Response timeout: 0
Result Message: Message_Length 
Faults: 
Function: Message_Log
Description: 
Purpose: 
Returns the values contained within the message at the specified index. 
Example: 
*_ApiMessage_Log(3) //Returns the values in the message at index 3. 
Dependency: 
This API Must be called after Sequence_Log() API 
Return Messages : 
- On Success : 
this MakeMsg "Sequence_Values" Wil lbe returned 
Parameters:
Name Type EncodedType
MessageIndexint int32
The index of the message to
retrieve.
Response timeout: 0
Result Message: Sequence_Values 
Faults: 
Function: Pwm_PeriodWidthsToSequenceNs
Description: 
Purpose: 
- processes a sequence of period widths in nanoseconds from the recorded data. If WithRisingEdges is false, the polarity
of the period width description is inverted. 
- In the recorded data, rising edges mark the start and end of a period. The time difference is evaluated in nanoseconds
(e.g., a value of 1000 == 1µs, 50000 == 50µs). 
Example: 
*_ApiPwm_PeriodWidthsToSequenceNs(0x04, false, 100) //processes a sequence of period widths from channel 4, using
falling edges, with a maximum length of 100. 
Dependency: 

---

# Page 662

This API Must be called after *_ApiRecording_Stop() that followed by *_ApiRecording_Start(Ch_Mask); 
Parameters:
Name Type EncodedType
Channelint uint8
The channel number to analyze for pulse widths. (Valid From 0 - 7) as we have only 8 channels per
object
WithRisingEdgesboolean bool
A boolean indicating whether to use rising edges (true) or falling edges (false) to mark the period.
MaxLengthint int32
The maximum length of the sequence to be processed.
Function: Pwm_PeriodWidthsToSequenceTicks
Description: 
Purpose: 
- processes a sequence of period widths in 20ns ticks from the recorded data. If WithRisingEdges is false, the polarity of
the period width description is inverted. 
- In the recorded data, rising edges mark the start and end of a period. The time difference is evaluated in 20ns steps (e.g.,
a value of 1000 == 20µs, 50000 == 1ms). 
Example: 
*_ApiPwm_PeriodWidthsToSequenceTicks(0x03, true, 150) //processes a sequence of period widths from channel 3, using
rising edges, with a maximum length of 150. 
Dependency: 
This API Must be called after *_ApiRecording_Stop() that followed by *_ApiRecording_Start(Ch_Mask); 
Parameters:
Name Type EncodedType
Channelint uint8
The channel number to analyze for pulse widths. (Valid From 0 - 7) as we have only 8 channels per
object
WithRisingEdgesboolean bool
A boolean indicating whether to use rising edges (true) or falling edges (false) to mark the period.
MaxLengthint int32
The maximum length of the sequence to be processed.
Function: Pwm_PulseWidthsToSequenceNs
Description: 
Purpose: 
- Searches through the recorded data and Processes a sequence of pulse widths in nanoseconds. If PulsePolarityPositive
is false, the polarity of the pulse width description is inverted. 
- In the recorded data, rising edges and the following falling edge mark the start and end of a pulse. The time difference is
evaluated in nanoseconds (e.g., a value of 1000 == 1µs, 50000 == 50µs). 
Example: 
*_ApiPwm_PulseWidthsToSequenceNs(0x02, false, 200) //processes a sequence of pulse widths from channel 2,
assuming negative polarity, with a maximum length of 200. 
Dependency: 
This API Must be called after *_ApiRecording_Stop() that followed by *_ApiRecording_Start(Ch_Mask); 
Parameters:
Name Type EncodedType
Channelint uint8
The channel number to analyze for pulse widths. (Valid From 0 - 7) as we have only 8 channels per object
PulsePolarityPositiveboolean bool
A boolean indicating whether the pulse polarity is positive "Clk from Low To high" (true) or negative "Clk From
Low to High (false)
MaxLengthint int32
The maximum length of the sequence to be processed.
Function: Pwm_PulseWidthsToSequenceTicks
Description: 
Purpose: 
- Searches through the recorded data and builds a sequence of pulse widths in 20ns ticks. If PulsePolarityPositive is false,
the polarity of the pulse width description is inverted. 
- In the recorded data, rising edges and the following falling edge mark the start and end of a pulse. The time difference is
evaluated in 20ns steps (e.g., a value of 1000 == 20µs, 50000 == 1ms). 

---

# Page 663

Example: 
*_ApiPwm_PulseWidthsToSequenceTicks(0x01, true, 100) //Processes a sequence of pulse widths from channel 1,
assuming positive polarity, with a maximum length of 100. 
Dependency: 
This API Must be called after *_ApiRecording_Stop() that followed by *_ApiRecording_Start(Ch_Mask); 
Parameters:
Name Type EncodedType
Channelint uint8
The channel number to analyze for pulse widths. (Valid From 0 - 7) as we have only 8 channels per object
PulsePolarityPositiveboolean bool
A boolean indicating whether the pulse polarity is positive "Clk from Low To high" (true) or negative "Clk From
Low to High (false)
MaxLengthint int32
The maximum length of the sequence to be processed.
Function: Pwm_RatioPpmToSequence
Description: 
Purpose: 
- Calculates the pulse-width modulation (PWM) ratio in parts per million (PPM) and builds a sequence. If WithRisingEdges
is false, the polarity of the pulse width description is inverted. 
- In the recorded data, rising edges mark the start and end of a period. The pulse length is defined as the time from the
start of the period to the falling edge in between. The ratio ppm is calculated as 1e6 * pulse / period (1000000 == 100%). 
Example: 
*_ApiPwm_RatioPpmToSequence(0x05, true, 50) //Calculates the PWM ratio in PPM from channel 5, using rising edges,
with a maximum length of 50. 
Dependency: 
This API Must be called after *_ApiRecording_Stop() that followed by *_ApiRecording_Start(Ch_Mask); 
Parameters:
Name Type EncodedType
Channelint uint8
The channel number to analyze for pulse widths. (Valid From 0 - 7) as we have only 8 channels per
object
WithRisingEdgesboolean bool
A boolean indicating whether to use rising edges (true) or falling edges (false) to mark the period.
MaxLengthint int32
The maximum length of the sequence to be processed.
Function: Recording_CheckSampleCount
Description: 
Purpose: 
Checks if the number of samples recorded falls within the acceptable range. 
Example: 
*_ApiRecording_CheckSampleCount(10, 20, 80, 90) //Checks if the sample count is within the specified error and warning
limits. 
Dependency: 
This API Must be called after *_ApiRecording_Stop() that followed by *_ApiRecording_Start(Ch_Mask); 
Parameters:
Name Type EncodedType
MinErrint int32
Minimum acceptable sample count before an error is flagged.
MinWarnint int32
Minimum acceptable sample count before a warning is flagged.
MaxWarnint int32
Maximum acceptable sample count before a warning is
flagged.
MaxErrint int32
Maximum acceptable sample count before an error is flagged.
Function: Recording_LogValues
Description: 
Purpose: 
Logs the current values of the selected channels. 

---

# Page 664

Example: 
*_ApiRecording_LogValues() //Logs the current values of the channels being monitored. 
Dependency: 
This API Must be called after *_ApiRecording_Stop() that followed by *_ApiRecording_Start(Ch_Mask); 
Function: Recording_SequenceDuration
Description: 
Purpose: 
Checks the duration of a recorded sequence between two specified indices. 
Example: 
*_ApiRecording_SequenceDuration(10, 50, 1000, 5000) //Checks the duration between indices 10 and 50, expecting a
duration between 1000µs and 5000µs. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
Name Type EncodedType Unit
startIndexint int32
The starting index of the sequence duration.
endIndexint int32
The ending index of the sequence duration.
MinExpectedTimeStampInUslong uint64 µs
The minimum expected timestamp duration in microseconds (µs).
MaxExpectedTimeStampInUslong uint64 µs
The maximum expected timestamp duration in microseconds
(µs).
Function: Recording_Start
Description: 
Purpose: 
Starts recording data. 
Example: 
*_ApiRecording_Start(0x01); //Start recording on the first channel (Channel Index 1) 
*_ApiRecording_Start(0x04); //Start recording on the third channel (Channel Index 3) 
Parameters:
Name Type EncodedType Format
SensitiveChannelMaskint uint8 hex
The mask to select which channels to record (Currently One Channel at a
time)
Function: Recording_Stop
Description: 
Purpose: 
Stops the ongoing recording. 
Example: 
*_ApiRecording_Stop() //Stops the current recording 
Dependency: 
This API Must be called after *_ApiRecording_Start(Ch_Mask); 
Function: Sequence_CheckAllValuesInRange
Description: 
Purpose: 
Checks if all values in the current sequence are within acceptable limits. 
Example: 
*_ApiSequence_CheckAllValuesInRange(100, 200, 800, 900) //Checks if all values in the sequence are within the specified
error and warning limits. 

---

# Page 665

Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
Name Type EncodedType
MinErrint int32
The minimum acceptable value in the sequence for an error condition.
MinWarnint int32
The minimum acceptable value in the sequence for a warningcondition.
MaxWarnint int32
The maximum acceptable value in the sequence for a warningcondition.
MaxErrint int32
The maximum acceptable value in the sequence for an error condition.
Function: Sequence_CheckLength
Description: 
Purpose: 
Checks if the length of the current sequence is within acceptable limits. 
Example: 
*_ApiSequence_CheckLength(10, 20, 80, 90) //Checks if the sequence length is within the specified error and warning
limits. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
Name Type EncodedType
MinErrint int32
The minimum acceptable sequence length for an error condition.
MinWarnint int32
The minimum acceptable sequence length for a warning condition.
MaxWarnint int32
The maximum acceptable sequence length for a warning
condition.
MaxErrint int32
The maximum acceptable sequence length for an error condition.
Function: Sequence_CheckValueInRange
Description: 
Purpose: 
Checks if a specific value in the current sequence is within acceptable limits. 
Example: 
*_ApiSequence_CheckValueInRange(5, 100, 200, 800, 900) //Checks if the value at index 5 in the sequence is within the
specified error and warning limits. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
Name Type EncodedType
Indexint int32
The index of the value in the sequence to check.
MinErrint int32

---

# Page 666

The minimum acceptable value for an error condition.
MinWarnint int32
The minimum acceptable value for a warning condition.
MaxWarnint int32
The maximum acceptable value for a warning
condition.
MaxErrint int32
The maximum acceptable value for an error condition.
Function: Sequence_GetLength
Description: 
Purpose: 
Retrieves the length of the current sequence. 
Example: 
*_ApiSequence_GetLength() //Returns the length of the current sequence. (This function can be called as afc or sfc 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Return Messages : 
- On Success : 
MakeMsg "Sequence_Length" Wil lbe returned 
Response timeout: 0
Result Message: Sequence_Length 
Faults: 
Function: Sequence_Log
Description: 
Purpose: 
Logs the current sequence data. 
Example: 
*_ApiSequence_Log() //Logs the current sequence data. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Function: Sequence_LogAnalysis
Description: 
Purpose: 
- Checks the number of raw values within specified ranges in the "sequence_Log". 
- This API verifies that the number of raw values falling between minRequiredLogValue and maxRequiredLogValue is
within the acceptable range defined by minNoOfInRangeOccurrences and maxNoOfInRangeOccurrences, starting from the
first index of "sequence_Log". 
Example: 
*_ApiSequence_LogAnalysis({100}, {200}, {5}, {10}) //Checks if the number of values between 100 and 200 is between 5
and 10 in the logged sequence. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
Name Type EncodedType
minRequiredLogValuelong[] int64
An array containing the minimum required log value for each range.

---

# Page 667

maxRequiredLogValuelong[] int64
An array containing the maximum required log value for each range.
minNoOfInRangeOccurancesint[] uint32
An array containing the minimum number of occurrences required within each
range.
maxNoOfInRangeOccurancesint[] uint32
An array containing the maximum number of occurrences allowed within each
range.
Function: Sequence_LogAnalysis_2
Description: 
Purpose: 
Performs sequence log analysis specifically for stepper motor applications (AUDI/VW Project Specific API). 
Example: 
*_ApiSequence_LogAnalysis_2({1000, 1010, 990}, 5, 2, 3) //Analyzes the sequence log for stepper motor data with
specified tolerances and number of elements to check. 
Parameters:
Name Type EncodedType
ActualReadingslong[] int64
An array containing the actual readings from the stepper motor.
PwmToleranceint uint32
The tolerance value for PWM (Pulse Width Modulation)
measurements.
SampleToleranceint uint32
The tolerance value for sample measurements.
NoOfFirstElementsToBeCheckedint uint32
The number of initial elements in the sequence to be checked.
Function: Sequence_RemoveElementsBiggerOrSmallerThan
Description: 
Purpose: 
Removes all elements from the sequence that are smaller or biggher than the given value. the process stop at the
MaxLengh Given 
Example: 
*Sequence_RemoveElementsBiggerOrSmallerThan(true, 50, 5000) //Removes all elements from the sequence that are
bigger than 50 and the process will run only for the first 5000 elements 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
Name Type EncodedType
ifBiggerThanboolean bool
if true that means all elements bigger than the input value will be removed ,if false the smaller than elements will be
removed
Valueint uint32
The value to compare against. Leading elements bigger or smaller than this value will be removed.
MaxLengthint int32
The maximum length of the sequence to be processed.
Function: Sequence_RemoveFirstElementsBiggerThan
Description: 
Purpose: 
Removes all leading elements from the sequence that are greater than the given value. The removal process stops at the
first element that does not meet this criteria. 
Example: 
*_ApiSequence_RemoveFirstElementsBiggerThan(150) //Removes all leading elements from the sequence that are
greater than 150. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 

---

# Page 668

- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
NameType EncodedType
Valueint int32
The value to compare against. Leading elements greater than this value will be
removed.
Function: Sequence_RemoveFirstElementsSmallerThan
Description: 
Purpose: 
Removes all leading elements from the sequence that are smaller than the given value. The removal process stops at the
first element that does not meet this criteria. 
Example: 
*_ApiSequence_RemoveFirstElementsSmallerThan(50) //Removes all leading elements from the sequence that are
smaller than 50. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
NameType EncodedType
Valueint int32
The value to compare against. Leading elements smaller than this value will be
removed.
Function: Sequence_RemoveTail
Description: 
Purpose: 
Removes all elements from the sequence starting at the given FromIndex. The resulting sequence has a maximum length
equal to FromIndex. 
Example: 
*_ApiSequence_RemoveTail(25) //Removes all elements from the sequence starting at index 25. 
Dependency: 
This API Must be called after one of these APIS : 
- Pwm_PulseWidthsToSequenceNs 
- Pwm_PeriodWidthsToSequenceTicks 
- Pwm_PeriodWidthsToSequenceNs 
- Pwm_RatioPpmToSequence 
Parameters:
Name Type EncodedType
FromIndexint int32
The index from which to remove elements. The element at this index and all subsequent elements will be
removed.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat

---

# Page 669

Data int[]uint8 utf8
Message: JobFinished
Parameters:
Name TypeEncodedType
ProcessedItemsint int32
Message: MessageLogInvalidIndex
Description: Notifies to the user that the input Message Index exceeds the limits
Parameters:
Name TypeEncodedType
InputMsgIndexint uint32
MaxMsgIndexint uint32
Message: Message_Length
Parameters:
NameTypeEncodedType
Lengthint int32
Message: RecordingInvalidIndex
Description: Notifies to the user that the index to read (requested by the user) is higher than the number of data recorded
Parameters:
Name TypeEncodedType
Index int int32
NumberOfSamplesint uint32
Message: Recording_NoData
Message: Recording_SequenceDuration
Parameters:
Name TypeEncodedType
TimeDifferenceInUs longuint64
MinExpectedTimeDiffInUslonguint64
MaxExpectedTimeDiffInUslonguint64
Message: Recording_Stopped
Parameters:
Name TypeEncodedType
SampleCountint int32
Message: Recording_TraceValues
Description: Each value has 8 bit channels state in bit 31..24 and timestamp in bit 23 .. 0. The timestamp is in 50MHz steps
and may have overruns.
Parameters:
Name Type EncodedTypeUnitFormat
FirstMsgOffsetNslong int64 ns
MsgIndex int int32
LastMsg booleanbool
Values int[] uint32 hex
Message: Sequence_IndexOutOfRange
Parameters:
NameTypeEncodedType
Indexint int32
Lengthint int32
Message: Sequence_Length
Parameters:
NameTypeEncodedType
Lengthint int32
Message: Sequence_LogAnalysis
Parameters:

---

# Page 670

Name TypeEncodedType
IndexOfUserInputArray int uint32
IndexOfSequenceLogStart int uint32
IndexOfSequenceLogEnd int uint32
MinRequiredLogValue longint64
MaxRequiredLogValue longint64
ExactLogValue int uint32
minNoOfInRangeOccurancesint uint32
maxNoOfInRangeOccurancesint uint32
ExactNoOfOccurnaces int uint32
Message: Sequence_RemovedElements
Parameters:
NameTypeEncodedType
Countint int32
Message: Sequence_ValueInRange
Parameters:
Name TypeEncodedType
Index int int32
MinErr int int32
MinWarnint int32
Value int int32
MaxWarnint int32
MaxErr int int32
Message: Sequence_Values
Parameters:
Name TypeEncodedType
MsgIndexint int32
Values int[]int32
back to interface definition
Events
Event: JobFinished
back to interface definition
Interface: PipRlt  extends _Object
Description: new RLT PIP Interface
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects

---

# Page 671

Object: RLT_DAC
Name Interface
RLT_DACRLT_DAC
Object: RLT_ADC
Name Interface
RLT_ADCRLT_ADC
Object: RLT_Gpio
Name Interface
RLT_GpioRLT_Gpio
Object: RLT_I2c
Name Interface
RLT_I2cRLT_I2c
back to interface definition
Interface: RLT_DAC  extends _Object
Description: new RLT PIP Interface
Enumerations
Reg
allCurrentChannel
channelFault
nanoCurrentChannel
picoCurrentChannel
Functions
ReadIOExpander
SetNanoChannel
SetPicoChannel
SetUserTag
configureRainSimulation
setDacReg
Messages
GeneralMessage
Enumerations
Enum: Reg
Description: List of Faults that could be applied to each channel
Value
NOP
ID
SYNC
CONFIG
GAIN
TRIGGER
BRDCAST
STATUS
DAC0
DAC1
DAC2
DAC3
DAC4
DAC5
DAC6
DAC7
Enum: allCurrentChannel
Description: List of project specific pico and Nano Amper output channels
Value
ALS0
ALS1
ALS2
ALS3
ALS4
ALS5

---

# Page 672

ALS_SPARE
RSI
Enum: channelFault
Description: List of Faults that could be applied to each channel
Value
NORMAL
Vref
GND
OC
Enum: nanoCurrentChannel
Description: List of project specific Nano Amper output channels
Value
ALS3
ALS4
ALS5
ALS_SPARE
RSI
Enum: picoCurrentChannel
Description: List of project specific pico Amper output channels
Value
ALS0
ALS1
ALS2
Functions
Function: ReadIOExpander
Description: 
Purpose: 
Reads the input port of the IO expander with the specified slave address. 
Example: 
*_ApiReadIOExpander(0x20) 
Parameters:
NameType EncodedType
SlvAddint uint8
The slave address of the IO expander to
read.
Function: SetNanoChannel
Description: 
Purpose: 
- Configures the daughter board DAC to output the required current in nanoamperes for a specific channel. 
- Handles current limiting and fault setting. 
Example: 
*_ApiSetNanoChannel(EnmnanoCurrentChannel.ALS3, 500, EnmchannelFault.NORMAL) 
Parameters:
Name Type EncodedType
ChannelnanoCurrentChannel int
The nanoampere channel to configure.
Currentlong uint64
The desired current in nanoamperes. Valid range is [0 : 1000000] nA. If a value outside this range is provided, an error
message will be generated and the current will not be set.
Ch_FaultchannelFault int
The fault condition to set for the channel.
Function: SetPicoChannel
Description: 
Purpose: 
- Configures the daughter board DAC to output the required current in picoamperes for a specific channel. 
- Handles current limiting and fault setting. 

---

# Page 673

Example: 
*_ApiSetPicoChannel(EnmpicoCurrentChannel.ALS2, 500, EnmchannelFault.NORMAL) 
Parameters:
Name Type EncodedType
ChannelpicoCurrentChannel int
The picoampere channel to configure.
Currentlong uint64
The desired current in picoamperes. Valid range is [0 : 1000000] nA. If a value outside this range is provided, an error
message will be generated and the current will not be set.
Ch_FaultchannelFault int
The fault condition to set for the channel.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: configureRainSimulation
Description: 
Purpose: 
Configures the rain simulation feature, alternating between two current values on a specified picoampere channel or
nanoampere channel. 
Example: 
*_ApiconfigureRainSimulation(true, EnmallCurrentChannel.ALS2, 100, 500, 500) 
Parameters:
Name Type EncodedType
Enableboolean bool
Enable or disable rain simulation.
ChallCurrentChannel int
The picoampere channel to use for rain simulation.
Current_Along uint64
The first current value in nanoamperes for rain simulation.
Current_Blong uint64
The second current value in nanoamperes for rain simulation.
timeMsint uint16
Time in milliseconds for switching between Current_A and
Current_B.
Function: setDacReg
Description: 
Purpose: 
Writes a value to a specified register of the DAC. 
Example: 
*_ApisetDacReg(EnmReg.DAC0, 0) 
Parameters:
Name Type EncodedType
ChannelReg int
The DAC register to write to.
REG_VALint uint16
The value to write to the DACregister.
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition

---

# Page 674

Interface: RLT_ADC  extends _Object
Description: new RLT PIP Interface
Enumerations
ADC_Channel
Functions
ReadAdcChannel
SetUserTag
Messages
ADC_value
GeneralMessage
Enumerations
Enum: ADC_Channel
Value
ADC0
ADC1
ADC2
ADC3
ADC4
ADC5
ADC6
ADC7
Functions
Function: ReadAdcChannel
Description: 
Purpose: 
Reads the voltage from the specified ADC channel on the main board. Returns the voltage in millivolts. 
Example: 
*_ApiReadAdcChannel(ADC_Channel.ADC2) 
Parameters:
Name Type EncodedType
ChannelADC_Channelint
The ADC channel to read.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: ADC_value
Description: Angle measured by the mapped encoder
Parameters:
NameType EncodedTypeUnit
SourceADC_Channelint -
Value int uint16 mV
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: RLT_Gpio  extends _Object

---

# Page 675

Enumerations
RLT_GpioList
RSI_CTRL_SRC
Functions
SetUserTag
Set_GPIO
set_RSI_CtrlSrc
Messages
GeneralMessage
Enumerations
Enum: RLT_GpioList
Description: List of Rlt GPIOs
Value
Vref_ALI_fault_en
Vref_RSI_fault_en
RS_PWM35
VADC2VREF
SW1
MISO2GND
SW2
RS_PWM
F_DI0
F_DI1
F_DI2
Enum: RSI_CTRL_SRC
Description: List of possible sources of RSI Control
Value
PWMA
PWMB
GND
RSI
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: Set_GPIO
Description: 
Purpose: 
Sets the state of a specified GPIO pin. 
Example: 
*_ApiSet_GPIO(1, 1) 
Parameters:
Name Type EncodedType
Channelint uint8
The GPIO channel number.
stateint uint8
The desired state of the GPIO (1 for high, 0 for
low).
Function: set_RSI_CtrlSrc
Description: 
Purpose: 
Controls two GPIOs to select the RSI source. 
Example: 

---

# Page 676

*_Apiset_RSI_CtrlSrc(RSI_CTRL_SRC.PWMA) 
Parameters:
NameType EncodedType
srcRSI_CTRL_SRC int
The desired RSI source (PWMA, PWMB, GND, or
RSI).
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: RLT_I2c  extends _Object
Functions
Enable_crc_error
SetUserTag
Set_RH_value
Set_tempreture_value
Messages
GeneralMessage
Functions
Function: Enable_crc_error
Description: 
Purpose: 
Enables or disables CRC error injection. 
Example: 
*_ApiEnable_crc_error(true) 
Parameters:
NameType EncodedType
Enableboolean bool
Enable (true) or disable (false) CRC error
injection.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: Set_RH_value
Description: 
Purpose: 
Sets the relative humidity (RH) value. 
Example: 
*_ApiSet_RH_value(50) 
Parameters:
NameTypeEncodedType
valint uint16
The RH value to set.
Function: Set_tempreture_value
Description: 
Purpose: 
Sets the temperature value. 

---

# Page 677

Example: 
*_ApiSet_tempreture_value(25) 
Parameters:
NameType EncodedType
valint uint16
The temperature value toset.
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: StepperMotor  extends _Object
Description: Interface for the SPI communication between Stepper Motor IC Driver (Simulated by castle) and MicroContoller
Enumerations
CommandType
CommandTypeGeneral
RegisterAccessType
SlaveSelection
Functions
AutoClearFault
ConfigRegister_Event
EnableCustomStatusByte
ReadFromSlaveRegisters
RecodringCheckGeneralDataWithIndex
RecordingCheckTimeBetweenTwoIndexes
RecordingReadAll
RecordingStart
RecordingStop
RecordingTestNoOfIndexes
ResetSimulation
SelectSlave
SetCustomStatusByteData
SetRegisterAccess
SetUserTag
TestSlaveRegister
WriteIntoSlaveRegisters
getRegisterAccess
Messages
CheckSlaveData
GeneralMessage
Recodring_CheckGeneralDataWithIndex
RecordedData
Recording_ArrayFull
Recording_CheckTimeBetweenTwoIndexes
Recording_InvalidIndex
Recording_TestNoOfIndexes
RegisterData
Events
WriteFrameReceived
ReadFrameReceived
ReadRegister
WriteRegister
Objects
Enumerations
Enum: CommandType
Value
WriteCommand
ReadCommand

---

# Page 678

Enum: CommandTypeGeneral
Value
WriteCommand
ReadCommand
DoNotCheck
Enum: RegisterAccessType
Value
ReadOnly
ReadAndWrite
Enum: SlaveSelection
Value
UseRealIC
UseICSimulation
Functions
Function: AutoClearFault
Description: this API is used to clear the status registers (address 0x00,0x01,0x02) and clear CLR_FLT bit
Parameters:
NameType EncodedType
Enablebooleanbool
Function: ConfigRegister_Event
Description: this API is used to fire the event ReadRegister for a specific register
Parameters:
Name Type EncodedTypeFormat
Enable boolean bool
Register_Addressint uint16 hex
CommandType CommandTypeint -
Function: EnableCustomStatusByte
Description: apply status byte data which sent by "SetCustomStatusByteData" API
Parameters:
Name Type EncodedType
EnableStatusByteDatabooleanbool
Function: ReadFromSlaveRegisters
Description: read data from specific slave (stepper motor IC Driver) register
Parameters:
Name TypeEncodedType
RegisterAddressint uint32
Function: RecodringCheckGeneralDataWithIndex
Description: this API is used to the whole frame content with the index
Parameters:
Name Type EncodedTypeFormat
Index int int16
CommandTypeGeneralCommandTypeGeneralint -
FullRegAddrByte int int16 hex
RegisterAddress int int16 hex
RegisterData int int16 hex
StatusByte int int16 hex
ReportByte int int16 hex
EnableWarrningMsgs boolean bool
EnableErrorMsgs boolean bool
Function: RecordingCheckTimeBetweenTwoIndexes
Description: this API is used to check timing between two indexes entered by the user
Parameters:
Name TypeEncodedTypeUnit

---

# Page 679

Index1 int int16
Index2 int int16
MinTimeDifferenceInUsint uint32 µs
MaxTimeDifferenceinUsint uint32 µs
Function: RecordingReadAll
Description: Reads all the values from the recording.
Function: RecordingStart
Description: Activates the logging of the commands/replies of the StepperMotor
Function: RecordingStop
Description: Disable the logging of the commands/replies of the StepperMotor
Function: RecordingTestNoOfIndexes
Description: this API is used to compare between indexes number versus input number by the user
Parameters:
Name TypeEncodedType
NoOfIndexesint uint32
Function: ResetSimulation
Description: this API is reset the stepperMotor and initialize all registers to zeros , please call it after ECU turnOff
Function: SelectSlave
Description: to select whether the real Stepper Motor Driver IC is connected or using the Caslte simulation of it
Parameters:
Name Type EncodedType
SlaveSelectionSlaveSelectionint
Function: SetCustomStatusByteData
Description: change status byte data without sending it
Parameters:
NameTypeEncodedTypeFormat
Data int uint32 hex
Function: SetRegisterAccess
Description: this API is used to set the Register Access type (all registers are ReadAndWrite by default)
Parameters:
Name Type EncodedType
RegisterAddress int uint32
RegisterAccessTypeRegisterAccessTypeint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestSlaveRegister
Description: test received data with user input and id not equal error message will appear
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressToCheckint uint32
Data int uint32 hex
Function: WriteIntoSlaveRegisters
Description: write data into specific slave (stepper motor IC Driver) register
Parameters:

---

# Page 680

Name TypeEncodedTypeFormat
RegisterAddressint uint32
Data int uint32 hex
Function: getRegisterAccess
Description: this API is used to get the Register Access type if it is ReadAndWrite or ReadOnly
Parameters:
Name TypeEncodedType
RegisterAddressint uint32
back to interface definition
Messages
Message: CheckSlaveData
Description: this message will shoud up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
SlaveRxData int uint32 hex
UserInputDataint uint32 hex
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Recodring_CheckGeneralDataWithIndex
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name TypeEncodedTypeFormat
Index int int16
ActualFullRegisterAddressByte int uint8 hex
ExpectedFullRegisterAddressByteint uint8 hex
ActualRegisterAddress int uint8 hex
ExpectedRegisterAddress int uint8 hex
ActualRegisterData int uint8 hex
ExpectedRegisterData int uint8 hex
ActualStatusByte int uint8 hex
ExpectedStatusByte int uint8 hex
ActualReportByte int uint8 hex
ExpectedReportByte int uint8 hex
Message: RecordedData
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeUnitFormat
index int int16
CommandType CommandTypeint - -
FullRegisterAddressByteint uint8 hex
RegisterAddress int uint8 hex
RegisterData int uint8 hex
StatusByte int uint8 hex
ReportByte int uint8 hex
TimeStampInUs int uint32 µs
TimeDiffSince int uint32 µs
Message: Recording_ArrayFull
Description: Notifies to the user that the array used for the log of the StepperMotor is full. And that it is not logging
anymore. It shall be emptied
Message: Recording_CheckTimeBetweenTwoIndexes
Description: this message is to compare number of recorded frames versus a user input number
Parameters:
Name TypeEncodedTypeUnit

---

# Page 681

Index1 int int16
Index2 int int16
TimeDifferenceInUs int uint32 µs
MinTimeExpectedInUsint uint32 µs
MaxTimeExpectedInUsint uint32 µs
Message: Recording_InvalidIndex
Description: Notifies to the user that the index to read (requested by the user) is higher than the number of data recorded
Parameters:
Name TypeEncodedType
RequestedIndex int int16
NumberOfSamplesint uint16
Message: Recording_TestNoOfIndexes
Description: this message is to compare number of recorded indexes versus a user input number
Parameters:
Name TypeEncodedType
EnteredNumberint int16
ActualNumberint int16
Message: RegisterData
Description: this message will shoud up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint32
RegisterData int uint32 hex
back to interface definition
Events
Event: WriteFrameReceived
Description: This event happens after Recieving Write Frame on SPI
Event: ReadFrameReceived
Description: This event happens after Recieving Read Frame on SPI
Event: ReadRegister
Description: This event fires after Recieving Read Frame with register address Set by "ConfigRegister_Event" API on SPI
bus Coming from the ECU
Event: WriteRegister
Description: This event fires after Recieving Write Frame with register address Set by "ConfigRegister_Event" API on SPI
bus Coming from the ECU
back to interface definition
Interface: VideoProcessorUnit  extends _Object
Description: Interface for the SPI communication between VideoProcessorUnit (Simulated by castle) and MicroContoller
Enumerations
CommandType
CommandTypeGeneral
MessageType
RegisterAccessType
SlaveSelection
Functions
ActivateCRC
ConfigIRQ
ConfigRegister_Event
ConfigSpiParameters
CorruptCRC
CorruptCrcSpecialReg
ReadFromSlaveRegisters
RecodringCheckGeneralDataWithIndex
RecordingCheckTimeBetweenTwoIndexes
RecordingReadAll

---

# Page 682

RecordingStart
RecordingStop
RecordingTestNoOfIndexes
RegisterPeriodicCheck
ResetSimulation
SelectSlave
SetUserTag
SuspendOverWrite
SuspendOverWriteSpecific
TestSlaveRegister
WriteIntoSlaveRegisters
Messages
CheckSlaveData
GeneralMessage
Recodring_CheckGeneralDataWithIndex
RecordedData
Recording_ArrayFull
Recording_CheckTimeBetweenTwoIndexes
Recording_InvalidIndex
Recording_TestNoOfIndexes
RegisterData
Events
WriteFrameReceived
ReadFrameReceived
ReadRegister
WriteRegister
Objects
Enumerations
Enum: CommandType
Value
WriteCommand
ReadCommand
Enum: CommandTypeGeneral
Value
WriteCommand
ReadCommand
DoNotCheck
Enum: MessageType
Value
Error
Warning
Information
Enum: RegisterAccessType
Value
ReadOnly
ReadAndWrite
Enum: SlaveSelection
Value
UseRealIC
UseICSimulation
Functions
Function: ActivateCRC
Description: this API is used to enable/disbale the CRC (By default it is disabled)
Parameters:
NameType EncodedType
Enablebooleanbool
Function: ConfigIRQ
Description: to Enable/Disable IRQ , if disabled the recording will not be available and core will run in silent mode

---

# Page 683

Parameters:
NameType EncodedType
Enablebooleanbool
Function: ConfigRegister_Event
Description: this API is used to fire the event ReadRegister for a specific register, (ConfigIRQ API Must be enabled)
Parameters:
Name Type EncodedTypeFormat
Enable boolean bool
Register_Addressint uint16 hex
CommandType CommandTypeint -
Function: ConfigSpiParameters
Description: to set the clock polarity and clock phase of the SPI clock
Parameters:
Name Type EncodedType
ClockPolaritybooleanbool
ClockPhasebooleanbool
Function: CorruptCRC
Description: this API is used to corrupt CRC (if enable then CRC will be Corrupted - by default it is false)
Parameters:
NameType EncodedType
Enablebooleanbool
Function: CorruptCrcSpecialReg
Description: this API is used to corrupt CRC For Specifi Register Only
Parameters:
Name Type EncodedTypeFormat
Enable booleanbool
RegisterAddressint uint16 hex
Function: ReadFromSlaveRegisters
Description: read data from specific slave (VideoProcessorUnit) register
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
Function: RecodringCheckGeneralDataWithIndex
Description: this API is used to the whole frame content with the index
Parameters:
Name Type EncodedType
Index int int16
CommandTypeGeneralCommandTypeGeneralint
CommandByte int int16
RegisterAddress int int16
RegisterData int int16
Crc int int16
EnableWarrningMsgs boolean bool
EnableErrorMsgs boolean bool
Function: RecordingCheckTimeBetweenTwoIndexes
Description: this API is used to check timing between two indexes entered by the user
Parameters:
Name TypeEncodedTypeUnit
Index1 int int16
Index2 int int16
MinTimeDifferenceInUsint uint32 µs
MaxTimeDifferenceinUsint uint32 µs
Function: RecordingReadAll
Description: Reads all the values from the recording.

---

# Page 684

Function: RecordingStart
Description: Activates the logging of the commands/replies, (ConfigIRQ API Must be enabled)
Function: RecordingStop
Description: Disable the logging of the commands/replies of the StepperMotor
Function: RecordingTestNoOfIndexes
Description: this API is used to compare between indexes number versus input number by the user
Parameters:
Name TypeEncodedType
NoOfIndexesint uint32
Function: RegisterPeriodicCheck
Description: to periodic check every T_period [ms] for the register address if its value is incremented by 1 each time
Parameters:
Name Type EncodedTypeFormat
Enable boolean bool
RegisterAddressint uint16 hex
Period int uint32
MessageType MessageTypeint -
Function: ResetSimulation
Description: this API is reset the stepperMotor and initialize all registers to zeros , please call it after ECU turnOff
Function: SelectSlave
Description: to select whether the real VideoProcessorUnit is connected or using the Caslte simulation of it
Parameters:
Name Type EncodedType
SlaveSelectionSlaveSelectionint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SuspendOverWrite
Description: this API is used to suspend writing from the ECU
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SuspendOverWriteSpecific
Description: this API is used to suspend writing in specific register address from the ECU
Parameters:
Name Type EncodedTypeFormat
Enable booleanbool
RegisterAddress0int uint16 hex
RegisterAddress1int uint16 hex
RegisterAddress2int uint16 hex
RegisterAddress3int uint16 hex
Function: TestSlaveRegister
Description: test received data with user input and id not equal error message will appear
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex

---

# Page 685

Data int uint8 hex
Function: WriteIntoSlaveRegisters
Description: write data into specific slave (VideoProcessorUnit) register
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
Data int uint8 hex
back to interface definition
Messages
Message: CheckSlaveData
Description: this message will be shown up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
SlaveRxData int uint32 hex
UserInputDataint uint32 hex
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Recodring_CheckGeneralDataWithIndex
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeFormat
Index int int16
ActualCommandByte int uint8 hex
ExpectedCommandByte int uint8 hex
CommandTypeGeneral CommandTypeGeneralint -
CommandTypeGeneral CommandTypeGeneralint -
ActualRegisterAddress int uint16 hex
ExpectedRegisterAddressint uint16 hex
ActualRegisterData int uint8 hex
ExpectedRegisterData int uint8 hex
ActualCrc int uint8 hex
ExpectedCrc int uint8 hex
Message: RecordedData
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeUnitFormat
index int int16
CommandByte int uint8 hex
CommandType CommandTypeint - -
RegisterAddressint uint16 hex
RegisterData int uint8 hex
Crc int uint8 hex
NoOfFrameBytesint uint16
DataByteIndex int uint16
TimeStampInUsint uint32 µs
TimeDiffSince int uint32 µs
Message: Recording_ArrayFull
Description: Notifies to the user that the array used for the log of the StepperMotor is full. And that it is not logging
anymore. It shall be emptied
Message: Recording_CheckTimeBetweenTwoIndexes
Description: this message is to compare number of recorded frames versus a user input number
Parameters:
Name TypeEncodedTypeUnit
int int16

---

# Page 686

Index1
Index2 int int16
TimeDifferenceInUs int uint32 µs
MinTimeExpectedInUsint uint32 µs
MaxTimeExpectedInUsint uint32 µs
Message: Recording_InvalidIndex
Description: Notifies to the user that the index to read (requested by the user) is higher than the number of data recorded
Parameters:
Name TypeEncodedType
Index int int16
NumberOfSamplesint int16
Message: Recording_TestNoOfIndexes
Description: this message is to compare number of recorded indexes versus a user input number
Parameters:
Name TypeEncodedType
EnteredNumberint int16
ActualNumberint int16
Message: RegisterData
Description: this message will shoud up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint32
RegisterData int uint32 hex
back to interface definition
Events
Event: WriteFrameReceived
Description: This event fires after Recieving Write Frame on SPI
Event: ReadFrameReceived
Description: This event fires after Recieving Read Frame on SPI
Event: ReadRegister
Description: This event fires after Recieving Read Frame with register address Set by "ConfigRegister_Event" API on SPI
bus Coming from the ECU
Event: WriteRegister
Description: This event fires after Recieving Write Frame with register address Set by "ConfigRegister_Event" API on SPI
bus Coming from the ECU
back to interface definition
Interface: LCD_TFT_Unit  extends _Object
Description: Interface for the SPI communication between LCD_TFT_Unit (Simulated by castle) and MicroContoller
Enumerations
CommandType
CommandTypeGeneral
RegisterAccessType
SlaveSelection
Functions
ConfigIRQ
ConfigSpiParameters
ReadFromSlaveRegisters
RecodringCheckGeneralDataWithIndex
RecordingCheckTimeBetweenTwoIndexes
RecordingReadAll
RecordingStart
RecordingStop
RecordingTestNoOfIndexes
ResetSimulation
SelectSlave

---

# Page 687

SetUserTag
TestSlaveRegister
WriteIntoSlaveRegisters
Messages
CheckSlaveData
GeneralMessage
Recodring_CheckGeneralDataWithIndex
RecordedData
Recording_ArrayFull
Recording_CheckTimeBetweenTwoIndexes
Recording_InvalidIndex
Recording_TestNoOfIndexes
RegisterData
Events
WriteFrameReceived
ReadFrameReceived
Objects
Enumerations
Enum: CommandType
Value
WriteCommand
ReadCommand
Enum: CommandTypeGeneral
Value
WriteCommand
ReadCommand
DoNotCheck
Enum: RegisterAccessType
Value
ReadOnly
ReadAndWrite
Enum: SlaveSelection
Value
UseRealIC
UseICSimulation
Functions
Function: ConfigIRQ
Description: to Enable/Disable IRQ , if disabled the recording will not be available and core will run in silent mode
Parameters:
NameType EncodedType
Enablebooleanbool
Function: ConfigSpiParameters
Description: to set the clock polarity and clock phase of the SPI clock
Parameters:
Name Type EncodedType
ClockPolaritybooleanbool
ClockPhasebooleanbool
Function: ReadFromSlaveRegisters
Description: read data from specific slave (LCD_TFT_Unit) register
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
Function: RecodringCheckGeneralDataWithIndex
Description: this API is used to the whole frame content with the index
Parameters:

---

# Page 688

Name Type EncodedType
Index int int16
CommandTypeGeneralCommandTypeGeneralint
CommandByte int int16
RegisterAddress int int16
RegisterData int int16
EnableWarrningMsgs boolean bool
EnableErrorMsgs boolean bool
Function: RecordingCheckTimeBetweenTwoIndexes
Description: this API is used to check timing between two indexes entered by the user
Parameters:
Name TypeEncodedTypeUnit
Index1 int int16
Index2 int int16
MinTimeDifferenceInUsint uint32 µs
MaxTimeDifferenceinUsint uint32 µs
Function: RecordingReadAll
Description: Reads all the values from the recording.
Function: RecordingStart
Description: Activates the logging of the commands/replies of the StepperMotor
Function: RecordingStop
Description: Disable the logging of the commands/replies of the StepperMotor
Function: RecordingTestNoOfIndexes
Description: this API is used to compare between indexes number versus input number by the user
Parameters:
Name TypeEncodedType
NoOfIndexesint uint32
Function: ResetSimulation
Description: this API is reset the stepperMotor and initialize all registers to zeros , please call it after ECU turnOff
Function: SelectSlave
Description: to select whether the real LCD_TFT_Unit is connected or using the Caslte simulation of it
Parameters:
Name Type EncodedType
SlaveSelectionSlaveSelectionint
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: TestSlaveRegister
Description: test received data with user input and id not equal error message will appear
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
Data int uint8 hex
Function: WriteIntoSlaveRegisters
Description: write data into specific slave (LCD_TFT_Unit) register
Parameters:
Name TypeEncodedTypeFormat

---

# Page 689

RegisterAddressint uint16 hex
Data int uint8 hex
back to interface definition
Messages
Message: CheckSlaveData
Description: this message will be shown up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
SlaveRxData int uint32 hex
UserInputDataint uint32 hex
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: Recodring_CheckGeneralDataWithIndex
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeFormat
Index int int16
ActualCommandByte int uint8 hex
ExpectedCommandByte int uint8 hex
CommandTypeGeneral CommandTypeGeneralint -
CommandTypeGeneral CommandTypeGeneralint -
ActualRegisterAddress int uint16 hex
ExpectedRegisterAddressint uint16 hex
ActualRegisterData int uint8 hex
ExpectedRegisterData int uint8 hex
Message: RecordedData
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeUnitFormat
index int int16
CommandByte int uint8 hex
CommandType CommandTypeint - -
RegisterAddressint uint16 hex
RegisterData int uint8 hex
NoOfFrameBytesint uint16
DataByteIndex int uint16
TimeStampInUsint uint32 µs
TimeDiffSince int uint32 µs
Message: Recording_ArrayFull
Description: Notifies to the user that the array used for the log of the StepperMotor is full. And that it is not logging
anymore. It shall be emptied
Message: Recording_CheckTimeBetweenTwoIndexes
Description: this message is to compare number of recorded frames versus a user input number
Parameters:
Name TypeEncodedTypeUnit
Index1 int int16
Index2 int int16
TimeDifferenceInUs int uint32 µs
MinTimeExpectedInUsint uint32 µs
MaxTimeExpectedInUsint uint32 µs
Message: Recording_InvalidIndex
Description: Notifies to the user that the index to read (requested by the user) is higher than the number of data recorded
Parameters:
Name TypeEncodedType

---

# Page 690

Index int int16
NumberOfSamplesint int16
Message: Recording_TestNoOfIndexes
Description: this message is to compare number of recorded indexes versus a user input number
Parameters:
Name TypeEncodedType
EnteredNumberint int16
ActualNumberint int16
Message: RegisterData
Description: this message will shoud up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint32
RegisterData int uint32 hex
back to interface definition
Events
Event: WriteFrameReceived
Description: This event fires after Recieving Write Frame on SPI
Event: ReadFrameReceived
Description: This event fires after Recieving Read Frame on SPI
back to interface definition
Interface: Backlight_Feature  extends _Object
Enumerations
GeneratedSignalMode
SignalSelection
SyncMode
Functions
FB_gen_configurrations
FB_gen_number_of_repetetion
FB_gen_run_continuous
FB_pwm_configuration
SetUserTag
Messages
GeneralMessage
Enumerations
Enum: GeneratedSignalMode
Value
FOLLOW_MODE
INVERTED_MODE
ALWAYS_HIGH_MODE
ALWAYS_LOW_MODE
PWM_GENERATED_MODE
INVERSE_PWM_GENERATED_MODE
OVERHEAD_MODE
SYNCHED_T_ON
DELAYED_T_ON
SYNCHED_DELAY
DELAYED_OVERHEAD_MODE
Enum: SignalSelection
Value
BKL_PWMI_MC
Enum: SyncMode
Value
NO_SYNC
SYNC_WITH_RISING_EDGE
SYNC_WITH_FALLING_EDGE

---

# Page 691

Functions
Function: FB_gen_configurrations
Description: Parameters configuration for SPI_19_FB_BKL_GEN (delayToFeedBackGen is in NS), for more info:
https://docs.google.com/document/d/1yyBTM20vDPX_qW1zgLjrmImOme-d0_xnyzvq9MDEpBk/edit?usp=sharing
Parameters:
Name Type EncodedType
SignalSelection SignalSelection int
SyncMode SyncMode int
GeneratedSignalModeGeneratedSignalModeint
delayToFeedBackGenint uint32
customTON int uint32
Function: FB_gen_number_of_repetetion
Description: if FB_gen_run_continuous is FALSE , then the generated feedback will be run with user input configurations
for "NoOfRepetetion" times then it will be run with it's default configurations, until the user call any of these 2 APIs once
again (FB_gen_configurrations or FB_gen_number_of_repetetion) , if this value = -1 then it will run continuously with user
input data/configurations
Parameters:
Name TypeEncodedType
NoOfRepetetionlongint64
Function: FB_gen_run_continuous
Description: if this parameter is true that means the whole configurations will be input by user will be negelected and the
feedback will run with it default configurations (Selection_Line : BKL_PWMI_MC , Sync_Mode :
SYNC_WITH_RISING_EDGE , GeneratedSignalMode : FOLLOW_MODE , DelayToGenFB : Minimum (around 80ns) ). if
this parameter is false this it will execute x time (defined by API : ) the user configurations input by the user through this
API (FB_gen_configurrations), after these x time the generated feedback signal will run with it's default configuration untill
the user call any of theses 2 APIs (FB_gen_configurrations or FB_gen_number_of_repetetion), customTON : is the T ON
time used for these modes : OVERHEAD_MODE, SYNCHED_T_ON and DELAYED_T_ON for SYNCHED_DELAY we will
use delayToFeedBackGen.
Parameters:
NameType EncodedType
Enablebooleanbool
Function: FB_pwm_configuration
Description: configure customer PWM for SPI_19_FB_BKL_GEN in case of GeneratedSignalMode is
PWM_GENERATED_MODE or INVERSE_PWM_GENERATED_MODE (timings are in NS), for more info:
https://docs.google.com/document/d/1yyBTM20vDPX_qW1zgLjrmImOme-d0_xnyzvq9MDEpBk/edit?usp=sharing
Parameters:
Name TypeEncodedType
TimeON int uint32
TimeTOTALint uint32
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: IicSlaveHw  extends _Object

---

# Page 692

Description: Interface for the IIC communication between Deserializer IC (Simulated by castle) and MicroContoller
Enumerations
BackgroundEventCmdType
CommandType
CommandTypeGeneral
Enable
FPGA_DecoderType
RecordingConfig
RegisterAccessType
RegisterAddressByteMode
SlaveSelection
UndefinedRegistersMsgConfig
Functions
BackgroundCheck_Event
Check_IfRegisterIsDefined
ConfigDeviceAddressFilter
ConfigIRQ
Configure_CRC
Configure_RegisterAddressByteMode
Configure_SQC
CorruptCRC
GetNumberOfDefinedRegisters
ReadCoreFlags
ReadRegisters
RecodringCheckGeneralDataWithIndex
RecordingCheckDeviceAddress
RecordingCheckNoOfEvents
RecordingCheckRegAddrCount
RecordingCheckRegAddrCountWithData
RecordingCheckTimeBetweenTwoIndexes
RecordingReadAll
RecordingStart
RecordingStop
RecordingTestNoOfFrames
RecordingTestNoOfIndexes
Recording_Configurations
Recording_RemoveData
RegisterAccessCheck
ResetIicSlaveHwSimulation
SelectSlave
SetRegisterAccess
SetSQC
SetSpecificSenorType
SetUserTag
SuspendOverwrite
TestRegister
UndefinedRegistersMsg_Configuration
Write2_ArrayFiller
Write2_AttachRegister
Write2_ClearData
WriteRegisters
allowUserSetUndefinedRegisters
Messages
BackgroundCheck_GoldenRegisters
CheckSlaveData
FrameNumber
GeneralMessage
IndexNumber
Recodring_CheckGeneralDataWithIndex
Recodring_CheckWithIndex
RecordedData
RecordingInvalidIndex
Recording_ArrayFull
Recording_CheckNoOfEvents
Recording_CheckRegAddrCount
Recording_CheckRegAddrCountWithData
Recording_CheckRegWithIndex
Recording_CheckRegWithIndexAndData
RegisterData

---

# Page 693

TimeBetweenTwoIndexes
Events
WriteFrameReceived
ReadFrameReceived
BackgroundCheckEvent
Objects
Enumerations
Enum: BackgroundEventCmdType
Value
WriteCommand
ReadCommand
ReadOrWrite
Enum: CommandType
Value
WriteCommand
ReadCommand
Enum: CommandTypeGeneral
Value
WriteCommand
ReadCommand
DoNotCheck
Enum: Enable
Value
Enable
Disable
Enum: FPGA_DecoderType
Value
Main_Decoder
API_Write2_Decoder
Enum: RecordingConfig
Value
LogArray_1
LogArray_2
Enum: RegisterAccessType
Value
ReadOnly
ReadAndWrite
Enum: RegisterAddressByteMode
Value
OneByte
TwoBytes
Enum: SlaveSelection
Value
UseRealIC
UseICSimulation
Enum: UndefinedRegistersMsgConfig
Value
ErrorMessage
WarningMessage
Disable
Functions
Function: BackgroundCheck_Event
Description: this API is to attach a specific register address with specifi command type to an event to be checked in the
backgorund
Parameters:

---

# Page 694

Name Type EncodedTypeFormat
Enable boolean bool
Register_Addressint uint16 hex
CommandType BackgroundEventCmdTypeint -
Function: Check_IfRegisterIsDefined
Description: this API is to check if a register with specific address is defined in FPGA main decoder or not
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
Function: ConfigDeviceAddressFilter
Description: This API is to enable/disable the DeviceAddress Filter (if enable that means all frames which is different from
the device address set by the user through "" API will be neglected from the logic and the tracer as well
Parameters:
Name Type EncodedTypeFormat
Enable booleanbool
DeviceAddressint uint8 hex
Function: ConfigIRQ
Description: to Enable/Disable IRQ , if disabled the recording will not be available and core will run in silent mode
Parameters:
NameType EncodedType
Enablebooleanbool
Function: Configure_CRC
Description: This API is to Configure SQC, EnableSupport Shall be enabled if the ECU expected to activate the CRC (false
by default), "RegisterAddress" : is the reg address that the ecu shall write crc enable flag inside it, "BitIndex" : is the bit
index that the ECU shall activate to enable the crc
Parameters:
Name Type EncodedTypeFormat
EnableSupportCRCEnableint -
RegisterAddress int uint16 hex
BitIndex int uint8
Function: Configure_RegisterAddressByteMode
Description: this APIs is to configure if the register address working on 2_bytes (MSB and LSB) or just 1_byte (By Default :
OneByteMode)
Parameters:
NameType EncodedType
ModeRegisterAddressByteModeint
Function: Configure_SQC
Description: This API is to Configure SQC, EnableSupport Shall be enabled if the ECU expected to activate the SQC (false
by default), "RegisterAddress" : is the reg address that the ecu shall write sqc enable flag inside it, "BitIndex" : is the bit
index that the ECU shall activate to enable the sqc
Parameters:
Name Type EncodedTypeFormat
EnableSupportSQCEnableint -
RegisterAddress int uint16 hex
BitIndex int uint8
Function: CorruptCRC
Description: This API is to corrupt CRC or not (it will be correct again when you disable this API)
Parameters:
Name Type EncodedType
isEnabledbooleanbool
Function: GetNumberOfDefinedRegisters
Description: this API is to check number of defined registers in FPGA_main_decoder or API_Write2_Decoder
Parameters:

---

# Page 695

Name Type EncodedType
FPGA_DecoderTypeFPGA_DecoderTypeint
Function: ReadCoreFlags
Description: to read and print core flags
Function: ReadRegisters
Description: read data from specific slave (Deserializer) register
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
Function: RecodringCheckGeneralDataWithIndex
Description: this API is used to the whole frame content with the index
Parameters:
Name Type EncodedTypeFormat
Index int int16
FrameIndex int int32
NumberOfDataBytes int int32
DeviceAddress int int32 hex
CommandTypeGeneralCommandTypeGeneralint -
RegisterAddress int int32 hex
RegisterData int int16 hex
MessageCounter int int32 hex
CRC int int16 hex
EnableWarrningMsgs boolean bool
EnableErrorMsgs boolean bool
Function: RecordingCheckDeviceAddress
Description: this API is used to check the devices address over the whole indexes to be equal the valeu entered by user
Parameters:
Name TypeEncodedTypeFormat
DeviceAddressint uint8 hex
Function: RecordingCheckNoOfEvents
Description: this API is used to check the number of events per record versus the expected one by the user
Parameters:
Name Type EncodedType
CommandType CommandTypeint
ExpectedNoOfEventsint uint32
Function: RecordingCheckRegAddrCount
Description: this API is used to check how many times this register addr with specifi type is occured versus expected count
Parameters:
Name Type EncodedTypeFormat
CommandTypeCommandTypeint -
RegisterAddressint uint16 hex
ExpectedCountint uint32
Function: RecordingCheckRegAddrCountWithData
Description: this API is used to check how many times this register addr with specifi type and data is occured versus
expected count
Parameters:
Name Type EncodedTypeFormat
CommandTypeCommandTypeint -
RegisterAddressint uint16 hex
RegData int uint32 hex
ExpectedCountint uint32
Function: RecordingCheckTimeBetweenTwoIndexes
Description: this API is used to check timing between two indexes entered by the user
Parameters:

---

# Page 696

Name TypeEncodedTypeUnit
Index1 int int16
Index2 int int16
MinTimeDifferenceInUsint uint32 µs
MaxTimeDifferenceinUsint uint32 µs
Function: RecordingReadAll
Description: Reads all the values from the recording.
Function: RecordingStart
Description: Activates the logging of the commands/replies of the Deserializer
Function: RecordingStop
Description: Disable the logging of the commands/replies of the Deserializer
Function: RecordingTestNoOfFrames
Description: this API is used to compare between number of recorded frames and input number by the user
Parameters:
Name TypeEncodedType
NoOfFramesint uint32
Function: RecordingTestNoOfIndexes
Description: this API is used to compare between indexes number versus input number by the user
Parameters:
Name TypeEncodedType
NoOfIndexesint uint32
Function: Recording_Configurations
Description: This API is to decide which LogArray that all Recording APIs will work on (by default LogArray_1 "orginal one")
Parameters:
Name Type EncodedType
RecordingConfigRecordingConfigint
Function: Recording_RemoveData
Description: this API is to select data that needed to be removed from LogArray_1 and save the rest into LogArray_2
Parameters:
Name TypeEncodedTypeFormat
Register_Addressint[]uint16 hex
CommandType int[]uint8 utf8
Function: RegisterAccessCheck
Description: this API is used to Enable/Disable RegisterAccessCheck
Parameters:
NameType EncodedType
Enablebooleanbool
Function: ResetIicSlaveHwSimulation
Description: this API is reset the deserializer and initialize all registers to zeros , please call it after ECU turnOff
Function: SelectSlave
Description: to select whether the real Deserializer IC is connected or using the Caslte simulation of it
Parameters:
Name Type EncodedType
SlaveSelectionSlaveSelectionint
Function: SetRegisterAccess
Description: this API is used to set the Register Access type (all registers are ReadAndWrite by default), you have to
activate "RegisterAccessCheck" API
Parameters:
Name Type EncodedTypeFormat

---

# Page 697

RegisterAddress int uint16 hex
RegisterAccessTypeRegisterAccessTypeint -
Function: SetSQC
Description: this API is used to set the SQC Value
Parameters:
NameTypeEncodedTypeFormat
Valueint uint32 hex
Function: SetSpecificSenorType
Description: This API is to Configure the sensor type and to run the project_specific_logic
Parameters:
NameType EncodedType
Enablebooleanbool
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SuspendOverwrite
Description: this API is to suspend registers overwrite from ECU prespective , if true ECU will not write in Register , if false
ECU will overwrite
Parameters:
Name Type EncodedType
Suspendbooleanbool
Function: TestRegister
Description: test received data with user input and id not equal error message will appear
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressToCheckint uint16 hex
Data int uint32 hex
Function: UndefinedRegistersMsg_Configuration
Description: this API is to select message severity for the undefined registers messages to be Warning/Error or disbaled
Parameters:
Name Type EncodedType
MessageTypeUndefinedRegistersMsgConfigint
Function: Write2_ArrayFiller
Description: This API is to fill the API_WRITE_2 array with the user input data
Parameters:
Name TypeEncodedTypeFormat
ArrayIndexint uint8
Data int[]uint8 hex
Function: Write2_AttachRegister
Description: This API is to attach a required register to a certain API_WRITE_2 array index
Parameters:
Name Type EncodedTypeFormat
Enable booleanbool
RegisterAddressint uint16 hex
ArrayIndex int uint8
Function: Write2_ClearData
Description: This API is to clear all data written to API registers in FPGA (Reset It)

---

# Page 698

Function: WriteRegisters
Description: write data into specific slave (Deserializer) register
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
Data int uint32 hex
Function: allowUserSetUndefinedRegisters
Description: This API is to the user to set any registers even if it is now defined in the FPGA decoder
Parameters:
NameType EncodedType
Enablebooleanbool
back to interface definition
Messages
Message: BackgroundCheck_GoldenRegisters
Description: this message will shown up in case of one of the actual parameter on the bus in different from the required
data by the user on background check
Parameters:
Name Type EncodedTypeUnitFormat
RegisterAddress int uint16 hex
CommandType CommandTypeint - -
CommandType CommandTypeint - -
ActualRegisterData int uint8 hex
ExpectedRegisterData int uint8 hex
MinRequiredPeriodicTimeInUsint uint32 µs
MaxRequiredPeriodicTimeInUsint uint32 µs
ExactPeriodicTime int uint32 µs
Message: CheckSlaveData
Description: this message will should up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
SlaveRxData int uint32 hex
UserInputDataint uint32 hex
Message: FrameNumber
Description: this message is to compare number of recorded frames versus a user input number
Parameters:
Name TypeEncodedType
EnteredNumberint uint32
ActualNumberint uint32
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: IndexNumber
Description: this message is to compare number of recorded indexes versus a user input number
Parameters:
Name TypeEncodedType
EnteredNumberint uint32
ActualNumberint uint32
Message: Recodring_CheckGeneralDataWithIndex
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeUnitFormat
Indexint int16

---

# Page 699

RequiredFrameIndex int uint16
ActualFrameIndex int uint16
RequiredNumberOfDataBytesint uint16
ActualNumberOfDataBytes int uint16
RequiredDeviceAddress int uint8 hex
ActualDeviceAddress int uint8 hex
CommandTypeGeneral CommandTypeGeneralint - -
CommandTypeGeneral CommandTypeGeneralint - -
RequiredRegisterAddress int uint16 hex
ActualRegisterAddress int uint16 hex
RequiredRegisterData int uint8 hex
ActualRegisterData int uint8 hex
RequiredMessageCounter int uint16 hex
ActualMessageCounter int uint16 hex
RequiredCRC int uint8 hex
ActualCRC int uint8 hex
TimeStampInFPGA_Us int uint32 µs
Message: Recodring_CheckWithIndex
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeFormat
Index int int16
FrameIndex int uint16
ActualFrameIndex int uint16
NumberOfDataBytes int uint16
ActualNumberOfDataBytesint uint16
DeviceAddress int uint8 hex
ActualDeviceAddress int uint8 hex
CommandType CommandTypeint -
CommandType CommandTypeint -
RegisterAddress int uint16 hex
ActualRegisterAddress int uint16 hex
RegisterData int uint8 hex
ActualRegisterData int uint8 hex
MessageCounter int uint16 hex
ActualMessageCounter int uint16 hex
CRC int uint8 hex
ActualCRC int uint8 hex
Message: RecordedData
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeUnitFormat
Index int int16
FrameIndex int uint16
NumberOfDataBytes int uint16
DeviceAddress int uint8 hex
CommandType CommandTypeint - -
RegisterAddress int uint16 hex
RegisterData int uint8 hex
MessageCounter int uint16 hex
CRC int uint8 hex
TimeStampInFPGA_Usint uint32 µs
Message: RecordingInvalidIndex
Description: Notifies to the user that the index to read (requested by the user) is higher than the number of data recorded
Parameters:
Name TypeEncodedType
RequestedIndex int int16
NumberOfSamplesint uint16
Message: Recording_ArrayFull
Description: Notifies to the user that the array used for the log of the transponder is full. And that it is not logging anymore.
It shall be emptied

---

# Page 700

Message: Recording_CheckNoOfEvents
Description: this message is to compare between requested number of specific event occurances versus the actual one
Parameters:
Name Type EncodedType
CommandType CommandTypeint
ActualNumber int uint32
ExpectedNumberint uint32
Message: Recording_CheckRegAddrCount
Description: this message is to compare between requested number of specific event occurances versus the actual one
Parameters:
Name Type EncodedTypeFormat
CommandTypeCommandTypeint -
RegisterAddressint uint16 hex
ExpectedCountint uint32
ActualCounts int uint32
Message: Recording_CheckRegAddrCountWithData
Description: this message is to compare between requested number of specific event occurances versus the actual one
Parameters:
Name Type EncodedTypeFormat
CommandTypeCommandTypeint -
RegisterAddressint uint16 hex
RegData int uint32 hex
ExpectedCountint uint32
ActualCounts int uint32
Message: Recording_CheckRegWithIndex
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeFormat
Index int int16
RequiredRegisterAddressint uint16 hex
ExpectedRegisterAddressint uint16 hex
CommandType CommandTypeint -
CommandType CommandTypeint -
Message: Recording_CheckRegWithIndexAndData
Description: Gives back the data contained in the Recording array. Index = 0 means the first value recorded.
Parameters:
Name Type EncodedTypeFormat
Index int int16
RequiredRegisterAddressint uint16 hex
ExpectedRegisterAddressint uint16 hex
RequiredRegData int uint8 hex
ExpectedRegData int uint8 hex
CommandType CommandTypeint -
CommandType CommandTypeint -
Message: RegisterData
Description: this message will shown up in case of data read from slave equal the data read from the user
Parameters:
Name TypeEncodedTypeFormat
RegisterAddressint uint16 hex
RegisterData int uint32 hex
Message: TimeBetweenTwoIndexes
Description: this message is to compare number of recorded frames versus a user input number
Parameters:
Name TypeEncodedTypeUnit
Index1int int16

---

# Page 701

Index2 int int16
TimeDifferenceInUs int uint32 µs
MinTimeExpectedInUsint uint32 µs
MaxTimeExpectedInUsint uint32 µs
back to interface definition
Events
Event: WriteFrameReceived
Description: This event happens after Recieving Write Frame on I2C Line
Event: ReadFrameReceived
Description: This event happens after Recieving Read Frame on I2C Line
Event: BackgroundCheckEvent
Description: This event happens after being attached with any register from this API "BackgroundCheck_Event"
back to interface definition
Interface: EthernetFilter  extends _Object
Description: Module for Filtering UDP Packets based on Source/Dest IP Addresses and ports
Functions
AddEntry
DisableFiltering
EnableFiltering
ModifyEntry
SetUserTag
Messages
GeneralMessage
Functions
Function: AddEntry
Description: Writes an Entry that shall be black list checked when filtering is enabled
Parameters:
Name Type EncodedTypeFixedlength
VlanSupportedbooleanbool -
VlanId int uint16 -
isIpV6 booleanbool -
SourceIP int[] uint32 4
DestinationIP int[] uint32 4
SourcePort int uint16 -
DestinationPortint uint16 -
Function: DisableFiltering
Description: Stops Filtering Action
Function: EnableFiltering
Description: Starts Filtering Action
Function: ModifyEntry
Description: Writes an Entry that shall be black list checked when filtering is enabled
Parameters:
Name Type EncodedTypeFixedlength
VlanSupportedbooleanbool -
VlanId int uint16 -
isIpV6 booleanbool -
entryIdx int uint8 -
SourceIP int[] uint32 4
DestinationIP int[] uint32 4
SourcePort int uint16 -
DestinationPortint uint16 -
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user

---

# Page 702

tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: Hod  extends _Object
Description: Interface for the Hands Off Detection.
Enumerations
FREQUENCY
Functions
SetAllRegisters
SetFrequency
SetIandQRegisters
SetIandQRegistersFreq100
SetIandQRegistersFreq125
SetIandQRegistersFreq45
SetIandQRegistersFreq71
SetRegister_ADCTL
SetRegister_CBG
SetRegister_EDIV
SetRegister_FREQ_SEL
SetRegister_PGA
SetRegister_SEN_MODE
SetRegister_TXV
SetStatusAdc
SetUserTag
SwitchMasterToEcuInput
SwitchMasterToSimInput
SwitchSlaveToEcuInput
SwitchSlaveToSimInput
Messages
GeneralMessage
Enumerations
Enum: FREQUENCY
Value
_45
_71
_100
_125
Functions
Function: SetAllRegisters
Description: Sets the values of all the registers to Simulate (SensorId, Status ADC, I and Q)
Parameters:
Name TypeEncodedTypeFormatFixedlength
SensorId int uint16 hex -
StatusAdc int uint16 hex -
MultipleRegint[]uint16 hex 10
MultipleRegint[]uint16 hex 10
Function: SetFrequency
Description: Sets the current Frequency to be simulated

---

# Page 703

Parameters:
NameType EncodedType
Freq FREQUENCYint
Function: SetIandQRegisters
Description: Sets the values of all the registers to Simulate (SensorId, Status ADC, I and Q)
Parameters:
Name TypeEncodedTypeFormatFixedlength
MultipleRegint[]uint16 hex 10
MultipleRegint[]uint16 hex 10
Function: SetIandQRegistersFreq100
Description: Sets the values of registers to Simulate I and Q for 100 KHz
Parameters:
Name TypeEncodedTypeFormatFixedlength
MultipleRegint[]uint16 hex 10
MultipleRegint[]uint16 hex 10
Function: SetIandQRegistersFreq125
Description: Sets the values of registers to Simulate I and Q for 125 KHz
Parameters:
Name TypeEncodedTypeFormatFixedlength
MultipleRegint[]uint16 hex 10
MultipleRegint[]uint16 hex 10
Function: SetIandQRegistersFreq45
Description: Sets the values of registers to Simulate I and Q for 45.45 KHz
Parameters:
Name TypeEncodedTypeFormatFixedlength
MultipleRegint[]uint16 hex 10
MultipleRegint[]uint16 hex 10
Function: SetIandQRegistersFreq71
Description: Sets the values of registers to Simulate I and Q for 71.4 KHz
Parameters:
Name TypeEncodedTypeFormatFixedlength
MultipleRegint[]uint16 hex 10
MultipleRegint[]uint16 hex 10
Function: SetRegister_ADCTL
Description: Sets the value of Controls the ADC converter cycles register (0x2A)
Parameters:
Name TypeEncodedTypeFormat
ValueADCTLint uint16 hex
Function: SetRegister_CBG
Description: Sets the value of Current Buffer Gain Selection register (0x25)
Parameters:
Name TypeEncodedTypeFormat
ValueCBGint uint16 hex
Function: SetRegister_EDIV
Description: Sets the value of System CLK Divider Selection register (0x20)
Parameters:
Name TypeEncodedTypeFormat
ValueEDIVint uint16 hex
Function: SetRegister_FREQ_SEL
Description: Sets the value of Frequency Selection register (0x21)
Parameters:

---

# Page 704

Name TypeEncodedTypeFormat
ValueFreqSelint uint16 hex
Function: SetRegister_PGA
Description: Sets the value of IQ PGA Gain Selection register (0x27)
Parameters:
Name TypeEncodedTypeFormat
ValuePGAint uint16 hex
Function: SetRegister_SEN_MODE
Description: Sets the value of MUX control for the connected SENx Pins register (0x23)
Parameters:
Name TypeEncodedTypeFormat
ValueSenModeint uint16 hex
Function: SetRegister_TXV
Description: Sets the value of Sensor the Driver Voltage Selection register (0x22)
Parameters:
Name TypeEncodedTypeFormat
ValueTXVint uint16 hex
Function: SetStatusAdc
Description: Sets the values of all the registers to Simulate (SensorId, Status ADC, I and Q)
Parameters:
Name TypeEncodedTypeFormat
StatusAdcint uint16 hex
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: SwitchMasterToEcuInput
Description: Configures the switch in the way that the output signals are coming from ECU
Function: SwitchMasterToSimInput
Description: Configures the switch in the way that the output signals are coming from the master (simulation)
Function: SwitchSlaveToEcuInput
Description: Configures the switch in the way that the input signals are coming from ECU
Function: SwitchSlaveToSimInput
Description: Configures the switch in the way that the input signals are coming from the slave (simulation)
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: SwsRoller  extends _Object
Description: Module for simulation SWS Roller thorugh generation a PWM signal (ChA) and another shifted version from it (ChB)
Enumerations
RollingDirection

---

# Page 705

Functions
SetUserTag
StartSwsRoller
StopSwsRoller
readBackConfigParam
Messages
ConfiguredParameters
GeneralMessage
Enumerations
Enum: RollingDirection
Value
Right
Left
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
Function: StartSwsRoller
Description: 
Purpose: 
Configures and starts SWS roller generation with the specified direction, frequency, dutyCycle, PhaseDelay and repetative
counter 
Example: 
*_ApiStartSwsRoller(Right, 500, 50, 50, 6); 
Parameters:
Name Type EncodedType Unit
DirectionRollingDirection int -
Rolling right (PWM of ChA will preceed PWM of ChB) and vice-versa for rolling left.
Frequencyint uint32 Hz
PWM Frequency of ChA
DutyCycleint uint32 %
PWM Duty Cycle of ChA (0-100).
PhaseDelayint uint32
PWM Phase Delay of ChB (0-360)
Counterint uint32
desired repetative counter for PWM cycle for ChA and ChB (as ChB is a shifter version of
ChA)
Function: StopSwsRoller
Description: 
Purpose: 
it stops the sws roller simulation immediately and to start it again you have to call "StartSwsRoller" API 
Example: 
*_ApiStopSwsRoller(); 
Function: readBackConfigParam
Description: 
Purpose: 
it reads back configured SWS Roller Parameters that have been set using "StartSwsRoller" API 
Example: 
*_ApiStopSwsRoller(); 
back to interface definition
Messages

---

# Page 706

Message: ConfiguredParameters
Description: This Message will returns the configured parameters from FPGA
Parameters:
Name TypeEncodedTypeUnit
Direction int uint32
FpgaClkFreqint uint32 Hz
Frequency int uint32 Hz
DutyCycle int uint32 %
PhaseDelayint uint32 Degree
Counter int uint32 Repetitions
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Interface: ComPcEthernet  extends _Com _ComEthernet _Object
Functions
Deinit
Init
ReportPduDlcMismatchInCom
ReportPduNotFoundInCom
SetUserTag
Messages
EthernetNetworkAlreadyInitialized
EthernetNetworkDeInitialized
EthernetNetworkHasBeenInitialized
GeneralMessage
PduDlcMismatch
PduNotFoundInCom
Functions
Function: Deinit
Description: 
Purpose: 
- Detach the selected / initialized Com Ethernet Network. 
Example: 
*_ApiDeinit() 
Function: Init
Description: 
Purpose: 
- Assign the com to the can controller and initialize it. 
- Takes long time from 6 ms to 8 ms depending on Ethernet Cluster size. 
Example: 
*_ApiInit() 
Function: ReportPduDlcMismatchInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus with a DLC (Data Length
Code) that mismatches the expected DLC defined in the COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduDlcMismatchInCom(EnmErrorLevel.ERROR) // Report as an error if a PDU is received with a mismatched
DLC. 
Parameters:

---

# Page 707

Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: ReportPduNotFoundInCom
Description: 
Purpose:
- Configures the error reporting level for when a PDU (Protocol Data Unit) is received on the bus but does not have a
matching definition in the generated COM (Communication Matrix). 
- Allows specifying whether to log this event as an INFO, WARNING, ERROR, FATAL, or not at all (NOTHING). 
Example:
*_ApiReportPduNotFoundInCom(EnmErrorLevel.WARN) // Report as a warning if a PDU is received without a COM
definition. 
Parameters:
Name Type EncodedType
ErrorLevelErrorLevel int
The desired error level for reporting. Options: NOTHING, INFO, WARN, ERROR,
FATAL.
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: EthernetNetworkAlreadyInitialized
Description: Report that this network already initialized before
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: EthernetNetworkDeInitialized
Description: Log the deinitialized ethernet network to init the new one
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: EthernetNetworkHasBeenInitialized
Description: Log the initialized ethernet network after initialization
Parameters:
Name TypeEncodedTypeFormat
NetworkNameint[]uint8 utf8
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
Message: PduDlcMismatch
Description: A pdu received on the bus with unexpected dlc.
Parameters:
Name TypeEncodedTypeFormat

---

# Page 708

Id int uint32 hex
ExpectedDlcint uint8
ObtainedDlcint uint8
Message: PduNotFoundInCom
Description: A pdu was received with no matching generated COM pdu.
Parameters:
NameTypeEncodedTypeFormat
Id int uint32 hex
Dlc int uint8
back to interface definition
Objects
Object: ServiceInstances
Name Interface
ServiceInstancesComPcEthernetServiceInstances
Object: Pdus
NameInterface
PdusComPcEthernetPdus
Object: Signals
NameInterface
SignalsComPcEthernetSignals
back to interface definition
Interface: ComPcEthernetPdus  extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: PduSignalWay_Updated
Name Interface
PduSignalWay_UpdatedComPcEthernetPduTxSignalWay_Updated
Object: PduSetVehiclePos
Name Interface
PduSetVehiclePosComPcEthernetPduTxSetVehiclePos
Object: PduSetSteeringWheelAngle
Name Interface
PduSetSteeringWheelAngleComPcEthernetPduTxSetSteeringWheelAngle

---

# Page 709

Object: PduSetSpeed
Name Interface
PduSetSpeedComPcEthernetPduTxSetSpeed
Object: PduSetTurnSignal
Name Interface
PduSetTurnSignalComPcEthernetPduTxSetTurnSignal
Object: PduSetCameraMode
Name Interface
PduSetCameraModeComPcEthernetPduTxSetCameraMode
Object: PduSetCycleCameraMode
Name Interface
PduSetCycleCameraModeComPcEthernetPduTxSetCycleCameraMode
Object: PduSetSceneStart
Name Interface
PduSetSceneStartComPcEthernetPduTxSetSceneStart
Object: PduSetSceneStop
Name Interface
PduSetSceneStopComPcEthernetPduTxSetSceneStop
Object: PduSetVehEmergencyBraking
Name Interface
PduSetVehEmergencyBrakingComPcEthernetPduTxSetVehEmergencyBraking
Object: PduSetVehGear
Name Interface
PduSetVehGearComPcEthernetPduTxSetVehGear
Object: PduLoadScene
Name Interface
PduLoadSceneComPcEthernetPduTxLoadScene
Object: PduAddXml
Name Interface
PduAddXmlComPcEthernetPduTxAddXml
Object: PduSetDoorsAngles
Name Interface
PduSetDoorsAnglesComPcEthernetPduTxSetDoorsAngles
Object: PduSetTrailerAngle
Name Interface
PduSetTrailerAngleComPcEthernetPduTxSetTrailerAngle
Object: PduSetVehiclePosD
Name Interface
PduSetVehiclePosDComPcEthernetPduTxSetVehiclePosD
Object: PduSetVehicleLoading
Name Interface
PduSetVehicleLoadingComPcEthernetPduTxSetVehicleLoading
Object: PduAdvanceSimTime
Name Interface
PduAdvanceSimTimeComPcEthernetPduTxAdvanceSimTime
Object: PduSignalWay_FSR_FSR
Name Interface
PduSignalWay_FSR_FSRComPcEthernetPduRxSignalWay_FSR_FSR
Object: PduSignalWay_FOR_FOR
Name Interface
PduSignalWay_FOR_FORComPcEthernetPduRxSignalWay_FOR_FOR

---

# Page 710

Object: PduSignalWay_FIR_FIR
Name Interface
PduSignalWay_FIR_FIRComPcEthernetPduRxSignalWay_FIR_FIR
Object: PduSignalWay_FIL_FIL
Name Interface
PduSignalWay_FIL_FILComPcEthernetPduRxSignalWay_FIL_FIL
Object: PduSignalWay_FOL_FOL
Name Interface
PduSignalWay_FOL_FOLComPcEthernetPduRxSignalWay_FOL_FOL
Object: PduSignalWay_FSL_FSL
Name Interface
PduSignalWay_FSL_FSLComPcEthernetPduRxSignalWay_FSL_FSL
Object: PduSignalWay_FSR_FOR
Name Interface
PduSignalWay_FSR_FORComPcEthernetPduRxSignalWay_FSR_FOR
Object: PduSignalWay_FOR_FSR
Name Interface
PduSignalWay_FOR_FSRComPcEthernetPduRxSignalWay_FOR_FSR
Object: PduSignalWay_FOR_FIR
Name Interface
PduSignalWay_FOR_FIRComPcEthernetPduRxSignalWay_FOR_FIR
Object: PduSignalWay_FIR_FOR
Name Interface
PduSignalWay_FIR_FORComPcEthernetPduRxSignalWay_FIR_FOR
Object: PduSignalWay_FIR_FIL
Name Interface
PduSignalWay_FIR_FILComPcEthernetPduRxSignalWay_FIR_FIL
Object: PduSignalWay_FIL_FIR
Name Interface
PduSignalWay_FIL_FIRComPcEthernetPduRxSignalWay_FIL_FIR
Object: PduSignalWay_FIL_FOL
Name Interface
PduSignalWay_FIL_FOLComPcEthernetPduRxSignalWay_FIL_FOL
Object: PduSignalWay_FOL_FIL
Name Interface
PduSignalWay_FOL_FILComPcEthernetPduRxSignalWay_FOL_FIL
Object: PduSignalWay_FOL_FSL
Name Interface
PduSignalWay_FOL_FSLComPcEthernetPduRxSignalWay_FOL_FSL
Object: PduSignalWay_FSL_FOL
Name Interface
PduSignalWay_FSL_FOLComPcEthernetPduRxSignalWay_FSL_FOL
Object: PduSignalWay_RSR_RSR
Name Interface
PduSignalWay_RSR_RSRComPcEthernetPduRxSignalWay_RSR_RSR
Object: PduSignalWay_ROR_ROR
Name Interface
PduSignalWay_ROR_RORComPcEthernetPduRxSignalWay_ROR_ROR
Object: PduSignalWay_RIR_RIR
Name Interface
PduSignalWay_RIR_RIRComPcEthernetPduRxSignalWay_RIR_RIR

---

# Page 711

Object: PduSignalWay_RIL_RIL
Name Interface
PduSignalWay_RIL_RILComPcEthernetPduRxSignalWay_RIL_RIL
Object: PduSignalWay_ROL_ROL
Name Interface
PduSignalWay_ROL_ROLComPcEthernetPduRxSignalWay_ROL_ROL
Object: PduSignalWay_RSL_RSL
Name Interface
PduSignalWay_RSL_RSLComPcEthernetPduRxSignalWay_RSL_RSL
Object: PduSignalWay_RSR_ROR
Name Interface
PduSignalWay_RSR_RORComPcEthernetPduRxSignalWay_RSR_ROR
Object: PduSignalWay_ROR_RSR
Name Interface
PduSignalWay_ROR_RSRComPcEthernetPduRxSignalWay_ROR_RSR
Object: PduSignalWay_ROR_RIR
Name Interface
PduSignalWay_ROR_RIRComPcEthernetPduRxSignalWay_ROR_RIR
Object: PduSignalWay_RIR_ROR
Name Interface
PduSignalWay_RIR_RORComPcEthernetPduRxSignalWay_RIR_ROR
Object: PduSignalWay_RIR_RIL
Name Interface
PduSignalWay_RIR_RILComPcEthernetPduRxSignalWay_RIR_RIL
Object: PduSignalWay_RIL_RIR
Name Interface
PduSignalWay_RIL_RIRComPcEthernetPduRxSignalWay_RIL_RIR
Object: PduSignalWay_RIL_ROL
Name Interface
PduSignalWay_RIL_ROLComPcEthernetPduRxSignalWay_RIL_ROL
Object: PduSignalWay_ROL_RIL
Name Interface
PduSignalWay_ROL_RILComPcEthernetPduRxSignalWay_ROL_RIL
Object: PduSignalWay_ROL_RSL
Name Interface
PduSignalWay_ROL_RSLComPcEthernetPduRxSignalWay_ROL_RSL
Object: PduSignalWay_RSL_ROL
Name Interface
PduSignalWay_RSL_ROLComPcEthernetPduRxSignalWay_RSL_ROL
Object: PduSignalWay_LRE_LRE
Name Interface
PduSignalWay_LRE_LREComPcEthernetPduRxSignalWay_LRE_LRE
Object: PduSignalWay_LRM_LRE
Name Interface
PduSignalWay_LRM_LREComPcEthernetPduRxSignalWay_LRM_LRE
Object: PduSignalWay_LRE_LRM
Name Interface
PduSignalWay_LRE_LRMComPcEthernetPduRxSignalWay_LRE_LRM
Object: PduSignalWay_LRM_LRM
Name Interface
PduSignalWay_LRM_LRMComPcEthernetPduRxSignalWay_LRM_LRM

---

# Page 712

Object: PduSignalWay_LRC_LRM
Name Interface
PduSignalWay_LRC_LRMComPcEthernetPduRxSignalWay_LRC_LRM
Object: PduSignalWay_LRM_LRC
Name Interface
PduSignalWay_LRM_LRCComPcEthernetPduRxSignalWay_LRM_LRC
Object: PduSignalWay_LRC_LRC
Name Interface
PduSignalWay_LRC_LRCComPcEthernetPduRxSignalWay_LRC_LRC
Object: PduSignalWay_LFC_LRC
Name Interface
PduSignalWay_LFC_LRCComPcEthernetPduRxSignalWay_LFC_LRC
Object: PduSignalWay_LRC_LFC
Name Interface
PduSignalWay_LRC_LFCComPcEthernetPduRxSignalWay_LRC_LFC
Object: PduSignalWay_LFC_LFC
Name Interface
PduSignalWay_LFC_LFCComPcEthernetPduRxSignalWay_LFC_LFC
Object: PduSignalWay_LFM_LFC
Name Interface
PduSignalWay_LFM_LFCComPcEthernetPduRxSignalWay_LFM_LFC
Object: PduSignalWay_LFC_LFM
Name Interface
PduSignalWay_LFC_LFMComPcEthernetPduRxSignalWay_LFC_LFM
Object: PduSignalWay_LFM_LFM
Name Interface
PduSignalWay_LFM_LFMComPcEthernetPduRxSignalWay_LFM_LFM
Object: PduSignalWay_LFE_LFM
Name Interface
PduSignalWay_LFE_LFMComPcEthernetPduRxSignalWay_LFE_LFM
Object: PduSignalWay_LFM_LFE
Name Interface
PduSignalWay_LFM_LFEComPcEthernetPduRxSignalWay_LFM_LFE
Object: PduSignalWay_LFE_LFE
Name Interface
PduSignalWay_LFE_LFEComPcEthernetPduRxSignalWay_LFE_LFE
Object: PduSignalWay_RFE_RFE
Name Interface
PduSignalWay_RFE_RFEComPcEthernetPduRxSignalWay_RFE_RFE
Object: PduSignalWay_RFM_RFE
Name Interface
PduSignalWay_RFM_RFEComPcEthernetPduRxSignalWay_RFM_RFE
Object: PduSignalWay_RFE_RFM
Name Interface
PduSignalWay_RFE_RFMComPcEthernetPduRxSignalWay_RFE_RFM
Object: PduSignalWay_RFM_RFM
Name Interface
PduSignalWay_RFM_RFMComPcEthernetPduRxSignalWay_RFM_RFM
Object: PduSignalWay_RFC_RFM
Name Interface
PduSignalWay_RFC_RFMComPcEthernetPduRxSignalWay_RFC_RFM

---

# Page 713

Object: PduSignalWay_RFM_RFC
Name Interface
PduSignalWay_RFM_RFCComPcEthernetPduRxSignalWay_RFM_RFC
Object: PduSignalWay_RFC_RFC
Name Interface
PduSignalWay_RFC_RFCComPcEthernetPduRxSignalWay_RFC_RFC
Object: PduSignalWay_RRC_RFC
Name Interface
PduSignalWay_RRC_RFCComPcEthernetPduRxSignalWay_RRC_RFC
Object: PduSignalWay_RFC_RRC
Name Interface
PduSignalWay_RFC_RRCComPcEthernetPduRxSignalWay_RFC_RRC
Object: PduSignalWay_RRC_RRC
Name Interface
PduSignalWay_RRC_RRCComPcEthernetPduRxSignalWay_RRC_RRC
Object: PduSignalWay_RRM_RRC
Name Interface
PduSignalWay_RRM_RRCComPcEthernetPduRxSignalWay_RRM_RRC
Object: PduSignalWay_RRC_RRM
Name Interface
PduSignalWay_RRC_RRMComPcEthernetPduRxSignalWay_RRC_RRM
Object: PduSignalWay_RRM_RRM
Name Interface
PduSignalWay_RRM_RRMComPcEthernetPduRxSignalWay_RRM_RRM
Object: PduSignalWay_RRE_RRM
Name Interface
PduSignalWay_RRE_RRMComPcEthernetPduRxSignalWay_RRE_RRM
Object: PduSignalWay_RRM_RRE
Name Interface
PduSignalWay_RRM_RREComPcEthernetPduRxSignalWay_RRM_RRE
Object: PduSignalWay_RRE_RRE
Name Interface
PduSignalWay_RRE_RREComPcEthernetPduRxSignalWay_RRE_RRE
Object: PduSignalWaysFinished
Name Interface
PduSignalWaysFinishedComPcEthernetPduRxSignalWaysFinished
Object: PduSimulatedInfo
Name Interface
PduSimulatedInfoComPcEthernetPduRxSimulatedInfo
Object: PduSceneCounterPdu
Name Interface
PduSceneCounterPduComPcEthernetPduRxSceneCounterPdu
Object: PduSimulated_DoorAnglesInfo
Name Interface
PduSimulated_DoorAnglesInfoComPcEthernetPduRxSimulated_DoorAnglesInfo
Object: PduSimulatedTrailer
Name Interface
PduSimulatedTrailerComPcEthernetPduRxSimulatedTrailer
back to interface definition
Interface:
ComPcEthernetSignals  extends _Object
Functions

---

# Page 714

SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Objects
Object: SigUpdateCounter
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigUpdateCounter_SignalSignalint 0 1 32 4 false false
Object: SigVehiclePosX_cm
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigVehiclePosX_cm_SignalSignalint 0 0.1 16 2 false false
Object: SigVehiclePosY_cm
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigVehiclePosY_cm_SignalSignalint 0 0.1 16 2 false false
Object: SigVehiclePosA_100thdeg
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigVehiclePosA_100thdeg_SignalSignalint 0 0.01 16 2 false false
Object: SigSteeringWheelAngleExtEn
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSteeringWheelAngleExtEn_SignalSignalint 0 1 1 1 false false
Object: SigSteeringWheelAngleExtSP_10thdeg
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSteeringWheelAngleExtSP_10thdeg_SignalSignalint 0 0.1 16 2 false false
Object: SigSpeed_10KthKmh
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSpeed_10KthKmh_SignalSignalint 0 0.1 16 2 false false
Object: SigTurnSignal
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigTurnSignal_SignalSignalint 0 1 8 1 false false
Object: SigCameraMode
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigCameraMode_SignalSignalint 0 1 8 1 false false
Object: SigCycleCameraMode
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigCycleCameraMode_SignalSignalint 0 1 1 1 false false
Object: SigSceneStart
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable

---

# Page 715

SigSceneStart_SignalSignalint 0 1 1 1 false false
Object: SigSceneStop
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSceneStop_SignalSignalint 0 1 1 1 false false
Object: SigVehEmergencyBraking
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigVehEmergencyBraking_SignalSignalint 0 1 1 1 false false
Object: SigVehGear
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigVehGear_SignalSignalint 0 1 8 1 false false
Object: SigDoorFL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigDoorFL_SignalSignalint 0 0.1 16 2 false false
Object: SigDoorFR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigDoorFR_SignalSignalint 0 0.1 16 2 false false
Object: SigDoorRL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigDoorRL_SignalSignalint 0 0.1 16 2 false false
Object: SigDoorRR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigDoorRR_SignalSignalint 0 0.1 16 2 false false
Object: SigTrailerA_100thdeg
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigTrailerA_100thdeg_SignalSignalint 0 0.01 16 2 false false
Object: SigVehiclePosX_m
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigVehiclePosX_m_SignalSignallong 0 0.01 63 8 false false
Object: SigVehiclePosX_y
Name InterfaceTypeEncodedTypeFormatBytecountElasticLengthMutable
SigVehiclePosX_y_SignalSignalbyte raw 15 false false
Object: SigVehiclePosA_rad
Name InterfaceTypeEncodedTypeFormatBytecountElasticLengthMutable
SigVehiclePosA_rad_SignalSignalbyte raw 23 false false
Object: SigLoadPosX_mm
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigLoadPosX_mm_SignalSignalint 0 0.01 16 2 false false
Object: SigLoadPosY_mm
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigLoadPosY_mm_SignalSignalint 0 0.01 32 4 false false
Object: SigLoadAmount_kg
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigLoadAmount_kg_SignalSignallong 0 0.01 48 8 false false
Object: SigAdvanceTime_us
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigAdvanceTime_us_SignalSignalint 0 1 32 4 false false
Object: SigSimulated_Gearbox
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_Gearbox_SignalSignalint 0 1 8 1 false false
Object: SigSimulated_GearboxAct
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_GearboxAct_SignalSignalint 0 1 8 1 false false

---

# Page 716

Object: SigSimulated_VehSpeed
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_VehSpeed_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_SwaAct
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_SwaAct_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_PulseCntFL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_PulseCntFL_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_PulseCntFR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_PulseCntFR_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_PulseCntRL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_PulseCntRL_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_PulseCntRR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_PulseCntRR_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_LongAccel
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_LongAccel_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_YawRate
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_YawRate_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_WheelSpeedFL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_WheelSpeedFL_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_WheelSpeedFR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_WheelSpeedFR_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_WheelSpeedRL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_WheelSpeedRL_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_WheelSpeedRR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_WheelSpeedRR_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_WheelAngleFront
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_WheelAngleFront_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_WheelAngleRear
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_WheelAngleRear_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_VehXPos
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_VehXPos_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_VehYPos
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_VehYPos_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_VehAngle
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_VehAngle_SignalSignalint 0 0.01 16 2 false false

---

# Page 717

Object: SigSceneCounter
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSceneCounter_SignalSignalint 0 1 16 2 false false
Object: SigSimulated_DoorFL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_DoorFL_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_DoorFR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_DoorFR_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_DoorRL
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_DoorRL_SignalSignalint 0 0.1 16 2 false false
Object: SigSimulated_DoorRR
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigSimulated_DoorRR_SignalSignalint 0 0.1 16 2 false false
Object: SigTrailerPosX_cm
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigTrailerPosX_cm_SignalSignalint 0 0.01 16 2 false false
Object: SigTrailerPosY_cm
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigTrailerPosY_cm_SignalSignalint 0 0.01 32 4 false false
Object: SigTrailerPosAngle_100thdeg
Name InterfaceTypeEncodedTypeOffsetScaleBitLengthUsedBytecountElasticLengthMutable
SigTrailerPosAngle_100thdeg_SignalSignallong 0 0.01 48 8 false false
back to interface definition
Interface:
ComPcEthernetServiceInstances extends _Object
Functions
SetUserTag
Messages
GeneralMessage
Functions
Function: SetUserTag
Description: The user tag is a u16 value. Set the user tag by changing the bits according to the Mask and Value. The user
tag is stored for each object and is copied into each message that is generated by this object. It is up to the user to define
the meaning of the user tag.
Parameters:
NameTypeEncodedTypeFormat
Maskint uint32 hex
Valueint uint32 hex
back to interface definition
Messages
Message: GeneralMessage
Parameters:
NameTypeEncodedTypeFormat
Data int[]uint8 utf8
back to interface definition
Modules Modules
Module: MM_BASE  
Module objects 

---

# Page 718

Object: AkSensors Instance of Interface: AkSensors 
Object: BackLightDriver Instance of Interface: IicSlaveHw 
Object: Backlight_Feature Instance of Interface: Backlight_Feature 
Object: BaseIo Instance of Interface: BaseIo 
Object: BipIo Instance of Interface: BipIo 
Object: CanDiagSlave Instance of Interface: CanDiagSlave 
Object: CanDriver0 Instance of Interface: CanDriver 
Object: CanDriver1 Instance of Interface: CanDriver 
Object: CanDriverBp Instance of Interface: CanDriver 
Object: Clamp Instance of Interface: Clamp 
Object: ComPcEthernet Instance of Interface: ComPcEthernet 
Object: Deserializer Instance of Interface: IicSlaveHw 
Object: DiagSlave Instance of Interface: DiagSlave 
Object: EthernetDeviceBp Instance of Interface: EthernetDevice 
Object: EthernetDeviceDut0 Instance of Interface: EthernetDevice 
Object: EthernetDeviceDut1 Instance of Interface: EthernetDevice 
Object: EthernetFilter Instance of Interface: EthernetFilter 
Object: FcPipIo Instance of Interface: FcPipIo 
Object: FlexrayDriver Instance of Interface: FlexrayDriver 
Object: Generic Instance of Interface: Generic 
Object: GenericDevice_1 Instance of Interface: GenericDriver 
Object: Hod Instance of Interface: Hod 
Object: HpGeneric Instance of Interface: HpGeneric 
Object: HpSensors Instance of Interface: HpSensors 
Object: LCD_TFT Instance of Interface: LCD_TFT_Unit 
Object: LedBsd Instance of Interface: Led 
Object: LedBsdPwm Instance of Interface: Led 
Object: LedBsdPwm_Alert_L Instance of Interface: Led 
Object: LedBsdPwm_Alert_R Instance of Interface: Led 
Object: LedBsdPwm_State_L Instance of Interface: Led 
Object: LedBsdPwm_State_R Instance of Interface: Led 
Object: LedPsm Instance of Interface: Led 
Object: LedTm Instance of Interface: Led 
Object: LedUpa Instance of Interface: Led 
Object: LinDriver0 Instance of Interface: LinDriver 
Object: LinDriver1 Instance of Interface: LinDriver 
Object: MIPC Instance of Interface: MIPC 
Object: PMIC Instance of Interface: IicSlaveHw 
Object: PipRad Instance of Interface: PipRad 
Object: PipRadV6 Instance of Interface: PipRadV6 
Object: PipRlt Instance of Interface: PipRlt 
Object: PwmGenerator Instance of Interface: PwmGenerator 
Object: PwmPsm Instance of Interface: PWM 
Object: PwmUpa Instance of Interface: PWM 
Object: SpeakerAndMic Instance of Interface: SpeakerAndMic 
Object: StepperMotor Instance of Interface: StepperMotor 
Object: Switches Instance of Interface: Switches 
Object: SwsRoller Instance of Interface: SwsRoller 
Object: TCU_Switches Instance of Interface: TCU_Switches 
Object: TcmPip Instance of Interface: TcmPip 
Object: USV10 Instance of Interface: USV10 
Object: USV10_Switches Instance of Interface: USV10_Switches 
Object: VS6Com Instance of Interface: UpaPcCanCom 
Object: VideoProcessorUnit Instance of Interface: VideoProcessorUnit 
Object: VlsPipIo Instance of Interface: VlsPipIo 
Object: WheelTicks Instance of Interface: WheelTicks 
Object: ZcPipIo Instance of Interface: ZcPipIo 
Module: VRC  
Module objects 
Object: CanDriver0 Instance of Interface: CanDriver 
Object: EthernetDeviceDut0 Instance of Interface: EthernetDevice 
Object: Generic Instance of Interface: GenericCommon 
Object: GenericDriver0 Instance of Interface: GenericDriver 
Object: MIPC Instance of Interface: MIPC 
EXUsEXUs

---

# Page 719

Execution Unit: EE_BASE
Module Instances 
Module Instance Type: MM_BASE
DIF Instances 
DIF Instance: DD
Execution Unit: VRC
Module Instances 
Module Instance Type: VRC
DIF Instances 
DIF Instance: VRC
DIFsDIFs
To be done .. sorry for that!
History History
History of P2_Valeo_Generic  
VersionAuthor Email Phone Function Date Comment
0.0.1 Frank Benoit frank.benoit.ext@valeo.com+49 7142 916 1175Castle SW
Dev2011-09-07T17:42:00Initial Version
0.0.2Konrad
Eibergerkonrad.eiberger@valeo.com+49 7142 916 1317Castle SW
Dev2015-03-06T14:00:00Update Template
0.0.3 Omar Saeed omar.saeed@valeo.comCastle SWDev 2016-04-18T16:00:00Firmware InitialRevision
History of MCONTROL  
VersionAuthor Email PhoneFunctionDate Comment
0.0.1 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2011-09-
07T17:42:00Initial Version
0.0.2 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2011-09-07T17:42:00Test
0.0.3 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2012-06-
19T12:37:00Added Signal Logging
0.0.4 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-09-
17T10:00:00_Signal.fncTimingTestOff has no arguments.
0.0.5 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2012-09-18T10:00:00Messages for _Signal: TimingTestNotActive,TimingTestNoUpdates. Times are changed from u32
to int64.
0.0.6 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-09-
28T09:30:00Implement UpdateCheck
0.0.7 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-10-
02T09:30:00Change signal update flag to update counter
0.0.8 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-10-
04T16:00:00Fix crash in _SignalValue afcEqualsCheck
0.0.9 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-10-
04T17:00:00Implement _SignalValue Get, _SignalRaw Get,
_SignalsRaw Set.
Removed _Signal Enable
0.0.10 Frank Benoitfrank.benoit@valeo.com+497142
916
4175Castle
SW Dev2012-11-
06T15:30:00Moved Clamp interface to mcontrol.

---

# Page 720

0.0.11 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-11-
07T17:00:00taskletStart renamed to taskletFire
0.0.12 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-11-
09T07:00:00Add ProcUnit functionality declarations
0.0.13 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-11-
09T10:00:00taskletUnbind interface extended with eventID;
taskletUnbindAll has been added
0.0.14 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-11-
12T16:00:00taskletUnbind interface changed;
taskletUnbindFromEvent, taskletUnbind,
taskletUnbindAll are now available
0.0.15 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2012-11-
13T17:30:00Fix problems with negative signed signal values.
0.0.16 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-11-
14T15:00:00Formate raw
0.0.17 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2012-11-
15T10:25:00TaskletsCommit now has a response message
'TaskletsDownloaded', new interface function:
TaskletCancel
0.0.18 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2012-11-
16T08:00:00Run parameter has been removed from tasklet
related messages
0.0.19 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2012-11-
19T10:00:00Add _MCONTROL GeneralError with text message
0.0.20 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-11-
20T09:30:00Add BaseIo, implemented ADC and
_MCONTROL.msgSystemState
0.0.21 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2012-11-
28T12:30:00_SignalRaw to Format raw
0.0.22 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-01-
13T13:30:00Add: extra _MCONTROL for _C5 and _EM
0.0.23 Frank Benoitfrank.benoit@valeo.com+497142
916
4175Castle
SW Dev2013-01-
24T18:00:00Fix bug in Scheduler
0.0.24 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2013-02-
05T11:00:00Add: SignalValue EqualsCheckOneOf and
EqualsCheckNoneOf functions
0.0.25Mahmoud
Torkymahmoud.torky@valeo.com+202
3531
5532Castle
SW Dev2013-02-
17T16:00:00fix the problem of UpdateCounterCheck where value
variable was boolean and now is int32
0.0.26Aisha
Sherebahaisha.sherebah@valeo.com N/ACastle
SW Dev2013-03-
13T16:50:00added interface Rs232
0.0.27 Aisha
Sherebahaisha.sherebah@valeo.com N/A Castle
SW Dev2013-04-
15T11:00:00added configure function to interface Rs232
0.0.28 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-04-
22T11:00:00Chg: add common base interface Trace. Added new
functions for configuration of filters.
0.0.29Aisha
Sherebahaisha.sherebah@valeo.com N/ACastle
SW Dev2013-04-
29T12:30:00added enum e_baudrate and removed Lookup
e_baudrate
0.0.30 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540819Castle
SW Dev2013-04-
24T12:00:00Trace Filtering functions updated
0.0.31 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-05-
28T10:30:00EqualsTestChangeToFromCurrent function has
been added to the _SignalValue interface
0.0.32 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-06-
12T18:30:00Chg: Rs232 changed to work with a single HW
instance only. 2 instances are now part of BaseIo.
0.0.33 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-06-
12T18:50:00Add: Rs232 SendString

---

# Page 721

0.0.34 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-06-
17T14:00:00Flexray send per timer
0.0.35 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540819CastleSW Dev2013-06-24T13:30:00tasklets can be associated with a string name, and
all functions /messages contains this name to get abetter report
0.0.36 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-08-
07T10:00:00Add WaveGenOutput to BaseIo
0.0.37 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-06-
24T13:30:00AbortCurrentTest fnc and TestAborted msg have
been added
0.0.38Mahmoud
Torkymahmoud.torky@valeo.com+202
3531
5532Castle
SW Dev2013-09-
29T11:00:00In msgTimingTest, "SignalUpdateOccurred=bool"
added to distinguish between timeout and update
errors
0.0.39 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-10-
24T15:00:00PreTransmit events have been added to
_ComFrameCanTx and _ComFrameLinTx
interfaces
0.0.40 Frank Benoitfrank.benoit@valeo.com+497142
916
4175Castle
SW Dev2013-11-
05T10:00:00Passive input signals
0.0.41 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-11-
15T10:30:00ProcUnitCopyVariableToVariable has been added
0.0.42 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-11-
19T13:30:00ProcUnit has been extended, now warning/error
message can be generated based on a value of a
variable
0.0.43 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-11-
21T08:00:00System state information with CPU load and
maximum scheduling delay. Change
TimingTestNotActive from error to warning.
0.0.44 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2013-11-22T09:00:00Fix bug in timing test
0.0.45 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2013-12-
03T19:00:00Add trigger inputs
0.0.46 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-12-
19T19:00:00Change trigger inputs to more general
0.0.47 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-04-
08T08:30:00EnmComparisonRule enum has been removed,
affected ProcUnit functions have been modified,
new ones have been created. _SignalValue has a
new superinterface
0.0.48Mahmoud
Torkymahmoud.torky@valeo.com+202
3531
5532Castle
SW Dev2014-06-
05T10:00:00Add Arthematic operations
0.0.49 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2014-07-
08T15:00:00Add Clamp Log range changes.
0.0.50 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-07-
11T15:00:00Add Clamp LoggingOnce. Add Calibration
functionality.
0.0.51 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-07-
27T13:00:00Chg Clamp to use signed values for measuring.
0.0.52 László Orbánlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-08-
04T16:00:00EqualsTestAfterUpdates impl.
0.0.53 László Orbánlaszlo.orban@valeo.com+36 88
540819Castle
SW Dev2014-08-
04T16:00:00TimingTestWithFirstUpdate impl.
0.0.54 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-08-
18T13:00:00Fix: StopWatch result value was wrong by factor
1000. Now correct in ms with µs resolution.
0.0.55 Tarek Eldeebtarek.eldeeb@valeo.com+20 2
3538
0539Castle
SW Dev2014-08-
19T16:00:00Pretransmit events for flexrayTx. Needed for
AliveCounters and Checksums
0.0.56 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-08-
21T11:00:00Add Generic/PerformanceMonitor

---

# Page 722

0.0.57 László Orbánlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-09-
12T09:00:00StopWatch.SetMode(STRICT|RELAXED) impl
0.0.58 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-08-
29T14:00:00Chg: Calibration remove scale for offset value
0.0.59 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-09-
24T15:00:00Add: DataServer interface Add: Clamp child object
for Min/Max measurment values.
0.0.60 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2014-10-01T15:00:00Chg: Calibration NotCalibrated message with causeinfo.
0.0.61 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-10-
02T15:00:00Chg: PerformanceMonitor added MessageDelay
param to the delay message.
0.0.62 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-10-
07T15:00:00Chg: PerformanceMonitor Change to set the
parameters in different functions.
0.0.63 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-10-
31T10:00:00Chg: RS232 rework
0.0.64 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-11-
05T11:00:00Chg: SignalRaw equals test/check message report
the mask as well.
0.0.65 László Orbánlaszlo.orban@valeo.com+36 88
540819CastleSW Dev2014-11-20T12:00:00Add: EqualsTestChangeToOptionalValues and
EqualsTestChangeToOptionalValuesAfterUpdatesimpl.
0.0.66 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-01-
29T12:00:00Fix: UART sending 1 byte shifted
0.0.67 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-03-
03T17:00:00Chg: _Object going active in sysgen
0.0.68 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-03-
08T13:25:00Chg: Move Flexray Receive Filter into FPGA
0.0.69 Ahmed Kamelahmed.kamel@valeo.com+20 23
5380542Castle
SW Dev2015-03-
08T13:25:00Fix: EnableProcessing to support B ch only in Scala
0.0.70 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-03-
10T17:00:00Chg: Clamp with configurable interval for Avr values.
Chg: Clamp remove source for versions < 1.08
0.0.71 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-03-
11T17:00:00Fix: Clamp IoutAvr for MRX
0.0.72 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-03-
13T14:00:00Chg: _Object SetUserTag args to format hex. raw is
not allowed.
0.0.73 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-03-
16T20:24:00Chg: Split _ComFrameFlexrayTx into
_ComFrameStaticFlexrayTx and
_ComFrameDynamicFlexrayTx
0.0.74 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-03-
17T14:00:00Add: MCONTROL FeatureVersion
0.0.75 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-03-
22T14:55:00Chg: Remove SendAlways in
ComFrameDynamicFlexrayTx and Add
SendPerTimer, SendOnce in
_ComFrameStaticFlexrayTx
0.0.76 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-04-
20T17:00:00Add: Change Frame Payload Length for the Flexray
dynamic frames
0.0.77 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-04-
20T17:00:00Add: Allow RX and TX frames on CAN
0.0.78 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-05-
27T17:00:00Chg: Make a base interface for flexray Tx Frames
0.0.79 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-05-
28T16:00:00Chg: SignalValue now supports a helper methods to
get scaling info.

---

# Page 723

0.0.80 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-06-
11T18:00:00Add docu for Signal LoggingForceNow
0.0.81 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2015-06-19T18:00:00Fix: Signal timing test, firstupdate.
0.0.82 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-06-
22T13:00:00Add: ProcUnit Multiply/Divide/Modulo
0.0.83 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-06-
24T13:00:00Add: Signal allowUpdate Add: ProcUnit
LoadFromSignalUpdateCounter
0.0.84 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-06-
25T14:00:00Add: ProcUnitInRangeCheck
0.0.85 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-05-
27T17:00:00Add: Add PDUs for the CAN
0.0.86 László Orbánlaszlo.orban@valeo.com+36 88
540
819CastleSW Dev2015-08-13T15:30:00Chg: HilStartMarker has a bool param (stop hil execon first error)
0.0.87 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-09-
29T09:29:00Add: Add Mux for CAN Tx
0.0.88 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-09-
30T09:15:00Add: Add Support to change source Id of Extended
Frames of GMLAN
0.0.89Ahmad
Nassar ahmad.nassar@valeo.com+202
35358457Castle
SW Dev2015-10-
07T10:00:00Handling RxTxFrames feature for Flexray
0.0.90 László Orbánlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2015-10-
12T16:00:00Add: ProcUnitSubstractVariable
0.0.91 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-10-
18T12:18:00Add: Add Mux for CAN Rx
0.0.92Markus
Kraenkel markus.kraenkel@valeo.com+497142
916
1901Radar
SW Test
Eng2015-11-
12T10:10:11Add: UpdateCounterCheck without counter reset
0.0.93 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2015-11-
30T18:00:00Fix bug in scheduler.
0.0.94 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-12-
08T14:10:00Add: Add Timer Module
0.0.95Ahmed
Zaazaaahmed.zaazaa@valeo.com+20 23
538
0542Castle
SW Dev2015-12-
30T14:10:00Add: _ComFrameLinUartPac
0.0.96 Omar Saeed omar.saeed@valeo.com+202
3535
8457CastleSW Dev2016-01-10T14:10:00Add: NotEqualsTest , NotEqualsTestChangeTo ,NotEqualsTestChangeToAfterUpdates
0.0.97 Cedric Langercedric.langer@valeo.com+49
7142
916
1901Student2016-02-
17T14:10:00Add: ToeDriver but still commented
0.0.98 Cedric Langercedric.langer@valeo.com+49
7142
916
1901Student2016-02-
19T14:10:00Chg: Moved ToeDriver Object to Generic
0.0.99 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-03-
02T13:00:00Fix bug EqualsTestChangeTo, introduced with the
NotEqualsTest functionality.
0.0.100Tarek Eldeebtarek.eldeeb@valeo.com+2023538
0539CastleSW Dev2016-04-10T13:00:00Adding FirmwareTracer Interface
0.0.101Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-04-
13T14:00:00Add TimeoutDetector
0.0.102Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-04-
14T11:00:00Chg TimeoutDetector: split the Activate into
ActiveSingle+ActivateContinuous
0.0.103Tarek Eldeebtarek.eldeeb@valeo.com+202
3538
0539Castle
SW Dev2016-04-
14T16:00:00Moving FirmwareTracer Object to Generic

---

# Page 724

0.0.104Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2016-05-
13T13:03:00Add: Add EqualsTestWithCurrentValue to
signalValue Interface
0.0.105Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-05-
21T11:00:00Chg: _ComFrameStaticFlexrayRxTx extends
_ComFrameStaticFlexrayTx
0.0.106Kholoud Asemkholoud.asem@valeo.comCastle
SW Dev2016-05-
31T09:35:00Add: TestValueBitsInRange,
TestValueBitsOutOfRange, TestValueInRange,
TestValueOutOfRange to signalRaw Interface
0.0.107Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2015-12-
30T14:10:00Add: UserFailures API to _ComFrameLinUartPac
0.0.108Aasish
Valappilekandiaasish.valappilekandi@valeo.comCastle
SW Dev2016-07-
19T14:10:00Add: CheckLastUpdateWithin(warnDuration,
errorDuration)
0.0.109AhmedElsalahyahmed-mohamed.elsalahy@valeo.comCastleSW Dev2016-08-04T12:00:00Add:CopyRawValueToProcUnitVariable.
0.0.110Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2016-08-
04T17:10:00Chg: Chg the data type of SetMuxConf API to be 16
bits
0.0.111Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175CastleSW Dev2016-08-23T14:00:00Add: _Signal EqualsTestFreeze
0.0.112Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2016-09-
20T12:53:00Add : SetFrameDlc for CanTxFrames
0.0.113AhmadNassarahmad.nassar@valeo.com+2023535
8457CastleSW Dev2016-09-27T12:53:00MuxConf Argument changed to ArgArray Uint8temp. till uint16 is correctly handled in sysgen
0.0.114Ahmad
Nassarahmad.nassar@valeo.com+202
3535
8457Castle
SW Dev2016-09-
28T09:00:00MuxConf Argument changed again to uint16 as it is
now handled ok from sysgen
0.0.115Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-10-
20T21:00:00Add: rename SignalValue extends class due to fix
package split
0.0.116Ahmed
Abdelrahmanahmed.abdelrahman@valeo.comCastle
SW Dev2016-10-
27T21:00:00Add: ConfigureParity function for c5base_v1_10_a
Uart
0.0.117Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2016-11-
24T15:49:00Chg: UpdatePayloadLength Length Data Type
0.0.118Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-01-
26T23:56:00Put EnableProcessingEnum in a separate Interface
0.0.119Ahmad
Nassarahmad.nassar@valeo.com+20 23
532
8457Castle
SW Dev2017-02-
12T04:00:00Add Ethernet interfaces for Pdu
0.0.120Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2017-02-
27T14:00:00Add: MCONTORL
AbortCurrentTestIfErrors+TestStartMarker
0.0.121Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2017-03-
28T14:00:00Add: Sendcyclic and Sendcyclicoff for dynamic
frames in flexray
0.0.122Ahmad
Nassarahmad.nassar@valeo.com+20 23
532
8457Castle
SW Dev2017-05-
14T14:00:00Add service discovery interfaces
0.0.123Omar Saeed omar.saeed@valeo.com+20 23532
8995Castle
SW Dev2017-05-
22T12:00:00Add: SetFrameHeaderOptions for CAN frames
0.0.124Ahmed GamalAhmed.Gamal-
Mohamed@valeo.comCastle
SW Dev2017-06-
06T12:00:00Add 3 Pretransmit Events for FlexRay Pdus
0.0.125Ahmad
Nassarahmad.nassar@valeo.com+20 23
532
8457Castle
SW Dev2017-06-
07T14:00:00Add service discovery make msg and missing
parameter
0.0.126Ahmad
Nassarahmad.nassar@valeo.com+20 23532
8457Castle
SW Dev2017-07-
21T14:00:00Add service discovery event group interface
0.0.127Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2017-07-
05T13:00:00Add setBitsinRange and ModifyBytes in SignalRaw
0.0.128Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-07-
13T14:00:00Add: _ComPdu interface
0.0.129Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-07-
20T11:00:00Add: _ComFrameFlexrayTx event PreTransmit_3
0.0.130Ahmad
Nassarahmad.nassar@valeo.com+20 23
532
8457Castle
SW Dev2017-08-
30T14:00:00Add systemState args description

---

# Page 725

0.0.131Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-09-
13T09:23:00Add: WaitForUnlock and WaitUnlock to enable
PauseUntilEvent on all modules
0.0.132Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-10-
01T09:23:00Add The Event Source PIM in WaitForUnlock to be
used in the unlock
0.0.133Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-10-
01T09:23:00Chg: WaitForUnlock and WaitUnlock to
LockHilScheduler and UnlockHilScheduler
0.0.134Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-10-
10T09:57:00Add: SetModulesRange API
0.0.135Ali Abdelbakyali.abdelbaky@valeo.comCastle
SW Dev2017-12-
11T12:06:00Add: ProcUnitStoreToSignalRaw API
0.0.136Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2017-11-
15T14:00:00Add: SendAsEvent API
0.0.137Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2017-11-
19T10:00:00Add: Event FrameSentAsEvent
0.0.138Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2017-11-20T16:00:00Chg: _ComPduCanX extend _ComPdu
0.0.139Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-11-
20T16:57:00Add: Signal Tracer Module
0.0.140Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-11-
22T09:25:00Add: TracerStatus to Signal Tracer
0.0.141Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-11-
29T16:00:00Add: Can TX frame the PreTransmit_3 event for
container pdus
0.0.142Aasishvalappilekandiaasish.valappilekandi@valeo.com+49
7142916
4801CastleSW Dev2017-07-15T14:10:00Bugfix: wave gen bugfix,
0.0.143Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2018-01-
02T16:00:00Add:new interface SystemInfo and assign it as a
child to Generic interface
0.0.144Eslam
Mahmoudeslam.mahmoud@valeo.comCastle
SW Dev2017-12-
10T13:45:00Add: EventFilter for signal update/change events
filteration
0.0.145Frank Benoitfrank.benoit@valeo.com+497142
916
4175Castle
SW Dev2018-03-
15T14:00:00Add: TestData interface for the environmental
testing
0.0.146Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2018-03-17T12:00:00Add: DataServerTest to the Selftest
0.0.147Aasish
Valappilekandiaasish.valappilekandi@valeo.com+49
7142
916
4801Castle
SW Dev2018-01-
16T17:10:00Fix: Increase the calibration base format version to
fix the scaling of MRX ADC range, for KL 15 and KL
30.
0.0.148Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2018-04-
19T09:00:00Chg: move GeneralMessage to Object, so the obj
path can have acurate information.
0.0.149Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2018-04-
19T13:00:00Remove: SignalTracer removal from C5base
module
0.0.150Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142916
3802Castle
SW Dev2018-04-
27T10:00:00Add: SetWithMask in _SignalRaw.
0.0.151Eslam
Mahmoudeslam.mahmoud@valeo.comCastle
SW Dev2018-05-
11T17:00:00Chg: Move TimeoutDetector API to EventFilter
0.0.152Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2018-05-
19T09:00:00Chg: remove unused interface
_ComFrameLinUartPacTx and the Traces (will be
replaced by new tracer impl)
0.0.153Aasish
Valappilekandiaasish.valappilekandi@valeo.com+49
7142
916
4801Castle
SW Dev2018-04-
26T17:50:00Add: adding Api to set Secure PDU key(Symmetric
keys for Security tick count message) at runtime.
0.0.154Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2018-06-
07T19:00:00Add: ApplicationObjectInit functions
0.0.155Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2018-06-
06T11:00:00Add:
CompareVariableAndVariableWithPercentageRange

---

# Page 726

0.0.156Aya Hefny aya.hefny@valeo.com+20 23
532
8241Castle
SW Dev2018-06-
11T12:37:00Add: adding Api ActivateMulticast to activate the
multicast path for the ethernet pdus.
0.0.157Aya Hefny aya.hefny@valeo.com+20 23
532
8241Castle
SW Dev2018-06-
11T12:37:00Add: adding argument IsIp4Multicast to offer service
api to enable the ipv4Multicast option in subAck
feature.
0.0.158Frank Benoitfrank.benoit@valeo.com+497142
916
4175Castle
SW Dev2018-07-
12T18:00:00Add: SFC selftest functions
0.1.0 Tarek Eldeebtarek.eldeeb@valeo.com+20 2
35380539Castle
SW Dev2018-09-
04T12:00:00Sysgen/Documentation: Added a smart search box.
0.2.0 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2018-09-
27T09:25:00Add: Generic Base for C5 and SB
0.3.0 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2018-09-
24T13:00:00Add: Calibrate CommitV3 with information about HW
name, version and serial number of the component.
Deprecating the existing Commit function.
0.4.0 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2018-09-
28T13:00:00Add: Calibrate IsComponentSupported, to query
value without the risk of producing errors in the
report.
0.5.0 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542CastleSW Dev2018-11-05T20:25:00Chg: ComPdu Interface to ComPduTx to removeSend APIs from Rx Pdus
0.6.0 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2018-11-
05T11:20:00Add: ReportPduNotFoundInCom,
ReportPduDlcMismatchInCom
0.7.0 Omar Saeed omar.saeed@valeo.com+202
3532
8995Castle
SW Dev2018-11-
12T14:10:00Add: PostTransmit Event to _ComFrameGenericTx
Interface
0.8.0 Andrew Sadekandrew.sadek@valeo.com+202
35328291Castle
SW Dev2018-12-
17T12:10:00Chg: Move AddOn APIs to _MCONTROL_C5
0.9.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2018-12-
14T16:40:00Add: _ComFrameLin Interface with HeaderPresent
signal inside for checking whether a frame is really
requested by Master.
0.10.0 Ali Abdelbakyali.abdelbaky@valeo.com+20 23
532
9588Castle
SW Dev2018-09-
28T13:00:00Add: LogEthernetHeader function
0.11.0 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2018-11-
05T11:20:00Add: AddOnRunCompleted Message
0.11.1 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2018-12-
23T12:10:00Chg: AddOn Status Enum
0.12.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2019-01-
08T13:30:00Add: SendEnable for the LIN frames.
0.13.0Saad
Mohamedsaad.mohamed@valeo.com+2023532
9809Castle
SW Dev2019-01-
10T11:15:00Add: Add "CheckCanRxFrameDlc" function andReceivedDlc message to compare obtained and
expected DLCs
0.14.0 Aya Hefny aya.hefny@valeo.com+20 23
532
8241Castle
SW Dev2019-01-
02T12:10:00Add: Init function for the comCan interface
0.15.0 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2019-01-
24T14:21:00Add: Following Receiver to Signal Value Interface
0.16.0 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2019-01-
22T13:30:00Add: Signal Messages Register Tx/Rx checksum
0.17.0 Andrew Sadekandrew.sadek@valeo.com+202
35328291Castle
SW Dev2019-01-
22T13:30:00Chg: Remove Hash Key from AddOn Functions
0.18.0 Aya Hefny aya.hefny@valeo.com+20 23
532
8241Castle
SW Dev2019-01-
23T12:10:00Add: comEthernetSpecificFrame pretransmit events
0.19.0 Aya Hefny aya.hefny@valeo.com+20 23
532
8241Castle
SW Dev2019-01-
27T18:42:00Add: Add "_ComEthernetSpecific" interface
0.20.0 Andrew Sadekandrew.sadek@valeo.com+2023532
8291CastleSW Dev2019-01-22T13:30:00Chg: Re-adapt AddOn Messages
0.21.0 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2019-02-
22T18:00:00Add: EventFilter.ConfigureInRangeRaw and
deprecated the ConfigureInRange

---

# Page 727

0.22.0 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2019-03-
01T18:00:00Add: Calibrate DowngradeToV2 to enforce
compatibility with older projects.
0.22.1 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2019-03-06T18:00:00Fix: Moving the ComPduFlexrayTx events
declaration to ComPduTx, so those events are
available for all bus types.
0.23.0Eslam
Khafagyeslam.khafagy@valeo.comCastle
SW Dev2019-03-
07T15:00:00Add: Event added when offer is received in
_ComSDClientService.
0.24.0 Aya Hefny aya.hefny@valeo.com+20 23
532
8241Castle
SW Dev2019-03-
24T13:00:00Add: Pretransmit events for Ethernet pdus
0.25.0 Ahmed Kamelahmed.kamel@valeo.com+20 23538
0542Castle
SW Dev2019-03-
25T10:49:00Add: UltraZedBoard Support
0.26.0Eslam
Khafagyeslam.khafagy@valeo.comCastle
SW Dev2019-03-
25T15:00:00Add: ddded APIs MaskedNotEqualsTest and
NotEqualsTest.
0.27.0Eslam
Khafagyeslam.khafagy@valeo.comCastle
SW Dev2019-03-
07T15:00:00Add: added function EqualsTestNoneOf and
EqualsTestOneOf.
0.28.0 Kholoud Asemkholoud.asem@valeo.com+20 23
5328744Castle
SW Dev2019-04-
18T11:36:00Add: Generic Base for ZCU102 Board
0.29.0 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2019-04-
22T15:30:00Add: Add Add-On Id in RunCompleted Message
0.30.0 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2019-04-
27T07:00:00Add: Implement Signal CheckLastUpdateWithin
0.31.0 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2019-04-
22T15:30:00Add: Add Ethernet Interfaces to BIP
0.32.0 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2019-06-
11T15:30:00Add: Add Generic Bus Interfaces to BIP
0.33.0EslamMahmoud eslam.mahmoud@valeo.com+202
3532
9568CastleSW Dev2019-06-26T12:10:00Add: added SendCyclicPerHw API to
ComCanFrames to be used with high CAN bus load,
SQC/CRC/Mux is not yet supported
0.34.0 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2019-06-
11T15:30:00Add: Add Baudrate 115200 to rs232
0.35.0 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2019-08-
04T08:30:00Add: Add Flexray Bus Interfaces to BIP
0.36.0Ahmed
Abdelrahmanahmed.abdelrahman@valeo.com+20 23
5328042Castle
SW Dev2019-08-
15T13:00:00Add: ComCanSetErrors for setting the needed tx
errors flags for negative testing
0.37.0 Andrew Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2019-09-
05T13:30:00Add: Alive Counter Function Registration Messages
in Signal Module
0.38.0Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2019-07-
08T12:45:00Add: API Enable/DisableTracerLogging in _Signal
interface, add: interface Tracer
0.39.0Matthieu
Surzurmatthieu.surzur@valeo.com+497142
916
3802Castle
SW Dev2019-11-
06T12:00:00Add: DelayedEvent
0.40.0 Yasmeen Atefyasmeen.atef@valeo.comCastle
SW Dev2019-11-
24T13:30:00Add: EventFilter.ConfigureRawDataEquals API
0.41.0Ibrahim
Shazlyibrahim.shazly@valeo.comCastle
SW Dev2019-12-
15T14:15:00Add:
ProcUnit.CopyIndexedVariableContentToVariable
API
0.42.0Ibrahim
Shazlyibrahim.shazly@valeo.comCastle
SW Dev2019-12-
17T12:20:00Add: DataServerTracer object to Tracer interface,
Add: SetDataServerURI API to Tracer interface
0.43.0Aasish
Valappilekandiaasish.valappilekandi@valeo.com+49
7142
9164801Castle
SW Dev2020-02-
18T16:10:00Add: Pulse generator , ramp with different slops,
generated using DACes from base board.
0.44.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2020-03-
12T11:00:00Add: CorruptFrameChecksum for LIN TX frames.
0.45.0Aasish
Valappilekandiaasish.valappilekandi@valeo.com+49
7142
916
4801Castle
SW Dev2020-02-
18T17:10:00Fix: Pulse generator offset issue.
0.46.0 Yasmeen Atefyasmeen.atef@valeo.comCastle
SW Dev2020-04-
13T13:00:00Add: Init function for the comGeneric interface
0.47.0Saad
Mohamedsaad.mohamed@valeo.com+202
3532
9809Castle
SW Dev2020-05-
11T11:15:00Add: SetFrameLength Api Interface
ComFrameGenericTx

---

# Page 728

0.48.0 Omar Saeed omar.saeed@valeo.comCastle
SW Dev2020-05-
27T13:00:00Add: LockHilSchedulerStart and
LockHilSchedulerEnd messages
0.48.1Saad
Mohamedsaad.mohamed@valeo.com+202
3532
9809Castle
SW Dev2020-06-
22T11:15:00Change Length argument to uint16 instead of uint8
0.48.2IbrahimShazly ibrahim.shazly@valeo.comCastleSW Dev2020-06-23T12:30:00Edit: TestRangeVolt, VoltageOutofRange, andScpiVoltage scale to be 0.001 instead of 0.01
0.48.3Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2020-10-
02T17:00:00Add: SetCustomEndTransByte to RS232 interface.
In case EndTrans is different from 0xA.
0.48.4Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2020-10-
27T13:00:00Add: NotEqualsCheck
0.49.0 AhmadAbdallahahmad.abdallah@valeo.com+2023532
8000CastleSW Dev2021-05-06T15:00:00Add: add new function SystemCall() to be used forAPU, add new interface for C6
0.50.0 Omar Saeed omar.saeed@valeo.comCastle
SW Dev2021-04-
27T14:00:00Add: Add "_ComFrameGenericRxTx" interface
0.51.0Mohamed
ABOKHATWAmohamed.abokhatwa@valeo.comCastle
SW Dev2022-07-
01T00:00:00Add: API SetFrameDlc in _ComFrameLinTx
interface
0.51.1HassenGassoumi hassen.gassoumi@valeo.com+49
7142916
2140CastleSW Dev2024-06-24T11:00:00Add: UnderrunByHw message toRangeChangeCause for Clamp module
History of TOE_DRIVER_V1  
VersionAuthor Email Phone FunctionDate Comment
0.0.1Cedric
Langercedric.langer@valeo.com+49 7142
916 1901Student2016-02-
18T10:52:00initial
0.0.2Markus
Kraenkelmarkus.kraenkel@valeo.com+49 7142
916 1901Radar
SW Test
Eng2016-11-
04T13:00:00Fix: Problem in ToeDriver.c leading to Runtime Error when
using AutoVoltage with single channel
0.0.3Markus
Kraenkelmarkus.kraenkel@valeo.com+49 7142
916 1901Radar
SW Test
Eng2017-03-
14T15:00:00Chg: Miss leading warnings for the stretching factor and
power setting, add event for auto voltage function
0.0.4Markus
Kraenkelmarkus.kraenkel@valeo.com+49 7142
916 1901Radar
SW Test
Eng2017-07-
12T15:00:00Add: Automatic loop back measurement using clamp
module after supply voltage adjustment
0.0.5Matthieu
Surzurmatthieu.surzur@valeo.com+49 7142
916 3802Castle
SW Dev2020-08-
18T12:00:00[artf1012584] Fixing sfc for TestRangeMilliAmpere. Adding
GetCurrentMilliAmpere and SetResetCallbackFunction.
0.0.6Markus
Kraenkelmarkus.kraenkel@valeo.com+49 7142
916 1901Industrial
Test Eng2017-07-
12T15:00:00Add: ApiInit function to perform init as soon as external
equipment is ready
History of Ethernet_V1  
VersionAuthor Email Phone FunctionDate Comment
0.0.1Ahmed
Abdelrahmanahmed.abdelrahman@valeo.comCDV
TTE2018-04-
24T10:00:00Add: Initial Version
0.0.2Eslam
Mahmoudeslam.mahmoud@valeo.comCDV
TTE2018-07-
08T16:00:00Add: Seperated TCP/UDP port arguments to
ConfigureConnectionParamenters API
0.0.3 Aya Hefny aya.hefny@valeo.com+202 35328241CDVTTE2018-08-27T15:30:00Add the PHY dump function and tracing objects
"TxFrameCount","RxFrameCount","BadRxFrameCount"and "droppedFramesPerSec"
0.1.0 Aya Hefny aya.hefny@valeo.com+202 3532
8241CDV
TTE2018-11-
10T17:00:00Add Ping Send Api
0.2.0 Aya Hefny aya.hefny@valeo.com+202 3532
8241CDV
TTE2018-11-
10T17:00:00Add Pong timeout input to PingSend Api and Pong
Timeout message
0.3.0 Omar Saeed omar.saeed@valeo.com+202 3532
8995CDV
TTE2018-11-
06T13:00:00Increase Src/Dst IP arguments of
ConfigureConnectionParamenters to fit IPV6 length"
0.4.0Ahmed
Abdelrahmanahmed.abdelrahman@valeo.comCDV
TTE2018-12-
17T10:00:00Add:Static MAC insertion in Castle ARP table
0.5.0Ahmed
Abdelrahmanahmed.abdelrahman@valeo.com +20235328042CDV
TTE2018-12-
26T10:00:00Add: TcpReconnect API
0.6.0 Aya Hefny aya.hefny@valeo.com+202 3532
8241CDV
TTE2019-04-
04T10:00:00Add: Add "EnableRxFramesInConnection" and
"DisableRxFramesInConnection" Apis to support filters
in Ethernet on the level of the Ip
0.7.0Mostafa
Khallafmostafa.khallaf@valeo.comCDV
TTE2019-03-
07T10:00:00Adding API "SetFailure" to generate Ethernet failures ,
like "OpenCircuitFailure"
0.8.0 Omar Saeed omar.saeed@valeo.com+202 3532
8995CDV
TTE2019-12-
23T10:00:00Add: "SetLinkStatus"API to force link status based on
user input
0.9.0Mohamed
ABOKHATWAmohamed.abokhatwa@valeo.comCDV
TTE2021-12-
12T10:00:00Add: signals to represent the time stamp in seconds
and nanoseconds.
0.10.0Mohamed
ABOKHATWAmohamed.abokhatwa@valeo.comCDV
TTE2021-12-
12T10:00:00Add: APIs to Enable/Disable Issue Sync and
PdelayReq.
0.11.0Mohamed
ABOKHATWAmohamed.abokhatwa@valeo.comCDV
TTE2022-06-
09T10:00:00Add: APIs PhyReadRegister and PhyDump for
debugging.

---

# Page 729

History of XCP  
VersionAuthor Email Phone FunctionDate Comment
0.0.1Ahmed
Abdelrahmanahmed.abdelrahman@valeo.comCastle
SW Dev2015-11-
01T00:00:00Initial version
0.0.2Ahmed
Abdelrahmanahmed.abdelrahman@valeo.comCastle
SW Dev2016-03-
03T00:00:00Editing APi Send_SetMta parameters to be
uint64
0.0.3Ahmed
Abdelrahmanahmed.abdelrahman@valeo.comCastle
SW Dev2016-05-
10T00:00:00Editing c5c from xcp to xcp_v1
0.0.4Markus
Kraenkelmarkus.kraenkel@valeo.com+49 7142 916
4901Radar
SW Test
Eng2017-03-
14T08:40:00Fix: Address parameter for short upload
needs to be uint32
0.0.5Andrew
Sadekandrew.sadek@valeo.comCastle
SW Dev2017-07-
01T00:00:00Add Function for align response counter +
incremenetal step
0.0.6Ahmed
Abdelrahmanahmed.abdelrahman@valeo.com+20235328042Castle
SW Dev2017-08-
07T00:00:00Adding functional descriptions of XCP APIs +
Adding SYNCH, GET_COMM_MODE_INFO,
GET_ID, UPLOAD Commands.
0.1.0Ali
Abdelbakyali.abdelbaky@valeo.com +20235329588Castle
SW Dev2017-08-
07T00:00:00Increase argument size for function
"Set_XcpResCnt" in "XCP" interface
0.1.1 Frank Benoitfrank.benoit@valeo.com+49 7142 916
4175Castle
SW Dev2019-07-
02T00:00:00Fix signed types of message
TestValueRangeSigned
History of BAP_V1  
VersionAuthor Email Phone Function Date Comment
0.0.1 Ahmed
Kamelahmed.kamel@valeo.com Castle SW
Dev2015-05-
13T22:07:00Initial Version
0.0.2Ahmed
Kamelahmed.kamel@valeo.com+20 23 538
0542Castle SW
Dev2015-06-
17T17:00:00Chg: Add Testing to the DLC byte
0.0.3Ahmed
Kamelahmed.kamel@valeo.com+20 23 538
0542Castle SW
Dev2016-08-
01T08:53:00Add: TestDataWithMask
0.0.4Kholoud
Asemkholoud.asem@valeo.com+20 23 532
8744Castle SW
Dev2017-01-
19T10:16:00Chg: BAP Data and DLC to Signal Objects
for testing
0.0.5Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23 532
8709Castle SW
Dev2020-02-
03T14:42:00Add: Handle segmented bap
0.0.6IbrahimShazly ibrahim.shazly@valeo.com+20 23 5328709Castle SWDev2020-06-25T14:42:00 Add: API configureBapTimeout
History of BIP_46  
VersionAuthorEmail Phone FunctionDate Comment
0.0.1Frank
Benoitfrank.benoit@valeo.com+49 7142
916 4175Castle
SW Dev2013-01-
09T16:30:00Initial version
0.0.2Frank
Benoitfrank.benoit@valeo.com+49 7142
916 4175Castle
SW Dev2013-01-
18T17:30:00Chg: Mark functions as not implemented Add: Message for
BIP communication problem.
0.0.3Frank
Benoitfrank.benoit@valeo.com+49 7142
916 4175Castle
SW Dev2013-04-
16T11:00:00Add: implementation of BIP 4.6 bus errors
0.0.4FrankBenoit frank.benoit@valeo.com+49 7142916 4175CastleSW Dev2014-08-08T11:00:00 Add: more doc
History of Can Slave  
VersionAuthor Email Phone Function Date Comment
0.0.1Ahmed
Kamelahmed.kamel@valeo.com+2 353 80 542Castle SW
Dev2019-01-28T15:49:00Initial
Version
History of CAN_V3  
VersionAuthor Email Phone FunctionDate Comment
0.0.1 Ahmed Kamel ahmed.kamel@valeo.com+20 23 538
0542Castle
SW Dev2016-11-
06T12:47:00Add Dynamic Can Diag Init
0.1.0 Frank Benoit frank.benoit@valeo.com +49 7142
916 4175Castle
SW Dev2019-03-
05T13:00:00Add: InjectRxFrame for self testing
0.2.0Ahmed
Abdelrahmanahmed.abdelrahman@valeo.com+20 23 532
8042Castle
SW Dev2019-07-
22T13:00:00Add: StopRxMessagesAck for negative
testing
0.3.0Mohamed Abo
Khatwamohamed.abokhatwa@valeo.comCastle
SW Dev2020-02-
21T14:30:00Add: DisableCanStatReader for
performance enhancement
0.4.0 Bassant Atef bassant.atef@valeo.comCastle
SW Dev2024-04-
02T14:30:00Add: StopRxAckSpecificFrame Function
History of DIAG_V2  
VersionAuthor Email PhoneFunctionDate Comment
0.0.1 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2014-09-16T13:00:00Initial version

---

# Page 730

0.0.2 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-10-
21T13:30:00Some function argument list had changed
0.0.3 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-10-
24T18:00:00Chg: Work over, added ConfigureNextSend_*, rename
TestPattern to TestByteSequenceWithmask
0.0.4 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-10-
28T11:00:00Fix assertion in LIN TP
0.0.5 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-11-
07T15:00:00Fix: Diag msgTestValueInRange change argument types
to int64 Add: Diag TestValueOutOfRange
0.0.6 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-12-
08T15:30:00SchedNotRunning message were moved from lin_v2
because it is a possible fault response to the send and
sendprepared functions
0.0.7 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2015-03-
09T16:30:00Add: UDS Tester functions and messages for DTCs
0.0.8 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2015-10-
26T16:00:00Fix: doc elements on wrong argument.
0.0.9 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-02-
05T18:00:00Add doc for bit selection
0.0.10 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-03-
30T16:00:00Increase the SFC timeout for diag send to 60 sec, as
there are services in ITC that do need that.
0.0.11Ahmad
Nassarahmad.nassar@valeo.com​+202
3535
8457Castle
SW Dev2016-03-
30T16:00:00add
Configure_OnTestResponseFailedLogResponseAsError.
0.0.12 Ahmed
Abdelrahmanahmed.abdelrahman@valeo.com Castle
SW Dev2016-03-
31T13:00:00Add CopyResponseLengthToProcUnitVariable
0.0.13 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-04-
18T12:00:00Chg: ProtocolError adds code parameter.
0.0.14Kholoud
Asemkholoud.asem@valeo.comCastle
SW Dev2016-05-
23T12:00:00Add: TestByteValueOneOf/ NoneOf check some byte
value from a given list.
0.0.15 Ahmed
Elsalahyahmed-
mohamed.elsalahy@valeo.comCastle
SW Dev2016-06-
21T12:00:00Add: TestByteSequenceExist,
TestByteSequenceDoesNotExist.
0.0.16Ahmed
Elsalahyahmed-
mohamed.elsalahy@valeo.comCastle
SW Dev2016-06-
21T12:00:00Add: TestByteSequenceWithMaskExist,
TestByteSequenceWithMaskDoesNotExist.
0.0.17Kholoud
Asemkholoud.asem@valeo.com+202
3532
8744Castle
SW Dev2017-03-
22T12:00:00Add: ConfigureDefaultTimeout
0.0.18IbrahimShazly ibrahim.shazly@valeo.com+202
3532
8709CastleSW Dev2017-03-22T12:00:00Add: P2* timeout parameter implementation
0.0.19Ahmed
ZAAZAAahmed.zaazaa@valeo.comCastle
SW Dev2017-05-
24T12:00:00Add API: ConfigureFlowControlSendStMin
0.0.20Ahmad
Nassarahmad.nassar@valeo.com+202
3532
8457Castle
SW Dev2017-07-
03T12:00:00Copy Request to Proc Unit
0.0.21AhmadNassar ahmad.nassar@valeo.com+202
3532
8457CastleSW Dev2017-08-09T12:00:00Change offset to uint16 in TestValueInRange. This is tosupport diag responses longer than 256 bytes
0.0.22 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2018-05-
07T09:00:00Chg: Messages TestValueBitsIn/OutOfRange need int64
type, to cover both signed and unsigned.
0.0.23Ahmad
Abdallahahmad.abdallah@valeo.com+202
3532
8025Castle
SW Dev2018-05-
30T15:00:00Add API: TestUdsDtcsPresentSubsetOf
0.1.0 SaadMohamedsaad.mohamed@valeo.com CastleSW Dev2018-10-15T15:00:00Add: ShortData Argument to TestByteSequenceMessage
0.2.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2018-11-
22T17:15:00Add: Send cyclic functions for CAN and FR
0.3.0 Aya Hefny aya.hefny@valeo.com+202
3532
8241Castle
SW Dev2018-12-
18T17:15:00Add: Add LogAdditionBytesWithShortData and
LogAdditionBytesWithMask messages
0.3.1Saad
Mohamedsaad.mohamed@valeo.com+202
3532
9809Castle
SW Dev2019-02-
10T17:15:00changinr type of ResponseTooShort message from
APP_OK_ERROR to APP_OK_WARNING_ERROR

---

# Page 731

0.4.0Andrew
Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2018-07-
19T14:15:00Add: Add Calculate Security Access Function
0.4.1 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2019-09-
09T14:00:00Chg OneOf/NoneOf obtained value to hex, because the
expected data is as well hex.
0.4.2Haytham
Fawzyhaytham.fawzy@valeo.com+202
3532
9562Castle
SW Dev2019-09-
12T13:30:00Add: Add Static Key Arguemnt to Security Access
Function
0.4.3Andrew
Sadekandrew.sadek@valeo.com+202
3532
8291Castle
SW Dev2020-01-
30T13:30:00Add: Add ConfigureDiag Api
0.4.4 MohamedABOKHATWAmohamed.abokhatwa@valeo.com CastleSW Dev2022-01-07T13:30:00Change offset to uint16 in TestValueOutOfRange. Thisis to support diag responses longer than 256 bytes
0.4.5MOSTAFA
KHALLAFmostafa.khallaf@valeo.comCastle
SW Dev2023-04-
08T03:30:00Add: EnablePadding API
History of DIAGSLAVE_V1  
VersionAuthor Email Phone Function Date Comment
0.0.1Ahmed
Kamelahmed.kamel@valeo.com+2 353 80 542Castle SW
Dev2014-10-24T18:00:00Initial
Version
History of Flexray_V2  
VersionAuthor Email Phone FunctionDate Comment
0.0.1 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-01-
09T16:30:00Initial CanDriver interface
0.0.2 Frank Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2014-09-
16T13:00:00Change to common diag interface
0.0.3Ahmad
Nassarahmad.nassar@valeo.com+202
3535
8457Castle
SW Dev2015-02-
05T14:00:00Include diag_v2 instead of diab_v1
0.0.4 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-03-
08T13:25:00Chg: Move Flexray Receive Filter into FPGA
0.0.5 Ahmed Kamelahmed.kamel@valeo.com+20 23538
0542Castle
SW Dev2015-05-
10T12:20:00Add: add a new function to reset flexray frames
0.0.6 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-05-
10T12:20:00Chg: merge reset flexray frames with shutdown
0.0.7 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542CastleSW Dev2015-05-10T12:20:00Add: Add Warning Messages for the invalidflexray state machine transition
0.0.8 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-05-
10T12:20:00Add: Add NullFramesPerSec Object
0.0.9 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2016-02-24T19:00:00Fix: FlexrayDiag SFC calls shall not receiveresponse pending as result.
0.0.10 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-04-
27T14:00:00Add: OnDutWakeup, signal DutWakeupCounter
0.0.11Aasish
valappilekandiaasish.valappilekandi@valeo.com+49
7142
916
1301Castle
SW Dev2016-05-
17T11:00:00Add: OnDutWakeup, Signals In ->
DebounceDelay ,Out Msg: DutWakeupDetected,
DutWakeupDebouncedEnd
0.0.12 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2016-11-
15T13:47:00Add: Messages to report errors from CC
0.0.13 Ahmed Kamelahmed.kamel@valeo.com+20 23
5380542CastleSW Dev2016-11-22T14:56:00Add: Argument "psr0" to CcNotFreeze Message
0.0.14 Ahmed Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2017-04-
27T16:24:00Add: Dump Fr Controller main Registers
0.0.15 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-07-
06T16:00:00Chg: DumpFrControllerRegisters values as hex
format
0.0.16 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-11-
08T14:00:00Add: InjectRxFrame to support self testing of
processing logic

---

# Page 732

0.0.17Goesta
Pfordtegoesta.pfordte@valeo.com+49
7142
916
4170Castle
SW Dev2018-05-
17T15:00:00Add: No RestartWhenActive to avoid repeated
Shutdown - Startup sequences at every EOL loop
0.0.18Mohamed
Abo Khatwamohamed.abokhatwa@valeo.comCastle
SW Dev2020-08-
12T14:30:00Add: FlexrayBap Interface
History of Ethernet_diag_v1  
VersionAuthorEmail Phone Function Date Comment
0.1.0Aya
Hefnyaya.hefny@valeo.com+202 3532
8241CDV TTE2018-08-
27T15:30:00Add the ethernet diag interfaces "Doip" and "Hsfz"
0.2.0Aya
Hefnyaya.hefny@valeo.com+202 3532
8241Castle SW
Dev2018-12-
18T12:20:00Add: Add chooseCyclicBuffers API
0.3.0Aya
Hefnyaya.hefny@valeo.com+202 3532
8241Castle SW
Dev2019-01-
13T12:20:00Add: Add ResetDiagRequest API
0.4.0Aya
Hefnyaya.hefny@valeo.com+202 3532
8241Castle SW
Dev2019-02-
11T12:44:00Add: Add SelectControlMsgForCyclicSend API in
Hsfz interface
History of LIN_V2  
VersionAuthor Email PhoneFunctionDate Comment
0.0.1 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-01-
09T16:30:00Initial linmaster interface
0.0.2 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-03-
25T15:00:00SetNextScheduleTable function and related enum
is removed (it is now generated by the sysgen
from the LDF file)
0.0.3 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-04-
18T10:00:00SetDiagMode function has been added to the
LinDiag interface
0.0.4 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-05-
14T18:00:00StartScheduling with bool arg
0.0.5 Laszlo Orbanlaszlo.orban@valeo.com+36 88540
819CastleSW Dev2013-08-02T14:00:00Enable/Disable wakeup from DUT functionallityhas been added
0.0.6 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-08-
02T14:00:00function DutWakeupIsError has been added
0.0.7 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2013-08-
02T14:00:00function ReportUnexpectedWakeup has been
added
0.0.8 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2013-12-
03T18:00:00Add SendWithOptionalResponse
0.0.9 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-01-
14T14:11:30Lin error enable/disable functions has been
renamed
0.0.10 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-03-
10T14:10:00SetSlaveResponseTimeout function has been
added to lin diag
0.0.11 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-03-
10T14:10:00SetResponsePendingTolerance function has been
added to lin diag
0.0.12 Frank Benoitfrank.benoit@valeo.com+49
7142916
4175CastleSW Dev2014-09-16T13:00:00Change to common diag interface
0.0.13 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-10-
21T13:30:00lin_v2 includes diag_v2
0.0.14 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-10-
28T09:00:00AssignFrameId, ResetFrameId API functions have
been added
0.0.15 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-11-
03T17:00:00Fix: LIN TP receive
0.0.16 Laszlo Orbanlaszlo.orban@valeo.com+36 88540
819Castle
SW Dev2014-11-
05T09:00:00NoSlaveData message has been extended with
Protected ID param
0.0.17 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-11-
10T11:30:00Doc update
0.0.18 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-11-
10T15:00:00Chg: use LIN RX the end of frame time stamp for
the update process.

---

# Page 733

0.0.19 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2014-11-
20T15:00:00Fix: EOF time stamp captured for error cases.
0.0.20 Laszlo Orbanlaszlo.orban@valeo.com+36 88540
819CastleSW Dev2014-11-20T16:30:00Add: Message when linmaster is actually stopped
0.0.21 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2014-11-
28T14:00:00Add: API func SetStartSchedulingDelay
0.0.22 Laszlo Orbanlaszlo.orban@valeo.com+36 88540
819CastleSW Dev2014-12-08T15:30:00SchedNotRunning message were moved todiag_v2 because it is a possible fault response to
the send and sendprepared functions
0.0.23 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2015-02-
23T14:00:00Add: Event MASTER_INITIATED_SLEEP; Add:
Msg SleepInitiated
0.0.24 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2015-02-
24T13:00:00Add: Fnc SendSleep
0.0.25 Laszlo Orbanlaszlo.orban@valeo.com+36 88
540
819Castle
SW Dev2015-05-
06T11:00:00Add: Fnc SetFirstFrameIdx
0.0.26 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-04-
08T14:00:00Add: SuppressNoSlaveDataOnDiagResponse
0.0.27 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2016-09-
16T13:00:00Chg: Rename
SuppressNoSlaveDataOnDiagResponse to
ReportNoSlaveDataOnDiagResponse and give
more options.
0.1.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2018-12-
14T16:40:00Add: common interface LinGeneric with message
UnknownLinFrameReceived.
0.2.0 Frank Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2019-02-
01T16:00:00Add: ReportAsError_UartNoise
0.3.0Aasish
Valappilekandiaasish.valappilekandi@valeo.com+497142
916
4801Castle
SW Dev2019-06-
19T17:30:00Add: ConfigureDefaultTimeout implemented.
0.4.0Aasish
Valappilekandiaasish.valappilekandi@valeo.com+49
7142
916
4801Castle
SW Dev2019-08-
08T17:30:00Add: ConfigureDefault_NAD implemented.
0.5.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2019-08-
27T13:30:00Bugfix: LinSlave was updating the frame value 1
cycle too late.
0.6.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2020-02-
21T16:30:00Update of EventNoSlaveDataConfig: User can
now set the severity, and check for no com.
0.7.0Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2024-07-
03T12:00:00Add : DisableFrameCrcCheck
History of upa_pip3x_v1  
VersionAuthor Email Phone Function Date Comment
0.1.0 Ibrahim Shazlyibrahim.shazly@valeo.com+20 23 532 8709Castle SW
Dev2019-01-21T11:50:00initial version
History of sensor_v2  
VersionAuthor Email Phone FunctionDate Comment
0.0.1Ahmed
Kamelahmed.kamel@valeo.com+20 23
5380542Castle
SW Dev2015-03-
08T13:25:00Standardization
0.0.2Ahmed
Zaazaaahmed.zaazaa@valeo.com+20 23
538
0542Castle
SW Dev2015-08-
23T13:25:00Add Init_Config_Memory HpSensors interface
0.0.3Ahmed
Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-03-
08T13:25:00Add Echo and SetMeasurementParameters for HP
Sensors
0.0.4AhmedZaazaa ahmed.zaazaa@valeo.comCastleSW Dev2015-09-13T13:25:00Add SWError to HPsensors
0.0.5Ahmed
Kamelahmed.kamel@valeo.com+20 23
538
0542Castle
SW Dev2015-10-
18T03:28:00Add Bric Sensors
0.0.6Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2015-10-
19T13:25:00Add new functions to HPSensors (SetTemp,
SetReverb_Per, SetMag, SetCL)

---

# Page 734

0.0.7Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2015-11-
04T13:25:00Add SYNC_DURATION error
0.0.8Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2015-11-
30T13:25:00Add SetSyncDuration
0.0.9Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2016-01-
26T13:25:00Add SetSyncDurationSingleSensor
0.0.10Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2016-01-
26T13:25:00Add option to Reset the measurement parameters
with their default values stored in Castle
0.0.11Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2016-02-
03T13:25:00Add Config Memory APIs
0.0.12Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2016-04-
04T13:25:00Add PI_ZONE and NOISE_FLAG failures,
SetCfgMemIdxBits and SetFieldNoise
0.0.13Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2016-04-
04T13:25:00Add Measurement Sequence to HP Sensors
0.0.14Ahmed
Kamelahmed.kamel@valeo.com+20 23
5380542Castle
SW Dev2015-10-
18T03:28:00Add: LIN_MSG_CRC Failure to the SW Errors of
HPSensors
0.0.15Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2016-12-
27T09:35:00Add: LIN_Frame_CNT Failure to the SW Errors of
HPSensors
0.0.16Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2017-01-
19T11:49:00Add: OTP_LOCK_2 Failure to the SW Errors of
HPSensors
0.0.17 IbrahimShazlyibrahim.shazly@valeo.com+20 23532
8709CastleSW Dev2017-06-22T12:09:00Add: Increased e_channel enum to contain C_17 ->C_24 Sensors addresses
0.0.18Goesta
Pfordtegoesta.pfordte@valeo.com+49
7142
916
4170Castle
SW Dev2018-04-
26T15:13:00Change: rename DiscreteSensors_i interface for
ConfigChannel to overcome parameter conflict
0.0.19Kholoud
Asemkholoud.asem@valeo.com+20 23
532
8744Castle
SW Dev2018-06-
25T18:47:00Add: LIN Sync Counter Failure Simulation in HP
Facelift
0.1.0Kholoud
Asemkholoud.asem@valeo.com+20 23
532
8744Castle
SW Dev2018-12-
19T01:54:00Remove: Dual APIs from HP Facelift
0.2.0Kholoud
Asemkholoud.asem@valeo.com+20 23
532
8744Castle
SW Dev2018-12-
19T01:54:00Add: Interface UpaPcCanCom For VS6
configurations
0.2.1Kholoud
Asemkholoud.asem@valeo.com+20 23
532
8744Castle
SW Dev2018-12-
19T01:54:00Chg: Rename Arguments of Echo, EchoMM,
SetMagnitude and SetWidth in Hp_Facelift to match
new requirements
0.3.0Kholoud
Asemkholoud.asem@valeo.com+20 23
532
8744Castle
SW Dev2019-02-
07T10:28:00Add: APIs SetCfgMemIdxBits, SetCfgMemIdx,
GetCfgMemIdxAndTest and GetCfgMemIdx in
Facelift
0.4.0KholoudAsem kholoud.asem@valeo.com+20 23
5328744CastleSW Dev2019-02-07T10:28:00Add: Enums NOISE_INDICATOR_TRUE andNOISE_INDICATOR_FALSE in SWError API
0.5.0Kholoud
Asemkholoud.asem@valeo.com+20 23
532
8744Castle
SW Dev2019-04-
15T10:28:00Add: API to Reset PID_20 values
0.6.0Goesta
Pfordtegoesta.pfordte@valeo.com+49
7142
916
4170Castle
SW Dev2019-05-
16T13:40:00Add: Enum RESONATOR_DRIFT, values for
membrane error in SWError API, values for
membrane error
0.7.0 MohamedAbo Khatwamohamed.abokhatwa@valeo.com CastleSW Dev2019-08-15T13:00:00Add: Enum SENSOR_MISMATCH Failure
0.8.0Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23
532
8709Castle
SW Dev2020-03-
17T14:21:00Add: Function EnableSupportVs6ForCI to the
interface UpaPcCanCom
0.9.0Goesta
Pfordtegoesta.pfordte@valeo.com+49
7142
916
4170Castle
SW Dev2020-03-
24T14:30:00Add: type Enum value RESONATOR_DRIFT for
HPFL SWError
0.10.0Mohamed
Abo Khatwamohamed.abokhatwa@valeo.comCastle
SW Dev2020-06-
28T14:30:00Add: API to remove a failure individually
0.11.0Mohamed
Abo Khatwamohamed.abokhatwa@valeo.comCastle
SW Dev2021-03-
25T14:00:00Add: Enum FACELIFT_SENSOR_MISMATCH
0.12.0Mohamed
Abo Khatwamohamed.abokhatwa@valeo.comCastle
SW Dev2021-06-
12T14:00:00Add: Interface HpGeneric
0.13.0 Mohamed
Abo Khatwamohamed.abokhatwa@valeo.com Castle
SW Dev2021-10-
30T10:00:00Delete: Hp Facelift Interface
0.13.1Mohamed
Hosnymohamed.hosny-
sayed@valeo.comCastle
SW Dev2023-08-
15T10:00:00Add init RAM only API
History of io_v2  
VersionAuthor Email Phone FunctionDate Comment
0.0.1Ahmed
Kamelahmed.kamel@valeo.com+20 23 538
0542Castle
SW Dev2015-03-
08T13:25:00Standardization

---

# Page 735

0.0.2Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2015-09-
08T13:25:00Change enum name in SensorError from Sensor to
Address
0.0.3Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2015-09-
08T13:25:00Revert enum name in SensorError to Sensor
0.0.4Ahmed
Zaazaaahmed.zaazaa@valeo.comCastle
SW Dev2016-05-
17T13:25:00Change sensors names to English ones
0.0.5KholoudAsem kholoud.asem@valeo.comCastleSW Dev2016-06-27T13:25:00Change Time Scale in Led module to be 10.0
0.0.6Ahmad
Abdallahahmad.abdallah@valeo.com+20 23 531
5588Castle
SW Dev2016-07-
18T12:20:00Change Time Scale in Led module to be 5.0 and
rename enum CONTINUOUS_PWM
0.0.7Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23 532
8709Castle
SW Dev2017-06-
22T12:09:00Add: Function SensorVoltage17
0.0.8Goesta
Pfordtegoesta.pfordte@valeo.com+49 7142
916 4170Castle
SW Dev2017-11-
21T14:53:00Add: Parameter Heavy_noise, descriptions
History of WheelTicks  
VersionAuthor Email Phone FunctionDate Comment
0.1.0AhmedKamel ahmed.kamel@valeo.com+20 23 5380542CastleSW Dev2016-08-16T14:40:00 Add: Initial Version of V2
0.2.0Ibrahim
Shazlyibrahim.shazly@valeo.com+20 23 538
0542Castle
SW Dev2019-06-
16T14:40:00Add: boolean to check whether the steering wheel
angle signal is signed or not
History of mipc  
VersionAuthor Email Phone FunctionDate Comment
0.1.0 Omar Saeed omar.saeed@valeo.comCastle SW
Dev2016-01-
17T13:25:00Init revision
0.2.0Saad
Mohamedsaad.mohamed@valeo.com+202 3532
9809Castle SW
Dev2019-08-
15T13:25:00Add test Crc For Init Parameters
0.2.1SaadMohamed saad.mohamed@valeo.com+202 35329809Castle SWDev2020-03-18T13:25:00Add reset type enumeration toResetSequenceNumber API
0.3.0 Yasmeen Atefyasmeen.atef@valeo.comCastle SW
Dev2020-03-
18T09:30:00Add startHostModeCheck and
stopHostModeCheck APIs
0.4.0Saad
Mohamedsaad.mohamed@valeo.com+202 3532
9809Castle SW
Dev2020-07-
16T13:25:00Add SetSqcNum API
0.5.0 Yasmeen Atefyasmeen.atef@valeo.comCastle SW
Dev2022-04-
21T14:42:00Add setEyeQPin API
0.6.0Ahmed
Abdelmoneimahmed.abdelmoneim-
elshahhat@valeo.comCastle SW
Dev2023-03-
09T13:25:00Add interrupt-based reset
History of fc_pip_v1  
VersionAuthor Email PhoneFunction Date Comment
0.0.1Ahmed abdelmoneim-
elshahhatahmed.abdelmoneim-
elshahhat@valeo.comCastle SW
Dev2023-06-
19T14:53:00Initial FcPipIo
interface
History of meu  
VersionAuthor Email PhoneFunctionDate Comment
0.6.0Ahmed
Abdelmoneimahmed.abdelmoneim-
elshahhat@valeo.comCastle
SW Dev2023-09-
26T13:25:00Implementation of MEU (MobileEye interprocess
com over UART) protocl
History of vls_pip_v1  
VersionAuthor Email PhoneFunction Date Comment
0.0.1 Ahmed abdelmoneim-
elshahhatahmed.abdelmoneim-
elshahhat@valeo.comCastle SW
Dev2023-06-
11T14:53:00Initial VlsPipIo
interface
History of PwmGenerator  
VersionAuthor Email PhoneFunction Date Comment
0.0.1Michael
GeorgeyMichael.georgey@valeo.comCastle SW
Dev2020-01-
19T22:30:00Initial version
0.0.2Mostafa
Khallafmostafa.khallaf@valeo.comCastle SW
Dev2021-04-
22T13:30:00Enhance the module to support multiple instances
and Fix StopPWM bug
History of zc_pip_v1  
VersionAuthor Email PhoneFunction Date Comment
0.0.1Ahmed abdelmoneim-elshahhatahmed.abdelmoneim-elshahhat@valeo.comCastle SWDev2023-06-11T14:53:00Initial VlsPipIointerface
History of PWM_V1  
VersionAuthor Email Phone Function Date Comment

---

# Page 736

0.0.1 Frank Benoit frank.benoit@valeo.com+49 7142 916
4175Castle SW
Dev2014-11-
11T16:30:00Initial version
0.0.2 Frank Benoit frank.benoit@valeo.com+49 7142 916
4175Castle SW
Dev2016-02-
16T14:30:00Doc
0.0.3 Frank Benoit frank.benoit@valeo.com+49 7142 916
4175Castle SW
Dev2016-02-
22T17:30:00Added the
ReadValuesMessageEnable
0.0.4Aasish
Valappilekandiaasish.valappilekandi@valeo.com+49 7142 916
1301Castle SW
Dev2016-07-
14T17:30:00Add ResetCounters
0.0.5 Frank Benoit frank.benoit@valeo.com +49 7142 916
4175Castle SW
Dev2019-01-
23T17:30:00Fix race condition in reader
task.
History of Pip_Io  
VersionAuthor Email PhoneFunction Date Comment
0.0.1Ahmed abdelmoneim-
elshahhatahmed.abdelmoneim-
elshahhat@valeo.comCastle SW
Dev2023-06-
11T14:53:00Initial VlsPipIo
interface
History of upa_pip_usv10  
VersionAuthorEmail Phone FunctionDate Comment
1.0.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2018-09-
23T12:00:00Initial Version
2.0.0AhmadAbdallahahmad.abdallah@valeo.com+200235328025CastleSW Dev2018-12-10T12:00:00Modify old enums, add new functions and new interface"USV10_PIP_Test"for testing
2.1.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-02-
06T12:00:00Add new function "SendSignalWay"
2.2.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-03-
03T12:00:00Add new function "SetSensorSwError,
SetReverberationPeriod, and SetReverberationDuration"
2.2.1Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-03-
07T12:00:00Rename SensorID to Address"
2.3.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-03-
31T12:00:00Add new function "ConnectDigitalIO"
2.4.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-04-
15T12:00:00Add new functions for MemoryMap Read/Write
"GetCfgMemIdx, GetCfgMemIdxAndTest,SetCfgMemIdx, SetCfgMemIdxBits"
2.5.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-05-
14T12:00:00Add new function "Select_TapeOut"
2.6.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-10-
23T12:00:00Add new function "SensorSimulatedCurrent"
2.7.0Ibrahim
Shazlyibrahim.shazly@valeo.com+20
0235328709Castle
SW Dev2019-12-
03T12:01:39Add new function "SensorPowerLineScTO"
2.8.0Ahmad
Abdallahahmad.abdallah@valeo.com+20
0235328025Castle
SW Dev2019-12-
10T12:00:00Update Sensor SW failures based on TO3 changes"
2.8.1Ibrahim
Shazlyibrahim.shazly@valeo.com+20
0235328709Castle
SW Dev2020-06-
16T13:30:00Add new signalValue object "SensorsVoltage_mv" to
check the usv sensors voltage on power on/off"
History of tcu_artemis_pip  
VersionAuthor Email PhoneFunction Date Comment
1.0.0Mohamed
ABOKHATWAmohamed.abokhatwa@valeo.comCastle SW
Dev2022-07-10T12:00:00Initial
Version
History of RAD_PIP_13_V1  
VersionAuthorEmail PhoneFunctionDate Comment
0.0.1Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2015-01-
30T18:49:00initial
0.0.2Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW TestEng2015-08-
18T14:40:50Add: API for P/VCAN termination (K2370/2360) and P/VCAN
CAN FlexRay/Can Switching (K2350/2340)
0.0.3Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2016-03-
07T10:50:00Add: TestRangeAngle for AngleDatasync and
AngleOutOfRange message, made scaleing dynamic
EncoderTicksScale - to be able to adjust easyly to different
encoder types
0.0.4Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2016-03-
10T11:50:00Chg/Fix: Optimized C- implementation of AngleDataSync
running now with MB79 B1.2 sample also in Video and FFT
mode (but with limited data output (1 of 3 blocks per MCC - at
the moment 100ms - if FFT is active)) - VHDL
IMPLEMTATION NEEDED!
0.0.5Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2016-03-
10T11:50:00Chg: Angle output given in 1/100 degree to allow bigger range
without overflow

---

# Page 737

0.0.6Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2016-03-
10T11:50:00Chg: Angle output given in 1/10 degree to allow bigger range
without overflow temporary - till the IP core supports angle
calculation
0.0.7Markus
Kraenkelmarkus.kraenkel@valeo.com+497142
916
1901Radar
SW Test
Eng2016-05-
31T13:50:00Fix: Enabled address pin setting - to use it FPGA update also
needed due to wrong mapping
0.0.8Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2016-09-
29T13:50:00Chg: added unknown data type
0.0.9Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2016-10-
18T13:50:00Chg: integrated LLST IP FPGA core in latest version
delivered by Mina recording end timestamp and header data
0.0.10Markus
Kraenkelmarkus.kraenkel@valeo.com+49
7142
916
1901Radar
SW Test
Eng2016-10-
19T15:00:00Fix: Angle Data Sync reference angle update if
synchronisation was disabled
0.0.11Dennis
Stenglerdennis.stengler@valeo.com+49
7142
916
1901Dualer
Student2017-06-
27T15:00:00Add: Messages/Enums for Selftest
0.0.12 MarkusKraenkelmarkus.kraenkel@valeo.com+49
7142916
1901Radar
SW Test
Eng2018-02-12T15:00:00Chg: Angle Data Sync V2: Angle sync of incomming LLHTdata MB79 Single Board Sensors
0.0.13Yahia
Ashouryahia.ashour@valeo.comCastle
SW Dev2023-03-
02T15:00:00Chg: Increase Angle resolusion from 0.1 to 0.001
0.0.14Yahia
Ashouryahia.ashour@valeo.comCastle
SW Dev2023-03-
06T15:00:00Add: update makeMsg AngleDataSync to add all header
frame content
0.0.15 Yahia
Ashouryahia.ashour@valeo.com Castle
SW Dev2023-04-
30T15:00:00Chg: Add SetBusTimingRegisterLlst Api And SetErrorLimit
Api
History of ADCREADER  
VersionAuthor Email PhoneFunctionDate Comment
0.0.1Dennis
Stenglerdennis.stengler@valeo.comDualer
Student2017-05-
31T12:00:00Initial version.
0.0.2 Dennis
Stenglerdennis.stengler@valeo.com Dualer
Student2017-06-
13T12:30:00Restructuring C5C and including Signal interfaces.
0.0.3Dennis
Stenglerdennis.stengler@valeo.comDualer
Student2017-06-
29T11:15:00Separating ADC values into two Signal interfaces due to
different behavior.
0.0.4Dennis
Stenglerdennis.stengler@valeo.comDualer
Student2017-07-
06T10:25:00Documentation and Cleanup.
0.0.5Dennis
Stenglerdennis.stengler@valeo.comDualer
Student2017-07-
12T14:15:00Removing SignalValue from AdcCore - Handle
SignalValue independently from Core.
0.0.6Dennis
Stenglerdennis.stengler@valeo.comDualer
Student2017-07-
14T07:30:00Removing AdcCore completly because ADCCore will be
handled internally.
History of AngleDataSync  
VersionAuthor Email Phone Function Date Comment
0.0.1 Frank Benoit frank.benoit@valeo.com+49 7142 916
4175Castle SW
Dev2014-11-
11T16:30:00Initial version
0.0.2 Yahia Ashour yahia.ashour@valeo.com+00 0000 000
0000Castle SW
Dev2024-08-
01T16:30:00Updated version to support
PIPVER6
0.0.3ahmed abdelmoneim-
elshahhatahmed.abdelmoneim-
elshahhat@valeo.com+00 0000 000
0000Castle SW
Dev2025-01-
01T12:30:00Add Api to Log all
Components info
0.0.4ahmed abdelmoneim-
elshahhatahmed.abdelmoneim-
elshahhat@valeo.com+00 0000 000
0000Castle SW
Dev2025-03-
01T12:30:00Add Api Record
DetectionList Frame
History of radar_pip  
VersionAuthor Email PhoneFunction Date Comment
1.0.0Mohamed
ABOKHATWAmohamed.abokhatwa@valeo.comCastle SW
Dev2022-07-10T12:00:00Initial
Version
History of tcm_epip_v1  
VersionAuthor Email Phone Function Date Comment
0.0.1 Frank Benoit frank.benoit@valeo.com+49 7142 916
4175Castle SW
Dev2015-11-
18T18:00:00Initial Version
0.0.2 Frank Benoit frank.benoit@valeo.com+49 7142 916
4175Castle SW
Dev2018-10-
12T10:00:00Add HW REV
0.0.3 MostafaKHALLAFmostafa.khallaf@valeo.com Castle SWDev2024-09-12T16:00:00Organizing the Objects and Interfaces forthe GenericFW

---

# Page 738

History of EdgeTrace_v2  
VersionAuthorEmail Phone FunctionDate Comment
0.0.1Frank
Benoitfrank.benoit@valeo.com+49
7142
9164175Castle
SW Dev2016-08-
23T16:30:00Initial version
0.0.2Frank
Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-01-
30T13:30:00Chg: Increase the record buffer to 4000, the sequence buffer
to 2000
0.0.3Frank
Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-01-
30T13:30:00Fix: Limit size of messages
0.0.4Frank
Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2017-02-
14T16:30:00Fix: Performance while logging edges.
0.0.5Frank
Benoitfrank.benoit@valeo.com+497142
916
4175Castle
SW Dev2017-03-
30T16:30:00Fix: read index when doing a follow up trace.
0.0.6Frank
Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2018-03-
12T13:30:00Add: message on recording stop
0.0.7Frank
Benoitfrank.benoit@valeo.com+49
7142
916
4175Castle
SW Dev2019-02-
01T13:30:00Fix: assert error.
0.1.0Matthieu
Surzurmatthieu.surzur@valeo.com+49
7142
916
3802Castle
SW Dev2019-06-
28T13:30:00Split the APIs Pwm_PulseWidthsToSequence and
Pwm_PeriodWidthsToSequence in versions "Ticks" and "Ns"
for more clarity.
0.2.0Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-05-
06T13:30:00Major Enhancements and Bug Fixes, Add RecordingDuration
API and Fix timer overloading issue by adding
"rebuildTimeCounter" function
0.3.0Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-09-
30T13:30:00increase maximum supported samples in firmware to be
1.0485M samples instead of 500K
0.4.0Bassant
Atefbassant.atef@valeo.comCastle
SW Dev2024-05-
13T11:00:00import Sequence_LogAnalysis from vw_hud_pipp
edgetrace_v2.c5c
History of RLT_PIP_6_V2  
VersionAuthor Email PhoneFunction Date Comment
0.0.1 Yahia Ashouryahia.ashour@valeo.comCastle SW
Dev2023-12-18T15:00:00initial
History of
ITC_STEPPER_MOTOR  
VersionAuthorEmail PhoneFunctionDate Comment
0.0.1Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2020-09-
20T05:00:00Initial version.
0.0.2Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2020-09-
20T04:30:00Add
SelectSlave,WriteIntoSlaveRegisters,ReadFromSlaveRegisters
and TestSlaveRegister API
0.0.3Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2020-10-
07T01:00:00Add SetCustomStatusByteData,EnableCustomStatusByte and
SetRegisterAccess API and getRegisterAccess
0.0.4Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-02-
01T01:00:00Add Start/Stop and ReadAll Recordings APIs
0.0.5Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-03-
10T01:00:00Stepper Motor Bug Fixes, add read and write events, add some
Recording APIs
0.0.6Bassant
Atefbassant.atef@valeo.comCastle
SW Dev2024-06-
06T01:00:00Add APIs ConfigRegister_Event() and AutoClearFault
History of
VideoProcessor_HUD  
VersionAuthor Email PhoneFunction Date Comment
0.0.1 Mostafa Khallafmostafa.khallaf@valeo.comCastle SW
Dev2022-09-13T05:00:00Initial version.
0.0.2 Bassant Atef bassant.atef@valeo.comCastle SW
Dev2024-06-05T05:00:00Add SuspendOverWriteSpecific
API.
History of LCD_TFT_HUD  
VersionAuthor Email PhoneFunction Date Comment
0.0.1Bassant
Atefbassant.atef@valeo.comCastle SW
Dev2024-04-22T05:00:00Initial version.

---

# Page 739

History of
ITC_BACKLIGHT_FEATURE  
VersionAuthorEmail PhoneFunctionDate Comment
0.0.1Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2022-01-
18T01:00:00Initial version with basic APIS
2.0.0Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2022-01-
18T01:00:00Version 2 with some enhancements and adding other modes
(OVERHEAD_MODE, SYNCHED_T_ON, DELAYED_T_ON
and SYNCHED_DELAY )
History of
ITC_IIC_SLAVE_HW  
VersionAuthor Email PhoneFunctionDate Comment
0.0.1MostafaKhallaf mostafa.khallaf@valeo.comCastleSW Dev2020-11-04T01:00:00 Initial version with basic APIS
0.0.2Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2020-12-
07T01:00:00Add Enable/Disbale CRC and SQC API
0.0.3Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2020-12-
07T01:00:00Add set SQC Value API
0.0.4Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-01-
10T01:00:00Add back to back registers and Corrupt CRC API
0.0.5Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-01-
25T01:00:00Add Start/Stop and ReadAll Recordings APIs
0.0.6Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-04-
05T01:00:00implementing new registers in the decoder
0.0.7Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-04-
07T01:00:00implement API_Write_2 Feature/APIs
0.0.8Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-04-
12T01:00:00add BackgroundCheck_DeviceAddress API
0.0.9Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-05-
19T01:00:00add BackgroundCheck_GoldenRegisters API
0.0.10Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-05-
31T22:00:00add log array 2 and it's APIs ,add
BackgroundCheck_Event
0.0.11MostafaKhallaf mostafa.khallaf@valeo.comCastleSW Dev2021-06-06T22:00:00implement new 40 Regs and Add"UndefinedRegistersMsg_Configuration" API
0.0.12Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-06-
08T05:00:00Add "Check_IfRegisterIsDefined" and
"GetNumberOfDefinedRegisters" APIs
0.0.13Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2021-08-
02T05:00:00Add ConfigureHsyncStreaming
0.0.14Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2023-04-
14T05:00:00Optmizin the core from FPGA Prespective as well as
API_WRITE_2
0.0.15Mostafa
Khallafmostafa.khallaf@valeo.comCastle
SW Dev2023-08-
07T05:00:00Add Enhanced and Optmized IP Core and some
Additional APIs
History of EthernetFilter  
VersionAuthor Email PhoneFunction Date Comment
0.0.2Mohamed
Rashadmohamed.rashad-
abdelghany@valeo.comCastle FW
Dev2024-05-
22T13:30:00Add Initial Version of the module that support
basic functionalities
History of HOD  
VersionAuthor Email PhoneFunction Date Comment
1.0.0 Mostafa Khallafmostafa.khallaf@valeo.comCastle SW
Dev2025-02-19T01:00:00Initial
Version
History of SwsRoller  
VersionAuthor Email PhoneFunction Date Comment
0.0.1 Mostafa Khallafmostafa.khallaf@valeo.comCastle SW
Dev2025-07-17T13:30:00First Version Of SWS
Roller