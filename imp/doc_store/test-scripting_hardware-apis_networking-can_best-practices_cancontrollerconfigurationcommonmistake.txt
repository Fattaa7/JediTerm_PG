{"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"metadata": {"source": "test-scripting_hardware-apis_networking-can_best-practices_cancontrollerconfigurationcommonmistake.txt"}, "page_content": "CAN Controller Configuration Common Mistake\nPost date: Feb 24, 2021 9:11:42 AM\nSometimes reconfiguring the CAN controller in the middle of the test case (randomly)\nraises a SQC validation errorin an indirect way as we will find at the end of this \nwiki.\nReal Example from Honda-AS project:\nA SQC signal LVU_TIMESYNC_ASECU_SYNC_MC (CAN CASELE Rx Sinal) test fails and we have\nvery long trace which is recorded for days.\nTo make sure that the ECU is sending the SQC value correctly along the long trace:\nFrome Canoe tools we can use the log file conversion feature to extract all the \nrecorded information for the SQC signal\nFrome Canoe tools we can use the log file conversion feature to extract all the \nrecorded information for the SQC signal\nFrome Canoe tools we can use the log file conversion feature to extract all the \nrecorded information for the SQC signal\nThe Extracted file will look like this :\nNow a simple script can easily:Check cyclic timingCheck the incremented value\nNow a simple script can easily:Check cyclic timingCheck the incremented value\nNow a simple script can easily:\nCheck cyclic timing\nCheck cyclic timing\nCheck the incremented value\nCheck the incremented value\nAfter making sure that the ECU sends all the SQC values correctly, using the CAN \nerror frame checking script here we can find an ACK error raised because CASTLE \nsends no ack at the illustrated time.\nAfter debugging trials It is found that CASTLE misses sending the ACK flag if the \ntest case reconfigures the CAN controller while it is running, Although the frame is\nreceived and passed to the FW layer.\nAfter the Ack error the ECU retransmits the same frame (since there is no Ack for \nit), so CASTLE re-passes the same frame with the same retransmitted value to the FW \nlayer. This leads the FW to find the same SQC value 2 consecutive times without \nincreasing.then the FW raises the illustrated error.\nBy removing the CAN controller configuration from the middle of the test case the \nissue is solved.", "type": "Document"}}